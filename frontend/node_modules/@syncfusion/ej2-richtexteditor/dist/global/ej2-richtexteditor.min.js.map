{"version":3,"file":"ej2-richtexteditor.min.js","sources":["../../src/rich-text-editor/models/items.js","../../src/rich-text-editor/base/util.js","../../src/common/util.js","../../src/rich-text-editor/actions/html-attributes.js","../../src/rich-text-editor/base/constant.js","../../src/rich-text-editor/base/classes.js","../../src/rich-text-editor/base/enum.js","../../src/rich-text-editor/models/default-locale.js","../../src/rich-text-editor/renderer/toolbar-renderer.js","../../src/rich-text-editor/actions/base-toolbar.js","../../src/rich-text-editor/actions/dropdown-buttons.js","../../src/rich-text-editor/services/service-locator.js","../../src/rich-text-editor/services/renderer-factory.js","../../src/rich-text-editor/actions/toolbar-action.js","../../src/rich-text-editor/actions/toolbar.js","../../src/rich-text-editor/actions/keyboard.js","../../src/rich-text-editor/actions/color-picker.js","../../src/rich-text-editor/actions/base-quick-toolbar.js","../../src/rich-text-editor/renderer/popup-renderer.js","../../src/rich-text-editor/actions/quick-toolbar.js","../../src/rich-text-editor/actions/count.js","../../src/markdown-parser/plugin/markdown-selection.js","../../src/rich-text-editor/actions/markdown-toolbar-status.js","../../src/rich-text-editor/actions/execute-command-callback.js","../../src/rich-text-editor/formatter/formatter.js","../../src/common/constant.js","../../src/markdown-parser/plugin/lists.js","../../src/markdown-parser/base/constant.js","../../src/markdown-parser/plugin/formats.js","../../src/markdown-parser/plugin/md-selection-formats.js","../../src/common/config.js","../../src/markdown-parser/plugin/undo.js","../../src/markdown-parser/plugin/link.js","../../src/markdown-parser/plugin/table.js","../../src/markdown-parser/plugin/clearformat.js","../../src/markdown-parser/base/markdown-parser.js","../../src/rich-text-editor/formatter/markdown-formatter.js","../../src/rich-text-editor/renderer/markdown-renderer.js","../../src/rich-text-editor/actions/markdown-editor.js","../../src/editor-manager/base/constant.js","../../src/selection/selection.js","../../src/editor-manager/plugin/dom-node.js","../../src/editor-manager/plugin/lists.js","../../src/editor-manager/plugin/formats.js","../../src/editor-manager/plugin/insert-methods.js","../../src/editor-manager/plugin/nodecutter.js","../../src/editor-manager/plugin/inserthtml.js","../../src/editor-manager/plugin/link.js","../../src/editor-manager/plugin/alignments.js","../../src/editor-manager/plugin/indents.js","../../src/editor-manager/plugin/image.js","../../src/editor-manager/base/classes.js","../../src/editor-manager/plugin/table.js","../../src/editor-manager/plugin/isformatted.js","../../src/editor-manager/plugin/selection-commands.js","../../src/editor-manager/plugin/selection-exec.js","../../src/editor-manager/plugin/inserthtml-exec.js","../../src/editor-manager/plugin/clearformat.js","../../src/editor-manager/plugin/clearformat-exec.js","../../src/editor-manager/plugin/undo.js","../../src/editor-manager/plugin/ms-word-clean-up.js","../../src/editor-manager/plugin/insert-text.js","../../src/editor-manager/base/editor-manager.js","../../src/rich-text-editor/formatter/html-formatter.js","../../src/editor-manager/plugin/toolbar-status.js","../../src/rich-text-editor/actions/html-toolbar-status.js","../../src/rich-text-editor/renderer/content-renderer.js","../../src/rich-text-editor/renderer/iframe-content-renderer.js","../../src/rich-text-editor/actions/html-editor.js","../../src/rich-text-editor/actions/paste-clean-up.js","../../src/rich-text-editor/renderer/render.js","../../src/rich-text-editor/renderer/link-module.js","../../src/rich-text-editor/renderer/image-module.js","../../src/rich-text-editor/renderer/view-source.js","../../src/rich-text-editor/renderer/table-module.js","../../src/rich-text-editor/base/interface.js","../../src/rich-text-editor/models/toolbar-settings.js","../../src/rich-text-editor/models/iframe-settings.js","../../src/rich-text-editor/models/inline-mode.js","../../src/rich-text-editor/actions/full-screen.js","../../src/rich-text-editor/base/rich-text-editor.js","../../src/global.js"],"sourcesContent":["// tslint:disable\n/**\n * Export items model\n */\nexport var templateItems = ['alignments', 'formats', 'fontname', 'fontsize', 'fontcolor', 'backgroundcolor', 'align', 'display', 'tablerows', 'tablecolumns', 'tablecellhorizontalalign', 'tablecellverticalalign', 'styles'];\nexport var tools = {\n    'alignments': {\n        'id': 'Alignments',\n        'icon': 'e-alignments',\n        'tooltip': 'Alignments',\n        'command': 'Alignments',\n        'subCommand': 'Alignments'\n    },\n    'justifyleft': {\n        'id': 'JustifyLeft',\n        'icon': 'e-justify-left',\n        'tooltip': 'JustifyLeft',\n        'command': 'Alignments',\n        'subCommand': 'JustifyLeft'\n    },\n    'justifycenter': {\n        'id': 'JustifyCenter',\n        'icon': 'e-justify-center',\n        'tooltip': 'JustifyCenter',\n        'command': 'Alignments',\n        'subCommand': 'JustifyCenter'\n    },\n    'justifyright': {\n        'id': 'JustifyRight',\n        'icon': 'e-justify-right',\n        'tooltip': 'JustifyRight',\n        'command': 'Alignments',\n        'subCommand': 'JustifyRight'\n    },\n    'justifyfull': {\n        'id': 'JustifyFull',\n        'icon': 'e-justify-full',\n        'tooltip': 'JustifyFull',\n        'command': 'Alignments',\n        'subCommand': 'JustifyFull'\n    },\n    'fontname': {\n        'id': 'FontName',\n        'icon': 'e-font-name',\n        'tooltip': 'Font Name',\n        'command': 'Font',\n        'subCommand': 'FontName'\n    },\n    'fontsize': {\n        'id': 'FontSize',\n        'icon': 'e-font-size',\n        'tooltip': 'Font Size',\n        'command': 'Font',\n        'subCommand': 'FontSize'\n    },\n    'fontcolor': {\n        'id': 'FontColor',\n        'icon': 'e-font-color',\n        'tooltip': 'Font Color',\n        'command': 'Font',\n        'subCommand': 'FontColor',\n        'value': '#ff0000ff'\n    },\n    'backgroundcolor': {\n        'id': 'BackgroundColor',\n        'icon': 'e-background-color',\n        'tooltip': 'Background Color',\n        'command': 'Font',\n        'subCommand': 'BackgroundColor',\n        'value': '#ffff00ff'\n    },\n    'bold': {\n        'id': 'Bold',\n        'icon': 'e-bold',\n        'tooltip': 'Bold',\n        'command': 'Style',\n        'subCommand': 'Bold'\n    },\n    'italic': {\n        'id': 'Italic',\n        'icon': 'e-italic',\n        'tooltip': 'Italic',\n        'command': 'Style',\n        'subCommand': 'Italic'\n    },\n    'underline': {\n        'id': 'Underline',\n        'icon': 'e-underline',\n        'tooltip': 'Underline',\n        'command': 'Style',\n        'subCommand': 'Underline'\n    },\n    'strikethrough': {\n        'id': 'StrikeThrough',\n        'icon': 'e-strike-through',\n        'tooltip': 'StrikeThrough',\n        'command': 'Style',\n        'subCommand': 'StrikeThrough'\n    },\n    'clearformat': {\n        'id': 'ClearFormat',\n        'icon': 'e-clear-format',\n        'tooltip': 'Clear Format',\n        'command': 'Clear',\n        'subCommand': 'ClearFormat'\n    },\n    'clearall': {\n        'id': 'ClearAll',\n        'icon': 'e-clear-all',\n        'tooltip': 'Clear All',\n        'command': 'Clear',\n        'subCommand': 'ClearAll'\n    },\n    'cut': {\n        'id': 'Cut',\n        'icon': 'e-cut',\n        'tooltip': 'Cut',\n        'command': 'ClipBoard',\n        'subCommand': 'Cut'\n    },\n    'copy': {\n        'id': 'Copy',\n        'icon': 'e-copy',\n        'tooltip': 'Copy',\n        'command': 'ClipBoard',\n        'subCommand': 'Copy'\n    },\n    'paste': {\n        'id': 'Paste',\n        'icon': 'e-paste',\n        'tooltip': 'Paste',\n        'command': 'ClipBoard',\n        'subCommand': 'Paste'\n    },\n    'unorderedlist': {\n        'id': 'UnorderedList',\n        'icon': 'e-unorder-list',\n        'tooltip': 'Bulleted List',\n        'command': 'Lists',\n        'subCommand': 'UL'\n    },\n    'orderedlist': {\n        'id': 'OrderedList',\n        'icon': 'e-order-list',\n        'tooltip': 'Numbered List',\n        'command': 'Lists',\n        'subCommand': 'OL'\n    },\n    'indent': {\n        'id': 'Indent',\n        'icon': 'e-indent',\n        'tooltip': 'Increase Indent',\n        'command': 'Indents',\n        'subCommand': 'Indent'\n    },\n    'outdent': {\n        'id': 'Outdent',\n        'icon': 'e-outdent',\n        'tooltip': 'Decrease Indent',\n        'command': 'Indents',\n        'subCommand': 'Outdent'\n    },\n    'undo': {\n        'id': 'Undo',\n        'icon': 'e-undo',\n        'tooltip': 'Undo',\n        'command': 'Actions',\n        'subCommand': 'Undo'\n    },\n    'redo': {\n        'id': 'Redo',\n        'icon': 'e-redo',\n        'tooltip': 'Redo',\n        'command': 'Actions',\n        'subCommand': 'Redo'\n    },\n    'superscript': {\n        'id': 'SuperScript',\n        'icon': 'e-super-script',\n        'tooltip': 'Superscript',\n        'command': 'Effects',\n        'subCommand': 'SuperScript'\n    },\n    'subscript': {\n        'id': 'SubScript',\n        'icon': 'e-sub-script',\n        'tooltip': 'Subscript',\n        'command': 'Effects',\n        'subCommand': 'SubScript'\n    },\n    'createlink': {\n        'id': 'CreateLink',\n        'icon': 'e-create-link',\n        'tooltip': 'Insert Hyperlink',\n        'command': 'Links',\n        'subCommand': 'CreateLink'\n    },\n    'openlink': {\n        'id': 'OpenLink',\n        'icon': 'e-open-link',\n        'tooltip': 'Open Link',\n        'command': 'Links',\n        'subCommand': 'OpenLink'\n    },\n    'editlink': {\n        'id': 'EditLink',\n        'icon': 'e-edit-link',\n        'tooltip': 'Edit Link',\n        'command': 'Links',\n        'subCommand': 'EditLink'\n    },\n    'removelink': {\n        'id': 'RemoveLink',\n        'icon': 'e-remove-link',\n        'tooltip': 'Remove Link',\n        'command': 'Links',\n        'subCommand': 'RemoveLink'\n    },\n    'image': {\n        'id': 'Image',\n        'icon': 'e-image',\n        'tooltip': 'Insert Image',\n        'command': 'Images',\n        'subCommand': 'Image'\n    },\n    'createtable': {\n        'id': 'CreateTable',\n        'icon': 'e-create-table',\n        'tooltip': 'Create Table',\n        'command': 'Table',\n        'subCommand': 'CreateTable'\n    },\n    'removetable': {\n        'id': 'removeTable',\n        'icon': 'e-remove-table',\n        'tooltip': 'Remove Table',\n        'command': 'removeTable',\n        'subCommand': 'removeTable'\n    },\n    'replace': {\n        'id': 'Replace',\n        'icon': 'e-replace',\n        'tooltip': 'Replace',\n        'command': 'Images',\n        'subCommand': 'Replace'\n    },\n    'align': {\n        'id': 'Align',\n        'icon': 'e-align',\n        'tooltip': 'Align',\n        'command': 'Images',\n        'subCommand': 'Align'\n    },\n    'caption': {\n        'id': 'Caption',\n        'icon': 'e-caption',\n        'tooltip': 'Image Caption',\n        'command': 'Images',\n        'subCommand': 'Caption'\n    },\n    'remove': {\n        'id': 'Remove',\n        'icon': 'e-remove',\n        'tooltip': 'Remove',\n        'command': 'Images',\n        'subCommand': 'Remove'\n    },\n    'openimagelink': {\n        'id': 'OpenImageLink',\n        'icon': 'e-open-link',\n        'tooltip': 'Open Link',\n        'command': 'Images',\n        'subCommand': 'OpenImageLink'\n    },\n    'editimagelink': {\n        'id': 'EditImageLink',\n        'icon': 'e-edit-link',\n        'tooltip': 'Edit Link',\n        'command': 'Images',\n        'subCommand': 'EditImageLink'\n    },\n    'removeimagelink': {\n        'id': 'RemoveImageLink',\n        'icon': 'e-remove-link',\n        'tooltip': 'Remove Link',\n        'command': 'Images',\n        'subCommand': 'RemoveImageLink'\n    },\n    'insertlink': {\n        'id': 'InsertLink',\n        'icon': 'e-insert-link',\n        'tooltip': 'Insert Link',\n        'command': 'Images',\n        'subCommand': 'InsertLink'\n    },\n    'display': {\n        'id': 'Display',\n        'icon': 'e-display',\n        'tooltip': 'Display',\n        'command': 'Images',\n        'subCommand': 'Display'\n    },\n    'alttext': {\n        'id': 'AltText',\n        'icon': 'e-alt-text',\n        'tooltip': 'Alternative Text',\n        'command': 'Images',\n        'subCommand': 'AltText'\n    },\n    'dimension': {\n        'id': 'Dimension',\n        'icon': 'e-dimension',\n        'tooltip': 'Change Size',\n        'command': 'Images',\n        'subCommand': 'Dimension'\n    },\n    'fullscreen': {\n        'id': 'Maximize',\n        'icon': 'e-maximize',\n        'tooltip': 'Maximize',\n        'command': 'View',\n        'subCommand': 'Maximize'\n    },\n    'maximize': {\n        'id': 'Maximize',\n        'icon': 'e-maximize',\n        'tooltip': 'Maximize',\n        'command': 'FullScreen',\n        'subCommand': 'Maximize'\n    },\n    'minimize': {\n        'id': 'Minimize',\n        'icon': 'e-minimize',\n        'tooltip': 'Minimize',\n        'command': 'FullScreen',\n        'subCommand': 'Minimize'\n    },\n    'lowercase': {\n        'id': 'LowerCase',\n        'icon': 'e-lower-case',\n        'tooltip': 'Lower Case',\n        'command': 'Casing',\n        'subCommand': 'LowerCase'\n    },\n    'uppercase': {\n        'id': 'UpperCase',\n        'icon': 'e-upper-case',\n        'tooltip': 'Upper Case',\n        'command': 'Casing',\n        'subCommand': 'UpperCase'\n    },\n    'print': {\n        'id': 'Print',\n        'icon': 'e-print',\n        'tooltip': 'Print',\n        'command': 'Print',\n        'subCommand': 'Print'\n    },\n    'formats': {\n        'id': 'Formats',\n        'icon': 'e-formats',\n        'tooltip': 'Formats',\n        'command': 'Formats',\n        'subCommand': 'Formats'\n    },\n    'sourcecode': {\n        'id': 'SourceCode',\n        'icon': 'e-source-code',\n        'tooltip': 'Source Code',\n        'command': 'SourceCode',\n        'subCommand': 'SourceCode'\n    },\n    'preview': {\n        'id': 'Preview',\n        'icon': 'e-preview',\n        'tooltip': 'Preview',\n        'command': 'Preview',\n        'subCommand': 'Preview'\n    },\n    'viewside': {\n        'id': 'ViewSide',\n        'icon': 'e-view-side',\n        'tooltip': 'ViewSide',\n        'command': 'ViewSide',\n        'subCommand': 'ViewSide'\n    },\n    'insertcode': {\n        'id': 'InsertCode',\n        'icon': 'e-insert-code',\n        'tooltip': 'Insert Code',\n        'command': 'InsertCode',\n        'subCommand': 'InsertCode'\n    },\n    'tableheader': {\n        'id': 'TableHeader',\n        'icon': 'e-table-header',\n        'tooltip': 'Table Header',\n        'command': 'Table',\n        'subCommand': 'TableHeader'\n    },\n    'tableremove': {\n        'id': 'TableRemove',\n        'icon': 'e-table-remove',\n        'tooltip': 'Table Remove',\n        'command': 'Table',\n        'subCommand': 'TableRemove'\n    },\n    'tablerows': {\n        'id': 'TableRows',\n        'icon': 'e-table-rows',\n        'tooltip': 'Table Rows',\n        'command': 'Table',\n        'subCommand': 'TableRows'\n    },\n    'tablecolumns': {\n        'id': 'TableColumns',\n        'icon': 'e-table-columns',\n        'tooltip': 'Table Columns',\n        'command': 'Table',\n        'subCommand': 'TableColumns'\n    },\n    'tablecellbackground': {\n        'id': 'TableCellBackground',\n        'icon': 'e-table-cell-background',\n        'tooltip': 'Table Cell Background',\n        'command': 'Table',\n        'subCommand': 'TableCellBackground'\n    },\n    'tablecellhorizontalalign': {\n        'id': 'TableCellHorizontalAlign',\n        'icon': 'e-table-cell-horizontalAlign',\n        'tooltip': 'Table Cell HorizontalAlign',\n        'command': 'Table',\n        'subCommand': 'TableCellHorizontalAlign'\n    },\n    'tablecellverticalalign': {\n        'id': 'TableCellVerticalAlign',\n        'icon': 'e-table-cell-verticalAlign',\n        'tooltip': 'Table Cell VerticalAlign',\n        'command': 'Table',\n        'subCommand': 'TableCellVerticalAlign'\n    },\n    'tableeditproperties': {\n        'id': 'TableEditProperties',\n        'icon': 'e-table-edit-properties',\n        'tooltip': 'Table Edit Properties',\n        'command': 'Table',\n        'subCommand': 'TableEditProperties'\n    },\n    'styles': {\n        'id': 'Styles',\n        'icon': 'e-table-styles',\n        'tooltip': 'Styles',\n        'command': 'Table',\n        'subCommand': 'Styles'\n    }\n};\nvar alignmentLocale = [\n    { locale: 'alignmentsDropDownLeft', value: 'JustifyLeft' },\n    { locale: 'alignmentsDropDownCenter', value: 'JustifyCenter' },\n    { locale: 'alignmentsDropDownRight', value: 'JustifyRight' },\n    { locale: 'alignmentsDropDownJustify', value: 'JustifyFull' }\n];\nexport var alignmentItems = [\n    { iconCss: 'e-icons e-justify-left', text: 'Align Left', command: 'Alignments', subCommand: 'JustifyLeft' },\n    { iconCss: 'e-icons e-justify-center', text: 'Align Center', command: 'Alignments', subCommand: 'JustifyCenter' },\n    { iconCss: 'e-icons e-justify-right', text: 'Align Right', command: 'Alignments', subCommand: 'JustifyRight' },\n    { iconCss: 'e-icons e-justify-full', text: 'Align Justify', command: 'Alignments', subCommand: 'JustifyFull' }\n];\nexport var imageAlignItems = [\n    { iconCss: 'e-icons e-justify-left', command: 'Images', subCommand: 'JustifyLeft' },\n    { iconCss: 'e-icons e-justify-center', command: 'Images', subCommand: 'JustifyCenter' },\n    { iconCss: 'e-icons e-justify-right', command: 'Images', subCommand: 'JustifyRight' },\n];\nvar displayLocale = [\n    { locale: 'imageDisplayDropDownInline', value: 'Inline' },\n    { locale: 'imageDisplayDropDownBreak', value: 'Break' }\n];\nexport var imageDisplayItems = [\n    { text: 'Inline', cssClass: 'e-inline', command: 'Images', subCommand: 'Inline' },\n    { text: 'Break', cssClass: 'e-break', command: 'Images', subCommand: 'Break' },\n];\nvar tableRowLocale = [\n    { locale: 'tableInsertRowDropDownBefore', value: 'InsertRowBefore' },\n    { locale: 'tableInsertRowDropDownAfter', value: 'InsertRowAfter' },\n    { locale: 'tableInsertRowDropDownDelete', value: 'DeleteRow' }\n];\nexport var tableRowsItems = [\n    { iconCss: 'e-icons e-insert-row-before', text: 'Insert row before', command: 'Table', subCommand: 'InsertRowBefore' },\n    { iconCss: 'e-icons e-insert-row-after', text: 'Insert row after', command: 'Table', subCommand: 'InsertRowAfter' },\n    { iconCss: 'e-icons e-delete-row', text: 'Delete row', command: 'Table', subCommand: 'DeleteRow' },\n];\nvar tableColumnLocale = [\n    { locale: 'tableInsertColumnDropDownLeft', value: 'InsertColumnLeft' },\n    { locale: 'tableInsertColumnDropDownRight', value: 'InsertColumnRight' },\n    { locale: 'tableInsertColumnDropDownDelete', value: 'DeleteColumn' }\n];\nexport var tableColumnsItems = [\n    { iconCss: 'e-icons e-insert-column-left', text: 'Insert column left', command: 'Table', subCommand: 'InsertColumnLeft' },\n    { iconCss: 'e-icons e-insert-column-right', text: 'Insert column right', command: 'Table', subCommand: 'InsertColumnRight' },\n    { iconCss: 'e-icons e-delete-column', text: 'Delete column', command: 'Table', subCommand: 'DeleteColumn' },\n];\nvar tableVerticalLocale = [\n    { locale: 'tableVerticalAlignDropDownTop', value: 'AlignTop' },\n    { locale: 'tableVerticalAlignDropDownMiddle', value: 'AlignMiddle' },\n    { locale: 'tableVerticalAlignDropDownBottom', value: 'AlignBottom' }\n];\nexport var TableCellVerticalAlignItems = [\n    { iconCss: 'e-icons e-align-top', text: 'Align Top', command: 'Table', subCommand: 'AlignTop' },\n    { iconCss: 'e-icons e-align-middle', text: 'Align Middle', command: 'Table', subCommand: 'AlignMiddle' },\n    { iconCss: 'e-icons e-align-bottom', text: 'Align Bottom', command: 'Table', subCommand: 'AlignBottom' },\n];\nvar tableStyleLocale = [\n    { locale: 'tableStylesDropDownDashedBorder', value: 'Dashed' },\n    { locale: 'tableStylesDropDownAlternateRows', value: 'Alternate' }\n];\nexport var TableStyleItems = [\n    { text: 'Dashed Borders', cssClass: 'e-dashed-borders', command: 'Table', subCommand: 'Dashed' },\n    { text: 'Alternate Rows', cssClass: 'e-alternate-rows', command: 'Table', subCommand: 'Alternate' }\n];\nfunction getLocale(self, localeItems, item) {\n    for (var i = 0; localeItems.length > i; i++) {\n        if (localeItems[i].value === item.subCommand) {\n            return self.localeObj.getConstant(localeItems[i].locale);\n        }\n    }\n    return item.text;\n}\nexport function updateDropDownLocale(self) {\n    alignmentItems.forEach(function (item, i) {\n        alignmentItems[i].text = getLocale(self, alignmentLocale, alignmentItems[i]);\n    });\n    imageDisplayItems.forEach(function (item, i) {\n        imageDisplayItems[i].text = getLocale(self, displayLocale, imageDisplayItems[i]);\n    });\n    tableRowsItems.forEach(function (item, i) {\n        tableRowsItems[i].text = getLocale(self, tableRowLocale, tableRowsItems[i]);\n    });\n    tableColumnsItems.forEach(function (item, i) {\n        tableColumnsItems[i].text = getLocale(self, tableColumnLocale, tableColumnsItems[i]);\n    });\n    TableCellVerticalAlignItems.forEach(function (item, i) {\n        TableCellVerticalAlignItems[i].text = getLocale(self, tableVerticalLocale, TableCellVerticalAlignItems[i]);\n    });\n    TableStyleItems.forEach(function (item, i) {\n        TableStyleItems[i].text = getLocale(self, tableStyleLocale, TableStyleItems[i]);\n    });\n}\n","/**\n * Exports util methods used by RichTextEditor.\n */\nimport { isNullOrUndefined as isNOU, addClass, removeClass, selectAll, createElement, Browser } from '@syncfusion/ej2-base';\nimport * as classes from '../base/classes';\nimport * as model from '../models/items';\nimport { toolsLocale } from '../models/default-locale';\nvar undoRedoItems = ['Undo', 'Redo'];\nexport function getIndex(val, items) {\n    var index = -1;\n    items.some(function (item, i) {\n        if (typeof item === 'string' && val === item.toLocaleLowerCase()) {\n            index = i;\n            return true;\n        }\n        return false;\n    });\n    return index;\n}\nexport function hasClass(element, className) {\n    var hasClass = false;\n    if (element.classList.contains(className)) {\n        hasClass = true;\n    }\n    return hasClass;\n}\nexport function getDropDownValue(items, value, type, returnType) {\n    var data;\n    var result;\n    for (var k = 0; k < items.length; k++) {\n        if (type === 'value' && items[k].value.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n        else if (type === 'text' && items[k].text.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n        else if (type === 'subCommand' && items[k].subCommand.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n    }\n    if (!isNOU(data)) {\n        switch (returnType) {\n            case 'text':\n                result = data.text;\n                break;\n            case 'value':\n                result = data.value;\n                break;\n            case 'iconCss':\n                result = data.iconCss;\n                break;\n        }\n    }\n    return result;\n}\nexport function isIDevice() {\n    var result = false;\n    if (Browser.isDevice && Browser.isIos) {\n        result = true;\n    }\n    return result;\n}\nexport function getFormattedFontSize(value) {\n    if (isNOU(value)) {\n        return '';\n    }\n    return value;\n}\nexport function pageYOffset(e, parentElement, isIFrame) {\n    var y = 0;\n    if (isIFrame) {\n        y = window.pageYOffset + parentElement.getBoundingClientRect().top + e.clientY;\n    }\n    else {\n        y = e.pageY;\n    }\n    return y;\n}\nexport function getTooltipText(item, serviceLocator) {\n    var i10n = serviceLocator.getService('rteLocale');\n    var itemLocale = toolsLocale[item];\n    var tooltipText = i10n.getConstant(itemLocale);\n    return tooltipText;\n}\nexport function setToolbarStatus(e, isPopToolbar) {\n    var dropDown = e.dropDownModule;\n    var data = e.args;\n    var keys = Object.keys(e.args);\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        for (var j = 0; j < e.tbItems.length; j++) {\n            var item = e.tbItems[j].subCommand;\n            var itemStr = item && item.toLocaleLowerCase();\n            if (item && (itemStr === key) || (item === 'UL' && key === 'unorderedlist') || (item === 'OL' && key === 'orderedlist')) {\n                if (typeof data[key] === 'boolean') {\n                    if (data[key] === true) {\n                        addClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                    }\n                    else {\n                        removeClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                    }\n                }\n                else if ((typeof data[key] === 'string' || data[key] === null) &&\n                    getIndex(key, e.parent.toolbarSettings.items) > -1) {\n                    var value = ((data[key]) ? data[key] : '');\n                    var result = '';\n                    switch (key) {\n                        case 'formats':\n                            if (isNOU(dropDown.formatDropDown) || isPopToolbar ||\n                                (!isNOU(dropDown.formatDropDown) && dropDown.formatDropDown.isDestroyed)) {\n                                return;\n                            }\n                            var formatItems = e.parent.format.types;\n                            result = getDropDownValue(formatItems, value, 'subCommand', 'text');\n                            var formatContent = isNOU(e.parent.format.default) ? formatItems[0].text :\n                                e.parent.format.default;\n                            dropDown.formatDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.format.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text\">'\n                                + (isNOU(result) ? formatContent : result) +\n                                '</span></span>');\n                            dropDown.formatDropDown.dataBind();\n                            break;\n                        case 'alignments':\n                            if (isNOU(dropDown.alignDropDown) ||\n                                (!isNOU(dropDown.alignDropDown) && dropDown.alignDropDown.isDestroyed)) {\n                                return;\n                            }\n                            var alignItems = model.alignmentItems;\n                            result = getDropDownValue(alignItems, value, 'subCommand', 'iconCss');\n                            dropDown.alignDropDown.iconCss = isNOU(result) ? 'e-icons e-justify-left' : result;\n                            dropDown.alignDropDown.dataBind();\n                            break;\n                        case 'fontname':\n                            if (isNOU(dropDown.fontNameDropDown) || isPopToolbar ||\n                                (!isNOU(dropDown.fontNameDropDown) && dropDown.fontNameDropDown.isDestroyed)) {\n                                return;\n                            }\n                            var fontNameItems = e.parent.fontFamily.items;\n                            result = getDropDownValue(fontNameItems, value, 'value', 'text');\n                            var fontNameContent = isNOU(e.parent.fontFamily.default) ? fontNameItems[0].text :\n                                e.parent.fontFamily.default;\n                            var name_1 = (isNOU(result) ? fontNameContent : result);\n                            e.tbElements[j].title = name_1;\n                            dropDown.fontNameDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.fontFamily.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text\">'\n                                + name_1 + '</span></span>');\n                            dropDown.fontNameDropDown.dataBind();\n                            break;\n                        case 'fontsize':\n                            if (isNOU(dropDown.fontSizeDropDown) ||\n                                (!isNOU(dropDown.fontSizeDropDown) && dropDown.fontSizeDropDown.isDestroyed)) {\n                                return;\n                            }\n                            var fontSizeItems = e.parent.fontSize.items;\n                            var fontSizeContent = isNOU(e.parent.fontSize.default) ? fontSizeItems[1].text :\n                                e.parent.fontSize.default;\n                            result = getDropDownValue(fontSizeItems, (value === '' ? fontSizeContent.replace(/\\s/g, '') : value), 'value', 'text');\n                            dropDown.fontSizeDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.fontSize.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text\">'\n                                + getFormattedFontSize(result) + '</span></span>');\n                            dropDown.fontSizeDropDown.dataBind();\n                            break;\n                    }\n                }\n            }\n        }\n    }\n}\nexport function getCollection(items) {\n    if (typeof items === 'object') {\n        return items;\n    }\n    else {\n        return [items];\n    }\n}\nexport function getTBarItemsIndex(items, toolbarItems) {\n    var itemsIndex = [];\n    for (var i = 0; i < items.length; i++) {\n        for (var j = 0; j < toolbarItems.length; j++) {\n            if (toolbarItems[j].type === 'Separator') {\n                continue;\n            }\n            else {\n                if (items[i] === 'OrderedList' && toolbarItems[j].subCommand === 'OL') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (items[i] === 'UnorderedList' && toolbarItems[j].subCommand === 'UL') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (items[i] === toolbarItems[j].subCommand) {\n                    itemsIndex.push(j);\n                    break;\n                }\n            }\n        }\n    }\n    return itemsIndex;\n}\nexport function updateUndoRedoStatus(baseToolbar, undoRedoStatus) {\n    var i = 0;\n    var trgItems = getTBarItemsIndex(getCollection(undoRedoItems), baseToolbar.toolbarObj.items);\n    var tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n    var keys = Object.keys(undoRedoStatus);\n    for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n        var key = keys_2[_i];\n        var target = tbItems[trgItems[i]];\n        if (target) {\n            baseToolbar.toolbarObj.enableItems(target, undoRedoStatus[key]);\n        }\n        i++;\n    }\n}\n/**\n * To dispatch the event manually\n */\nexport function dispatchEvent(element, type) {\n    var evt = document.createEvent('HTMLEvents');\n    evt.initEvent(type, false, true);\n    element.dispatchEvent(evt);\n}\nexport function parseHtml(value) {\n    var tempNode = createElement('template');\n    tempNode.innerHTML = value;\n    if (tempNode.content instanceof DocumentFragment) {\n        return tempNode.content;\n    }\n    else {\n        return document.createRange().createContextualFragment(value);\n    }\n}\nexport function getTextNodesUnder(docElement, node) {\n    var nodes = [];\n    for (node = node.firstChild; node; node = node.nextSibling) {\n        if (node.nodeType === 3) {\n            nodes.push(node);\n        }\n        else {\n            nodes = nodes.concat(getTextNodesUnder(docElement, node));\n        }\n    }\n    return nodes;\n}\nexport function toObjectLowerCase(obj) {\n    var convertedValue = {};\n    var keys = Object.keys(obj);\n    for (var i = 0; i < Object.keys(obj).length; i++) {\n        convertedValue[keys[i].toLocaleLowerCase()] = obj[keys[i]];\n    }\n    return convertedValue;\n}\nexport function getEditValue(value, rteObj) {\n    var val;\n    if (value !== null && value !== '') {\n        val = rteObj.enableHtmlEncode ? updateTextNode(decode(value)) : updateTextNode(value);\n        rteObj.setProperties({ value: val }, true);\n    }\n    else {\n        val = rteObj.enableHtmlEncode ? '&lt;p&gt;&lt;br/&gt;&lt;/p&gt;' : '<p><br/></p>';\n    }\n    return val;\n}\nexport function updateTextNode(value) {\n    var tempNode = document.createElement('div');\n    tempNode.innerHTML = value;\n    var childNodes = tempNode.childNodes;\n    if (childNodes.length > 0) {\n        [].slice.call(childNodes).forEach(function (childNode) {\n            if (childNode.nodeType === Node.TEXT_NODE && childNode.parentNode === tempNode) {\n                var defaultTag = document.createElement('p');\n                var parentNode = childNode.parentNode;\n                parentNode.insertBefore(defaultTag, childNode);\n                defaultTag.appendChild(childNode);\n            }\n        });\n    }\n    return tempNode.innerHTML;\n}\nexport function decode(value) {\n    return value.replace(/&amp;/g, '&').replace(/&amp;lt;/g, '<')\n        .replace(/&lt;/g, '<').replace(/&amp;gt;/g, '>')\n        .replace(/&gt;/g, '>').replace(/&nbsp;/g, ' ')\n        .replace(/&amp;nbsp;/g, ' ').replace(/&quot;/g, '');\n}\n","/**\n * Exports common util methods used by RichTextEditor.\n */\nimport { isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nexport function isIDevice() {\n    var result = false;\n    if (Browser.isDevice && Browser.isIos) {\n        result = true;\n    }\n    return result;\n}\nexport function setEditFrameFocus(editableElement, selector) {\n    if (editableElement.nodeName === 'BODY' && !isNullOrUndefined(selector)) {\n        top.window.document.querySelector(selector).contentWindow.focus();\n    }\n}\n","export function setAttributes(htmlAttributes, rte, isFrame, initial) {\n    var target;\n    if (isFrame) {\n        var iFrame = rte.contentModule.getDocument();\n        target = iFrame.querySelector('body');\n    }\n    else {\n        target = rte.element;\n    }\n    if (Object.keys(htmlAttributes).length) {\n        for (var _i = 0, _a = Object.keys(htmlAttributes); _i < _a.length; _i++) {\n            var htmlAttr = _a[_i];\n            if (htmlAttr === 'class') {\n                target.classList.add(htmlAttributes[htmlAttr]);\n            }\n            else if (htmlAttr === 'disabled' && htmlAttributes[htmlAttr] === 'disabled') {\n                rte.enabled = false;\n                rte.setEnable();\n            }\n            else if (htmlAttr === 'readonly' && htmlAttributes[htmlAttr] === 'readonly') {\n                rte.readonly = true;\n                rte.setReadOnly(initial);\n            }\n            else if (htmlAttr === 'style') {\n                target.setAttribute('style', htmlAttributes[htmlAttr]);\n            }\n            else if (htmlAttr === 'placeholder') {\n                rte.placeholder = htmlAttributes[htmlAttr];\n                rte.setPlaceHolder();\n            }\n            else {\n                var validateAttr = ['name', 'required'];\n                if (validateAttr.indexOf(htmlAttr) > -1) {\n                    rte.valueContainer.setAttribute(htmlAttr, htmlAttributes[htmlAttr]);\n                }\n                else {\n                    target.setAttribute(htmlAttr, htmlAttributes[htmlAttr]);\n                }\n            }\n        }\n    }\n}\n","/** @hidden */\nexport var created = 'create';\n/** @hidden */\nexport var destroyed = 'destroy';\n/** @hidden */\nexport var load = 'load';\n/**\n * Specifies RichTextEditor internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var initialEnd = 'initial-end';\n/** @hidden */\nexport var iframeMouseDown = 'iframe-click';\n/** @hidden */\nexport var destroy = 'destroy';\n/** @hidden */\nexport var toolbarClick = 'toolbarClick';\n/** @hidden */\nexport var toolbarRefresh = 'toolbar-refresh';\n/** @hidden */\nexport var refreshBegin = 'refresh-begin';\n/** @hidden */\nexport var toolbarUpdated = 'toolbar-updated';\n/** @hidden */\nexport var bindOnEnd = 'bind-on-end';\n/** @hidden */\nexport var renderColorPicker = 'render-color-picker';\n/** @hidden */\nexport var htmlToolbarClick = 'html-toolbar-click';\n/** @hidden */\nexport var markdownToolbarClick = 'markdown-toolbar-click';\n/** @hidden */\nexport var destroyColorPicker = 'destroy-color-picker';\n/** @hidden */\nexport var modelChanged = 'model-changed';\n/** @hidden */\nexport var keyUp = 'keyUp';\n/** @hidden */\nexport var keyDown = 'keyDown';\n/** @hidden */\nexport var mouseUp = 'mouseUp';\n/** @hidden */\nexport var toolbarCreated = 'toolbarCreated';\n/** @hidden */\nexport var toolbarRenderComplete = 'toolbarRenderComplete';\n/** @hidden */\nexport var enableFullScreen = 'enableFullScreen';\n/** @hidden */\nexport var disableFullScreen = 'disableFullScreen';\n/** @hidden */\nexport var dropDownSelect = 'dropDownSelect';\n/** @hidden */\nexport var beforeDropDownItemRender = 'beforeDropDownItemRender';\n/** @hidden */\nexport var execCommandCallBack = 'execCommandCallBack';\n/** @hidden */\nexport var imageToolbarAction = 'image-toolbar-action';\n/** @hidden */\nexport var linkToolbarAction = 'link-toolbar-action';\n/** @hidden */\nexport var resizeStart = 'resizeStart';\n/** @hidden */\nexport var onResize = 'resizing';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/** @hidden */\nexport var undo = 'undo';\n/** @hidden */\nexport var redo = 'redo';\n/** @hidden */\nexport var insertLink = 'insertLink';\n/** @hidden */\nexport var unLink = 'unLink';\n/** @hidden */\nexport var editLink = 'editLink';\n/** @hidden */\nexport var openLink = 'openLink';\n/** @hidden */\nexport var actionBegin = 'actionBegin';\n/** @hidden */\nexport var actionComplete = 'actionComplete';\n/** @hidden */\nexport var actionSuccess = 'actionSuccess';\n/** @hidden */\nexport var popupOpen = 'popupOpen';\n/** @hidden */\nexport var updateToolbarItem = 'updateToolbarItem';\n/** @hidden */\nexport var insertImage = 'insertImage';\n/** @hidden */\nexport var insertCompleted = 'insertCompleted';\n/** @hidden */\nexport var imageLeft = 'justifyLeft';\n/** @hidden */\nexport var imageRight = 'justifyRight';\n/** @hidden */\nexport var imageCenter = 'justifyCenter';\n/** @hidden */\nexport var imageBreak = 'break';\n/** @hidden */\nexport var imageInline = 'inline';\n/** @hidden */\nexport var imageLink = 'insertImgLink';\n/** @hidden */\nexport var imageAlt = 'imgAltText';\n/** @hidden */\nexport var imageDelete = 'delete';\n/** @hidden */\nexport var imageCaption = 'caption';\n/** @hidden */\nexport var imageSize = 'imageSize';\n/** @hidden */\nexport var sourceCode = 'sourceCode';\n/** @hidden */\nexport var updateSource = 'updateSource';\n/** @hidden */\nexport var toolbarOpen = 'toolbarOpen';\n/** @hidden */\nexport var beforeDropDownOpen = 'beforeDropDownOpen';\n/** @hidden */\nexport var selectionSave = 'selection-save';\n/** @hidden */\nexport var selectionRestore = 'selection-restore';\n/** @hidden */\nexport var expandPopupClick = 'expandPopupClick';\n/** @hidden */\nexport var count = 'count';\n/** @hidden */\nexport var contentFocus = 'contentFocus';\n/** @hidden */\nexport var contentBlur = 'contentBlur';\n/** @hidden */\nexport var mouseDown = 'mouseDown';\n/** @hidden */\nexport var sourceCodeMouseDown = 'sourceCodeMouseDown';\n/** @hidden */\nexport var editAreaClick = 'editAreaClick';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var colorPickerChanged = 'colorPickerChanged';\n/** @hidden */\nexport var tableColorPickerChanged = 'tableColorPickerChanged';\n/** @hidden */\nexport var focusChange = 'focusChange';\n/** @hidden */\nexport var selectAll = 'selectAll';\n/** @hidden */\nexport var selectRange = 'selectRange';\n/** @hidden */\nexport var getSelectedHtml = 'getSelectedHtml';\n/** @hidden */\nexport var renderInlineToolbar = 'renderInlineToolbar';\n/** @hidden */\nexport var paste = 'paste-content';\n/** @hidden */\nexport var imgModule = 'imageModule';\n/** @hidden */\nexport var rtlMode = 'rtl-mode';\n/** @hidden */\nexport var createTable = 'createTable';\n/** @hidden */\nexport var docClick = 'docClick';\n/** @hidden */\nexport var tableToolbarAction = 'table-toolbar-action';\n/** @hidden */\nexport var checkUndo = 'checkUndoStack';\n/** @hidden */\nexport var readOnlyMode = 'readOnlyMode';\n/** @hidden */\nexport var pasteClean = 'pasteClean';\n","/**\n * RichTextEditor classes defined here.\n */\n/** @hidden */\nexport var CLS_RTE = 'e-richtexteditor';\n/** @hidden */\nexport var CLS_RTL = 'e-rtl';\n/** @hidden */\nexport var CLS_CONTENT = 'e-content';\n/** @hidden */\nexport var CLS_DISABLED = 'e-disabled';\n/** @hidden */\nexport var CLS_SCRIPT_SHEET = 'rte-iframe-script-sheet';\n/** @hidden */\nexport var CLS_STYLE_SHEET = 'rte-iframe-style-sheet';\n/** @hidden */\nexport var CLS_TOOLBAR = 'e-rte-toolbar';\n/** @hidden */\nexport var CLS_TB_FIXED = 'e-rte-tb-fixed';\n/** @hidden */\nexport var CLS_TB_FLOAT = 'e-rte-tb-float';\n/** @hidden */\nexport var CLS_TB_ABS_FLOAT = 'e-rte-tb-abs-float';\n/** @hidden */\nexport var CLS_INLINE = 'e-rte-inline';\n/** @hidden */\nexport var CLS_TB_INLINE = 'e-rte-tb-inline';\n/** @hidden */\nexport var CLS_RTE_EXPAND_TB = 'e-rte-tb-expand';\n/** @hidden */\nexport var CLS_FULL_SCREEN = 'e-rte-full-screen';\n/** @hidden */\nexport var CLS_QUICK_TB = 'e-rte-quick-toolbar';\n/** @hidden */\nexport var CLS_POP = 'e-rte-pop';\n/** @hidden */\nexport var CLS_QUICK_POP = 'e-rte-quick-popup';\n/** @hidden */\nexport var CLS_QUICK_DROPDOWN = 'e-quick-dropdown';\n/** @hidden */\nexport var CLS_IMAGE_POP = 'e-rte-image-popup';\n/** @hidden */\nexport var CLS_INLINE_POP = 'e-rte-inline-popup';\n/** @hidden */\nexport var CLS_INLINE_DROPDOWN = 'e-rte-inline-dropdown';\n/** @hidden */\nexport var CLS_DROPDOWN_POPUP = 'e-rte-dropdown-popup';\n/** @hidden */\nexport var CLS_DROPDOWN_ICONS = 'e-rte-dropdown-icons';\n/** @hidden */\nexport var CLS_DROPDOWN_ITEMS = 'e-rte-dropdown-items';\n/** @hidden */\nexport var CLS_DROPDOWN_BTN = 'e-rte-dropdown-btn';\n/** @hidden */\nexport var CLS_RTE_CONTENT = 'e-rte-content';\n/** @hidden */\nexport var CLS_TB_ITEM = 'e-toolbar-item';\n/** @hidden */\nexport var CLS_TB_EXTENDED = 'e-toolbar-extended';\n/** @hidden */\nexport var CLS_TB_WRAP = 'e-toolbar-wrapper';\n/** @hidden */\nexport var CLS_POPUP = 'e-popup';\n/** @hidden */\nexport var CLS_SEPARATOR = 'e-separator';\n/** @hidden */\nexport var CLS_MINIMIZE = 'e-minimize';\n/** @hidden */\nexport var CLS_MAXIMIZE = 'e-maximize';\n/** @hidden */\nexport var CLS_BACK = 'e-back';\n/** @hidden */\nexport var CLS_SHOW = 'e-show';\n/** @hidden */\nexport var CLS_HIDE = 'e-hide';\n/** @hidden */\nexport var CLS_VISIBLE = 'e-visible';\n/** @hidden */\nexport var CLS_FOCUS = 'e-focused';\n/** @hidden */\nexport var CLS_RM_WHITE_SPACE = 'e-remove-white-space';\n/** @hidden */\nexport var CLS_IMGRIGHT = 'e-imgright';\n/** @hidden */\nexport var CLS_IMGLEFT = 'e-imgleft';\n/** @hidden */\nexport var CLS_IMGCENTER = 'e-imgcenter';\n/** @hidden */\nexport var CLS_IMGBREAK = 'e-imgbreak';\n/** @hidden */\nexport var CLS_CAPTION = 'e-img-caption';\n/** @hidden */\nexport var CLS_CAPINLINE = 'e-caption-inline';\n/** @hidden */\nexport var CLS_IMGINLINE = 'e-imginline';\n/** @hidden */\nexport var CLS_COUNT = 'e-rte-character-count';\n/** @hidden */\nexport var CLS_WARNING = 'e-warning';\n/** @hidden */\nexport var CLS_ERROR = 'e-error';\n/** @hidden */\nexport var CLS_ICONS = 'e-icons';\n/** @hidden */\nexport var CLS_ACTIVE = 'e-active';\n/** @hidden */\nexport var CLS_EXPAND_OPEN = 'e-expand-open';\n/** @hidden */\nexport var CLS_RTE_ELEMENTS = 'e-rte-elements';\n/** @hidden */\nexport var CLS_TB_BTN = 'e-tbar-btn';\n/** @hidden */\nexport var CLS_HR_SEPARATOR = 'e-rte-horizontal-separator';\n/** @hidden */\nexport var CLS_TB_IOS_FIX = 'e-tbar-ios-fixed';\n/** @hidden */\nexport var CLS_TB_STATIC = 'e-tb-static';\n/** @hidden */\nexport var CLS_FORMATS_TB_BTN = 'e-formats-tbar-btn';\n/** @hidden */\nexport var CLS_FONT_NAME_TB_BTN = 'e-font-name-tbar-btn';\n/** @hidden */\nexport var CLS_FONT_SIZE_TB_BTN = 'e-font-size-tbar-btn';\n/** @hidden */\nexport var CLS_FONT_COLOR_TARGET = 'e-rte-fontcolor-element';\n/** @hidden */\nexport var CLS_BACKGROUND_COLOR_TARGET = 'e-rte-backgroundcolor-element';\n/** @hidden */\nexport var CLS_COLOR_CONTENT = 'e-rte-color-content';\n/** @hidden */\nexport var CLS_FONT_COLOR_DROPDOWN = 'e-rte-fontcolor-dropdown';\n/** @hidden */\nexport var CLS_BACKGROUND_COLOR_DROPDOWN = 'e-rte-backgroundcolor-dropdown';\n/** @hidden */\nexport var CLS_COLOR_PALETTE = 'e-rte-square-palette';\n/** @hidden */\nexport var CLS_FONT_COLOR_PICKER = 'e-rte-fontcolor-colorpicker';\n/** @hidden */\nexport var CLS_BACKGROUND_COLOR_PICKER = 'e-rte-backgroundcolor-colorpicker';\n/** @hidden */\nexport var CLS_RTE_READONLY = 'e-rte-readonly';\n/** @hidden */\nexport var CLS_TABLE_SEL = 'e-cell-select';\n/** @hidden */\nexport var CLS_TB_DASH_BOR = 'e-dashed-border';\n/** @hidden */\nexport var CLS_TB_ALT_BOR = 'e-alternate-border';\n/** @hidden */\nexport var CLS_TB_COL_RES = 'e-column-resize';\n/** @hidden */\nexport var CLS_TB_ROW_RES = 'e-row-resize';\n/** @hidden */\nexport var CLS_TB_BOX_RES = 'e-table-box';\n/** @hidden */\nexport var CLS_RTE_HIDDEN = 'e-rte-hidden';\n/** @hidden */\nexport var CLS_RTE_PASTE_KEEP_FORMAT = 'e-rte-keepformat';\n/** @hidden */\nexport var CLS_RTE_PASTE_REMOVE_FORMAT = 'e-rte-removeformat';\n/** @hidden */\nexport var CLS_RTE_PASTE_PLAIN_FORMAT = 'e-rte-plainformat';\n/** @hidden */\nexport var CLS_RTE_PASTE_OK = 'e-rte-pasteok';\n/** @hidden */\nexport var CLS_RTE_PASTE_CANCEL = 'e-rte-pastecancel';\n/** @hidden */\nexport var CLS_RTE_DIALOG_MIN_HEIGHT = 'e-rte-dialog-minheight';\n","/**\n * Defines types of Render\n * @hidden\n */\nexport var RenderType;\n(function (RenderType) {\n    /**  Defines RenderType as Toolbar */\n    RenderType[RenderType[\"Toolbar\"] = 0] = \"Toolbar\";\n    /**  Defines RenderType as Content */\n    RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n    /**  Defines RenderType as Content */\n    RenderType[RenderType[\"Popup\"] = 2] = \"Popup\";\n    /**  Defines RenderType as LinkToolbar */\n    RenderType[RenderType[\"LinkToolbar\"] = 3] = \"LinkToolbar\";\n    /**  Defines RenderType as TextToolbar */\n    RenderType[RenderType[\"TextToolbar\"] = 4] = \"TextToolbar\";\n    /**  Defines RenderType as ImageToolbar */\n    RenderType[RenderType[\"ImageToolbar\"] = 5] = \"ImageToolbar\";\n    /**  Defines RenderType as ImageToolbar */\n    RenderType[RenderType[\"InlineToolbar\"] = 6] = \"InlineToolbar\";\n    RenderType[RenderType[\"TableToolbar\"] = 7] = \"TableToolbar\";\n})(RenderType || (RenderType = {}));\nexport var ToolbarType;\n(function (ToolbarType) {\n    /**  Defines ToolbarType as Standard */\n    ToolbarType[\"Expand\"] = \"Expand\";\n    /**  Defines ToolbarType as MultiRow */\n    ToolbarType[\"MultiRow\"] = \"MultiRow\";\n})(ToolbarType || (ToolbarType = {}));\n","// tslint:disable\n/**\n * Export default locale\n */\nexport var defaultLocale = {\n    'alignments': 'Alignments',\n    'justifyLeft': 'Align Left',\n    'justifyCenter': 'Align Center',\n    'justifyRight': 'Align Right',\n    'justifyFull': 'Align Justify',\n    'fontName': 'Font Name',\n    'fontSize': 'Font Size',\n    'fontColor': 'Font Color',\n    'backgroundColor': 'Background Color',\n    'bold': 'Bold',\n    'italic': 'Italic',\n    'underline': 'Underline',\n    'strikethrough': 'Strikethrough',\n    'clearFormat': 'Clear Format',\n    'clearAll': 'Clear All',\n    'cut': 'Cut',\n    'copy': 'Copy',\n    'paste': 'Paste',\n    'unorderedList': 'Bulleted List',\n    'orderedList': 'Numbered List',\n    'indent': 'Increase Indent',\n    'outdent': 'Decrease Indent',\n    'undo': 'Undo',\n    'redo': 'Redo',\n    'superscript': 'Superscript',\n    'subscript': 'Subscript',\n    'createLink': 'Insert Hyperlink',\n    'openLink': 'Open Link',\n    'editLink': 'Edit Link',\n    'removeLink': 'Remove Link',\n    'image': 'Insert Image',\n    'replace': 'Replace',\n    'align': 'Align',\n    'caption': 'Image Caption',\n    'remove': 'Remove',\n    'insertLink': 'Insert Link',\n    'display': 'Display',\n    'altText': 'Alternative Text',\n    'dimension': 'Change Size',\n    'fullscreen': 'Maximize',\n    'maximize': 'Maximize',\n    'minimize': 'Minimize',\n    'lowerCase': 'Lower Case',\n    'upperCase': 'Upper Case',\n    'print': 'Print',\n    'formats': 'Formats',\n    'sourcecode': 'Code View',\n    'preview': 'Preview',\n    'viewside': 'ViewSide',\n    'insertCode': 'Insert Code',\n    'linkText': 'Display Text',\n    'linkTooltipLabel': 'Title',\n    'linkWebUrl': 'Web Address',\n    'linkTitle': 'Enter a title',\n    'linkurl': 'http://example.com',\n    'linkOpenInNewWindow': 'Open Link in New Window',\n    'linkHeader': 'Insert Link',\n    'dialogInsert': 'Insert',\n    'dialogCancel': 'Cancel',\n    'dialogUpdate': 'Update',\n    'imageHeader': 'Insert Image',\n    'imageLinkHeader': 'You can also provide a link from the web',\n    'mdimageLink': 'Please provide a URL for your image',\n    'imageUploadMessage': 'Drop image here or browse to upload',\n    'imageDeviceUploadMessage': 'Click here to upload',\n    'imageAlternateText': 'Alternate Text',\n    'alternateHeader': 'Alternative Text',\n    'browse': 'Browse',\n    'imageUrl': 'http://example.com/image.png',\n    'imageCaption': 'Caption',\n    'imageSizeHeader': 'Image Size',\n    'imageHeight': 'Height',\n    'imageWidth': 'Width',\n    'textPlaceholder': 'Enter Text',\n    'inserttablebtn': 'Insert Table',\n    'tabledialogHeader': 'Insert Table',\n    'tableWidth': 'Width',\n    'cellpadding': 'Cell Padding',\n    'cellspacing': 'Cell Spacing',\n    'columns': 'Number of columns',\n    'rows': 'Number of rows',\n    'tableRows': 'Table Rows',\n    'tableColumns': 'Table Columns',\n    'tableCellHorizontalAlign': 'Table Cell Horizontal Align',\n    'tableCellVerticalAlign': 'Table Cell Vertical Align',\n    'createTable': 'Create Table',\n    'removeTable': 'Remove Table',\n    'tableHeader': 'Table Header',\n    'tableRemove': 'Table Remove',\n    'tableCellBackground': 'Table Cell Background',\n    'tableEditProperties': 'Table Edit Properties',\n    'styles': 'Styles',\n    'insertColumnLeft': 'Insert Column Left',\n    'insertColumnRight': 'Insert Column Right',\n    'deleteColumn': 'Delete Column',\n    'insertRowBefore': 'Insert Row Before',\n    'insertRowAfter': 'Insert Row After',\n    'deleteRow': 'Delete Row',\n    'tableEditHeader': 'Edit Table',\n    'TableHeadingText': 'Heading',\n    'TableColText': 'Col',\n    'imageInsertLinkHeader': 'Insert Link',\n    'editImageHeader': 'Edit Image',\n    \"alignmentsDropDownLeft\": 'Align Left',\n    \"alignmentsDropDownCenter\": 'Align Center',\n    \"alignmentsDropDownRight\": 'Align Right',\n    \"alignmentsDropDownJustify\": 'Align Justify',\n    \"imageDisplayDropDownInline\": 'Inline',\n    \"imageDisplayDropDownBreak\": 'Break',\n    \"tableInsertRowDropDownBefore\": 'Insert row before',\n    \"tableInsertRowDropDownAfter\": 'Insert row after',\n    \"tableInsertRowDropDownDelete\": 'Delete row',\n    \"tableInsertColumnDropDownLeft\": 'Insert column left',\n    \"tableInsertColumnDropDownRight\": 'Insert column right',\n    \"tableInsertColumnDropDownDelete\": 'Delete column',\n    \"tableVerticalAlignDropDownTop\": 'Align Top',\n    \"tableVerticalAlignDropDownMiddle\": 'Align Middle',\n    \"tableVerticalAlignDropDownBottom\": 'Align Bottom',\n    \"tableStylesDropDownDashedBorder\": 'Dashed Borders',\n    \"tableStylesDropDownAlternateRows\": 'Alternate Rows',\n    'pasteFormat': 'Paste Format',\n    'pasteFormatContent': 'Choose the formatting action',\n    'plainText': 'Plain Text',\n    'cleanFormat': 'Clean',\n    'keepFormat': 'Keep',\n    'pasteDialogOk': 'OK',\n    'pasteDialogCancel': 'Cancel'\n};\nexport var toolsLocale = {\n    'alignments': 'alignments',\n    'justifyleft': 'justifyLeft',\n    'justifycenter': 'justifyCenter',\n    'justifyright': 'justifyRight',\n    'justifyfull': 'justifyFull',\n    'fontname': 'fontName',\n    'fontsize': 'fontSize',\n    'fontcolor': 'fontColor',\n    'backgroundcolor': 'backgroundColor',\n    'bold': 'bold',\n    'italic': 'italic',\n    'underline': 'underline',\n    'strikethrough': 'strikethrough',\n    'clearformat': 'clearFormat',\n    'clearall': 'clearAll',\n    'cut': 'cut',\n    'copy': 'copy',\n    'paste': 'paste',\n    'unorderedlist': 'unorderedList',\n    'orderedlist': 'orderedList',\n    'indent': 'indent',\n    'outdent': 'outdent',\n    'undo': 'undo',\n    'redo': 'redo',\n    'superscript': 'superscript',\n    'subscript': 'subscript',\n    'createlink': 'createLink',\n    'openlink': 'openLink',\n    'editlink': 'editLink',\n    'removelink': 'removeLink',\n    'openimagelink': 'openLink',\n    'editimagelink': 'editLink',\n    'removeimagelink': 'removeLink',\n    'image': 'image',\n    'replace': 'replace',\n    'align': 'align',\n    'caption': 'caption',\n    'remove': 'remove',\n    'insertlink': 'insertLink',\n    'display': 'display',\n    'alttext': 'altText',\n    'dimension': 'dimension',\n    'fullscreen': 'fullscreen',\n    'maximize': 'maximize',\n    'minimize': 'minimize',\n    'lowercase': 'lowerCase',\n    'uppercase': 'upperCase',\n    'print': 'print',\n    'formats': 'formats',\n    'sourcecode': 'sourcecode',\n    'preview': 'preview',\n    'viewside': 'viewside',\n    'insertcode': 'insertCode',\n    'tablerows': 'tableRows',\n    'tablecolumns': 'tableColumns',\n    'tablecellhorizontalalign': 'tableCellHorizontalAlign',\n    'tablecellverticalalign': 'tableCellVerticalAlign',\n    'createtable': 'createTable',\n    'removetable': 'removeTable',\n    'tableheader': 'tableHeader',\n    'tableremove': 'tableRemove',\n    'tablecellbackground': 'tableCellBackground',\n    'tableeditproperties': 'tableEditProperties',\n    'styles': 'styles',\n    'insertcolumnleft': 'insertColumnLeft',\n    'insertcolumnright': 'insertColumnRight',\n    'deletecolumn': 'deleteColumn',\n    'aligntop': 'AlignTop',\n    'alignmiddle': 'AlignMiddle',\n    'alignbottom': 'AlignBottom',\n    'insertrowbefore': 'insertRowBefore',\n    'insertrowafter': 'insertRowAfter',\n    'deleterow': 'deleteRow'\n};\n","import { addClass, Browser, removeClass, EventHandler, formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getInstance, closest, selectAll } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as classes from '../base/classes';\nimport * as events from '../base/constant';\nimport { CLS_TOOLBAR, CLS_DROPDOWN_BTN, CLS_RTE_ELEMENTS, CLS_TB_BTN, CLS_INLINE_DROPDOWN, CLS_COLOR_CONTENT, CLS_FONT_COLOR_DROPDOWN, CLS_BACKGROUND_COLOR_DROPDOWN, CLS_COLOR_PALETTE, CLS_FONT_COLOR_PICKER, CLS_BACKGROUND_COLOR_PICKER } from '../base/classes';\nimport { isIDevice } from '../base/util';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\n/**\n * `Toolbar renderer` module is used to render toolbar in RichTextEditor.\n * @hidden\n */\nvar ToolbarRenderer = /** @class */ (function () {\n    /**\n     * Constructor for toolbar renderer module\n     */\n    function ToolbarRenderer(parent) {\n        this.parent = parent;\n        this.wireEvent();\n    }\n    ToolbarRenderer.prototype.wireEvent = function () {\n        this.parent.on(events.destroy, this.unWireEvent, this);\n    };\n    ToolbarRenderer.prototype.unWireEvent = function () {\n        this.parent.off(events.destroy, this.unWireEvent);\n        if (this.popupOverlay) {\n            EventHandler.remove(this.popupOverlay, 'click touchmove', this.onPopupOverlay);\n        }\n    };\n    ToolbarRenderer.prototype.toolbarBeforeCreate = function (e) {\n        if (this.mode === 'Extended') {\n            e.enableCollision = false;\n        }\n    };\n    ToolbarRenderer.prototype.toolbarCreated = function () {\n        this.parent.notify(events.toolbarCreated, this);\n    };\n    ToolbarRenderer.prototype.toolbarClicked = function (args) {\n        if (this.parent.readonly || !this.parent.enabled) {\n            return;\n        }\n        this.parent.notify(events.toolbarClick, args);\n        this.parent.trigger('toolbarClick', args);\n    };\n    ToolbarRenderer.prototype.dropDownSelected = function (args) {\n        this.parent.notify(events.dropDownSelect, args);\n        this.onPopupOverlay();\n    };\n    ToolbarRenderer.prototype.beforeDropDownItemRender = function (args) {\n        if (this.parent.readonly || !this.parent.enabled) {\n            return;\n        }\n        this.parent.notify(events.beforeDropDownItemRender, args);\n    };\n    ToolbarRenderer.prototype.dropDownOpen = function (args) {\n        if (Browser.isDevice && !args.element.parentElement.classList.contains(classes.CLS_QUICK_DROPDOWN)) {\n            this.popupModal(args.element.parentElement);\n        }\n        this.parent.notify(events.selectionSave, args);\n    };\n    ToolbarRenderer.prototype.dropDownClose = function (args) {\n        this.parent.notify(events.selectionRestore, args);\n    };\n    ToolbarRenderer.prototype.renderToolbar = function (args) {\n        this.setPanel(args.target);\n        this.renderPanel();\n        this.mode = args.overflowMode;\n        args.rteToolbarObj.toolbarObj = new Toolbar({\n            items: args.items,\n            width: '100%',\n            overflowMode: args.overflowMode,\n            beforeCreate: this.toolbarBeforeCreate.bind(this),\n            created: this.toolbarCreated.bind(this),\n            clicked: this.toolbarClicked.bind(this),\n            enablePersistence: args.enablePersistence,\n            enableRtl: args.enableRtl\n        });\n        args.rteToolbarObj.toolbarObj.createElement = this.parent.createElement;\n        args.rteToolbarObj.toolbarObj.appendTo(args.target);\n    };\n    ToolbarRenderer.prototype.renderDropDownButton = function (args) {\n        var _this = this;\n        var css;\n        args.element.classList.add(CLS_DROPDOWN_BTN);\n        css = args.cssClass + ' ' + CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN;\n        if (this.parent.inlineMode.enable && Browser.isDevice) {\n            css = css + ' ' + CLS_INLINE_DROPDOWN;\n        }\n        var proxy = this;\n        var dropDown = new DropDownButton({\n            items: args.items,\n            iconCss: args.iconCss,\n            cssClass: css,\n            content: args.content,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            select: this.dropDownSelected.bind(this),\n            beforeOpen: function (args) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    args.cancel = true;\n                    return;\n                }\n                for (var index = 0; index < args.element.childNodes.length; index++) {\n                    var divNode = _this.parent.createElement('div');\n                    divNode.innerHTML = dropDown.content.trim();\n                    if (divNode.textContent.trim() !== ''\n                        && args.element.childNodes[index].textContent.trim() === divNode.textContent.trim()) {\n                        if (!args.element.childNodes[index].classList.contains('e-active')) {\n                            addClass([args.element.childNodes[index]], 'e-active');\n                        }\n                    }\n                    else {\n                        removeClass([args.element.childNodes[index]], 'e-active');\n                    }\n                }\n                proxy.parent.notify(events.beforeDropDownOpen, args);\n            },\n            close: this.dropDownClose.bind(this),\n            open: this.dropDownOpen.bind(this),\n            beforeItemRender: this.beforeDropDownItemRender.bind(this)\n        });\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        args.element.tabIndex = -1;\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        return dropDown;\n    };\n    ToolbarRenderer.prototype.onPopupOverlay = function (args) {\n        if (!isNullOrUndefined(this.popupOverlay)) {\n            closest(this.popupOverlay, '.e-popup-container').style.display = 'none';\n            this.popupOverlay.style.display = 'none';\n            removeClass([this.popupOverlay], 'e-popup-overlay');\n        }\n    };\n    ToolbarRenderer.prototype.setIsModel = function (element) {\n        if (!closest(element, '.e-popup-container')) {\n            var popupContainer = this.parent.createElement('div', {\n                className: 'e-rte-modal-popup e-popup-container e-center'\n            });\n            element.parentNode.insertBefore(popupContainer, element);\n            popupContainer.appendChild(element);\n            popupContainer.style.zIndex = element.style.zIndex;\n            popupContainer.style.display = 'flex';\n            element.style.position = 'relative';\n            addClass([element], 'e-popup-modal');\n            this.popupOverlay = this.parent.createElement('div', { className: 'e-popup-overlay' });\n            this.popupOverlay.style.zIndex = (parseInt(element.style.zIndex, null) - 1).toString();\n            this.popupOverlay.style.display = 'block';\n            popupContainer.appendChild(this.popupOverlay);\n            EventHandler.add(this.popupOverlay, 'click touchmove', this.onPopupOverlay, this);\n        }\n        else {\n            element.parentElement.style.display = 'flex';\n            this.popupOverlay = element.nextElementSibling;\n            this.popupOverlay.style.display = 'block';\n            addClass([this.popupOverlay], 'e-popup-overlay');\n        }\n    };\n    ToolbarRenderer.prototype.paletteSelection = function (dropDownArgs, currentElement) {\n        var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n        var colorbox = [].slice.call(selectAll('.e-tile', ele.parentElement));\n        removeClass(colorbox, 'e-selected');\n        var style = currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n        (colorbox.filter(function (colorbox) {\n            if (colorbox.style.backgroundColor === style) {\n                addClass([colorbox], 'e-selected');\n            }\n        }));\n    };\n    ToolbarRenderer.prototype.renderColorPickerDropDown = function (args, item, colorPicker) {\n        var _this = this;\n        var proxy = this;\n        var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + ((this.parent.inlineMode) ? (' ' + CLS_INLINE_DROPDOWN) : '');\n        css += (' ' + ((item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_DROPDOWN : CLS_FONT_COLOR_DROPDOWN));\n        var content = proxy.parent.createElement('span', { className: CLS_COLOR_CONTENT });\n        var inlineEle = proxy.parent.createElement('span', { className: args.cssClass });\n        var range;\n        inlineEle.style.borderBottomColor = (item === 'backgroundcolor') ?\n            proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n        content.appendChild(inlineEle);\n        var dropDown = new DropDownButton({\n            target: colorPicker.element.parentElement,\n            cssClass: css,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            beforeOpen: function (dropDownArgs) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    dropDownArgs.cancel = true;\n                    return;\n                }\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                proxy.currentElement = dropDown.element;\n                proxy.currentDropdown = dropDown;\n                proxy.paletteSelection(dropDownArgs, proxy.currentElement);\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    dropDownArgs.cancel = true;\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n                        proxy.parent.notify(events.tableColorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n                else {\n                    var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                    var inst = getInstance(ele, ColorPicker);\n                    inst.showButtons = (dropDownArgs.element.querySelector('.e-color-palette')) ? false : true;\n                    inst.dataBind();\n                }\n                dropDownArgs.element.onclick = function (args) {\n                    if (args.target.classList.contains('e-cancel')) {\n                        dropDown.toggle();\n                    }\n                };\n            },\n            open: function (dropDownArgs) {\n                _this.setColorPickerContentWidth(colorPicker);\n                var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                var focusEle;\n                if (dropDownArgs.element.querySelector('.e-color-palette')) {\n                    focusEle = ele.parentElement.querySelector('.e-palette');\n                }\n                else {\n                    focusEle = ele.parentElement.querySelector('e-handler');\n                }\n                if (focusEle) {\n                    focusEle.focus();\n                }\n                if (Browser.isDevice) {\n                    _this.popupModal(dropDownArgs.element.parentElement);\n                }\n            },\n            beforeClose: function (dropDownArgs) {\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    /* tslint:enable */\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n                        proxy.parent.notify(events.tableColorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n            },\n            close: function (dropDownArgs) {\n                proxy.parent.notify(events.selectionRestore, {});\n                var dropElement = closest(dropDownArgs.element.parentElement, '.e-popup-container');\n                if (dropElement) {\n                    dropElement.style.display = 'none';\n                    dropElement.lastElementChild.style.display = 'none';\n                    removeClass([dropElement.lastElementChild], 'e-popup-overlay');\n                }\n            }\n        });\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n        args.element.tabIndex = -1;\n        dropDown.element.removeAttribute('type');\n        dropDown.element.onmousedown = function () { proxy.parent.notify(events.selectionSave, {}); };\n        return dropDown;\n    };\n    ToolbarRenderer.prototype.popupModal = function (element) {\n        var popupInst = getInstance(element, Popup);\n        popupInst.relateTo = document.body;\n        popupInst.position = { X: 0, Y: 0 };\n        popupInst.targetType = 'container';\n        popupInst.collision = { X: 'fit', Y: 'fit' };\n        popupInst.offsetY = 4;\n        popupInst.dataBind();\n        this.setIsModel(element);\n    };\n    ToolbarRenderer.prototype.setColorPickerContentWidth = function (colorPicker) {\n        var colorPickerContent = colorPicker.element.nextSibling;\n        if (colorPickerContent.style.width === '0px') {\n            colorPickerContent.style.width = '';\n            var borderWidth = parseInt(getComputedStyle(colorPickerContent).borderBottomWidth, 10);\n            colorPickerContent.style.width = formatUnit(colorPickerContent.children[0].offsetWidth\n                + borderWidth + borderWidth);\n        }\n    };\n    ToolbarRenderer.prototype.renderColorPicker = function (args, item) {\n        var _this = this;\n        var proxy = this;\n        this.colorPicker = new ColorPicker({\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            inline: true,\n            created: function () {\n                var value = (item === 'backgroundcolor') ? proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n                _this.colorPicker.setProperties({ value: value });\n            },\n            mode: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.mode : proxy.parent.fontColor.mode),\n            modeSwitcher: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.modeSwitcher : proxy.parent.fontColor.modeSwitcher),\n            beforeTileRender: function (args) {\n                args.element.classList.add(CLS_COLOR_PALETTE);\n            },\n            change: function (colorPickerArgs) {\n                if (isIDevice()) {\n                    proxy.parent.notify(events.selectionRestore, {});\n                }\n                /* tslint:disable */\n                var colorpickerValue = Browser.info.name === 'msie' || Browser.info.name === 'edge' || isIDevice() ? colorPickerArgs.currentValue.rgba : colorPickerArgs.currentValue.hex;\n                /* tslint:enable */\n                colorPickerArgs.item = {\n                    command: args.command,\n                    subCommand: args.subCommand,\n                    value: colorpickerValue\n                };\n                proxy.currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor = colorpickerValue;\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                    closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n                    proxy.parent.notify(events.tableColorPickerChanged, colorPickerArgs);\n                }\n                else {\n                    proxy.parent.notify(events.colorPickerChanged, colorPickerArgs);\n                }\n                proxy.currentDropdown.toggle();\n            },\n            beforeModeSwitch: function (args) {\n                _this.colorPicker.showButtons = args.mode === 'Palette' ? false : true;\n            }\n        });\n        this.colorPicker.columns = (item === 'backgroundcolor') ? this.parent.backgroundColor.columns : this.parent.fontColor.columns;\n        this.colorPicker.presetColors = (item === 'backgroundcolor') ? this.parent.backgroundColor.colorCode :\n            this.parent.fontColor.colorCode;\n        this.colorPicker.cssClass = (item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER;\n        this.colorPicker.createElement = this.parent.createElement;\n        this.colorPicker.appendTo(document.body.querySelector(args.target));\n        return this.colorPicker;\n    };\n    /**\n     * The function is used to render RichTextEditor toolbar\n     */\n    ToolbarRenderer.prototype.renderPanel = function () {\n        this.getPanel().classList.add(CLS_TOOLBAR);\n    };\n    /**\n     * Get the toolbar element of RichTextEditor\n     * @return {Element}\n     */\n    ToolbarRenderer.prototype.getPanel = function () {\n        return this.toolbarPanel;\n    };\n    /**\n     * Set the toolbar element of RichTextEditor\n     * @param  {Element} panel\n     */\n    ToolbarRenderer.prototype.setPanel = function (panel) {\n        this.toolbarPanel = panel;\n    };\n    return ToolbarRenderer;\n}());\nexport { ToolbarRenderer };\n","import { RenderType } from '../base/enum';\nimport { CLS_HR_SEPARATOR } from '../base/classes';\nimport * as events from '../base/constant';\nimport { getTooltipText, toObjectLowerCase } from '../base/util';\nimport { tools, templateItems } from '../models/items';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar BaseToolbar = /** @class */ (function () {\n    function BaseToolbar(parent, serviceLocator) {\n        this.tools = {};\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = tools;\n        }\n    }\n    BaseToolbar.prototype.addEventListener = function () {\n        this.parent.on(events.rtlMode, this.setRtl, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    BaseToolbar.prototype.removeEventListener = function () {\n        this.parent.off(events.rtlMode, this.setRtl);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    BaseToolbar.prototype.setRtl = function (args) {\n        if (!isNullOrUndefined(this.toolbarObj)) {\n            this.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    BaseToolbar.prototype.getTemplateObject = function (itemStr, container) {\n        var tagName;\n        switch (itemStr) {\n            case 'fontcolor':\n            case 'backgroundcolor':\n                tagName = 'span';\n                break;\n            default:\n                tagName = 'button';\n                break;\n        }\n        return {\n            command: this.tools[itemStr.toLocaleLowerCase()].command,\n            subCommand: this.tools[itemStr.toLocaleLowerCase()].subCommand,\n            template: this.parent.createElement(tagName, {\n                id: this.parent.getID() + '_' + container\n                    + '_' + this.tools[itemStr.toLocaleLowerCase()].id\n            }).outerHTML,\n            tooltipText: getTooltipText(itemStr, this.locator)\n        };\n    };\n    BaseToolbar.prototype.getObject = function (item, container) {\n        var itemStr = item.toLowerCase();\n        if (templateItems.indexOf(itemStr) !== -1) {\n            return this.getTemplateObject(itemStr, container);\n        }\n        else {\n            switch (itemStr) {\n                case '|':\n                    return { type: 'Separator' };\n                case '-':\n                    return { type: 'Separator', cssClass: CLS_HR_SEPARATOR };\n                default:\n                    return {\n                        id: this.parent.getID() + '_' + container + '_' + this.tools[itemStr.toLocaleLowerCase()].id,\n                        prefixIcon: this.tools[itemStr.toLocaleLowerCase()].icon,\n                        tooltipText: getTooltipText(itemStr, this.locator),\n                        command: this.tools[itemStr.toLocaleLowerCase()].command,\n                        subCommand: this.tools[itemStr.toLocaleLowerCase()].subCommand\n                    };\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    BaseToolbar.prototype.getItems = function (tbItems, container) {\n        if (this.parent.toolbarSettings.items.length < 1) {\n            return [];\n        }\n        var items = [];\n        for (var _i = 0, tbItems_1 = tbItems; _i < tbItems_1.length; _i++) {\n            var item = tbItems_1[_i];\n            switch (typeof item) {\n                case 'string':\n                    items.push(this.getObject(item, container));\n                    break;\n                default:\n                    items.push(item);\n            }\n        }\n        return items;\n    };\n    BaseToolbar.prototype.getToolbarOptions = function (args) {\n        return {\n            target: args.target,\n            rteToolbarObj: this,\n            items: this.getItems(args.items, args.container),\n            overflowMode: args.mode,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl\n        };\n    };\n    BaseToolbar.prototype.render = function (args) {\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n        this.toolbarRenderer.renderToolbar(this.getToolbarOptions(args));\n    };\n    return BaseToolbar;\n}());\nexport { BaseToolbar };\n","import { addClass, isNullOrUndefined, removeClass, select, closest } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport { getIndex } from '../base/util';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { getDropDownValue, getFormattedFontSize, getTooltipText } from '../base/util';\nimport * as model from '../models/items';\nimport { dispatchEvent } from '../base/util';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar DropDownButtons = /** @class */ (function () {\n    function DropDownButtons(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    DropDownButtons.prototype.initializeInstance = function () {\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n    };\n    DropDownButtons.prototype.beforeRender = function (args) {\n        var item = args.item;\n        if (item.cssClass) {\n            addClass([args.element], item.cssClass);\n        }\n        if (item.command === 'Alignments' || item.subCommand === 'JustifyLeft'\n            || item.subCommand === 'JustifyRight' || item.subCommand === 'JustifyCenter') {\n            args.element.setAttribute('title', getTooltipText(item.subCommand.toLocaleLowerCase(), this.locator));\n        }\n    };\n    DropDownButtons.prototype.dropdownContent = function (width, type, content) {\n        return ('<span style=\"display: inline-flex;' + 'width:' + ((type === 'quick') ? 'auto' : width) + '\" >' +\n            '<span class=\"e-rte-dropdown-btn-text\">' + content + '</span></span>');\n    };\n    DropDownButtons.prototype.renderDropDowns = function (args) {\n        var _this = this;\n        this.initializeInstance();\n        var type = args.containerType;\n        var tbElement = args.container;\n        model.templateItems.forEach(function (item) {\n            var targetElement = undefined;\n            if (getIndex(item, args.items) !== -1) {\n                switch (item) {\n                    case 'formats':\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_Formats', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        var formatItem = _this.parent.format.types.slice();\n                        formatItem.forEach(function (item) {\n                            Object.defineProperties(item, {\n                                command: { value: 'Formats', enumerable: true }, subCommand: { value: item.value, enumerable: true }\n                            });\n                        });\n                        var formatContent = isNullOrUndefined(_this.parent.format.default) ? formatItem[0].text :\n                            _this.parent.format.default;\n                        _this.formatDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            iconCss: ((type === 'quick') ? 'e-formats e-icons' : ''),\n                            content: _this.dropdownContent(_this.parent.format.width, type, ((type === 'quick') ? '' : getDropDownValue(formatItem, formatContent, 'text', 'text'))),\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_FORMATS_TB_BTN,\n                            itemName: 'Formats', items: formatItem, element: targetElement\n                        });\n                        break;\n                    case 'fontname':\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_FontName', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        var fontItem = _this.parent.fontFamily.items.slice();\n                        fontItem.forEach(function (item) {\n                            Object.defineProperties(item, {\n                                command: { value: 'Font', enumerable: true }, subCommand: { value: 'FontName', enumerable: true }\n                            });\n                        });\n                        var fontNameContent = isNullOrUndefined(_this.parent.fontFamily.default) ? fontItem[0].text :\n                            _this.parent.fontFamily.default;\n                        _this.fontNameDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            iconCss: ((type === 'quick') ? 'e-font-name e-icons' : ''),\n                            content: _this.dropdownContent(_this.parent.fontFamily.width, type, ((type === 'quick') ? '' : getDropDownValue(fontItem, fontNameContent, 'text', 'text'))),\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_FONT_NAME_TB_BTN,\n                            itemName: 'FontName', items: fontItem, element: targetElement\n                        });\n                        if (!isNullOrUndefined(_this.parent.fontFamily.default)) {\n                            _this.getEditNode().style.fontFamily = _this.parent.fontFamily.default;\n                        }\n                        break;\n                    case 'fontsize':\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_FontSize', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        var fontsize = _this.parent.fontSize.items.slice();\n                        fontsize.forEach(function (item) {\n                            Object.defineProperties(item, {\n                                command: { value: 'Font', enumerable: true }, subCommand: { value: 'FontSize', enumerable: true }\n                            });\n                        });\n                        var fontSizeContent = isNullOrUndefined(_this.parent.fontSize.default) ? fontsize[1].text :\n                            _this.parent.fontSize.default;\n                        _this.fontSizeDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            content: _this.dropdownContent(_this.parent.fontSize.width, type, getFormattedFontSize(getDropDownValue(fontsize, fontSizeContent.replace(/\\s/g, ''), 'value', 'text'))),\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_FONT_SIZE_TB_BTN,\n                            itemName: 'FontSize', items: fontsize, element: targetElement\n                        });\n                        if (!isNullOrUndefined(_this.parent.fontSize.default)) {\n                            _this.getEditNode().style.fontSize = _this.parent.fontSize.default;\n                        }\n                        break;\n                    case 'alignments':\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_Alignments', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        _this.alignDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            iconCss: 'e-justify-left e-icons',\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS,\n                            itemName: 'Alignments', items: model.alignmentItems, element: targetElement\n                        });\n                        break;\n                    case 'align':\n                        _this.imageAlignmentDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'display':\n                        _this.imageDisplayDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'tablerows':\n                        _this.rowDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'tablecolumns':\n                        _this.columnDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'tablecellverticalalign':\n                        _this.verticalAlignDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'styles':\n                        _this.tableStylesDropDown(type, tbElement, targetElement);\n                        break;\n                }\n            }\n        });\n    };\n    DropDownButtons.prototype.getUpdateItems = function (items, value) {\n        var dropDownItems = items.slice();\n        dropDownItems.forEach(function (item) {\n            Object.defineProperties(item, {\n                command: { value: (value === 'Format' ? 'Formats' : 'Font'), enumerable: true },\n                subCommand: { value: (value === 'Format' ? item.value : value), enumerable: true }\n            });\n        });\n        return dropDownItems;\n    };\n    DropDownButtons.prototype.onPropertyChanged = function (model) {\n        var newProp = model.newProp;\n        var type;\n        var content;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'fontFamily':\n                    if (this.fontNameDropDown) {\n                        for (var _b = 0, _c = Object.keys(newProp.fontFamily); _b < _c.length; _b++) {\n                            var fontFamily = _c[_b];\n                            switch (fontFamily) {\n                                case 'default':\n                                case 'width':\n                                    var fontItems = this.fontNameDropDown.items;\n                                    type = !isNullOrUndefined(closest(this.fontNameDropDown.element, '.' + classes.CLS_QUICK_TB)) ?\n                                        'quick' : 'toolbar';\n                                    var fontNameContent = isNullOrUndefined(this.parent.fontFamily.default) ? fontItems[0].text :\n                                        this.parent.fontFamily.default;\n                                    content = this.dropdownContent(this.parent.fontFamily.width, type, ((type === 'quick') ? '' : getDropDownValue(fontItems, fontNameContent, 'text', 'text')));\n                                    this.fontNameDropDown.setProperties({ content: content });\n                                    if (!isNullOrUndefined(this.parent.fontFamily.default)) {\n                                        this.getEditNode().style.fontFamily = this.parent.fontFamily.default;\n                                    }\n                                    else {\n                                        this.getEditNode().style.removeProperty('font-family');\n                                    }\n                                    break;\n                                case 'items':\n                                    this.fontNameDropDown.setProperties({\n                                        items: this.getUpdateItems(newProp.fontFamily.items, 'FontSize')\n                                    });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n                case 'fontSize':\n                    if (this.fontSizeDropDown) {\n                        for (var _d = 0, _e = Object.keys(newProp.fontSize); _d < _e.length; _d++) {\n                            var fontSize = _e[_d];\n                            switch (fontSize) {\n                                case 'default':\n                                case 'width':\n                                    var fontsize = this.fontSizeDropDown.items;\n                                    type = !isNullOrUndefined(closest(this.fontSizeDropDown.element, '.' + classes.CLS_QUICK_TB)) ? 'quick' : 'toolbar';\n                                    var fontSizeContent = isNullOrUndefined(this.parent.fontSize.default) ? fontsize[1].text :\n                                        this.parent.fontSize.default;\n                                    content = this.dropdownContent(this.parent.fontSize.width, type, getFormattedFontSize(getDropDownValue(fontsize, fontSizeContent.replace(/\\s/g, ''), 'value', 'text')));\n                                    this.fontSizeDropDown.setProperties({ content: content });\n                                    if (!isNullOrUndefined(this.parent.fontSize.default)) {\n                                        this.getEditNode().style.fontSize = this.parent.fontSize.default;\n                                    }\n                                    else {\n                                        this.getEditNode().style.removeProperty('font-size');\n                                    }\n                                    break;\n                                case 'items':\n                                    this.fontSizeDropDown.setProperties({\n                                        items: this.getUpdateItems(newProp.fontSize.items, 'FontSize')\n                                    });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n                case 'format':\n                    if (this.formatDropDown) {\n                        for (var _f = 0, _g = Object.keys(newProp.format); _f < _g.length; _f++) {\n                            var format = _g[_f];\n                            switch (format) {\n                                case 'default':\n                                case 'width':\n                                    var formatItems = this.formatDropDown.items;\n                                    type = !isNullOrUndefined(closest(this.formatDropDown.element, '.' + classes.CLS_QUICK_TB)) ? 'quick' : 'toolbar';\n                                    var formatContent = isNullOrUndefined(this.parent.format.default) ? formatItems[0].text :\n                                        this.parent.format.default;\n                                    content = this.dropdownContent(this.parent.format.width, type, ((type === 'quick') ? '' : getDropDownValue(formatItems, formatContent, 'text', 'text')));\n                                    this.formatDropDown.setProperties({ content: content });\n                                    break;\n                                case 'types':\n                                    this.formatDropDown.setProperties({\n                                        items: this.getUpdateItems(newProp.format.types, 'Format')\n                                    });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    DropDownButtons.prototype.getEditNode = function () {\n        return this.parent.contentModule.getEditPanel();\n    };\n    DropDownButtons.prototype.rowDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_TableRows', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.tableRowsDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-table-rows e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'TableRows',\n            items: model.tableRowsItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.columnDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_TableColumns', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.tableColumnsDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-table-columns e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'TableColumns',\n            items: model.tableColumnsItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.verticalAlignDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_TableCellVerticalAlign', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.tableCellVerticalAlignDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-table-cell-ver-align e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'TableCellVerticalAlign',\n            items: model.TableCellVerticalAlignItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.imageDisplayDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_Display', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.displayDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-display e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'Display',\n            items: model.imageDisplayItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.imageAlignmentDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_Align', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.imageAlignDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-justify-left e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ICONS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'Align',\n            items: model.imageAlignItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.tableStylesDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_Styles', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.imageAlignDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-style e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ICONS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'Styles',\n            items: this.parent.tableSettings.styles,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.removeDropDownClasses = function (target) {\n        removeClass([target], [\n            classes.CLS_DROPDOWN_BTN,\n            classes.CLS_DROPDOWN_POPUP,\n            classes.CLS_DROPDOWN_ICONS,\n            classes.CLS_DROPDOWN_ITEMS\n        ]);\n    };\n    DropDownButtons.prototype.destroyDropDowns = function () {\n        if (this.formatDropDown) {\n            this.removeDropDownClasses(this.formatDropDown.element);\n            this.formatDropDown.destroy();\n        }\n        if (this.fontNameDropDown) {\n            this.removeDropDownClasses(this.fontNameDropDown.element);\n            this.fontNameDropDown.destroy();\n        }\n        if (this.fontSizeDropDown) {\n            this.removeDropDownClasses(this.fontSizeDropDown.element);\n            this.fontSizeDropDown.destroy();\n        }\n        if (this.alignDropDown) {\n            this.removeDropDownClasses(this.alignDropDown.element);\n            this.alignDropDown.destroy();\n        }\n        if (this.imageAlignDropDown) {\n            this.removeDropDownClasses(this.imageAlignDropDown.element);\n            this.imageAlignDropDown.destroy();\n        }\n        if (this.displayDropDown) {\n            this.removeDropDownClasses(this.displayDropDown.element);\n            this.displayDropDown.destroy();\n        }\n        if (this.tableRowsDropDown) {\n            this.removeDropDownClasses(this.tableRowsDropDown.element);\n            this.tableRowsDropDown.destroy();\n        }\n        if (this.tableColumnsDropDown) {\n            this.removeDropDownClasses(this.tableColumnsDropDown.element);\n            this.tableColumnsDropDown.destroy();\n        }\n        if (this.tableCellVerticalAlignDropDown) {\n            this.removeDropDownClasses(this.tableCellVerticalAlignDropDown.element);\n            this.tableCellVerticalAlignDropDown.destroy();\n        }\n    };\n    DropDownButtons.prototype.setRtl = function (args) {\n        if (this.formatDropDown) {\n            this.formatDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.fontNameDropDown) {\n            this.fontNameDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.fontSizeDropDown) {\n            this.fontSizeDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.alignDropDown) {\n            this.alignDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.imageAlignDropDown) {\n            this.imageAlignDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.displayDropDown) {\n            this.displayDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    DropDownButtons.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.beforeDropDownItemRender, this.beforeRender, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.rtlMode, this.setRtl, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    };\n    DropDownButtons.prototype.onIframeMouseDown = function () {\n        dispatchEvent(document, 'mousedown');\n    };\n    DropDownButtons.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.rtlMode, this.setRtl);\n        this.parent.off(events.beforeDropDownItemRender, this.beforeRender);\n        this.parent.off(events.destroy, this.removeEventListener);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n    };\n    return DropDownButtons;\n}());\nexport { DropDownButtons };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * ServiceLocator\n * @hidden\n */\nvar ServiceLocator = /** @class */ (function () {\n    function ServiceLocator() {\n        this.services = {};\n    }\n    ServiceLocator.prototype.register = function (name, type) {\n        if (isNullOrUndefined(this.services[name])) {\n            this.services[name] = type;\n        }\n    };\n    ServiceLocator.prototype.getService = function (name) {\n        if (isNullOrUndefined(this.services[name])) {\n            throw \"The service \" + name + \" is not registered\";\n        }\n        return this.services[name];\n    };\n    return ServiceLocator;\n}());\nexport { ServiceLocator };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\n/**\n * RendererFactory\n * @hidden\n */\nvar RendererFactory = /** @class */ (function () {\n    function RendererFactory() {\n        this.rendererMap = {};\n    }\n    RendererFactory.prototype.addRenderer = function (name, type) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            this.rendererMap[rName] = type;\n        }\n    };\n    RendererFactory.prototype.getRenderer = function (name) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            throw \"The renderer \" + rName + \" is not found\";\n        }\n        else {\n            return this.rendererMap[rName];\n        }\n    };\n    return RendererFactory;\n}());\nexport { RendererFactory };\n","import { isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { ServiceLocator } from '../services/service-locator';\nimport { RendererFactory } from '../services/renderer-factory';\n/**\n * `ToolbarAction` module is used to toolbar click action\n */\nvar ToolbarAction = /** @class */ (function () {\n    function ToolbarAction(parent) {\n        this.parent = parent;\n        this.addEventListener();\n        this.serviceLocator = new ServiceLocator;\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n    }\n    ToolbarAction.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarClick, this.toolbarClick, this);\n        this.parent.on(events.dropDownSelect, this.dropDownSelect, this);\n        this.parent.on(events.colorPickerChanged, this.renderSelection, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    ToolbarAction.prototype.toolbarClick = function (args) {\n        if (isNOU(args.item)) {\n            return;\n        }\n        if (!isNOU(args.item.controlParent)) {\n            var activeEle = args.item.controlParent\n                .activeEle;\n            if (activeEle) {\n                activeEle.tabIndex = -1;\n            }\n        }\n        this.parent.notify(events.htmlToolbarClick, args);\n        this.parent.notify(events.markdownToolbarClick, args);\n    };\n    ToolbarAction.prototype.dropDownSelect = function (e) {\n        this.parent.notify(events.selectionRestore, {});\n        if (!(document.body.contains(document.body.querySelector('.e-rte-quick-toolbar'))\n            && e.item && (e.item.command === 'Images' || e.item.command === 'Display' || e.item.command === 'Table'))) {\n            this.parent.formatter.process(this.parent, e, e.originalEvent, null);\n        }\n        this.parent.notify(events.selectionSave, {});\n    };\n    ToolbarAction.prototype.renderSelection = function (args) {\n        this.parent.notify(events.selectionRestore, {});\n        this.parent.formatter.process(this.parent, args, args.originalEvent, null);\n        this.parent.notify(events.selectionSave, {});\n    };\n    ToolbarAction.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarClick, this.toolbarClick);\n        this.parent.off(events.dropDownSelect, this.dropDownSelect);\n        this.parent.off(events.colorPickerChanged, this.renderSelection);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    return ToolbarAction;\n}());\nexport { ToolbarAction };\n","import { addClass, Browser, EventHandler, detach, removeClass, select, selectAll, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType, ToolbarType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus, getTBarItemsIndex, getCollection, toObjectLowerCase, isIDevice } from '../base/util';\nimport * as model from '../models/items';\nimport { ToolbarRenderer } from '../renderer/toolbar-renderer';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ToolbarAction } from './toolbar-action';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.parent = parent;\n        this.isToolbar = false;\n        this.locator = serviceLocator;\n        this.isTransformChild = false;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        model.updateDropDownLocale(this.parent);\n        this.renderFactory.addRenderer(RenderType.Toolbar, new ToolbarRenderer(this.parent));\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n        this.baseToolbar = new BaseToolbar(this.parent, this.locator);\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, model.tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = model.tools;\n        }\n    }\n    Toolbar.prototype.initializeInstance = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.editableElement = this.contentRenderer.getEditPanel();\n        this.editPanel = this.contentRenderer.getPanel();\n    };\n    Toolbar.prototype.toolbarBindEvent = function () {\n        if (!this.parent.inlineMode.enable) {\n            this.keyBoardModule = new KeyboardEvents(this.getToolbarElement(), {\n                keyAction: this.toolBarKeyDown.bind(this), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n            });\n        }\n    };\n    Toolbar.prototype.toolBarKeyDown = function (e) {\n        switch (e.action) {\n            case 'escape':\n                this.parent.contentModule.getEditPanel().focus();\n                break;\n        }\n    };\n    Toolbar.prototype.createToolbarElement = function () {\n        this.tbElement = this.parent.createElement('div', { id: this.parent.getID() + '_toolbar' });\n        if (!Browser.isDevice && this.parent.inlineMode.enable && isIDevice()) {\n            return;\n        }\n        else {\n            if (this.parent.toolbarSettings.enableFloating && !this.parent.inlineMode.enable) {\n                this.tbWrapper = this.parent.createElement('div', {\n                    id: this.parent.getID() + '_toolbar_wrapper',\n                    innerHTML: this.tbElement.outerHTML,\n                    className: classes.CLS_TB_WRAP\n                });\n                this.tbElement = this.tbWrapper.firstElementChild;\n                this.parent.element.insertBefore(this.tbWrapper, this.editPanel);\n            }\n            else {\n                this.parent.element.insertBefore(this.tbElement, this.editPanel);\n            }\n        }\n    };\n    Toolbar.prototype.getToolbarMode = function () {\n        var tbMode;\n        switch (this.parent.toolbarSettings.type) {\n            case ToolbarType.Expand:\n                tbMode = 'Extended';\n                break;\n            default:\n                tbMode = 'MultiRow';\n        }\n        return tbMode;\n    };\n    Toolbar.prototype.checkToolbarResponsive = function (ele) {\n        if (!Browser.isDevice || isIDevice()) {\n            return false;\n        }\n        this.baseToolbar.render({\n            container: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items,\n            mode: 'MultiRow',\n            target: ele\n        });\n        addClass([ele], ['e-rte-tb-mobile']);\n        if (this.parent.inlineMode.enable) {\n            this.addFixedTBarClass();\n        }\n        else {\n            addClass([ele], [classes.CLS_TB_STATIC]);\n        }\n        this.wireEvents();\n        this.dropDownModule.renderDropDowns({\n            container: ele,\n            containerType: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items\n        });\n        this.parent.notify(events.renderColorPicker, {\n            container: this.tbElement,\n            containerType: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items\n        });\n        return true;\n    };\n    Toolbar.prototype.checkIsTransformChild = function () {\n        this.isTransformChild = false;\n        var transformElements = selectAll('[style*=\"transform\"]', document);\n        for (var i = 0; i < transformElements.length; i++) {\n            if (!isNullOrUndefined(transformElements[i].contains) && transformElements[i].contains(this.parent.element)) {\n                this.isTransformChild = true;\n                break;\n            }\n        }\n    };\n    Toolbar.prototype.toggleFloatClass = function (e) {\n        var topValue;\n        var isBody = false;\n        var isFloat = false;\n        var scrollParent;\n        var floatOffset = this.parent.floatingToolbarOffset;\n        if (e && e.target !== document) {\n            scrollParent = e.target;\n        }\n        else {\n            isBody = true;\n            scrollParent = document.body;\n        }\n        var tbHeight = this.getToolbarHeight() + this.getExpandTBarPopHeight();\n        if (this.isTransformChild) {\n            topValue = 0;\n            var scrollParentRelativeTop = 0;\n            var trgHeight = this.parent.element.offsetHeight;\n            if (isBody) {\n                var bodyStyle = window.getComputedStyle(scrollParent);\n                scrollParentRelativeTop = parseFloat(bodyStyle.marginTop.split('px')[0]) + parseFloat(bodyStyle.paddingTop.split('px')[0]);\n            }\n            var targetTop = this.parent.element.getBoundingClientRect().top;\n            var scrollParentYOffset = (Browser.isMSPointer && isBody) ? window.pageYOffset : scrollParent.parentElement.scrollTop;\n            var scrollParentRect = scrollParent.getBoundingClientRect();\n            var scrollParentTop = (!isBody) ? scrollParentRect.top : (scrollParentRect.top + scrollParentYOffset);\n            var outOfRange = ((targetTop - ((!isBody) ? scrollParentTop : 0)) + trgHeight > tbHeight + floatOffset) ? false : true;\n            if (targetTop > (scrollParentTop + floatOffset) || targetTop < -trgHeight || ((targetTop < 0) ? outOfRange : false)) {\n                isFloat = false;\n                removeClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n            }\n            else if (targetTop < (scrollParentTop + floatOffset)) {\n                if (targetTop < 0) {\n                    topValue = (-targetTop) + scrollParentTop;\n                }\n                else {\n                    topValue = scrollParentTop - targetTop;\n                }\n                topValue = (isBody) ? topValue - scrollParentRelativeTop : topValue;\n                addClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n                isFloat = true;\n            }\n        }\n        else {\n            var parent_1 = this.parent.element.getBoundingClientRect();\n            if (window.innerHeight < parent_1.top) {\n                return;\n            }\n            topValue = (e && e.target !== document) ? scrollParent.getBoundingClientRect().top : 0;\n            if ((parent_1.bottom < (floatOffset + tbHeight + topValue)) || parent_1.bottom < 0 || parent_1.top > floatOffset + topValue) {\n                isFloat = false;\n            }\n            else if (parent_1.top < floatOffset) {\n                isFloat = true;\n            }\n        }\n        if (!isFloat) {\n            removeClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement, { top: 0 + 'px', width: '100%' });\n        }\n        else {\n            addClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement, { width: this.parent.element.offsetWidth + 'px', top: (floatOffset + topValue) + 'px' });\n        }\n    };\n    Toolbar.prototype.renderToolbar = function () {\n        this.initializeInstance();\n        this.createToolbarElement();\n        if (this.checkToolbarResponsive(this.tbElement)) {\n            return;\n        }\n        if (this.parent.inlineMode.enable) {\n            this.parent.notify(events.renderInlineToolbar, {});\n        }\n        else {\n            this.baseToolbar.render({\n                container: 'toolbar',\n                items: this.parent.toolbarSettings.items,\n                mode: this.getToolbarMode(),\n                target: this.tbElement\n            });\n            if (!this.parent.inlineMode.enable) {\n                if (this.parent.toolbarSettings.enableFloating) {\n                    this.checkIsTransformChild();\n                    this.toggleFloatClass();\n                }\n                if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n                    addClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n                }\n            }\n        }\n        this.wireEvents();\n        if (this.parent.inlineMode.enable && !isIDevice()) {\n            this.addFixedTBarClass();\n        }\n        if (!this.parent.inlineMode.enable) {\n            this.dropDownModule.renderDropDowns({\n                container: this.tbElement,\n                containerType: 'toolbar',\n                items: this.parent.toolbarSettings.items\n            });\n            this.parent.notify(events.renderColorPicker, {\n                container: this.tbElement,\n                containerType: 'toolbar',\n                items: this.parent.toolbarSettings.items\n            });\n            this.refreshToolbarOverflow();\n        }\n    };\n    Toolbar.prototype.addFixedTBarClass = function () {\n        addClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    Toolbar.prototype.removeFixedTBarClass = function () {\n        removeClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    Toolbar.prototype.showFixedTBar = function () {\n        addClass([this.tbElement], [classes.CLS_SHOW]);\n        if (Browser.isIos) {\n            addClass([this.tbElement], [classes.CLS_TB_IOS_FIX]);\n        }\n    };\n    Toolbar.prototype.hideFixedTBar = function () {\n        (!this.isToolbar) ? removeClass([this.tbElement], [classes.CLS_SHOW, classes.CLS_TB_IOS_FIX]) : this.isToolbar = false;\n    };\n    Toolbar.prototype.updateItem = function (args) {\n        var item = this.tools[args.updateItem.toLocaleLowerCase()];\n        var trgItem = this.tools[args.targetItem.toLocaleLowerCase()];\n        var index = getTBarItemsIndex(getCollection(trgItem.subCommand), args.baseToolbar.toolbarObj.items)[0];\n        if (!isNOU(index)) {\n            var prefixId = this.parent.inlineMode.enable ? '_quick_' : '_toolbar_';\n            args.baseToolbar.toolbarObj.items[index].id = this.parent.getID() + prefixId + item.id;\n            args.baseToolbar.toolbarObj.items[index].prefixIcon = item.icon;\n            args.baseToolbar.toolbarObj.items[index].tooltipText = item.tooltip;\n            args.baseToolbar.toolbarObj.items[index].subCommand = item.subCommand;\n            args.baseToolbar.toolbarObj.dataBind();\n        }\n        else {\n            this.addTBarItem(args, 0);\n        }\n    };\n    Toolbar.prototype.updateToolbarStatus = function (args) {\n        if (!this.tbElement || (this.parent.inlineMode.enable && (isIDevice() || !Browser.isDevice))) {\n            return;\n        }\n        var options = {\n            args: args,\n            dropDownModule: this.dropDownModule,\n            parent: this.parent,\n            tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.tbElement),\n            tbItems: this.baseToolbar.toolbarObj.items\n        };\n        setToolbarStatus(options, (this.parent.inlineMode.enable ? true : false));\n    };\n    Toolbar.prototype.fullScreen = function (e) {\n        this.parent.fullScreenModule.showFullScreen(e);\n    };\n    Toolbar.prototype.hideScreen = function (e) {\n        this.parent.fullScreenModule.hideFullScreen(e);\n    };\n    Toolbar.prototype.getBaseToolbar = function () {\n        return this.baseToolbar;\n    };\n    Toolbar.prototype.addTBarItem = function (args, index) {\n        args.baseToolbar.toolbarObj.addItems([args.baseToolbar.getObject(args.updateItem, 'toolbar')], index);\n    };\n    Toolbar.prototype.enableTBarItems = function (baseToolbar, items, isEnable) {\n        var trgItems = getTBarItemsIndex(getCollection(items), baseToolbar.toolbarObj.items);\n        this.tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            var item = this.tbItems[trgItems[i]];\n            if (item) {\n                baseToolbar.toolbarObj.enableItems(item, isEnable);\n            }\n        }\n        if (!select('.e-rte-srctextarea', this.parent.element)) {\n            updateUndoRedoStatus(baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n        }\n    };\n    Toolbar.prototype.removeTBarItems = function (items) {\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var trgItems = getTBarItemsIndex(getCollection(items), this.baseToolbar.toolbarObj.items);\n        this.tbItems = (this.parent.inlineMode.enable) ? selectAll('.' + classes.CLS_TB_ITEM, this.baseToolbar.toolbarObj.element)\n            : selectAll('.' + classes.CLS_TB_ITEM, this.parent.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            this.baseToolbar.toolbarObj.removeItems(this.tbItems[trgItems[i]]);\n        }\n    };\n    Toolbar.prototype.getExpandTBarPopHeight = function () {\n        var popHeight = 0;\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand && this.tbElement.classList.contains('e-extended-toolbar')) {\n            var expandPopup = select('.e-toolbar-extended', this.tbElement);\n            if (expandPopup && this.tbElement.classList.contains('e-expand-open')\n                || expandPopup && expandPopup.classList.contains('e-popup-open')) {\n                addClass([expandPopup], [classes.CLS_VISIBLE]);\n                popHeight = popHeight + expandPopup.offsetHeight;\n                removeClass([expandPopup], [classes.CLS_VISIBLE]);\n            }\n            else {\n                removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n            }\n        }\n        return popHeight;\n    };\n    Toolbar.prototype.getToolbarHeight = function () {\n        return this.tbElement.offsetHeight;\n    };\n    Toolbar.prototype.getToolbarElement = function () {\n        return select('.' + classes.CLS_TOOLBAR, this.parent.element);\n    };\n    Toolbar.prototype.refreshToolbarOverflow = function () {\n        this.baseToolbar.toolbarObj.refreshOverflow();\n    };\n    Toolbar.prototype.isToolbarDestroyed = function () {\n        return this.baseToolbar.toolbarObj && !this.baseToolbar.toolbarObj.isDestroyed;\n    };\n    Toolbar.prototype.destroyToolbar = function () {\n        if (this.isToolbarDestroyed()) {\n            this.parent.unWireScrollElementsEvents();\n            this.unWireEvents();\n            this.parent.notify(events.destroyColorPicker, {});\n            this.dropDownModule.destroyDropDowns();\n            this.baseToolbar.toolbarObj.destroy();\n            this.removeEventListener();\n            removeClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n            var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n            var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n            if (!isNullOrUndefined(tbWrapper)) {\n                detach(tbWrapper);\n            }\n            else if (!isNullOrUndefined(tbElement)) {\n                detach(tbElement);\n            }\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Toolbar.prototype.destroy = function () {\n        if (this.isToolbarDestroyed()) {\n            this.destroyToolbar();\n            if (this.keyBoardModule) {\n                this.keyBoardModule.destroy();\n            }\n        }\n    };\n    Toolbar.prototype.scrollHandler = function (e) {\n        if (!this.parent.inlineMode.enable) {\n            if (this.parent.toolbarSettings.enableFloating) {\n                this.toggleFloatClass(e.args);\n            }\n        }\n    };\n    Toolbar.prototype.mouseDownHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n            this.showFixedTBar();\n        }\n    };\n    Toolbar.prototype.focusChangeHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n            this.isToolbar = false;\n            this.hideFixedTBar();\n        }\n    };\n    Toolbar.prototype.dropDownBeforeOpenHandler = function () {\n        this.isToolbar = true;\n    };\n    Toolbar.prototype.toolbarMouseDownHandler = function (e) {\n        var trg = closest(e.target, '.e-hor-nav');\n        if (trg && this.parent.toolbarSettings.type === ToolbarType.Expand && !isNOU(trg)) {\n            if (!trg.classList.contains('e-nav-active')) {\n                removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n                this.parent.setContentHeight('toolbar', false);\n            }\n            else {\n                addClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n                this.parent.setContentHeight('toolbar', true);\n            }\n        }\n        else if (Browser.isDevice || this.parent.inlineMode.enable) {\n            this.isToolbar = true;\n        }\n        if (isNOU(trg) && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n        }\n    };\n    Toolbar.prototype.wireEvents = function () {\n        if (this.parent.inlineMode.enable && isIDevice()) {\n            return;\n        }\n        EventHandler.add(this.tbElement, 'click mousedown', this.toolbarMouseDownHandler, this);\n    };\n    Toolbar.prototype.unWireEvents = function () {\n        EventHandler.remove(this.tbElement, 'click mousedown', this.toolbarMouseDownHandler);\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.dropDownModule = new DropDownButtons(this.parent, this.locator);\n        this.toolbarActionModule = new ToolbarAction(this.parent);\n        this.parent.on(events.initialEnd, this.renderToolbar, this);\n        this.parent.on(events.scroll, this.scrollHandler, this);\n        this.parent.on(events.bindOnEnd, this.toolbarBindEvent, this);\n        this.parent.on(events.toolbarUpdated, this.updateToolbarStatus, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.refreshBegin, this.onRefresh, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.enableFullScreen, this.fullScreen, this);\n        this.parent.on(events.disableFullScreen, this.hideScreen, this);\n        this.parent.on(events.updateToolbarItem, this.updateItem, this);\n        this.parent.on(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler, this);\n        this.parent.on(events.expandPopupClick, this.parent.setContentHeight, this.parent);\n        this.parent.on(events.focusChange, this.focusChangeHandler, this);\n        this.parent.on(events.mouseDown, this.mouseDownHandler, this);\n        this.parent.on(events.sourceCodeMouseDown, this.mouseDownHandler, this);\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.renderToolbar);\n        this.parent.off(events.scroll, this.scrollHandler);\n        this.parent.off(events.bindOnEnd, this.toolbarBindEvent);\n        this.parent.off(events.toolbarUpdated, this.updateToolbarStatus);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.enableFullScreen, this.parent.fullScreenModule.showFullScreen);\n        this.parent.off(events.disableFullScreen, this.parent.fullScreenModule.hideFullScreen);\n        this.parent.off(events.updateToolbarItem, this.updateItem);\n        this.parent.off(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler);\n        this.parent.off(events.expandPopupClick, this.parent.setContentHeight);\n        this.parent.off(events.focusChange, this.focusChangeHandler);\n        this.parent.off(events.mouseDown, this.mouseDownHandler);\n        this.parent.off(events.sourceCodeMouseDown, this.mouseDownHandler);\n    };\n    Toolbar.prototype.onRefresh = function () {\n        this.refreshToolbarOverflow();\n        this.parent.setContentHeight();\n        this.parent.formatter.undoRedoRefresh(this.parent);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.inlineMode)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'enable':\n                        this.refreshToolbar();\n                        break;\n                }\n            }\n        }\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.refreshToolbar();\n    };\n    Toolbar.prototype.refreshToolbar = function () {\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n        var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n        if (tbElement || tbWrapper) {\n            this.destroyToolbar();\n        }\n        if (this.parent.toolbarSettings.enable) {\n            this.addEventListener();\n            this.renderToolbar();\n            this.parent.wireScrollElementsEvents();\n            if (!select('.e-rte-srctextarea', this.parent.element)) {\n                updateUndoRedoStatus(this.baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n            }\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, NotifyPropertyChanges, Event } from '@syncfusion/ej2-base';\nimport { Base } from '@syncfusion/ej2-base';\nvar keyCode = {\n    'backspace': 8,\n    'tab': 9,\n    'enter': 13,\n    'shift': 16,\n    'control': 17,\n    'alt': 18,\n    'pause': 19,\n    'capslock': 20,\n    'space': 32,\n    'escape': 27,\n    'pageup': 33,\n    'pagedown': 34,\n    'end': 35,\n    'home': 36,\n    'leftarrow': 37,\n    'uparrow': 38,\n    'rightarrow': 39,\n    'downarrow': 40,\n    'insert': 45,\n    'delete': 46,\n    'f1': 112,\n    'f2': 113,\n    'f3': 114,\n    'f4': 115,\n    'f5': 116,\n    'f6': 117,\n    'f7': 118,\n    'f8': 119,\n    'f9': 120,\n    'f10': 121,\n    'f11': 122,\n    'f12': 123,\n    'semicolon': 186,\n    'plus': 187,\n    'comma': 188,\n    'minus': 189,\n    'dot': 190,\n    'forwardslash': 191,\n    'graveaccent': 192,\n    'openbracket': 219,\n    'backslash': 220,\n    'closebracket': 221,\n    'singlequote': 222,\n    ']': 221,\n    '[': 219,\n    '=': 187\n};\n/**\n * KeyboardEvents class enables you to bind key action desired key combinations for ex., Ctrl+A, Delete, Alt+Space etc.\n * ```html\n * <div id='testEle'>  </div>;\n * <script>\n *   let node: HTMLElement = document.querySelector('#testEle');\n *   let kbInstance = new KeyboardEvents({\n *       element: node,\n *       keyConfigs:{ selectAll : 'ctrl+a' },\n *       keyAction: function (e:KeyboardEvent, action:string) {\n *           // handler function code\n *       }\n *   });\n * </script>\n * ```\n */\nvar KeyboardEvents = /** @class */ (function (_super) {\n    __extends(KeyboardEvents, _super);\n    /**\n     * Initializes the KeyboardEvents\n     * @param {HTMLElement} element\n     * @param {KeyboardEventsModel} options\n     */\n    function KeyboardEvents(element, options) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * To handle a key press event returns null\n         */\n        _this.keyPressHandler = function (e) {\n            var isAltKey = e.altKey;\n            var isCtrlKey = e.ctrlKey;\n            var isShiftKey = e.shiftKey;\n            var curkeyCode = e.which;\n            var keys = Object.keys(_this.keyConfigs);\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                var configCollection = _this.keyConfigs[key].split(',');\n                for (var _a = 0, configCollection_1 = configCollection; _a < configCollection_1.length; _a++) {\n                    var rconfig = configCollection_1[_a];\n                    var rKeyObj = KeyboardEvents_1.getKeyConfigData(rconfig.trim());\n                    if (isAltKey === rKeyObj.altKey && isCtrlKey === rKeyObj.ctrlKey &&\n                        isShiftKey === rKeyObj.shiftKey && curkeyCode === rKeyObj.keyCode) {\n                        e.action = key;\n                    }\n                }\n            }\n            if (_this.keyAction) {\n                _this.keyAction(e);\n            }\n        };\n        _this.bind();\n        return _this;\n    }\n    KeyboardEvents_1 = KeyboardEvents;\n    /**\n     * Unwire bound events and destroy the instance.\n     * @return {void}\n     */\n    KeyboardEvents.prototype.destroy = function () {\n        this.unwireEvents();\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * Function can be used to specify certain action if a property is changed\n     * @param newProp\n     * @param oldProp\n     * @returns {void}\n     * @private\n     */\n    KeyboardEvents.prototype.onPropertyChanged = function (newProp, oldProp) {\n        // No code are needed\n    };\n    ;\n    KeyboardEvents.prototype.bind = function () {\n        this.wireEvents();\n    };\n    /**\n     * To get the module name, returns 'keyboard'.\n     * @private\n     */\n    KeyboardEvents.prototype.getModuleName = function () {\n        return 'keyboard';\n    };\n    /**\n     * Wiring event handlers to events\n     */\n    KeyboardEvents.prototype.wireEvents = function () {\n        this.element.addEventListener(this.eventName, this.keyPressHandler);\n    };\n    /**\n     * Unwiring event handlers to events\n     */\n    KeyboardEvents.prototype.unwireEvents = function () {\n        this.element.removeEventListener(this.eventName, this.keyPressHandler);\n    };\n    /**\n     * To get the key configuration data\n     * @param {string} config - configuration data\n     * returns {KeyData}\n     */\n    KeyboardEvents.getKeyConfigData = function (config) {\n        if (config in this.configCache) {\n            return this.configCache[config];\n        }\n        var keys = config.toLowerCase().split('+');\n        var keyData = {\n            altKey: (keys.indexOf('alt') !== -1 ? true : false),\n            ctrlKey: (keys.indexOf('ctrl') !== -1 ? true : false),\n            shiftKey: (keys.indexOf('shift') !== -1 ? true : false),\n            keyCode: null\n        };\n        if (keys[keys.length - 1].length > 1 && !!Number(keys[keys.length - 1])) {\n            keyData.keyCode = Number(keys[keys.length - 1]);\n        }\n        else {\n            keyData.keyCode = KeyboardEvents_1.getKeyCode(keys[keys.length - 1]);\n        }\n        KeyboardEvents_1.configCache[config] = keyData;\n        return keyData;\n    };\n    // Return the keycode value as string \n    KeyboardEvents.getKeyCode = function (keyVal) {\n        return keyCode[keyVal] || keyVal.toUpperCase().charCodeAt(0);\n    };\n    var KeyboardEvents_1;\n    KeyboardEvents.configCache = {};\n    __decorate([\n        Property({})\n    ], KeyboardEvents.prototype, \"keyConfigs\", void 0);\n    __decorate([\n        Property('keyup')\n    ], KeyboardEvents.prototype, \"eventName\", void 0);\n    __decorate([\n        Event()\n    ], KeyboardEvents.prototype, \"keyAction\", void 0);\n    KeyboardEvents = KeyboardEvents_1 = __decorate([\n        NotifyPropertyChanges\n    ], KeyboardEvents);\n    return KeyboardEvents;\n}(Base));\nexport { KeyboardEvents };\n","import { select, detach, extend } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { getIndex, toObjectLowerCase } from '../base/util';\nimport { templateItems, tools } from '../models/items';\n/**\n * `Color Picker` module is used to handle ColorPicker actions.\n */\nvar ColorPickerInput = /** @class */ (function () {\n    function ColorPickerInput(parent, serviceLocator) {\n        this.tools = {};\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = tools;\n        }\n    }\n    ColorPickerInput.prototype.initializeInstance = function () {\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n    };\n    ColorPickerInput.prototype.renderColorPickerInput = function (args) {\n        var _this = this;\n        this.initializeInstance();\n        var suffixID = args.containerType;\n        var tbElement = args.container;\n        var targetID;\n        var options;\n        templateItems.forEach(function (item) {\n            if (getIndex(item, args.items) !== -1) {\n                switch (item) {\n                    case 'fontcolor':\n                        targetID = _this.parent.getID() + '_' + suffixID + '_FontColor_Target';\n                        var fontNode = _this.parent.createElement('input');\n                        fontNode.id = targetID;\n                        fontNode.classList.add(classes.CLS_FONT_COLOR_TARGET);\n                        document.body.appendChild(fontNode);\n                        options = {\n                            cssClass: _this.tools[item.toLocaleLowerCase()].icon\n                                + ' ' + classes.CLS_RTE_ELEMENTS + ' ' + classes.CLS_ICONS,\n                            value: _this.tools[item.toLocaleLowerCase()].value,\n                            command: _this.tools[item.toLocaleLowerCase()].command,\n                            subCommand: _this.tools[item.toLocaleLowerCase()].subCommand,\n                            element: select('#' + _this.parent.getID() + '_' + suffixID + '_FontColor', tbElement),\n                            target: ('#' + targetID)\n                        };\n                        _this.fontColorPicker = _this.toolbarRenderer.renderColorPicker(options, 'fontcolor');\n                        _this.fontColorDropDown = _this.toolbarRenderer.renderColorPickerDropDown(options, 'fontcolor', _this.fontColorPicker);\n                        break;\n                    case 'backgroundcolor':\n                        targetID = _this.parent.getID() + '_' + suffixID + '_BackgroundColor_Target';\n                        var backNode = _this.parent.createElement('input');\n                        backNode.id = targetID;\n                        backNode.classList.add(classes.CLS_BACKGROUND_COLOR_TARGET);\n                        document.body.appendChild(backNode);\n                        options = {\n                            cssClass: _this.tools[item.toLocaleLowerCase()].icon\n                                + ' ' + classes.CLS_RTE_ELEMENTS + ' ' + classes.CLS_ICONS,\n                            value: _this.tools[item.toLocaleLowerCase()].value,\n                            command: _this.tools[item.toLocaleLowerCase()].command,\n                            subCommand: _this.tools[item.toLocaleLowerCase()].subCommand,\n                            element: select('#' + _this.parent.getID() + '_' + suffixID + '_BackgroundColor', tbElement),\n                            target: ('#' + targetID)\n                        };\n                        _this.backgroundColorPicker = _this.toolbarRenderer.renderColorPicker(options, 'backgroundcolor');\n                        _this.backgroundColorDropDown = _this.toolbarRenderer.renderColorPickerDropDown(options, 'backgroundcolor', _this.backgroundColorPicker);\n                        break;\n                }\n            }\n        });\n    };\n    ColorPickerInput.prototype.destroy = function () {\n        this.removeEventListener();\n        this.destroyColorPicker();\n    };\n    ColorPickerInput.prototype.destroyColorPicker = function () {\n        if (this.fontColorPicker && !this.fontColorPicker.isDestroyed) {\n            this.fontColorPicker.destroy();\n        }\n        if (this.backgroundColorPicker && !this.backgroundColorPicker.isDestroyed) {\n            this.backgroundColorPicker.destroy();\n        }\n        if (this.fontColorDropDown && !this.fontColorDropDown.isDestroyed) {\n            var innerEle = this.fontColorDropDown.element.querySelector('.e-rte-color-content');\n            if (innerEle) {\n                detach(innerEle);\n            }\n            this.fontColorDropDown.destroy();\n        }\n        if (this.backgroundColorDropDown && !this.backgroundColorDropDown.isDestroyed) {\n            var innerEle = this.backgroundColorDropDown.element.querySelector('.e-rte-color-content');\n            if (innerEle) {\n                detach(innerEle);\n            }\n            this.backgroundColorDropDown.destroy();\n        }\n    };\n    ColorPickerInput.prototype.setRtl = function (args) {\n        if (this.fontColorPicker) {\n            this.fontColorPicker.setProperties({ enableRtl: args.enableRtl });\n            this.fontColorDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.backgroundColorPicker) {\n            this.backgroundColorPicker.setProperties({ enableRtl: args.enableRtl });\n            this.backgroundColorDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    ColorPickerInput.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarRenderComplete, this.renderColorPickerInput, this);\n        this.parent.on(events.rtlMode, this.setRtl, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.destroyColorPicker, this.destroyColorPicker, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    };\n    ColorPickerInput.prototype.onPropertyChanged = function (model) {\n        var newProp = model.newProp;\n        var element;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'fontColor':\n                    if (this.fontColorPicker) {\n                        for (var _b = 0, _c = Object.keys(newProp.fontColor); _b < _c.length; _b++) {\n                            var font = _c[_b];\n                            switch (font) {\n                                case 'default':\n                                    this.fontColorPicker.setProperties({ value: newProp.fontColor.default });\n                                    element = this.fontColorDropDown.element;\n                                    var fontBorder = element.querySelector('.' + this.tools['fontcolor'].icon);\n                                    fontBorder.style.borderBottomColor = newProp.fontColor.default;\n                                    break;\n                                case 'mode':\n                                    this.fontColorPicker.setProperties({ mode: newProp.fontColor.mode });\n                                    break;\n                                case 'columns':\n                                    this.fontColorPicker.setProperties({ columns: newProp.fontColor.columns });\n                                    break;\n                                case 'colorCode':\n                                    this.fontColorPicker.setProperties({ presetColors: newProp.fontColor.colorCode });\n                                    break;\n                                case 'modeSwitcher':\n                                    this.fontColorPicker.setProperties({ modeSwitcher: newProp.fontColor.modeSwitcher });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n                case 'backgroundColor':\n                    if (this.backgroundColorPicker) {\n                        for (var _d = 0, _e = Object.keys(newProp.backgroundColor); _d < _e.length; _d++) {\n                            var background = _e[_d];\n                            switch (background) {\n                                case 'default':\n                                    this.backgroundColorPicker.setProperties({ value: newProp.backgroundColor.default });\n                                    element = this.backgroundColorDropDown.element;\n                                    var backgroundBorder = element.querySelector('.' + this.tools['backgroundcolor'].icon);\n                                    backgroundBorder.style.borderBottomColor = newProp.backgroundColor.default;\n                                    break;\n                                case 'mode':\n                                    this.backgroundColorPicker.setProperties({ mode: newProp.backgroundColor.mode });\n                                    break;\n                                case 'columns':\n                                    this.backgroundColorPicker.setProperties({ columns: newProp.backgroundColor.columns });\n                                    break;\n                                case 'colorCode':\n                                    this.backgroundColorPicker.setProperties({ presetColors: newProp.backgroundColor.colorCode });\n                                    break;\n                                case 'modeSwitcher':\n                                    this.backgroundColorPicker.setProperties({ modeSwitcher: newProp.backgroundColor.modeSwitcher });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    ColorPickerInput.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarRenderComplete, this.renderColorPickerInput);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.rtlMode, this.setRtl);\n        this.parent.off(events.destroyColorPicker, this.destroyColorPicker);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n    };\n    return ColorPickerInput;\n}());\nexport { ColorPickerInput };\n","import { detach, getUniqueID, append, closest, selectAll, select, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, Browser, isNullOrUndefined, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { isCollide } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus, isIDevice } from '../base/util';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ColorPickerInput } from './color-picker';\n/**\n * `Quick toolbar` module is used to handle Quick toolbar actions.\n */\nvar BaseQuickToolbar = /** @class */ (function () {\n    function BaseQuickToolbar(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.isDOMElement = false;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.popupRenderer = this.renderFactory.getRenderer(RenderType.Popup);\n        this.dropDownButtons = new DropDownButtons(this.parent, this.locator);\n        this.colorPickerObj = new ColorPickerInput(this.parent, this.locator);\n    }\n    BaseQuickToolbar.prototype.appendPopupContent = function () {\n        this.toolbarElement = this.parent.createElement('div', { className: classes.CLS_QUICK_TB });\n        this.element.appendChild(this.toolbarElement);\n    };\n    BaseQuickToolbar.prototype.render = function (args) {\n        var className;\n        if (args.popupType === 'Image') {\n            className = classes.CLS_IMAGE_POP;\n        }\n        else if (args.popupType === 'Inline') {\n            className = classes.CLS_INLINE_POP;\n        }\n        else {\n            className = '';\n        }\n        var popupId = getUniqueID(args.popupType + '_Quick_Popup');\n        this.stringItems = args.toolbarItems;\n        this.element = this.parent.createElement('div', { id: popupId, className: className + ' ' + classes.CLS_RTE_ELEMENTS });\n        this.element.setAttribute('aria-owns', this.parent.getID());\n        this.appendPopupContent();\n        this.createToolbar(args.toolbarItems, args.mode);\n        this.popupRenderer.renderPopup(this);\n        this.addEventListener();\n    };\n    BaseQuickToolbar.prototype.createToolbar = function (items, mode) {\n        this.quickTBarObj = new BaseToolbar(this.parent, this.locator);\n        this.quickTBarObj.render({\n            container: 'quick',\n            target: this.toolbarElement,\n            items: items,\n            mode: mode\n        });\n        this.quickTBarObj.toolbarObj.refresh();\n    };\n    BaseQuickToolbar.prototype.setPosition = function (e) {\n        var x;\n        var y;\n        var imgWrapper = closest(e.target, '.e-img-caption');\n        var target = !isNOU(imgWrapper) ? imgWrapper : e.target;\n        addClass([this.toolbarElement], [classes.CLS_RM_WHITE_SPACE]);\n        var targetOffsetTop = target.offsetTop;\n        var parentOffsetTop = window.pageYOffset + e.parentData.top;\n        if ((targetOffsetTop - e.editTop) > e.popHeight) {\n            y = parentOffsetTop + e.tBarElementHeight + (targetOffsetTop - e.editTop) - e.popHeight - 5;\n        }\n        else if (((e.editTop + e.editHeight) - (targetOffsetTop + target.offsetHeight)) > e.popHeight) {\n            y = parentOffsetTop + e.tBarElementHeight + (targetOffsetTop - e.editTop) + target.offsetHeight + 5;\n        }\n        else {\n            y = e.y;\n        }\n        if (target.offsetWidth > e.popWidth) {\n            x = (target.offsetWidth / 2) - (e.popWidth / 2) + e.parentData.left + target.offsetLeft;\n        }\n        else {\n            x = e.parentData.left + target.offsetLeft;\n        }\n        this.popupObj.position.X = ((x + e.popWidth) > e.parentData.right) ? e.parentData.right - e.popWidth : x;\n        this.popupObj.position.Y = y;\n        this.popupObj.dataBind();\n        removeClass([this.toolbarElement], [classes.CLS_RM_WHITE_SPACE]);\n    };\n    BaseQuickToolbar.prototype.checkCollision = function (e, viewPort, type) {\n        var x;\n        var y;\n        var parentTop = e.parentData.top;\n        var contentTop = e.windowY + parentTop + e.tBarElementHeight;\n        var collision = [];\n        if (viewPort === 'document') {\n            collision = isCollide(e.popup);\n        }\n        else {\n            collision = isCollide(e.popup, e.parentElement);\n        }\n        for (var i = 0; i < collision.length; i++) {\n            switch (collision[i]) {\n                case 'top':\n                    if (viewPort === 'document') {\n                        y = e.windowY;\n                    }\n                    else {\n                        y = (window.pageYOffset + parentTop) + e.tBarElementHeight;\n                    }\n                    break;\n                case 'bottom':\n                    var posY = void 0;\n                    if (viewPort === 'document') {\n                        if (type === 'inline') {\n                            posY = (e.y - e.popHeight - 10);\n                        }\n                        else {\n                            if ((e.windowHeight - (parentTop + e.tBarElementHeight)) > e.popHeight) {\n                                if ((contentTop - e.windowHeight) > e.popHeight) {\n                                    posY = (contentTop + (e.windowHeight - parentTop)) - e.popHeight;\n                                }\n                                else {\n                                    posY = contentTop;\n                                }\n                            }\n                            else {\n                                posY = e.windowY + (parentTop + e.tBarElementHeight);\n                            }\n                        }\n                    }\n                    else {\n                        if (e.target.tagName !== 'IMG') {\n                            posY = (e.parentData.bottom + window.pageYOffset) - e.popHeight - 10;\n                        }\n                        else {\n                            posY = (e.parentData.bottom + window.pageYOffset) - e.popHeight - 5;\n                        }\n                    }\n                    y = posY;\n                    break;\n                case 'right':\n                    if (type === 'inline') {\n                        x = e.windowWidth - (e.popWidth + e.bodyRightSpace + 10);\n                    }\n                    else {\n                        x = e.x - (e.popWidth + e.parentData.left);\n                    }\n                    break;\n                case 'left':\n                    if (type === 'inline') {\n                        x = 0;\n                    }\n                    else {\n                        x = e.parentData.left;\n                    }\n                    break;\n            }\n        }\n        this.popupObj.position.X = (x) ? x : this.popupObj.position.X;\n        this.popupObj.position.Y = (y) ? y : this.popupObj.position.Y;\n        this.popupObj.dataBind();\n    };\n    BaseQuickToolbar.prototype.showPopup = function (x, y, target) {\n        var editPanelTop;\n        var editPanelHeight;\n        var bodyStyle = window.getComputedStyle(document.body);\n        var bodyRight = parseFloat(bodyStyle.marginRight.split('px')[0]) + parseFloat(bodyStyle.paddingRight.split('px')[0]);\n        var windowHeight = window.innerHeight;\n        var windowWidth = window.innerWidth;\n        var parent = this.parent.element;\n        var toolbarAvail = !isNullOrUndefined(this.parent.getToolbar());\n        var tbHeight = toolbarAvail && this.parent.toolbarModule.getToolbarHeight();\n        var expTBHeight = toolbarAvail && this.parent.toolbarModule.getExpandTBarPopHeight();\n        var tBarHeight = (toolbarAvail) ? (tbHeight + expTBHeight) : 0;\n        addClass([this.element], [classes.CLS_HIDE]);\n        if (Browser.isDevice && !isIDevice()) {\n            addClass([this.parent.getToolbar()], [classes.CLS_HIDE]);\n        }\n        if (this.parent.iframeSettings.enable) {\n            var cntEle = this.contentRenderer.getPanel().contentWindow;\n            editPanelTop = cntEle.pageYOffset;\n            editPanelHeight = cntEle.innerHeight;\n        }\n        else {\n            var cntEle = closest(target, '.' + classes.CLS_RTE_CONTENT);\n            editPanelTop = (cntEle) ? cntEle.scrollTop : 0;\n            editPanelHeight = (cntEle) ? cntEle.offsetHeight : 0;\n        }\n        if (!this.parent.inlineMode.enable && !closest(target, 'table')) {\n            this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n            this.parent.enableToolbarItem(['Undo', 'Redo']);\n        }\n        append([this.element], document.body);\n        this.popupObj.position.X = x + 20;\n        this.popupObj.position.Y = y + ((this.parent.iframeSettings.enable) ? 35 : 20);\n        this.popupObj.dataBind();\n        this.popupObj.show();\n        this.dropDownButtons.renderDropDowns({\n            container: this.toolbarElement,\n            containerType: 'quick',\n            items: this.stringItems\n        });\n        this.colorPickerObj.renderColorPickerInput({\n            container: this.toolbarElement,\n            containerType: 'quick',\n            items: this.stringItems\n        });\n        var showPopupData = {\n            x: x, y: y,\n            target: target,\n            editTop: editPanelTop,\n            editHeight: editPanelHeight,\n            popup: this.popupObj.element,\n            popHeight: this.popupObj.element.offsetHeight,\n            popWidth: this.popupObj.element.offsetWidth,\n            parentElement: parent,\n            bodyRightSpace: bodyRight,\n            windowY: window.pageYOffset,\n            windowHeight: windowHeight,\n            windowWidth: windowWidth,\n            parentData: parent.getBoundingClientRect(),\n            tBarElementHeight: tBarHeight\n        };\n        if (target.tagName === 'IMG') {\n            this.setPosition(showPopupData);\n        }\n        if (!this.parent.inlineMode.enable) {\n            this.checkCollision(showPopupData, 'parent', '');\n        }\n        this.checkCollision(showPopupData, 'document', ((this.parent.inlineMode.enable) ? 'inline' : ''));\n        this.popupObj.hide();\n        removeClass([this.element], [classes.CLS_HIDE]);\n        this.popupObj.show({ name: 'ZoomIn', duration: 400 });\n        setStyleAttribute(this.element, {\n            maxWidth: this.parent.element.offsetWidth + 'px'\n        });\n        addClass([this.element], [classes.CLS_POP]);\n        this.isDOMElement = true;\n    };\n    BaseQuickToolbar.prototype.hidePopup = function () {\n        var viewSourcePanel = this.parent.sourceCodeModule.getViewPanel();\n        if (Browser.isDevice && !isIDevice()) {\n            removeClass([this.parent.getToolbar()], [classes.CLS_HIDE]);\n        }\n        if (!isNullOrUndefined(this.parent.getToolbar()) && !this.parent.inlineMode.enable) {\n            if (isNullOrUndefined(viewSourcePanel) || viewSourcePanel.style.display === 'none') {\n                this.parent.enableToolbarItem(this.parent.toolbarSettings.items);\n            }\n        }\n        this.removeEleFromDOM();\n        this.isDOMElement = false;\n    };\n    /**\n     * @hidden\n     */\n    BaseQuickToolbar.prototype.addQTBarItem = function (item, index) {\n        this.quickTBarObj.toolbarObj.addItems(this.quickTBarObj.getItems(item, 'toolbar'), index);\n    };\n    /**\n     * @hidden\n     */\n    BaseQuickToolbar.prototype.removeQTBarItem = function (index) {\n        this.quickTBarObj.toolbarObj.removeItems(index);\n    };\n    BaseQuickToolbar.prototype.removeEleFromDOM = function () {\n        var element = this.popupObj.element;\n        if (this.isDOMElement) {\n            this.dropDownButtons.destroyDropDowns();\n            this.colorPickerObj.destroyColorPicker();\n            removeClass([this.element], [classes.CLS_POP]);\n            detach(element);\n        }\n    };\n    BaseQuickToolbar.prototype.updateStatus = function (args) {\n        var options = {\n            args: args,\n            dropDownModule: this.dropDownButtons,\n            parent: this.parent,\n            tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.element),\n            tbItems: this.quickTBarObj.toolbarObj.items\n        };\n        setToolbarStatus(options, true);\n        if (!select('.e-rte-srctextarea', this.parent.element)) {\n            updateUndoRedoStatus(this.parent.getBaseToolbarObject(), this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n        }\n    };\n    /**\n     * Destroys the Quick toolbar.\n     * @method destroy\n     * @return {void}\n     */\n    BaseQuickToolbar.prototype.destroy = function () {\n        if (this.popupObj && !this.popupObj.isDestroyed) {\n            this.popupObj.destroy();\n            this.removeEleFromDOM();\n        }\n        this.removeEventListener();\n    };\n    BaseQuickToolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        if (this.parent.inlineMode.enable) {\n            this.parent.on(events.toolbarUpdated, this.updateStatus, this);\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    BaseQuickToolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.inlineMode)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'enable':\n                        if (e.newProp.inlineMode.enable) {\n                            this.parent.on(events.toolbarUpdated, this.updateStatus, this);\n                        }\n                        else {\n                            this.parent.off(events.toolbarUpdated, this.updateStatus);\n                        }\n                        break;\n                }\n            }\n        }\n    };\n    BaseQuickToolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        if (this.parent.inlineMode.enable) {\n            this.parent.off(events.toolbarUpdated, this.updateStatus);\n        }\n    };\n    return BaseQuickToolbar;\n}());\nexport { BaseQuickToolbar };\n","import { Popup } from '@syncfusion/ej2-popups';\nimport { CLS_QUICK_POP } from '../base/classes';\nimport { popupOpen } from '../base/constant';\n/**\n * `Popup renderer` module is used to render popup in RichTextEditor.\n * @hidden\n */\nvar PopupRenderer = /** @class */ (function () {\n    /**\n     * Constructor for popup renderer module\n     */\n    function PopupRenderer(parent) {\n        this.parent = parent;\n    }\n    PopupRenderer.prototype.popupOpen = function () {\n        this.parent.notify(popupOpen, this);\n    };\n    PopupRenderer.prototype.renderPopup = function (args) {\n        this.setPanel(args.element);\n        this.renderPanel();\n        args.popupObj = new Popup(args.element, {\n            targetType: 'relative',\n            relateTo: this.parent.element,\n            open: this.popupOpen.bind(this)\n        });\n        this.popupObj = args.popupObj;\n        args.popupObj.hide();\n    };\n    /**\n     * The function is used to add popup class in Quick Toolbar\n     */\n    PopupRenderer.prototype.renderPanel = function () {\n        this.getPanel().classList.add(CLS_QUICK_POP);\n    };\n    /**\n     * Get the popup element of RichTextEditor\n     * @return {Element}\n     */\n    PopupRenderer.prototype.getPanel = function () {\n        return this.popupPanel;\n    };\n    /**\n     * Set the popup element of RichTextEditor\n     * @param  {Element} panel\n     */\n    PopupRenderer.prototype.setPanel = function (panel) {\n        this.popupPanel = panel;\n    };\n    return PopupRenderer;\n}());\nexport { PopupRenderer };\n","import { select, isNullOrUndefined, Browser, addClass, removeClass, EventHandler, closest } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport { pageYOffset, hasClass, isIDevice } from '../base/util';\nimport { BaseQuickToolbar } from './base-quick-toolbar';\nimport { PopupRenderer } from '../renderer/popup-renderer';\nimport { CLS_INLINE_POP, CLS_INLINE } from '../base/classes';\n/**\n * `Quick toolbar` module is used to handle Quick toolbar actions.\n */\nvar QuickToolbar = /** @class */ (function () {\n    function QuickToolbar(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.renderFactory.addRenderer(RenderType.Popup, new PopupRenderer(this.parent));\n        this.addEventListener();\n    }\n    QuickToolbar.prototype.formatItems = function (items) {\n        var formattedItems = [];\n        items.forEach(function (item) {\n            if (typeof item === 'string') {\n                switch (item.toLocaleLowerCase()) {\n                    case 'open':\n                        formattedItems.push('openLink');\n                        break;\n                    case 'edit':\n                        formattedItems.push('editLink');\n                        break;\n                    case 'unlink':\n                        formattedItems.push('removeLink');\n                        break;\n                    default:\n                        formattedItems.push(item);\n                        break;\n                }\n            }\n            else {\n                formattedItems.push(item);\n            }\n        });\n        return formattedItems;\n    };\n    QuickToolbar.prototype.getQTBarOptions = function (popType, mode, items, type) {\n        return {\n            popupType: popType,\n            toolbarItems: items,\n            mode: mode,\n            renderType: type\n        };\n    };\n    QuickToolbar.prototype.createQTBar = function (popupType, mode, items, type) {\n        if (items.length < 1) {\n            return null;\n        }\n        var qTBar = new BaseQuickToolbar(this.parent, this.locator);\n        qTBar.render(this.getQTBarOptions(popupType, mode, this.formatItems(items), type));\n        return qTBar;\n    };\n    QuickToolbar.prototype.initializeQuickToolbars = function () {\n        this.parent.quickToolbarModule = this;\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        if (this.parent.inlineMode.enable && this.parent.inlineMode.onSelection && isIDevice()) {\n            EventHandler.add(this.contentRenderer.getDocument(), 'selectionchange', this.selectionChangeHandler, this);\n        }\n    };\n    QuickToolbar.prototype.onMouseDown = function (e) {\n        this.parent.isBlur = false;\n        this.parent.isRTE = true;\n    };\n    QuickToolbar.prototype.renderQuickToolbars = function () {\n        if (this.linkQTBar || this.imageQTBar || this.textQTBar || this.tableQTBar) {\n            return;\n        }\n        this.linkQTBar = this.createQTBar('Link', 'Scrollable', this.parent.quickToolbarSettings.link, RenderType.LinkToolbar);\n        this.renderFactory.addRenderer(RenderType.LinkToolbar, this.linkQTBar);\n        this.textQTBar = this.createQTBar('Text', 'Scrollable', this.parent.quickToolbarSettings.text, RenderType.TextToolbar);\n        this.renderFactory.addRenderer(RenderType.TextToolbar, this.textQTBar);\n        this.imageQTBar = this.createQTBar('Image', 'MultiRow', this.parent.quickToolbarSettings.image, RenderType.ImageToolbar);\n        this.renderFactory.addRenderer(RenderType.ImageToolbar, this.imageQTBar);\n        this.tableQTBar = this.createQTBar('Table', 'MultiRow', this.parent.quickToolbarSettings.table, RenderType.TableToolbar);\n        this.renderFactory.addRenderer(RenderType.TableToolbar, this.tableQTBar);\n        if (this.linkQTBar) {\n            EventHandler.add(this.linkQTBar.element, 'mousedown', this.onMouseDown, this);\n        }\n        if (this.imageQTBar) {\n            EventHandler.add(this.imageQTBar.element, 'mousedown', this.onMouseDown, this);\n        }\n        if (this.textQTBar) {\n            EventHandler.add(this.textQTBar.element, 'mousedown', this.onMouseDown, this);\n        }\n        if (this.tableQTBar) {\n            EventHandler.add(this.tableQTBar.element, 'mousedown', this.onMouseDown, this);\n        }\n    };\n    QuickToolbar.prototype.renderInlineQuickToolbar = function () {\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            addClass([this.parent.element], [CLS_INLINE]);\n            this.inlineQTBar = this.createQTBar('Inline', 'MultiRow', this.parent.toolbarSettings.items, RenderType.InlineToolbar);\n            this.renderFactory.addRenderer(RenderType.InlineToolbar, this.inlineQTBar);\n            EventHandler.add(this.inlineQTBar.element, 'mousedown', this.onMouseDown, this);\n        }\n    };\n    QuickToolbar.prototype.showInlineQTBar = function (x, y, target) {\n        this.inlineQTBar.showPopup(x, y, target);\n    };\n    QuickToolbar.prototype.hideInlineQTBar = function () {\n        if (this.inlineQTBar && !hasClass(this.inlineQTBar.element, 'e-popup-close')) {\n            this.inlineQTBar.hidePopup();\n        }\n    };\n    QuickToolbar.prototype.hideQuickToolbars = function () {\n        if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close')) {\n            this.linkQTBar.hidePopup();\n        }\n        if (this.textQTBar && !hasClass(this.textQTBar.element, 'e-popup-close')) {\n            this.textQTBar.hidePopup();\n        }\n        if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n            this.imageQTBar.hidePopup();\n        }\n        if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close')) {\n            this.tableQTBar.hidePopup();\n        }\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            this.hideInlineQTBar();\n        }\n    };\n    QuickToolbar.prototype.deBounce = function (x, y, target) {\n        var _this = this;\n        clearTimeout(this.deBouncer);\n        this.deBouncer = window.setTimeout(function () { _this.showInlineQTBar(x, y, target); }, 1000);\n    };\n    QuickToolbar.prototype.mouseUpHandler = function (e) {\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            var coordinates = void 0;\n            coordinates = e.args.touches ? e.args.changedTouches[0] : e.args;\n            var range = this.parent.getRange();\n            var target = e.args.target;\n            if (isNullOrUndefined(select('.' + CLS_INLINE_POP, document.body))) {\n                if (isIDevice() && e.touchData && e.touchData.prevClientX !== e.touchData.clientX\n                    && e.touchData.prevClientY !== e.touchData.clientY) {\n                    return;\n                }\n                this.hideInlineQTBar();\n                this.offsetX = coordinates.pageX;\n                this.offsetY = pageYOffset(coordinates, this.parent.element, this.parent.iframeSettings.enable);\n                if (target.nodeName === 'TEXTAREA') {\n                    this.showInlineQTBar(this.offsetX, this.offsetY, target);\n                }\n                else {\n                    var closestAnchor = closest(target, 'a');\n                    target = closestAnchor ? closestAnchor : target;\n                    if (target.tagName !== 'IMG' && target.tagName !== 'A' && (!closest(target, 'td,th') || !range.collapsed)) {\n                        if (this.parent.inlineMode.onSelection && range.collapsed) {\n                            return;\n                        }\n                        this.target = target;\n                        this.showInlineQTBar(this.offsetX, this.offsetY, target);\n                    }\n                }\n            }\n        }\n    };\n    QuickToolbar.prototype.keyDownHandler = function () {\n        if ((this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice()))\n            && !isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n            this.hideInlineQTBar();\n        }\n    };\n    QuickToolbar.prototype.inlineQTBarMouseDownHandler = function () {\n        if ((this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice()))\n            && !isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n            this.hideInlineQTBar();\n        }\n    };\n    QuickToolbar.prototype.keyUpHandler = function (e) {\n        if (this.parent.inlineMode.enable && !Browser.isDevice) {\n            if (this.parent.inlineMode.onSelection) {\n                return;\n            }\n            var args = e.args;\n            this.deBounce(this.offsetX, this.offsetY, args.target);\n        }\n    };\n    QuickToolbar.prototype.getInlineBaseToolbar = function () {\n        return this.inlineQTBar && this.inlineQTBar.quickTBarObj;\n    };\n    QuickToolbar.prototype.selectionChangeHandler = function (e) {\n        var _this = this;\n        clearTimeout(this.deBouncer);\n        this.deBouncer = window.setTimeout(function () { _this.onSelectionChange(e); }, 1000);\n    };\n    QuickToolbar.prototype.onSelectionChange = function (e) {\n        if (!isNullOrUndefined(select('.' + CLS_INLINE_POP, document.body))) {\n            return;\n        }\n        var selection = this.contentRenderer.getDocument().getSelection();\n        if (!selection.isCollapsed) {\n            this.mouseUpHandler({ args: e });\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    QuickToolbar.prototype.destroy = function () {\n        if (this.linkQTBar) {\n            EventHandler.remove(this.linkQTBar.element, 'mousedown', this.onMouseDown);\n            this.linkQTBar.destroy();\n        }\n        if (this.textQTBar) {\n            EventHandler.remove(this.textQTBar.element, 'mousedown', this.onMouseDown);\n            this.textQTBar.destroy();\n        }\n        if (this.imageQTBar) {\n            EventHandler.remove(this.imageQTBar.element, 'mousedown', this.onMouseDown);\n            this.imageQTBar.destroy();\n        }\n        if (this.tableQTBar) {\n            EventHandler.remove(this.tableQTBar.element, 'mousedown', this.onMouseDown);\n            this.tableQTBar.destroy();\n        }\n        if (this.inlineQTBar) {\n            EventHandler.remove(this.inlineQTBar.element, 'mousedown', this.onMouseDown);\n            if (isIDevice()) {\n                EventHandler.remove(document, 'selectionchange', this.selectionChangeHandler);\n            }\n            this.inlineQTBar.destroy();\n        }\n        this.removeEventListener();\n    };\n    QuickToolbar.prototype.wireInlineQTBarEvents = function () {\n        this.parent.on(events.mouseUp, this.mouseUpHandler, this);\n        this.parent.on(events.mouseDown, this.inlineQTBarMouseDownHandler, this);\n        this.parent.on(events.keyDown, this.keyDownHandler, this);\n        this.parent.on(events.keyUp, this.keyUpHandler, this);\n        this.parent.on(events.sourceCodeMouseDown, this.mouseUpHandler, this);\n        this.parent.on(events.renderInlineToolbar, this.renderInlineQuickToolbar, this);\n    };\n    QuickToolbar.prototype.unWireInlineQTBarEvents = function () {\n        this.parent.off(events.mouseUp, this.mouseUpHandler);\n        this.parent.off(events.mouseDown, this.inlineQTBarMouseDownHandler);\n        this.parent.off(events.keyDown, this.keyDownHandler);\n        this.parent.off(events.keyUp, this.keyUpHandler);\n        this.parent.off(events.sourceCodeMouseDown, this.mouseUpHandler);\n        this.parent.off(events.renderInlineToolbar, this.renderInlineQuickToolbar);\n    };\n    QuickToolbar.prototype.toolbarUpdated = function (args) {\n        if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close')) {\n            this.linkQTBar.hidePopup();\n        }\n        if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n            this.imageQTBar.hidePopup();\n        }\n        if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close')) {\n            this.tableQTBar.hidePopup();\n        }\n    };\n    QuickToolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeQuickToolbars, this);\n        this.parent.on(events.mouseDown, this.renderQuickToolbars, this);\n        this.parent.on(events.toolbarUpdated, this.toolbarUpdated, this);\n        this.wireInlineQTBarEvents();\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n            this.parent.on(events.scroll, this.hideQuickToolbars, this);\n        }\n        this.parent.on(events.focusChange, this.hideQuickToolbars, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.rtlMode, this.setRtl, this);\n    };\n    QuickToolbar.prototype.onKeyDown = function (e) {\n        var args = e.args;\n        if (args.which === 8 || args.which === 46) {\n            if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n                this.imageQTBar.hidePopup();\n            }\n        }\n    };\n    QuickToolbar.prototype.onIframeMouseDown = function () {\n        this.hideQuickToolbars();\n        this.hideInlineQTBar();\n    };\n    QuickToolbar.prototype.setRtl = function (args) {\n        if (this.inlineQTBar) {\n            this.inlineQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.imageQTBar) {\n            this.imageQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.linkQTBar) {\n            this.imageQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    QuickToolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.initializeQuickToolbars);\n        this.parent.off(events.mouseDown, this.renderQuickToolbars);\n        this.parent.off(events.toolbarUpdated, this.toolbarUpdated);\n        this.unWireInlineQTBarEvents();\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n            this.parent.off(events.scroll, this.hideQuickToolbars);\n        }\n        this.parent.off(events.focusChange, this.hideQuickToolbars);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.rtlMode, this.setRtl);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    QuickToolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.quickToolbarSettings)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.quickToolbarSettings); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'actionOnScroll':\n                        if (e.newProp.quickToolbarSettings.actionOnScroll === 'none') {\n                            this.parent.off(events.scroll, this.hideQuickToolbars);\n                        }\n                        else {\n                            this.parent.on(events.scroll, this.hideQuickToolbars, this);\n                        }\n                        break;\n                }\n            }\n        }\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.inlineQTBar) {\n            removeClass([this.parent.element], [CLS_INLINE]);\n            this.unWireInlineQTBarEvents();\n            this.hideInlineQTBar();\n        }\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            addClass([this.parent.element], [CLS_INLINE]);\n            this.wireInlineQTBarEvents();\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    QuickToolbar.prototype.getModuleName = function () {\n        return 'quickToolbar';\n    };\n    return QuickToolbar;\n}());\nexport { QuickToolbar };\n","import { detach, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { CLS_COUNT, CLS_WARNING, CLS_ERROR } from '../base/classes';\n/**\n * `Count` module is used to handle Count actions.\n */\nvar Count = /** @class */ (function () {\n    function Count(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    Count.prototype.initializeInstance = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.editPanel = this.contentRenderer.getEditPanel();\n    };\n    Count.prototype.renderCount = function () {\n        this.initializeInstance();\n        this.element = this.parent.createElement('span', { className: CLS_COUNT });\n        this.contentRenderer.getPanel().parentElement.appendChild(this.element);\n        this.appendCount();\n        if (this.parent.maxLength !== -1) {\n            this.charCountBackground(this.htmlLength);\n        }\n    };\n    Count.prototype.appendCount = function () {\n        var htmlText = this.parent.editorMode === 'Markdown' ? this.editPanel.value.trim() :\n            this.editPanel.textContent.trim();\n        this.htmlLength = htmlText.length;\n        var string = this.parent.maxLength === -1 ? this.htmlLength : this.htmlLength + ' / ' + this.parent.maxLength;\n        this.element.innerHTML = string;\n    };\n    Count.prototype.charCountBackground = function (htmlLength) {\n        var percentage = (htmlLength / this.parent.maxLength) * 100;\n        if (percentage < 85) {\n            this.element.classList.remove(CLS_WARNING);\n            this.element.classList.remove(CLS_ERROR);\n        }\n        else if (percentage > 85 && percentage <= 90) {\n            this.element.classList.remove(CLS_ERROR);\n            this.element.classList.add(CLS_WARNING);\n        }\n        else if (percentage > 90) {\n            this.element.classList.remove(CLS_WARNING);\n            this.element.classList.add(CLS_ERROR);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Count.prototype.refresh = function () {\n        if (!isNullOrUndefined(this.editPanel)) {\n            this.appendCount();\n            if (this.parent.maxLength !== -1) {\n                this.charCountBackground(this.htmlLength);\n            }\n        }\n    };\n    Count.prototype.restrict = function (e) {\n        if (this.parent.showCharCount) {\n            var element = e.args.currentTarget.textContent.trim();\n            var array = [8, 16, 17, 37, 38, 39, 40, 46, 65];\n            var arrayKey = void 0;\n            for (var i = 0; i <= array.length - 1; i++) {\n                if (e.args.which === array[i]) {\n                    if (e.args.ctrlKey && e.args.which === 65) {\n                        return;\n                    }\n                    else if (e.args.which !== 65) {\n                        arrayKey = array[i];\n                        return;\n                    }\n                }\n            }\n            if ((element.length >= this.parent.maxLength && this.parent.maxLength !== -1) && e.args.which !== arrayKey) {\n                e.args.preventDefault();\n            }\n        }\n    };\n    /**\n     * Destroys the Count.\n     * @method destroy\n     * @return {void}\n     */\n    Count.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    Count.prototype.toggle = function (e) {\n        this.element.style.display = (e.member === 'viewSource') ? 'none' : 'block';\n    };\n    Count.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.parent.showCharCount) {\n            this.parent.on(events.initialEnd, this.renderCount, this);\n            this.parent.on(events.keyUp, this.refresh, this);\n            this.parent.on(events.keyDown, this.restrict, this);\n            this.parent.on(events.count, this.refresh, this);\n            this.parent.on(events.refreshBegin, this.refresh, this);\n            this.parent.on(events.mouseDown, this.refresh, this);\n            this.parent.on(events.destroy, this.destroy, this);\n            this.parent.on(events.sourceCode, this.toggle, this);\n            this.parent.on(events.updateSource, this.toggle, this);\n        }\n    };\n    Count.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        detach(this.element);\n        this.parent.off(events.initialEnd, this.renderCount);\n        this.parent.off(events.keyUp, this.refresh);\n        this.parent.off(events.refreshBegin, this.refresh);\n        this.parent.off(events.keyDown, this.restrict);\n        this.parent.off(events.count, this.refresh);\n        this.parent.off(events.mouseDown, this.refresh);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.sourceCode, this.toggle);\n        this.parent.off(events.updateSource, this.toggle);\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Count.prototype.getModuleName = function () {\n        return 'count';\n    };\n    return Count;\n}());\nexport { Count };\n","/**\n * MarkdownSelection internal module\n * @hidden\n */\nvar MarkdownSelection = /** @class */ (function () {\n    function MarkdownSelection() {\n    }\n    MarkdownSelection.prototype.getLineNumber = function (textarea, point) {\n        return textarea.value.substr(0, point).split('\\n').length;\n    };\n    MarkdownSelection.prototype.getSelectedText = function (textarea) {\n        var start = textarea.selectionStart;\n        var end = textarea.selectionEnd;\n        return textarea.value.substring(start, end);\n    };\n    MarkdownSelection.prototype.getAllParents = function (value) {\n        return value.split('\\n');\n    };\n    MarkdownSelection.prototype.getSelectedLine = function (textarea) {\n        var lines = this.getAllParents(textarea.value);\n        var index = this.getLineNumber(textarea, textarea.selectionStart);\n        return lines[index - 1];\n    };\n    MarkdownSelection.prototype.getLine = function (textarea, index) {\n        var lines = this.getAllParents(textarea.value);\n        return lines[index];\n    };\n    MarkdownSelection.prototype.getSelectedParentPoints = function (textarea) {\n        var lines = this.getAllParents(textarea.value);\n        var start = this.getLineNumber(textarea, textarea.selectionStart);\n        var end = this.getLineNumber(textarea, textarea.selectionEnd);\n        var parents = this.getSelectedText(textarea).split('\\n');\n        var selectedPoints = [];\n        var selectedLine = lines[start - 1];\n        var startLength = lines.slice(0, start - 1).join('').length;\n        var firstPoint = {};\n        firstPoint.line = start - 1;\n        firstPoint.start = startLength + firstPoint.line;\n        firstPoint.end = selectedLine !== '' ? firstPoint.start +\n            selectedLine.length + 1 : firstPoint.start + selectedLine.length;\n        firstPoint.text = selectedLine;\n        selectedPoints.push(firstPoint);\n        if (parents.length > 1) {\n            for (var i = 1; i < parents.length - 1; i++) {\n                var points = {};\n                points.line = selectedPoints[i - 1].line + 1;\n                points.start = parents[i] !== '' ? selectedPoints[i - 1].end : selectedPoints[i - 1].end;\n                points.end = points.start + parents[i].length + 1;\n                points.text = parents[i];\n                selectedPoints.push(points);\n            }\n            var lastPoint = {};\n            lastPoint.line = selectedPoints[selectedPoints.length - 1].line + 1;\n            lastPoint.start = selectedPoints[selectedPoints.length - 1].end;\n            lastPoint.end = lastPoint.start + lines[end - 1].length + 1;\n            lastPoint.text = lines[end - 1];\n            selectedPoints.push(lastPoint);\n        }\n        return selectedPoints;\n    };\n    MarkdownSelection.prototype.setSelection = function (textarea, start, end) {\n        textarea.setSelectionRange(start, end);\n        textarea.focus();\n    };\n    MarkdownSelection.prototype.save = function (start, end) {\n        this.selectionStart = start;\n        this.selectionEnd = end;\n    };\n    MarkdownSelection.prototype.restore = function (textArea) {\n        this.setSelection(textArea, this.selectionStart, this.selectionEnd);\n    };\n    MarkdownSelection.prototype.isStartWith = function (line, command) {\n        var isStart = false;\n        if (line) {\n            var reg = line.trim() === command.trim() ?\n                new RegExp('^(' + this.replaceSpecialChar(command.trim()) + ')', 'gim') :\n                new RegExp('^(' + this.replaceSpecialChar(command) + ')', 'gim');\n            isStart = reg.test(line.trim());\n        }\n        return isStart;\n    };\n    MarkdownSelection.prototype.replaceSpecialChar = function (value) {\n        return value.replace(/[`~!@#$%^&*()_|+\\-=?;:'\",.<>\\{\\}\\[\\]\\\\\\/]/g, '\\\\$&');\n    };\n    MarkdownSelection.prototype.isClear = function (parents, regex) {\n        var isClear = false;\n        for (var i = 0; i < parents.length; i++) {\n            if (new RegExp(regex, 'gim').test(parents[i].text)) {\n                return true;\n            }\n        }\n        return isClear;\n    };\n    MarkdownSelection.prototype.getRegex = function (syntax) {\n        syntax = this.replaceSpecialChar(syntax);\n        var regex = '^(' + syntax + ')|^(' + syntax.trim() + ')';\n        return new RegExp(regex);\n    };\n    MarkdownSelection.prototype.getSelectedInlinePoints = function (textarea) {\n        var start = textarea.selectionStart;\n        var end = textarea.selectionEnd;\n        var selection = this.getSelectedText(textarea);\n        return { start: start, end: end, text: selection };\n    };\n    return MarkdownSelection;\n}());\nexport { MarkdownSelection };\n","import { MarkdownSelection } from '../../markdown-parser/plugin/markdown-selection';\nimport * as events from '../base/constant';\n/**\n * MarkdownToolbarStatus module for refresh the toolbar status\n */\nvar MarkdownToolbarStatus = /** @class */ (function () {\n    function MarkdownToolbarStatus(parent) {\n        this.toolbarStatus = {\n            bold: false,\n            italic: false,\n            subscript: false,\n            superscript: false,\n            strikethrough: false,\n            orderedlist: false,\n            uppercase: false,\n            inlinecode: false,\n            unorderedlist: false,\n            underline: false,\n            alignments: null,\n            backgroundcolor: null,\n            fontcolor: null,\n            fontname: null,\n            fontsize: null,\n            formats: null\n        };\n        this.selection = new MarkdownSelection();\n        this.parent = parent;\n        this.element = this.parent.contentModule.getEditPanel();\n        this.addEventListener();\n    }\n    MarkdownToolbarStatus.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarRefresh, this.onRefreshHandler, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    MarkdownToolbarStatus.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarRefresh, this.onRefreshHandler);\n        this.parent.off(events.destroy, this.onRefreshHandler);\n    };\n    MarkdownToolbarStatus.prototype.onRefreshHandler = function (args) {\n        var parentsLines = this.selection.getSelectedParentPoints(this.element);\n        this.toolbarStatus = {\n            orderedlist: args.documentNode ? false : this.isListsApplied(parentsLines, 'OL'),\n            unorderedlist: args.documentNode ? false : this.isListsApplied(parentsLines, 'UL'),\n            formats: this.currentFormat(parentsLines, args.documentNode),\n            bold: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('Bold'),\n            italic: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('Italic'),\n            inlinecode: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('InlineCode'),\n            strikethrough: args.documentNode ? false :\n                this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('StrikeThrough'),\n            subscript: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('SubScript'),\n            superscript: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('SuperScript'),\n            uppercase: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('UpperCase')\n        };\n        this.parent.notify(events.toolbarUpdated, this.toolbarStatus);\n    };\n    MarkdownToolbarStatus.prototype.isListsApplied = function (lines, type) {\n        var isApply = true;\n        for (var i = 0; i < lines.length; i++) {\n            if (!this.selection.isStartWith(lines[i].text, this.parent.formatter.listTags[type])) {\n                isApply = false;\n                break;\n            }\n        }\n        return isApply;\n    };\n    MarkdownToolbarStatus.prototype.currentFormat = function (lines, documentNode) {\n        var format = 'p';\n        var keys = Object.keys(this.parent.formatter.formatTags);\n        var direction = this.element.selectionDirection;\n        var checkLine = direction === 'backward' ? lines[0].text : lines[lines.length - 1].text;\n        for (var i = 0; !documentNode && i < keys.length; i++) {\n            if (keys[i] !== 'pre' && this.selection.isStartWith(checkLine, this.parent.formatter.formatTags[keys[i]])) {\n                format = keys[i];\n                break;\n            }\n            else if (keys[i] === 'pre') {\n                var parentLines = this.selection.getAllParents(this.element.value);\n                var firstPrevText = parentLines[lines[0].line - 1];\n                var lastNextText = parentLines[lines.length + 1];\n                if (this.selection.isStartWith(firstPrevText, this.parent.formatter.formatTags[keys[i]].split('\\n')[0]) &&\n                    this.selection.isStartWith(lastNextText, this.parent.formatter.formatTags[keys[i]].split('\\n')[0])) {\n                    format = keys[i];\n                    break;\n                }\n            }\n        }\n        return format;\n    };\n    return MarkdownToolbarStatus;\n}());\nexport { MarkdownToolbarStatus };\n","import * as events from '../base/constant';\n/**\n * `ExecCommandCallBack` module is used to run the editor manager command\n */\nvar ExecCommandCallBack = /** @class */ (function () {\n    function ExecCommandCallBack(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    ExecCommandCallBack.prototype.addEventListener = function () {\n        this.parent.on(events.execCommandCallBack, this.commandCallBack, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    ExecCommandCallBack.prototype.commandCallBack = function (args) {\n        if (args.requestType !== 'Undo' && args.requestType !== 'Redo') {\n            this.parent.formatter.saveData();\n        }\n        this.parent.notify(events.toolbarRefresh, { args: args });\n        this.parent.notify(events.count, {});\n    };\n    ExecCommandCallBack.prototype.removeEventListener = function () {\n        this.parent.off(events.execCommandCallBack, this.commandCallBack);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    return ExecCommandCallBack;\n}());\nexport { ExecCommandCallBack };\n","import { extend, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport * as CONSTANT from '../base/constant';\nimport { updateUndoRedoStatus, isIDevice } from '../base/util';\nimport { KEY_DOWN, KEY_UP } from './../../common/constant';\n/**\n * Formatter\n * @hidden\n */\nvar Formatter = /** @class */ (function () {\n    function Formatter() {\n    }\n    /**\n     * To execute the command\n     * @param  {IRichTextEditor} self\n     * @param  {ActionBeginEventArgs} args\n     * @param  {MouseEvent|KeyboardEvent} event\n     * @param  {NotifyArgs} value\n     */\n    Formatter.prototype.process = function (self, args, event, value) {\n        var selection = self.contentModule.getDocument().getSelection();\n        var range = (selection.rangeCount > 0) ? selection.getRangeAt(selection.rangeCount - 1) : null;\n        if (!isNullOrUndefined(args)\n            && args.item.command\n            && args.item.command !== 'Table'\n            && args.item.command !== 'Actions'\n            && args.item.command !== 'Links'\n            && args.item.command !== 'Images'\n            && range\n            && !(self.contentModule.getEditPanel().contains(this.getAncestorNode(range.commonAncestorContainer))\n                || self.contentModule.getEditPanel() === range.commonAncestorContainer\n                || self.contentModule.getPanel() === range.commonAncestorContainer)) {\n            return;\n        }\n        if (isNullOrUndefined(args)) {\n            var action = event.action;\n            if (action !== 'tab' && action !== 'enter' && action !== 'space' && action !== 'escape') {\n                args = {};\n                if (self.editorMode === 'Markdown' && action === 'insert-table') {\n                    value = {\n                        'headingText': self.localeObj.getConstant('TableHeadingText'),\n                        'colText': self.localeObj.getConstant('TableColText')\n                    };\n                }\n                var items = {\n                    originalEvent: event, cancel: false,\n                    requestType: action || (event.key + 'Key'),\n                    itemCollection: value\n                };\n                extend(args, args, items, true);\n                self.trigger(CONSTANT.actionBegin, args);\n                if (args.cancel) {\n                    if (action === 'paste' || action === 'cut' || action === 'copy') {\n                        event.preventDefault();\n                    }\n                    return;\n                }\n            }\n            this.editorManager.observer.notify((event.type === 'keydown' ? KEY_DOWN : KEY_UP), {\n                event: event,\n                callBack: this.onSuccess.bind(this, self),\n                value: value\n            });\n        }\n        else if (!isNullOrUndefined(args) && args.item.command && args.item.subCommand && ((args.item.command !== args.item.subCommand\n            && args.item.command !== 'Font')\n            || ((args.item.subCommand === 'FontName' || args.item.subCommand === 'FontSize') && args.name === 'dropDownSelect')\n            || ((args.item.subCommand === 'BackgroundColor' || args.item.subCommand === 'FontColor')\n                && args.name === 'colorPickerChanged'))) {\n            extend(args, args, { requestType: args.item.subCommand, cancel: false, itemCollection: value }, true);\n            self.trigger(CONSTANT.actionBegin, args);\n            if (args.cancel) {\n                return;\n            }\n            if (this.getUndoRedoStack().length === 0 && args.item.command !== 'Links' && args.item.command !== 'Images') {\n                this.saveData();\n            }\n            self.isBlur = false;\n            self.contentModule.getEditPanel().focus();\n            var command = args.item.subCommand.toLocaleLowerCase();\n            if (command === 'paste' || command === 'cut' || command === 'copy') {\n                self.clipboardAction(command, event);\n            }\n            else {\n                this.editorManager.observer.notify(CONSTANT.checkUndo, { subCommand: args.item.subCommand });\n                this.editorManager.execCommand(args.item.command, args.item.subCommand, event, this.onSuccess.bind(this, self), args.item.value, value, ('#' + self.getID() + ' iframe'));\n            }\n        }\n        if (isNullOrUndefined(event) || event && event.action !== 'copy') {\n            this.enableUndo(self);\n        }\n    };\n    Formatter.prototype.getAncestorNode = function (node) {\n        node = node.nodeType === 3 ? node.parentNode : node;\n        return node;\n    };\n    Formatter.prototype.onKeyHandler = function (self, e) {\n        var _this = this;\n        this.editorManager.observer.notify(KEY_UP, {\n            event: e, callBack: function () {\n                _this.enableUndo(self);\n            }\n        });\n    };\n    Formatter.prototype.onSuccess = function (self, events) {\n        if (isNullOrUndefined(events.event) || (events && events.event.action !== 'copy')) {\n            this.enableUndo(self);\n            self.notify(CONSTANT.execCommandCallBack, events);\n        }\n        self.trigger(CONSTANT.actionComplete, events);\n        if (events.requestType === 'Images' || events.requestType === 'Links' && self.editorMode === 'HTML') {\n            var args = events;\n            if (events.requestType === 'Links' && events.event &&\n                events.event.type === 'keydown' &&\n                events.event.keyCode === 32) {\n                return;\n            }\n            self.notify(CONSTANT.insertCompleted, {\n                args: args.event, type: events.requestType, isNotify: true,\n                elements: args.elements\n            });\n        }\n        self.autoResize();\n    };\n    /**\n     * Save the data for undo and redo action.\n     */\n    Formatter.prototype.saveData = function (e) {\n        this.editorManager.undoRedoManager.saveData(e);\n    };\n    Formatter.prototype.getUndoStatus = function () {\n        return this.editorManager.undoRedoManager.getUndoStatus();\n    };\n    Formatter.prototype.getUndoRedoStack = function () {\n        return this.editorManager.undoRedoManager.undoRedoStack;\n    };\n    Formatter.prototype.enableUndo = function (self) {\n        var status = this.getUndoStatus();\n        if (self.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            updateUndoRedoStatus(self.quickToolbarModule.inlineQTBar.quickTBarObj, status);\n        }\n        else {\n            if (self.toolbarModule) {\n                updateUndoRedoStatus(self.toolbarModule.baseToolbar, status);\n            }\n        }\n    };\n    Formatter.prototype.undoRedoRefresh = function (iRichTextEditor) {\n        if (this.editorManager.undoRedoManager.undoRedoStack.length) {\n            this.editorManager.undoRedoManager.undoRedoStack = [];\n            this.editorManager.undoRedoManager.steps = 0;\n            iRichTextEditor.disableToolbarItem(['Undo', 'Redo']);\n        }\n    };\n    return Formatter;\n}());\nexport { Formatter };\n","/**\n * Constant values for Common\n */\n/* Keydown event trigger\n * @hidden\n */\nexport var KEY_DOWN = 'keydown';\n/* Undo and Redo action HTML plugin events\n * @hidden\n */\nexport var ACTION = 'action';\n/* Formats plugin events\n * @hidden\n */\nexport var FORMAT_TYPE = 'format-type';\n/* Keydown handler event trigger\n * @hidden\n */\nexport var KEY_DOWN_HANDLER = 'keydown-handler';\n/* List plugin events\n * @hidden\n */\nexport var LIST_TYPE = 'list-type';\n/* Keyup handler event trigger\n * @hidden\n */\nexport var KEY_UP_HANDLER = 'keyup-handler';\n/* Keyup event trigger\n * @hidden\n */\nexport var KEY_UP = 'keyup';\n/* Model changed plugin event trigger\n * @hidden\n */\nexport var MODEL_CHANGED_PLUGIN = 'model_changed_plugin';\n/* Model changed event trigger\n * @hidden\n */\nexport var MODEL_CHANGED = 'model_changed';\n/* PasteCleanup plugin for MSWord content\n * @hidden\n */\nexport var MS_WORD_CLEANUP_PLUGIN = 'ms_word_cleanup_plugin';\n/* PasteCleanup for MSWord content\n * @hidden\n */\nexport var MS_WORD_CLEANUP = 'ms_word_cleanup';\n","import * as CONSTANT from './../base/constant';\nimport { extend } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * Lists internal component\n * @hidden\n */\nvar MDLists = /** @class */ (function () {\n    /**\n     * Constructor for creating the Lists plugin\n     * @hidden\n     */\n    function MDLists(options) {\n        extend(this, this, options, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDLists.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.LISTS_COMMAND, this.applyListsHandler, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, this.keyUpHandler, this);\n    };\n    MDLists.prototype.keyDownHandler = function (event) {\n        switch (event.event.which) {\n            case 9:\n                this.tabKey(event);\n                break;\n        }\n        switch (event.event.action) {\n            case 'ordered-list':\n                this.applyListsHandler({ subCommand: 'OL', callBack: event.callBack });\n                event.event.preventDefault();\n                break;\n            case 'unordered-list':\n                this.applyListsHandler({ subCommand: 'UL', callBack: event.callBack });\n                event.event.preventDefault();\n                break;\n        }\n    };\n    MDLists.prototype.keyUpHandler = function (event) {\n        switch (event.event.which) {\n            case 13:\n                this.enterKey(event);\n                break;\n        }\n    };\n    MDLists.prototype.tabKey = function (event) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var addedLength = 0;\n        var isNotFirst = this.isNotFirstLine(textArea, parents[0]);\n        if (!isNotFirst && !event.event.shiftKey) {\n            this.restore(textArea, start, end + addedLength, event);\n            return;\n        }\n        var regex = this.getListRegex();\n        this.currentAction = this.getAction(parents[0].text);\n        for (var i = 0; i < parents.length; i++) {\n            var prevIndex = event.event.shiftKey ? parents[i].line : parents[i].line - 1;\n            var prevLine = this.selection.getLine(textArea, prevIndex);\n            if (prevLine && (!event.event.shiftKey && isNotFirst || (event.event.shiftKey && /^(\\t)/.test(prevLine)))) {\n                prevLine = prevLine.trim();\n                if (regex.test(prevLine)) {\n                    event.event.preventDefault();\n                    var tabSpace = '\\t';\n                    var tabSpaceLength = event.event.shiftKey ? -tabSpace.length : tabSpace.length;\n                    var splitTab = parents[i].text.split('\\t');\n                    parents[i].text = event.event.shiftKey ? splitTab.splice(1, splitTab.length).join('\\t') : tabSpace + parents[i].text;\n                    textArea.value = textArea.value.substr(0, parents[i].start) + parents[i].text + '\\n' +\n                        textArea.value.substr(parents[i].end, textArea.value.length);\n                    start = i === 0 ? start + tabSpaceLength : start;\n                    addedLength += tabSpaceLength;\n                    if (parents.length !== 1) {\n                        for (var j = i; j < parents.length; j++) {\n                            parents[j].start = j !== 0 ? parents[j].start + tabSpaceLength : parents[j].start;\n                            parents[j].end = parents[j].end + tabSpaceLength;\n                        }\n                    }\n                }\n            }\n        }\n        this.restore(textArea, start, end + addedLength, event);\n    };\n    MDLists.prototype.getTabSpace = function (line) {\n        var split = line.split('\\t');\n        var tabs = '';\n        for (var i = 0; i < split.length; i++) {\n            if (split[i] === '') {\n                tabs += '\\t';\n            }\n            else {\n                break;\n            }\n        }\n        return tabs;\n    };\n    MDLists.prototype.isNotFirstLine = function (textArea, points) {\n        var currentLine = points.text;\n        var prevIndex = points.line - 1;\n        var prevLine = this.selection.getLine(textArea, prevIndex);\n        var regex = this.getListRegex();\n        var isNotFirst = false;\n        if (prevLine && regex.test(prevLine.trim())) {\n            var curTabSpace = this.getTabSpace(currentLine);\n            var prevTabSpace = this.getTabSpace(prevLine);\n            isNotFirst = curTabSpace === prevTabSpace ? true : isNotFirst;\n            for (; prevTabSpace.length > curTabSpace.length; null) {\n                prevIndex = prevIndex - 1;\n                prevLine = this.selection.getLine(textArea, prevIndex);\n                if (regex.test(prevLine.trim())) {\n                    prevTabSpace = this.getTabSpace(prevLine);\n                    if (prevTabSpace.length <= curTabSpace.length) {\n                        isNotFirst = true;\n                        break;\n                    }\n                }\n            }\n        }\n        return isNotFirst;\n    };\n    MDLists.prototype.getAction = function (line) {\n        var ol = line.trim().split(new RegExp('^(' + this.selection.replaceSpecialChar(this.syntax.OL) + ')'))[1];\n        var ul = line.trim().split(new RegExp('^(' + this.selection.replaceSpecialChar(this.syntax.UL) + ')'))[1];\n        return (ol ? 'OL' : 'UL');\n    };\n    MDLists.prototype.enterKey = function (event) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var prevLine = this.selection.getLine(textArea, parents[0].line - 1);\n        var regex = this.getListRegex();\n        if (regex.test(prevLine.trim()) && prevLine.trim().replace(regex, '') !== '') {\n            var addedLength = 0;\n            var tabSpace = this.getTabSpace(prevLine);\n            this.currentAction = this.getAction(prevLine);\n            var prefix = this.syntax[this.currentAction];\n            parents[0].text = tabSpace + prefix + parents[0].text;\n            textArea.value = textArea.value.substr(0, parents[0].start) + parents[0].text +\n                textArea.value.substr(parents[0].end, textArea.value.length);\n            start = start + prefix.length + tabSpace.length;\n            addedLength += prefix.length + tabSpace.length;\n            this.restore(textArea, start, end + addedLength, event);\n        }\n    };\n    MDLists.prototype.applyListsHandler = function (e) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        this.currentAction = e.subCommand;\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var addedLength = 0;\n        var startLength = 0;\n        var endLength = 0;\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var prefix = '';\n        var regex = this.syntax[this.currentAction];\n        for (var i = 0; i < parents.length; i++) {\n            if (!this.selection.isStartWith(parents[i].text, regex)) {\n                if (parents[i].text === '' && i === 0) {\n                    this.selection.save(start, end);\n                    if (parents.length !== 1) {\n                        for (var j = i; j < parents.length; j++) {\n                            parents[j].start = j !== 0 ? 1 + parents[j].start : parents[j].start;\n                            parents[j].end = 1 + parents[j].end;\n                        }\n                    }\n                }\n                var replace = this.appliedLine(parents[i].text);\n                prefix = replace.line ? prefix : this.syntax[this.currentAction];\n                parents[i].text = replace.line ? replace.line : prefix + parents[i].text;\n                replace.space = replace.space ? replace.space : 0;\n                textArea.value = textArea.value.substr(0, parents[i].start + endLength) + parents[i].text + '\\n' +\n                    textArea.value.substr(parents[i].end, textArea.value.length);\n                start = i === 0 ? (start + prefix.length + replace.space) > 0 ?\n                    start + prefix.length + replace.space : 0 : start;\n                addedLength += prefix.length + replace.space;\n                if (parents.length !== 1) {\n                    for (var j = i; j < parents.length; j++) {\n                        parents[j].start = j !== 0 ? prefix.length +\n                            parents[j].start + replace.space : parents[j].start;\n                        parents[j].end = prefix.length + parents[j].end + replace.space;\n                    }\n                }\n                this.restore(textArea, start, end + addedLength, e);\n            }\n            else {\n                parents[i].text = parents[i].text.replace(regex, '');\n                textArea.value = textArea.value.substr(0, parents[i].start + endLength) + parents[i].text + '\\n' +\n                    textArea.value.substr(parents[i].end + endLength, textArea.value.length);\n                endLength -= this.syntax[this.currentAction].length;\n                startLength = this.syntax[this.currentAction].length;\n                this.restore(textArea, start - startLength, end + endLength, e);\n            }\n        }\n    };\n    MDLists.prototype.appliedLine = function (line) {\n        var points = {};\n        var regex = this.getListRegex();\n        var isExist = regex.test(line.trim()) || line.trim() === this.syntax.OL.trim()\n            || line.trim() === this.syntax.UL.trim();\n        if (isExist) {\n            var replace = void 0;\n            var pattern = void 0;\n            var space = 0;\n            if (this.selection.getRegex(this.syntax.OL).test(line.trim())) {\n                pattern = this.selection.getRegex(this.syntax.OL);\n                replace = this.syntax.UL;\n                points.space = this.syntax.UL.length - this.syntax.OL.length;\n            }\n            else {\n                pattern = this.selection.getRegex(this.syntax.UL);\n                replace = this.syntax.OL;\n                points.space = this.syntax.OL.length - this.syntax.UL.length;\n            }\n            points.line = this.getTabSpace(line) + line.trim().replace(pattern, replace);\n        }\n        return points;\n    };\n    MDLists.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: this.currentAction,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    MDLists.prototype.getListRegex = function () {\n        var regex = '';\n        var configKey = Object.keys(this.syntax);\n        for (var j = 0; j < configKey.length; j++) {\n            var syntax = this.selection.replaceSpecialChar(this.syntax[configKey[j]]);\n            regex += regex === '' ? '^(' + syntax + ')|^(' + syntax.trim() + ')' :\n                '|^(' + syntax + ')|^(' + syntax.trim() + ')';\n        }\n        return new RegExp(regex);\n    };\n    return MDLists;\n}());\nexport { MDLists };\n","/**\n * Constant values for Markdown Parser\n */\n/* List plugin events\n * @hidden\n */\nexport var LISTS_COMMAND = 'lists-commands';\n/* selectioncommand plugin events\n * @hidden\n */\nexport var selectionCommand = 'command-type';\n/* Link plugin events\n * @hidden\n */\nexport var LINK_COMMAND = 'link-commands';\n/* Clear plugin events\n * @hidden\n */\nexport var CLEAR_COMMAND = 'clear-commands';\n/* Table plugin events\n * @hidden\n */\nexport var MD_TABLE = 'insert-table';\n","import { extend } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\nimport * as CONSTANT from './../../markdown-parser/base/constant';\n/**\n * MDFormats internal plugin\n * @hidden\n */\nvar MDFormats = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function MDFormats(options) {\n        extend(this, this, options, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDFormats.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.FORMAT_TYPE, this.applyFormats, this);\n    };\n    MDFormats.prototype.applyFormats = function (e) {\n        e.subCommand = e.subCommand.toLowerCase();\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        if (this.isAppliedFormat(parents) === e.subCommand) {\n            if (e.subCommand === 'pre') {\n                if (parents.length > 1) {\n                    this.applyCodeBlock(textArea, e, parents);\n                }\n                else {\n                    return;\n                }\n            }\n            this.cleanFormat(textArea);\n            this.restore(textArea, textArea.selectionStart, textArea.selectionEnd, e);\n            return;\n        }\n        if (e.subCommand === 'p') {\n            this.cleanFormat(textArea);\n            this.restore(textArea, textArea.selectionStart, textArea.selectionEnd, e);\n            return;\n        }\n        else {\n            if ((e.subCommand === 'pre' && parents.length !== 1) || e.subCommand !== 'pre') {\n                this.cleanFormat(textArea, e.subCommand);\n            }\n        }\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var addedLength = 0;\n        parents = this.selection.getSelectedParentPoints(textArea);\n        if (e.subCommand === 'pre') {\n            if (parents.length > 1) {\n                this.applyCodeBlock(textArea, e, parents);\n            }\n            else {\n                extend(e, e, { subCommand: 'InlineCode' }, true);\n                this.parent.observer.notify(CONSTANT.selectionCommand, e);\n            }\n            return;\n        }\n        for (var i = 0; i < parents.length; i++) {\n            if (parents[i].text !== '' && !this.selection.isStartWith(parents[i].text, '\\\\' + this.syntax[e.subCommand])) {\n                parents[i].text = this.syntax[e.subCommand] + parents[i].text;\n                textArea.value = textArea.value.substr(0, parents[i].start) + parents[i].text + '\\n' +\n                    textArea.value.substr(parents[i].end, textArea.value.length);\n                start = i === 0 ? start + this.syntax[e.subCommand].length : start;\n                addedLength += this.syntax[e.subCommand].length;\n                if (parents.length !== 1) {\n                    for (var j = i; j < parents.length; j++) {\n                        parents[j].start = j !== 0 ?\n                            this.syntax[e.subCommand].length + parents[j].start : parents[j].start;\n                        parents[j].end = this.syntax[e.subCommand].length + parents[j].end;\n                    }\n                }\n            }\n            else if (parents[i].text === '' && i === 0) {\n                this.selection.save(start, end);\n                if (parents.length !== 1) {\n                    for (var j = i; j < parents.length; j++) {\n                        parents[j].start = j !== 0 ? 1 + parents[j].start : parents[j].start;\n                        parents[j].end = 1 + parents[j].end;\n                    }\n                }\n            }\n        }\n        this.restore(textArea, start, end + addedLength, e);\n    };\n    MDFormats.prototype.clearRegex = function () {\n        var regex = '';\n        var configKey = Object.keys(this.syntax);\n        for (var j = 0; j < configKey.length && configKey[j] !== 'pre' && configKey[j] !== 'p'; j++) {\n            regex += regex === '' ? '^(' + this.selection.replaceSpecialChar(this.syntax[configKey[j]].trim()) + ')' :\n                '|^(' + this.selection.replaceSpecialChar(this.syntax[configKey[j]].trim()) + ')';\n        }\n        return regex;\n    };\n    MDFormats.prototype.cleanFormat = function (textArea, command) {\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var removeLength = 0;\n        if (this.selection.isClear(parents, this.clearRegex())) {\n            for (var i = 0; i < parents.length; i++) {\n                var configKey = Object.keys(this.syntax);\n                for (var j = 0; parents[i].text !== '' && j < configKey.length; j++) {\n                    var removeText = this.syntax[configKey[j]];\n                    if (configKey[j] === command) {\n                        continue;\n                    }\n                    var regex = new RegExp('^(' + this.selection.replaceSpecialChar(removeText) + ')', 'gim');\n                    if (regex.test(parents[i].text)) {\n                        parents[i].text = parents[i].text.replace(regex, '');\n                        textArea.value = textArea.value.substr(0, parents[i].start) + parents[i].text + '\\n' +\n                            textArea.value.substr(parents[i].end, textArea.value.length);\n                        start = i === 0 ? (start - (removeText.length)) > 0 ? start - (removeText.length) : 0 : start;\n                        removeLength += removeText.length;\n                        if (parents.length !== 1) {\n                            for (var k = 0; k < parents.length; k++) {\n                                parents[k].start = k !== 0 ?\n                                    parents[k].start - removeText.length : parents[k].start;\n                                parents[k].end = parents[k].end - removeText.length;\n                            }\n                        }\n                        break;\n                    }\n                }\n                if (parents[i].text === '' && i === 0) {\n                    this.selection.save(start, end);\n                    if (parents.length !== 1) {\n                        for (var j = i; j < parents.length; j++) {\n                            parents[j].start = j !== 0 ? 1 + parents[j].start : parents[j].start;\n                            parents[j].end = 1 + parents[j].end;\n                        }\n                    }\n                }\n            }\n            this.restore(textArea, start, end - removeLength);\n        }\n    };\n    MDFormats.prototype.applyCodeBlock = function (textArea, event, parents) {\n        var command = event.subCommand;\n        var start = parents[0].start;\n        var end = parents[parents.length - 1].end;\n        var parentLines = this.selection.getAllParents(textArea.value);\n        var firstPrevText = parentLines[parents[0].line - 1];\n        var lastNextText = parentLines[(parents.length + 1) + 1];\n        var addedLength = 0;\n        if (!this.selection.isStartWith(firstPrevText, this.syntax.pre.split('\\n')[0]) &&\n            !this.selection.isStartWith(lastNextText, this.syntax.pre.split('\\n')[0])) {\n            var lines = textArea.value.substring(start, end).split('\\n');\n            var lastLine = lines[lines.length - 1] === '' ? '' : '\\n';\n            textArea.value = textArea.value.substr(0, start) + this.syntax[command] + textArea.value.substring(start, end) +\n                lastLine + this.syntax[command] +\n                textArea.value.substr(end, textArea.value.length);\n            start = this.selection.selectionStart + this.syntax[command].length;\n            end = this.selection.selectionEnd + this.syntax[command].length - 1;\n        }\n        else {\n            var cmd = this.syntax[command];\n            var selection = this.parent.markdownSelection.getSelectedInlinePoints(textArea);\n            var startNo = textArea.value.substr(0, textArea.selectionStart).lastIndexOf(cmd);\n            var endNo = textArea.value.substr(textArea.selectionEnd, textArea.selectionEnd).indexOf(cmd);\n            endNo = endNo + selection.end;\n            var repStartText = this.replaceAt(textArea.value.substr(0, selection.start), cmd, '', startNo, selection.start);\n            var repEndText = this.replaceAt(textArea.value.substr(selection.end, textArea.value.length), cmd, '', 0, endNo);\n            textArea.value = repStartText + selection.text + repEndText;\n            start = this.selection.selectionStart - cmd.length;\n            end = this.selection.selectionEnd - cmd.length;\n        }\n        this.restore(textArea, start, end, event);\n    };\n    MDFormats.prototype.replaceAt = function (input, search, replace, start, end) {\n        return input.slice(0, start)\n            + input.slice(start, end).replace(search, replace)\n            + input.slice(end);\n    };\n    MDFormats.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    MDFormats.prototype.isAppliedFormat = function (lines, documentNode) {\n        var format = 'p';\n        var configKey = Object.keys(this.syntax);\n        var keys = Object.keys(this.syntax);\n        var direction = this.parent.element.selectionDirection;\n        var checkLine = direction === 'backward' ? lines[0].text : lines[lines.length - 1].text;\n        for (var i = 0; !documentNode && i < keys.length; i++) {\n            if (keys[i] !== 'pre' && this.selection.isStartWith(checkLine, this.syntax[keys[i]])) {\n                format = keys[i];\n                break;\n            }\n            else if (keys[i] === 'pre') {\n                var parentLines = this.selection.getAllParents(this.parent.element.value);\n                var firstPrevText = parentLines[lines[0].line - 1];\n                var lastNextText = parentLines[lines.length + 1];\n                if (this.selection.isStartWith(firstPrevText, this.syntax[keys[i]].split('\\n')[0]) &&\n                    this.selection.isStartWith(lastNextText, this.syntax[keys[i]].split('\\n')[0])) {\n                    format = keys[i];\n                    break;\n                }\n            }\n        }\n        return format;\n    };\n    return MDFormats;\n}());\nexport { MDFormats };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport { extend } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * SelectionCommands internal component\n * @hidden\n */\nvar MDSelectionFormats = /** @class */ (function () {\n    function MDSelectionFormats(parent) {\n        extend(this, this, parent, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDSelectionFormats.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.selectionCommand, this.applyCommands, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n    };\n    MDSelectionFormats.prototype.keyDownHandler = function (e) {\n        switch (e.event.action) {\n            case 'bold':\n                this.applyCommands({ subCommand: 'Bold', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'italic':\n                this.applyCommands({ subCommand: 'Italic', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'strikethrough':\n                this.applyCommands({ subCommand: 'StrikeThrough', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'uppercase':\n                this.applyCommands({ subCommand: 'UpperCase', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'lowercase':\n                this.applyCommands({ subCommand: 'LowerCase', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'superscript':\n                this.applyCommands({ subCommand: 'SuperScript', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'subscript':\n                this.applyCommands({ subCommand: 'SubScript', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    MDSelectionFormats.prototype.isBold = function (text, cmd) {\n        return text.search('\\\\' + cmd + '\\\\' + cmd + '') !== -1;\n    };\n    MDSelectionFormats.prototype.isItalic = function (text, cmd) {\n        return text.search('\\\\' + cmd) !== -1;\n    };\n    MDSelectionFormats.prototype.isMatch = function (text, cmd) {\n        var matchText = [''];\n        switch (cmd) {\n            case this.syntax.Italic:\n                matchText = text.match(this.singleCharRegx(cmd));\n                break;\n            case this.syntax.InlineCode:\n                matchText = text.match(this.singleCharRegx(cmd));\n                break;\n            case this.syntax.StrikeThrough:\n                matchText = text.match(this.singleCharRegx(cmd));\n                break;\n        }\n        return matchText;\n    };\n    MDSelectionFormats.prototype.multiCharRegx = function (cmd) {\n        return new RegExp('(\\\\' + cmd + '\\\\' + cmd + ')', 'g');\n    };\n    MDSelectionFormats.prototype.singleCharRegx = function (cmd) {\n        return new RegExp('(\\\\' + cmd + ')', 'g');\n    };\n    MDSelectionFormats.prototype.isAppliedCommand = function (cmd) {\n        var selectCmd = '';\n        var isFormat = false;\n        var textArea = this.parent.element;\n        var start = textArea.selectionStart;\n        var splitAt = function (index) { return function (x) { return [x.slice(0, index), x.slice(index)]; }; };\n        var splitText = splitAt(start)(textArea.value);\n        var cmdB = this.syntax.Bold.substr(0, 1);\n        var cmdI = this.syntax.Italic;\n        var selectedText = this.parent.markdownSelection.getSelectedText(textArea);\n        if (selectedText !== '' && selectedText === selectedText.toLocaleUpperCase() && cmd === 'UpperCase') {\n            return true;\n        }\n        else if (selectedText === '') {\n            var beforeText = textArea.value.substr(splitText[0].length - 1, 1);\n            var afterText = splitText[1].substr(0, 1);\n            if ((beforeText !== '' && afterText !== '' && beforeText.match(/[a-z]/i)) &&\n                beforeText === beforeText.toLocaleUpperCase() && afterText === afterText.toLocaleUpperCase() && cmd === 'UpperCase') {\n                return true;\n            }\n        }\n        if (!(this.isBold(splitText[0], cmdB)) && !(this.isItalic(splitText[0], cmdI)) && !(this.isBold(splitText[1], cmdB)) &&\n            !(this.isItalic(splitText[1], cmdI))) {\n            if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.StrikeThrough)) &&\n                !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.StrikeThrough))) &&\n                (this.isMatch(splitText[0], this.syntax.StrikeThrough).length % 2 === 1 &&\n                    this.isMatch(splitText[1], this.syntax.StrikeThrough).length % 2 === 1) && cmd === 'StrikeThrough') {\n                isFormat = true;\n            }\n            if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.InlineCode)) &&\n                !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.InlineCode))) &&\n                (this.isMatch(splitText[0], this.syntax.InlineCode).length % 2 === 1 &&\n                    this.isMatch(splitText[1], this.syntax.InlineCode).length % 2 === 1) && cmd === 'InlineCode') {\n                isFormat = true;\n            }\n            if ((!isNullOrUndefined(splitText[0].match(/\\<sub>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sub>/g))) &&\n                (splitText[0].match(/\\<sub>/g).length % 2 === 1 &&\n                    splitText[1].match(/\\<\\/sub>/g).length % 2 === 1) && cmd === 'SubScript') {\n                isFormat = true;\n            }\n            if ((!isNullOrUndefined(splitText[0].match(/\\<sup>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sup>/g))) &&\n                (splitText[0].match(/\\<sup>/g).length % 2 === 1 && splitText[1].match(/\\<\\/sup>/g).length % 2 === 1) &&\n                cmd === 'SuperScript') {\n                isFormat = true;\n            }\n        }\n        if ((this.isBold(splitText[0], cmdB) && this.isBold(splitText[1], cmdB)) &&\n            (splitText[0].match(this.multiCharRegx(cmdB)).length % 2 === 1 &&\n                splitText[1].match(this.multiCharRegx(cmdB)).length % 2 === 1) && cmd === 'Bold') {\n            isFormat = true;\n        }\n        splitText[0] = this.isBold(splitText[0], cmdB) ? splitText[0].replace(this.multiCharRegx(cmdB), '$%@') : splitText[0];\n        splitText[1] = this.isBold(splitText[1], cmdB) ? splitText[1].replace(this.multiCharRegx(cmdB), '$%@') : splitText[1];\n        if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.Italic)) &&\n            !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.Italic))) &&\n            (this.isMatch(splitText[0], this.syntax.Italic).length % 2 === 1 &&\n                this.isMatch(splitText[1], this.syntax.Italic).length % 2 === 1) && cmd === 'Italic') {\n            isFormat = true;\n        }\n        if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.StrikeThrough)) &&\n            !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.StrikeThrough))) &&\n            (this.isMatch(splitText[0], this.syntax.StrikeThrough).length % 2 === 1 &&\n                this.isMatch(splitText[1], this.syntax.StrikeThrough).length % 2 === 1) && cmd === 'StrikeThrough') {\n            isFormat = true;\n        }\n        if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.InlineCode)) &&\n            !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.InlineCode))) &&\n            (this.isMatch(splitText[0], this.syntax.InlineCode).length % 2 === 1 &&\n                this.isMatch(splitText[1], this.syntax.InlineCode).length % 2 === 1) && cmd === 'InlineCode') {\n            isFormat = true;\n        }\n        if ((!isNullOrUndefined(splitText[0].match(/\\<sub>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sub>/g))) &&\n            (splitText[0].match(/\\<sub>/g).length % 2 === 1 && splitText[1].match(/\\<\\/sub>/g).length % 2 === 1) && cmd === 'SubScript') {\n            isFormat = true;\n        }\n        if ((!isNullOrUndefined(splitText[0].match(/\\<sup>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sup>/g))) &&\n            (splitText[0].match(/\\<sup>/g).length % 2 === 1 && splitText[1].match(/\\<\\/sup>/g).length % 2 === 1) && cmd === 'SuperScript') {\n            isFormat = true;\n        }\n        return isFormat;\n    };\n    MDSelectionFormats.prototype.applyCommands = function (e) {\n        this.currentAction = e.subCommand;\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var addedLength = 0;\n        var selection = this.parent.markdownSelection.getSelectedInlinePoints(textArea);\n        if (this.isAppliedCommand(e.subCommand) && selection.text !== '') {\n            var startCmd = this.syntax[e.subCommand];\n            var endCmd = e.subCommand === 'SubScript' ? '</sub>' :\n                e.subCommand === 'SuperScript' ? '</sup>' : this.syntax[e.subCommand];\n            var startLength = (e.subCommand === 'UpperCase' || e.subCommand === 'LowerCase') ? 0 : startCmd.length;\n            var startNo = textArea.value.substr(0, selection.start).lastIndexOf(startCmd);\n            var endNo = textArea.value.substr(selection.end, textArea.value.length).indexOf(endCmd);\n            endNo = endNo + selection.end;\n            var repStartText = this.replaceAt(textArea.value.substr(0, selection.start), startCmd, '', startNo, selection.start);\n            var repEndText = this.replaceAt(textArea.value.substr(selection.end, textArea.value.length), endCmd, '', 0, endNo);\n            textArea.value = repStartText + selection.text + repEndText;\n            this.restore(textArea, start - startLength, end - startLength, e);\n            return;\n        }\n        if (selection.text !== '' && !this.isApplied(selection, e.subCommand)) {\n            addedLength = (e.subCommand === 'UpperCase' || e.subCommand === 'LowerCase') ? 0 :\n                this.syntax[e.subCommand].length;\n            var repStart = textArea.value.substr(selection.start - this.syntax[e.subCommand].length, this.syntax[e.subCommand].length);\n            var repEnd = void 0;\n            if ((repStart === e.subCommand) || ((selection.start - this.syntax[e.subCommand].length ===\n                textArea.value.indexOf(this.syntax[e.subCommand])) && (selection.end === textArea.value.lastIndexOf(this.syntax[e.subCommand]) || selection.end === textArea.value.lastIndexOf('</' + this.syntax[e.subCommand].substring(1, 5))))) {\n                if (e.subCommand === 'SubScript' || e.subCommand === 'SuperScript') {\n                    repEnd = textArea.value.substr(selection.end, this.syntax[e.subCommand].length + 1);\n                }\n                else {\n                    repEnd = textArea.value.substr(selection.end, this.syntax[e.subCommand].length);\n                }\n                var repStartText = this.replaceAt(textArea.value.substr(0, selection.start), repStart, '', selection.start - this.syntax[e.subCommand].length, selection.start);\n                var repEndText = this.replaceAt(textArea.value.substr(selection.end, textArea.value.length), repEnd, '', 0, repEnd.length);\n                textArea.value = repStartText + selection.text + repEndText;\n                this.restore(textArea, start - addedLength, end - addedLength, e);\n            }\n            else {\n                if (e.subCommand === 'SubScript' || e.subCommand === 'SuperScript') {\n                    selection.text = this.syntax[e.subCommand] + selection.text\n                        + '</' + this.syntax[e.subCommand].substring(1, 5);\n                }\n                else if (e.subCommand === 'UpperCase' || e.subCommand === 'LowerCase') {\n                    selection.text = (e.subCommand === 'UpperCase') ? selection.text.toUpperCase()\n                        : selection.text.toLowerCase();\n                }\n                else {\n                    selection.text = this.syntax[e.subCommand] + selection.text + this.syntax[e.subCommand];\n                }\n                textArea.value = textArea.value.substr(0, selection.start) + selection.text +\n                    textArea.value.substr(selection.end, textArea.value.length);\n                this.restore(textArea, start + addedLength, end + addedLength, e);\n            }\n        }\n        else if (e.subCommand !== 'UpperCase' && e.subCommand !== 'LowerCase') {\n            if (e.subCommand === 'SubScript' || e.subCommand === 'SuperScript') {\n                selection.text = this.textReplace(selection.text, e.subCommand);\n                selection.text = this.syntax[e.subCommand] + selection.text\n                    + '</' + this.syntax[e.subCommand].substring(1, 5);\n            }\n            else {\n                selection.text = this.textReplace(selection.text, e.subCommand);\n                selection.text = this.syntax[e.subCommand] + selection.text + this.syntax[e.subCommand];\n            }\n            textArea.value = textArea.value.substr(0, selection.start)\n                + selection.text + textArea.value.substr(selection.end, textArea.value.length);\n            addedLength = this.syntax[e.subCommand].length;\n            if (selection.start === selection.end) {\n                this.restore(textArea, start + addedLength, end + addedLength, e);\n            }\n            else {\n                this.restore(textArea, start + addedLength, end - addedLength, e);\n            }\n        }\n        else {\n            this.restore(textArea, start, end, e);\n        }\n        this.parent.undoRedoManager.saveData();\n    };\n    MDSelectionFormats.prototype.replaceAt = function (input, search, replace, start, end) {\n        return input.slice(0, start)\n            + input.slice(start, end).replace(search, replace)\n            + input.slice(end);\n    };\n    MDSelectionFormats.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: this.currentAction,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    MDSelectionFormats.prototype.textReplace = function (text, command) {\n        var regx = this.singleCharRegx(this.syntax[command]);\n        switch (command) {\n            case 'Bold':\n                regx = this.multiCharRegx(this.syntax[command].substr(0, 1));\n                text = text.replace(regx, '');\n                break;\n            case 'Italic':\n                if (!this.isBold(text, this.syntax[command].substr(0, 1))) {\n                    text = text.replace(regx, '');\n                }\n                else {\n                    var regxB = this.multiCharRegx(this.syntax[command].substr(0, 1));\n                    var repText = text;\n                    repText = repText.replace(regxB, '$%@').replace(regx, '');\n                    var regxTemp = new RegExp('\\\\$%@', 'g');\n                    text = repText.replace(regxTemp, this.syntax[command].substr(0, 1) + this.syntax[command].substr(0, 1));\n                }\n                break;\n            case 'StrikeThrough':\n                text = text.replace(regx, '');\n                break;\n            case 'InlineCode':\n                text = text.replace(regx, '');\n                break;\n            case 'SubScript':\n                text = text.replace(/<sub>/g, '').replace(/<\\/sub>/g, '');\n                break;\n            case 'SuperScript':\n                text = text.replace(/<sup>/g, '').replace(/<\\/sup>/g, '');\n                break;\n        }\n        return text;\n    };\n    MDSelectionFormats.prototype.isApplied = function (line, command) {\n        var regx = this.singleCharRegx(this.syntax[command]);\n        switch (command) {\n            case 'SubScript':\n            case 'SuperScript':\n                regx = this.singleCharRegx(this.syntax[command]);\n                return regx.test(line.text);\n            case 'Bold':\n            case 'StrikeThrough':\n                regx = this.multiCharRegx(this.syntax[command].substr(0, 1));\n                return regx.test(line.text);\n            case 'UpperCase':\n            case 'LowerCase':\n                regx = new RegExp('^[' + this.syntax[command] + ']*$', 'g');\n                return regx.test(line.text);\n            case 'Italic':\n                var regTest = void 0;\n                var regxB = this.multiCharRegx(this.syntax[command].substr(0, 1));\n                if (regxB.test(line.text)) {\n                    var repText = line.text;\n                    repText = repText.replace(regxB, '$%#');\n                    regTest = regx.test(repText);\n                }\n                else {\n                    regTest = regx.test(line.text);\n                }\n                return regTest;\n            case 'InlineCode':\n                return regx.test(line.text);\n        }\n    };\n    return MDSelectionFormats;\n}());\nexport { MDSelectionFormats };\n","/**\n * Default Markdown formats config for adapter\n */\nexport var markdownFormatTags = {\n    'h6': '###### ',\n    'h5': '##### ',\n    'h4': '#### ',\n    'h3': '### ',\n    'h2': '## ',\n    'h1': '# ',\n    'blockquote': '> ',\n    'pre': '```\\n',\n    'p': ''\n};\n/**\n * Default selection formats config for adapter\n */\nexport var markdownSelectionTags = {\n    'Bold': '**',\n    'Italic': '*',\n    'StrikeThrough': '~~',\n    'InlineCode': '`',\n    'SubScript': '<sub>',\n    'SuperScript': '<sup>',\n    'UpperCase': 'A-Z',\n    'LowerCase': 'a-z'\n};\n/**\n * Default Markdown lists config for adapter\n */\nexport var markdownListsTags = {\n    'OL': '1. ',\n    'UL': '- ',\n};\n/**\n * Default html key config for adapter\n */\nexport var htmlKeyConfig = {\n    'toolbar-focus': 'alt+f10',\n    'escape': '27',\n    'insert-link': 'ctrl+k',\n    'insert-image': 'ctrl+shift+i',\n    'insert-table': 'ctrl+shift+e',\n    'undo': 'ctrl+z',\n    'redo': 'ctrl+y',\n    'copy': 'ctrl+c',\n    'cut': 'ctrl+x',\n    'paste': 'ctrl+v',\n    'bold': 'ctrl+b',\n    'italic': 'ctrl+i',\n    'underline': 'ctrl+u',\n    'strikethrough': 'ctrl+shift+s',\n    'uppercase': 'ctrl+shift+u',\n    'lowercase': 'ctrl+shift+l',\n    'superscript': 'ctrl+shift+=',\n    'subscript': 'ctrl+=',\n    'indents': 'ctrl+]',\n    'outdents': 'ctrl+[',\n    'html-source': 'ctrl+shift+h',\n    'full-screen': 'ctrl+shift+f',\n    'decrease-fontsize': 'ctrl+shift+<',\n    'increase-fontsize': 'ctrl+shift+>',\n    'justify-center': 'ctrl+e',\n    'justify-full': 'ctrl+j',\n    'justify-left': 'ctrl+l',\n    'justify-right': 'ctrl+r',\n    'clear-format': 'ctrl+shift+r',\n    'ordered-list': 'ctrl+shift+o',\n    'unordered-list': 'ctrl+alt+o',\n    'space': '32',\n    'enter': '13',\n    'tab': '9'\n};\n/**\n * Default  markdown key config for adapter\n */\nexport var markdownKeyConfig = {\n    'toolbar-focus': 'alt+f10',\n    'escape': '27',\n    'insert-link': 'ctrl+k',\n    'insert-image': 'ctrl+shift+i',\n    'insert-table': 'ctrl+shift+e',\n    'undo': 'ctrl+z',\n    'redo': 'ctrl+y',\n    'copy': 'ctrl+c',\n    'cut': 'ctrl+x',\n    'paste': 'ctrl+v',\n    'bold': 'ctrl+b',\n    'italic': 'ctrl+i',\n    'strikethrough': 'ctrl+shift+s',\n    'uppercase': 'ctrl+shift+u',\n    'lowercase': 'ctrl+shift+l',\n    'superscript': 'ctrl+shift+=',\n    'subscript': 'ctrl+=',\n    'full-screen': 'ctrl+shift+f',\n    'ordered-list': 'ctrl+shift+o',\n    'unordered-list': 'ctrl+alt+o'\n};\n/**\n * PasteCleanup Grouping of similar functionality tags\n */\nexport var pasteCleanupGroupingTags = {\n    'b': ['strong'],\n    'strong': ['b'],\n    'i': ['emp', 'cite'],\n    'emp': ['i', 'cite'],\n    'cite': ['i', 'emp']\n};\n/**\n * PasteCleanup Grouping of similar functionality tags\n */\nexport var listConversionFilters = {\n    'first': 'MsoListParagraphCxSpFirst',\n    'middle': 'MsoListParagraphCxSpMiddle',\n    'last': 'MsoListParagraphCxSpLast'\n};\n/**\n * Dom-Node Grouping of self closing tags\n * @hidden\n */\nexport var selfClosingTags = [\n    'BR',\n    'IMG'\n];\n","import { debounce, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoCommands = /** @class */ (function () {\n    function UndoRedoCommands(parent, options) {\n        this.undoRedoStack = [];\n        this.parent = parent;\n        this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n        this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    UndoRedoCommands.prototype.addEventListener = function () {\n        var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n        this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n        this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n    };\n    UndoRedoCommands.prototype.onPropertyChanged = function (props) {\n        for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'undoRedoSteps':\n                    this.undoRedoSteps = props.newProp.undoRedoSteps;\n                    break;\n                case 'undoRedoTimer':\n                    this.undoRedoTimer = props.newProp.undoRedoTimer;\n                    break;\n            }\n        }\n    };\n    UndoRedoCommands.prototype.removeEventListener = function () {\n        var debounceListener = debounce(this.keyUp, 300);\n        this.parent.observer.off(EVENTS.KEY_UP_HANDLER, debounceListener);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n        this.parent.observer.off(EVENTS.ACTION, this.onAction);\n        this.parent.observer.off(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged);\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    UndoRedoCommands.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    UndoRedoCommands.prototype.onAction = function (e) {\n        if (e.subCommand === 'Undo') {\n            this.undo(e);\n        }\n        else {\n            this.redo(e);\n        }\n    };\n    UndoRedoCommands.prototype.keyDown = function (e) {\n        var event = e.event;\n        var proxy = this;\n        switch (event.action) {\n            case 'undo':\n                event.preventDefault();\n                proxy.undo(e);\n                break;\n            case 'redo':\n                event.preventDefault();\n                proxy.redo(e);\n                break;\n        }\n    };\n    UndoRedoCommands.prototype.keyUp = function (e) {\n        if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n            this.saveData(e);\n        }\n    };\n    /**\n     * MD collection stored string format.\n     * @method saveData\n     * @return {void}\n     */\n    UndoRedoCommands.prototype.saveData = function (e) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var textValue = this.parent.element.value;\n        var changEle = { text: textValue, start: start, end: end };\n        if (this.undoRedoStack.length >= this.steps) {\n            this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n        }\n        if (this.undoRedoStack.length > 1 && (this.undoRedoStack[this.undoRedoStack.length - 1].start === start) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].end === end)) {\n            return;\n        }\n        this.undoRedoStack.push(changEle);\n        this.steps = this.undoRedoStack.length - 1;\n        if (this.steps > this.undoRedoSteps) {\n            this.undoRedoStack.shift();\n            this.steps--;\n        }\n        if (e && e.callBack) {\n            e.callBack();\n        }\n    };\n    /**\n     * Undo the editable text.\n     * @method undo\n     * @return {void}\n     */\n    UndoRedoCommands.prototype.undo = function (e) {\n        if (this.steps > 0) {\n            this.currentAction = 'Undo';\n            var start = this.undoRedoStack[this.steps - 1].start;\n            var end = this.undoRedoStack[this.steps - 1].end;\n            var removedContent = this.undoRedoStack[this.steps - 1].text;\n            this.parent.element.value = removedContent;\n            this.parent.element.focus();\n            this.steps--;\n            this.restore(this.parent.element, start, end, e);\n        }\n    };\n    /**\n     * Redo the editable text.\n     * @method redo\n     * @return {void}\n     */\n    UndoRedoCommands.prototype.redo = function (e) {\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            this.currentAction = 'Redo';\n            var start = this.undoRedoStack[this.steps + 1].start;\n            var end = this.undoRedoStack[this.steps + 1].end;\n            this.parent.element.value = this.undoRedoStack[this.steps + 1].text;\n            this.parent.element.focus();\n            this.steps++;\n            this.restore(this.parent.element, start, end, e);\n        }\n    };\n    UndoRedoCommands.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: this.currentAction,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    UndoRedoCommands.prototype.getUndoStatus = function () {\n        var status = { undo: false, redo: false };\n        if (this.steps > 0) {\n            status.undo = true;\n        }\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            status.redo = true;\n        }\n        return status;\n    };\n    return UndoRedoCommands;\n}());\nexport { UndoRedoCommands };\n","import * as CONSTANT from './../base/constant';\n/**\n * Link internal component\n * @hidden\n */\nvar MDLink = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function MDLink(parent) {\n        this.parent = parent;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDLink.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.LINK_COMMAND, this.createLink, this);\n    };\n    MDLink.prototype.createLink = function (e) {\n        var textArea = this.parent.element;\n        textArea.focus();\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var text = (e.subCommand === 'Image') ? this.selection.getSelectedText(textArea) : e.item.text;\n        var startOffset = (e.subCommand === 'Image') ? (start + 2) : (start + 1);\n        var endOffset = (e.subCommand === 'Image') ? (end + 2) : (end + 1);\n        text = (e.subCommand === 'Image') ? '![' + text + '](' + e.item.url + ')' : '[' + text + '](' + e.item.url + ')';\n        textArea.value = textArea.value.substr(0, start)\n            + text + textArea.value.substr(end, textArea.value.length);\n        this.parent.markdownSelection.setSelection(textArea, startOffset, endOffset);\n        this.restore(textArea, startOffset, endOffset, e);\n    };\n    MDLink.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    return MDLink;\n}());\nexport { MDLink };\n","import * as CONSTANT from './../base/constant';\nimport { extend } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * Link internal component\n * @hidden\n */\nvar MDTable = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function MDTable(options) {\n        extend(this, this, options, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDTable.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.MD_TABLE, this.createTable, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    MDTable.prototype.removeEventListener = function () {\n        this.parent.observer.off(CONSTANT.MD_TABLE, this.createTable);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown);\n    };\n    MDTable.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    MDTable.prototype.onKeyDown = function (e) {\n        if (e.event.action === 'insert-table') {\n            e.item = e.value;\n            this.createTable(e);\n        }\n    };\n    MDTable.prototype.createTable = function (e) {\n        this.element = this.parent.element;\n        var start = this.element.selectionStart;\n        var end = this.element.selectionEnd;\n        var textAreaInitial;\n        textAreaInitial = this.element.value;\n        this.locale = e;\n        this.selection.save(start, end);\n        this.restore(this.element.selectionStart, this.element.selectionEnd, null);\n        this.insertTable(start, end, textAreaInitial, e);\n    };\n    MDTable.prototype.getTable = function () {\n        var table = '';\n        table += this.textNonEmpty();\n        table += this.tableHeader(this.locale);\n        table += this.tableCell(this.locale);\n        return table;\n    };\n    MDTable.prototype.tableHeader = function (e) {\n        var text = '';\n        for (var i = 1; i <= 2; i++) {\n            text += '|';\n            for (var j = 1; j <= 2; j++) {\n                if (i === 1) {\n                    text += e.item.headingText + ' ' + j + '|';\n                }\n                else {\n                    text += '---------|';\n                }\n            }\n            text += this.insertLine();\n        }\n        return text;\n    };\n    MDTable.prototype.tableCell = function (e) {\n        var text = '';\n        for (var i = 1; i <= 2; i++) {\n            text += '|';\n            for (var j = 1; j <= 2; j++) {\n                text += e.item.colText + ' ' + this.convertToLetters(i) + j + '|';\n            }\n            text += this.insertLine();\n        }\n        text += this.insertLine();\n        return text;\n    };\n    MDTable.prototype.insertLine = function () {\n        var dummyElement = document.createElement('div');\n        dummyElement.innerHTML = '\\n';\n        return dummyElement.textContent;\n    };\n    MDTable.prototype.insertTable = function (start, end, textAreaInitial, e) {\n        var parentText = this.selection.getSelectedParentPoints(this.element);\n        var lastLineSplit = parentText[parentText.length - 1].text.split(' ', 2);\n        var syntaxArr = this.getFormatTag();\n        var syntaxCount = 0;\n        if (lastLineSplit.length < 2) {\n            this.element.value = this.updateValue(this.getTable());\n            this.makeSelection(textAreaInitial, start, end);\n        }\n        else {\n            if (this.ensureFormatApply(parentText[parentText.length - 1].text)) {\n                this.checkValid(start, end, this.getTable(), textAreaInitial, e, lastLineSplit, parentText, syntaxArr);\n            }\n            else {\n                this.element.value = this.updateValue(this.getTable());\n                this.makeSelection(textAreaInitial, start, end);\n            }\n        }\n        this.restore(this.element.selectionStart, this.element.selectionEnd, e);\n    };\n    MDTable.prototype.makeSelection = function (textAreaInitial, start, end) {\n        end = start + (textAreaInitial.length > 0 ? 12 : 10); //end is added 12 or 10 because to make the table heading selected\n        start += textAreaInitial.length > 0 ? 3 : 1; // Start is added 3 or 1 because new lines are added when inserting table\n        this.selection.setSelection(this.element, start, end);\n    };\n    MDTable.prototype.getFormatTag = function () {\n        var syntaxFormatKey = Object.keys(this.syntaxTag.Formats);\n        var syntaxListKey = Object.keys(this.syntaxTag.List);\n        var syntaxArr = [];\n        for (var i = 0; i < syntaxFormatKey.length; i++) {\n            syntaxArr.push(this.syntaxTag.Formats[syntaxFormatKey[i]]);\n        }\n        for (var j = 0; j < syntaxListKey.length; j++) {\n            syntaxArr.push(this.syntaxTag.List[syntaxListKey[j]]);\n        }\n        return syntaxArr;\n    };\n    MDTable.prototype.ensureFormatApply = function (line) {\n        var formatTags = this.getFormatTag();\n        var formatSplitZero = line.split(' ', 2)[0] + ' ';\n        for (var i = 0; i < formatTags.length; i++) {\n            if (formatSplitZero === formatTags[i]) {\n                return true;\n            }\n        }\n        return false;\n    };\n    MDTable.prototype.ensureStartValid = function (firstLine, parentText) {\n        var firstLineSplit = parentText[0].text.split(' ', 2);\n        for (var i = firstLine + 1; i <= firstLine + firstLineSplit[0].length + 1; i++) {\n            if (this.element.selectionStart === i || this.element.selectionEnd === i) {\n                return false;\n            }\n        }\n        return true;\n    };\n    MDTable.prototype.ensureEndValid = function (lastLine, formatSplitLength) {\n        for (var i = lastLine + 1; i <= lastLine + formatSplitLength + 1; i++) {\n            if (this.element.selectionEnd === i) {\n                return false;\n            }\n        }\n        return true;\n    };\n    MDTable.prototype.updateValueWithFormat = function (formatSplit, text) {\n        var textApplyFormat = this.element.value.substring(this.element.selectionEnd, this.element.value.length);\n        text += textApplyFormat.replace(textApplyFormat, (formatSplit[0] + ' ' + textApplyFormat));\n        return this.element.value.substr(0, this.element.selectionStart) + text;\n    };\n    MDTable.prototype.updateValue = function (text) {\n        return this.element.value.substr(0, this.element.selectionStart) + text +\n            this.element.value.substr(this.element.selectionEnd, this.element.value.length);\n    };\n    MDTable.prototype.checkValid = function (start, end, text, textAreaInitial, e, formatSplit, parentText, syntaxArr) {\n        if (this.ensureStartValid(parentText[0].start, parentText) &&\n            this.ensureEndValid(parentText[parentText.length - 1].start, formatSplit[0].length)) {\n            if (start === parentText[0].start) {\n                if (start !== end && end !== (parentText[parentText.length - 1].end - 1)) {\n                    this.element.value = this.updateValueWithFormat(formatSplit, text);\n                }\n                else {\n                    this.element.value = this.updateValue(text);\n                }\n            }\n            else if (end === parentText[parentText.length - 1].end - 1) {\n                this.element.value = this.updateValue(text);\n            }\n            else {\n                this.element.value = this.updateValueWithFormat(formatSplit, text);\n            }\n            this.makeSelection(textAreaInitial, start, end);\n        }\n    };\n    MDTable.prototype.convertToLetters = function (rowNumber) {\n        var baseChar = ('A').charCodeAt(0);\n        var letters = '';\n        do {\n            rowNumber -= 1;\n            letters = String.fromCharCode(baseChar + (rowNumber % 26)) + letters;\n            rowNumber = (rowNumber / 26) >> 0;\n        } while (rowNumber > 0);\n        return letters;\n    };\n    MDTable.prototype.textNonEmpty = function () {\n        var emptyText = '';\n        if (this.isCursorBased() || this.isSelectionBased()) {\n            if (this.element.value.length > 0) {\n                emptyText += this.insertLine();\n                emptyText += this.insertLine(); // to append two new line when textarea having content.               \n            }\n        }\n        return emptyText;\n    };\n    MDTable.prototype.isCursorBased = function () {\n        return this.element.selectionStart === this.element.selectionEnd;\n    };\n    MDTable.prototype.isSelectionBased = function () {\n        return this.element.selectionStart !== this.element.selectionEnd;\n    };\n    MDTable.prototype.restore = function (start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(this.element);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(this.element),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    return MDTable;\n}());\nexport { MDTable };\n","import * as CONSTANT from './../base/constant';\n/**\n * Link internal component\n * @hidden\n */\nvar ClearFormat = /** @class */ (function () {\n    /**\n     * Constructor for creating the clear format plugin\n     * @hidden\n     */\n    function ClearFormat(parent) {\n        this.parent = parent;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    ClearFormat.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.CLEAR_COMMAND, this.clear, this);\n    };\n    ClearFormat.prototype.replaceRegex = function (data) {\n        return data.replace(/\\*/ig, '\\\\*').replace(/\\&/ig, '\\\\&')\n            .replace(/\\-/ig, '\\\\-').replace(/\\^/ig, '\\\\^')\n            .replace(/\\$/ig, '\\\\$').replace(/\\./ig, '\\\\.')\n            .replace(/\\|/ig, '\\\\|').replace(/\\?/ig, '\\\\?')\n            .replace(/\\+/ig, '\\\\+').replace(/\\-/ig, '\\\\-')\n            .replace(/\\&/ig, '\\\\&');\n    };\n    ClearFormat.prototype.clearSelectionTags = function (text) {\n        var data = this.parent.selectionTags;\n        var keys = Object.keys(data);\n        for (var num = 0; num < keys.length; num++) {\n            var key = keys[num];\n            if (data.hasOwnProperty(key) && data[key] !== '') {\n                var expString = this.replaceRegex(data[key]);\n                var regExp = void 0;\n                var startExp = void 0;\n                var endExp = void 0;\n                if (data[key] === '<sup>') {\n                    regExp = new RegExp('<sup>(.*?)<\\/sup>', 'ig');\n                }\n                else if (data[key] === '<sub>') {\n                    regExp = new RegExp('<sub>(.*?)<\\/sub>', 'ig');\n                }\n                else {\n                    regExp = new RegExp(expString + '(.*?)' + expString, 'ig');\n                }\n                startExp = data[key].length;\n                endExp = (data[key] === '<sup>' || data[key] === '<sub>') ? data[key].length + 1 : data[key].length;\n                var val = text.match(regExp);\n                for (var index = 0; val && index < val.length && val[index] !== ''; index++) {\n                    text = text.replace(val[index], val[index].substr(startExp, val[index].length - endExp - startExp));\n                }\n            }\n        }\n        return text;\n    };\n    ClearFormat.prototype.clearFormatTags = function (text) {\n        var lines = text.split('\\n');\n        return this.clearFormatLines(lines);\n    };\n    ClearFormat.prototype.clearFormatLines = function (lines) {\n        var tags = [this.parent.formatTags, this.parent.listTags];\n        var str = '';\n        for (var len = 0; len < lines.length; len++) {\n            for (var num = 0; num < tags.length; num++) {\n                var data = tags[num];\n                var keys = Object.keys(data);\n                for (var index = 0; index < keys.length; index++) {\n                    var key = keys[index];\n                    if (data.hasOwnProperty(key) && data[key] !== '') {\n                        if (lines[len].indexOf(data[key]) === 0) {\n                            lines[len] = lines[len].replace(data[key], '');\n                            lines[len] = this.clearFormatLines([lines[len]]);\n                        }\n                    }\n                }\n            }\n            str = str + lines[len] + ((len !== lines.length - 1) ? '\\n' : '');\n        }\n        return str;\n    };\n    ClearFormat.prototype.clear = function (e) {\n        var textArea = this.parent.element;\n        textArea.focus();\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var text = this.selection.getSelectedText(textArea);\n        text = this.clearSelectionTags(text);\n        text = this.clearFormatTags(text);\n        textArea.value = textArea.value.substr(0, start)\n            + text + textArea.value.substr(end, textArea.value.length);\n        this.parent.markdownSelection.setSelection(textArea, start, start + text.length);\n        this.restore(textArea, start, start + text.length, e);\n    };\n    ClearFormat.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    return ClearFormat;\n}());\nexport { ClearFormat };\n","import { Observer } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './constant';\nimport { MDLists } from './../plugin/lists';\nimport { MDFormats } from './../plugin/formats';\nimport { MDSelectionFormats } from './../plugin/md-selection-formats';\nimport { MarkdownSelection } from './../plugin/markdown-selection';\nimport { extend } from '@syncfusion/ej2-base';\nimport { markdownFormatTags, markdownListsTags, markdownSelectionTags } from './../../common/config';\nimport { UndoRedoCommands } from './../plugin/undo';\nimport { MDLink } from './../plugin/link';\nimport { MDTable } from './../plugin/table';\nimport * as EVENTS from './../../common/constant';\nimport { ClearFormat } from './../plugin/clearformat';\n/**\n * MarkdownParser internal component\n * @hidden\n */\nvar MarkdownParser = /** @class */ (function () {\n    /**\n     * Constructor for creating the component\n     * @hidden\n     */\n    function MarkdownParser(options) {\n        this.initialize();\n        extend(this, this, options, true);\n        this.observer = new Observer(this);\n        this.markdownSelection = new MarkdownSelection();\n        this.listObj = new MDLists({ parent: this, syntax: this.listTags });\n        this.formatObj = new MDFormats({ parent: this, syntax: this.formatTags });\n        this.undoRedoManager = new UndoRedoCommands(this, options.options);\n        this.mdSelectionFormats = new MDSelectionFormats({ parent: this, syntax: this.selectionTags });\n        this.linkObj = new MDLink(this);\n        this.tableObj = new MDTable({ parent: this, syntaxTag: ({ Formats: this.formatTags, List: this.listTags }) });\n        this.clearObj = new ClearFormat(this);\n        this.wireEvents();\n    }\n    MarkdownParser.prototype.initialize = function () {\n        this.formatTags = markdownFormatTags;\n        this.listTags = markdownListsTags;\n        this.selectionTags = markdownSelectionTags;\n    };\n    MarkdownParser.prototype.wireEvents = function () {\n        this.observer.on(EVENTS.KEY_DOWN, this.editorKeyDown, this);\n        this.observer.on(EVENTS.KEY_UP, this.editorKeyUp, this);\n        this.observer.on(EVENTS.MODEL_CHANGED, this.onPropertyChanged, this);\n    };\n    MarkdownParser.prototype.onPropertyChanged = function (props) {\n        this.observer.notify(EVENTS.MODEL_CHANGED_PLUGIN, props);\n    };\n    MarkdownParser.prototype.editorKeyDown = function (e) {\n        this.observer.notify(EVENTS.KEY_DOWN_HANDLER, e);\n    };\n    MarkdownParser.prototype.editorKeyUp = function (e) {\n        this.observer.notify(EVENTS.KEY_UP_HANDLER, e);\n    };\n    MarkdownParser.prototype.execCommand = function (command, value, event, callBack, text, exeValue) {\n        switch (command.toLocaleLowerCase()) {\n            case 'lists':\n                this.observer.notify(CONSTANT.LISTS_COMMAND, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'formats':\n                this.observer.notify(EVENTS.FORMAT_TYPE, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'actions':\n                this.observer.notify(EVENTS.ACTION, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'style':\n            case 'effects':\n            case 'casing':\n                this.observer.notify(CONSTANT.selectionCommand, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'links':\n            case 'images':\n                this.observer.notify(CONSTANT.LINK_COMMAND, { subCommand: value, event: event, callBack: callBack, item: exeValue });\n                break;\n            case 'table':\n                switch (value.toString().toLocaleLowerCase()) {\n                    case 'createtable':\n                        this.observer.notify(CONSTANT.MD_TABLE, { subCommand: value, item: exeValue, event: event, callBack: callBack });\n                        break;\n                }\n                break;\n            case 'clear':\n                this.observer.notify(CONSTANT.CLEAR_COMMAND, { subCommand: value, event: event, callBack: callBack });\n                break;\n        }\n    };\n    return MarkdownParser;\n}());\nexport { MarkdownParser };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Formatter } from './formatter';\nimport { MarkdownParser } from './../../markdown-parser/base/markdown-parser';\nimport { extend } from '@syncfusion/ej2-base';\nimport { markdownKeyConfig, markdownListsTags, markdownFormatTags, markdownSelectionTags } from './../../common/config';\n/**\n * Markdown adapter\n * @hidden\n */\nvar MarkdownFormatter = /** @class */ (function (_super) {\n    __extends(MarkdownFormatter, _super);\n    function MarkdownFormatter(options) {\n        var _this = _super.call(this) || this;\n        _this.initialize();\n        extend(_this, _this, options, true);\n        if (options && _this.element) {\n            _this.updateFormatter(_this.element, document, options.options);\n        }\n        return _this;\n    }\n    MarkdownFormatter.prototype.initialize = function () {\n        this.keyConfig = markdownKeyConfig;\n        this.formatTags = markdownFormatTags;\n        this.listTags = markdownListsTags;\n        this.selectionTags = markdownSelectionTags;\n    };\n    /**\n     * Update the formatter of RichTextEditor\n     * @param  {Element} editElement\n     * @param  {Document} doc\n     */\n    MarkdownFormatter.prototype.updateFormatter = function (editElement, doc, options) {\n        if (editElement) {\n            this.editorManager = new MarkdownParser({\n                element: editElement,\n                formatTags: this.formatTags,\n                listTags: this.listTags,\n                selectionTags: this.selectionTags,\n                options: options\n            });\n        }\n    };\n    return MarkdownFormatter;\n}(Formatter));\nexport { MarkdownFormatter };\n","/**\n * Markdown module is used to render RichTextEditor as Markdown editor content\n * @hidden\n */\nvar MarkdownRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     */\n    function MarkdownRender(parent) {\n        this.parent = parent;\n    }\n    /**\n     * The function is used to render RichTextEditor content div\n     */\n    MarkdownRender.prototype.renderPanel = function () {\n        var rteObj = this.parent;\n        var div = this.parent.createElement('div', { id: this.parent.getID() + '_view', className: 'e-rte-content' });\n        this.editableElement = this.parent.createElement('textarea', {\n            className: 'e-content',\n            id: this.parent.getID() + '_editable-content'\n        });\n        div.appendChild(this.editableElement);\n        this.setPanel(div);\n        rteObj.element.appendChild(div);\n    };\n    /**\n     * Get the content div element of RichTextEditor\n     * @return {Element}\n     */\n    MarkdownRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Get the editable element of RichTextEditor\n     * @return {Element}\n     */\n    MarkdownRender.prototype.getEditPanel = function () {\n        return this.editableElement;\n    };\n    /**\n     * Returns the text content as string.\n     * @return {string}\n     */\n    MarkdownRender.prototype.getText = function () {\n        return this.getEditPanel().value;\n    };\n    /**\n     * Set the content div element of RichTextEditor\n     * @param  {Element} panel\n     */\n    MarkdownRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the document of RichTextEditor\n     * @param  {Document}\n     */\n    MarkdownRender.prototype.getDocument = function () {\n        return this.getEditPanel().ownerDocument;\n    };\n    return MarkdownRender;\n}());\nexport { MarkdownRender };\n","import * as events from '../base/constant';\nimport { isNullOrUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { MarkdownFormatter } from '../formatter/markdown-formatter';\nimport { RenderType } from '../base/enum';\nimport * as classes from '../base/classes';\nimport { MarkdownToolbarStatus } from './markdown-toolbar-status';\nimport { MarkdownRender } from '../renderer/markdown-renderer';\nimport { MarkdownSelection } from './../../markdown-parser/plugin/markdown-selection';\n/**\n * `MarkdownEditor` module is used to markdown editor\n */\nvar MarkdownEditor = /** @class */ (function () {\n    function MarkdownEditor(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * Destroys the Markdown.\n     * @method destroy\n     * @return {void}\n     */\n    MarkdownEditor.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    MarkdownEditor.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.saveSelection = new MarkdownSelection();\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.markdownToolbarClick, this.onToolbarClick, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.selectAll, this.selectAll, this);\n        this.parent.on(events.getSelectedHtml, this.getSelectedHtml, this);\n        this.parent.on(events.selectionSave, this.onSelectionSave, this);\n        this.parent.on(events.selectionRestore, this.onSelectionRestore, this);\n        this.parent.on(events.readOnlyMode, this.updateReadOnly, this);\n    };\n    MarkdownEditor.prototype.updateReadOnly = function () {\n        if (this.parent.readonly) {\n            this.parent.contentModule.getEditPanel().setAttribute('readonly', 'readonly');\n            addClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n        else {\n            this.parent.contentModule.getEditPanel().removeAttribute('readonly');\n            removeClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n    };\n    MarkdownEditor.prototype.onSelectionSave = function () {\n        var textArea = this.parent.contentModule.getEditPanel();\n        this.saveSelection.save(textArea.selectionStart, textArea.selectionEnd);\n    };\n    MarkdownEditor.prototype.onSelectionRestore = function (e) {\n        this.contentRenderer.getEditPanel().focus();\n        var textArea = this.parent.contentModule.getEditPanel();\n        this.saveSelection.restore(textArea);\n    };\n    MarkdownEditor.prototype.onToolbarClick = function (args) {\n        var text;\n        var startOffset;\n        var endOffset;\n        var item = args.item;\n        if (this.parent.editorMode === 'Markdown') {\n            var textArea = this.parent.contentModule.getEditPanel();\n            textArea.focus();\n            startOffset = textArea.selectionStart;\n            endOffset = textArea.selectionEnd;\n            text = textArea.value.substring(startOffset, endOffset);\n        }\n        switch (item.subCommand) {\n            case 'Maximize':\n                this.parent.notify(events.enableFullScreen, { args: args });\n                break;\n            case 'Minimize':\n                this.parent.notify(events.disableFullScreen, { args: args });\n                break;\n            case 'CreateLink':\n                this.parent.notify(events.insertLink, { member: 'link', args: args, text: text, module: 'Markdown' });\n                break;\n            case 'Image':\n                this.parent.notify(events.insertImage, { member: 'image', args: args, text: text, module: 'Markdown' });\n                break;\n            case 'CreateTable':\n                var tableConstant = {\n                    'headingText': this.parent.localeObj.getConstant('TableHeadingText'),\n                    'colText': this.parent.localeObj.getConstant('TableColText')\n                };\n                this.parent.formatter.process(this.parent, args, args.originalEvent, tableConstant);\n                break;\n            default:\n                this.parent.formatter.process(this.parent, args, args.originalEvent, null);\n                break;\n        }\n    };\n    MarkdownEditor.prototype.instantiateRenderer = function () {\n        this.renderFactory.addRenderer(RenderType.Content, new MarkdownRender(this.parent));\n    };\n    MarkdownEditor.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.markdownToolbarClick, this.onToolbarClick);\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n        this.parent.off(events.selectAll, this.selectAll);\n        this.parent.off(events.getSelectedHtml, this.getSelectedHtml);\n        this.parent.off(events.selectionSave, this.onSelectionSave);\n        this.parent.off(events.selectionRestore, this.onSelectionRestore);\n        this.parent.off(events.readOnlyMode, this.updateReadOnly);\n    };\n    MarkdownEditor.prototype.render = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        var editElement = this.contentRenderer.getEditPanel();\n        var option = { undoRedoSteps: this.parent.undoRedoSteps, undoRedoTimer: this.parent.undoRedoTimer };\n        if (isNullOrUndefined(this.parent.formatter)) {\n            this.parent.formatter = new MarkdownFormatter({\n                element: editElement,\n                options: option\n            });\n        }\n        else {\n            this.parent.formatter.updateFormatter(editElement, this.contentRenderer.getDocument(), option);\n        }\n        if (this.parent.toolbarSettings.enable) {\n            this.toolbarUpdate = new MarkdownToolbarStatus(this.parent);\n        }\n        this.parent.notify(events.bindOnEnd, {});\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    MarkdownEditor.prototype.onPropertyChanged = function (e) {\n        // On property code change here\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    MarkdownEditor.prototype.getModuleName = function () {\n        return 'markdownEditor';\n    };\n    /**\n     * For selecting all content in RTE\n     * @private\n     */\n    MarkdownEditor.prototype.selectAll = function () {\n        this.parent.formatter.editorManager.markdownSelection.setSelection(this.parent.contentModule.getEditPanel(), 0, this.parent.contentModule.getEditPanel().value.length);\n    };\n    /**\n     * For get a selected text in RTE\n     * @private\n     */\n    MarkdownEditor.prototype.getSelectedHtml = function (e) {\n        e.callBack(this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()));\n    };\n    return MarkdownEditor;\n}());\nexport { MarkdownEditor };\n","/**\n * Constant values for EditorManager\n */\n/* Image plugin events\n * @hidden\n */\nexport var IMAGE = 'INSERT-IMAGE';\nexport var TABLE = 'INSERT-TABLE';\nexport var LINK = 'INSERT-LINK';\nexport var INSERT_ROW = 'INSERT-ROW';\nexport var INSERT_COLUMN = 'INSERT-COLUMN';\nexport var DELETEROW = 'DELETE-ROW';\nexport var DELETECOLUMN = 'DELETE-COLUMN';\nexport var REMOVETABLE = 'REMOVE-TABLE';\nexport var TABLEHEADER = 'TABLE-HEADER';\nexport var TABLE_VERTICAL_ALIGN = 'TABLE_VERTICAL_ALIGN';\n/* Alignments plugin events\n * @hidden\n */\nexport var ALIGNMENT_TYPE = 'alignment-type';\n/* Indents plugin events\n * @hidden\n */\nexport var INDENT_TYPE = 'indent-type';\n/* Constant tag names\n */\n/** @hidden */\nexport var DEFAULT_TAG = 'p';\n/** @hidden */\nexport var BLOCK_TAGS = ['address', 'article', 'aside', 'audio', 'blockquote',\n    'canvas', 'details', 'dd', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer',\n    'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr', 'li', 'main', 'nav',\n    'noscript', 'ol', 'output', 'p', 'pre', 'section', 'table', 'tbody', 'td', 'tfoot', 'th',\n    'thead', 'tr', 'ul', 'video'];\n/** @hidden */\nexport var IGNORE_BLOCK_TAGS = ['td', 'th'];\n/** @hidden */\nexport var TABLE_BLOCK_TAGS = ['table', 'tbody', 'td', 'tfoot', 'th',\n    'thead', 'tr'];\n/* Selection plugin events\n * @hidden\n */\nexport var SELECTION_TYPE = 'selection-type';\n/* Insert HTML plugin events\n * @hidden\n */\nexport var INSERTHTML_TYPE = 'inserthtml-type';\n/* Insert Text plugin events\n * @hidden\n */\nexport var INSERT_TEXT_TYPE = 'insert-text-type';\n/* Clear Format HTML plugin events\n * @hidden\n */\nexport var CLEAR_TYPE = 'clear-type';\n","/**\n * `Selection` module is used to handle RTE Selections.\n */\nvar NodeSelection = /** @class */ (function () {\n    function NodeSelection() {\n        this.startNodeName = [];\n        this.endNodeName = [];\n    }\n    NodeSelection.prototype.saveInstance = function (range, body) {\n        this.range = range.cloneRange();\n        this.rootNode = this.documentFromRange(range);\n        this.body = body;\n        this.startContainer = this.getNodeArray(range.startContainer, true);\n        this.endContainer = this.getNodeArray(range.endContainer, false);\n        this.startOffset = range.startOffset;\n        this.endOffset = range.endOffset;\n        this.html = this.body.innerHTML;\n        return this;\n    };\n    NodeSelection.prototype.documentFromRange = function (range) {\n        return (9 === range.startContainer.nodeType) ? range.startContainer : range.startContainer.ownerDocument;\n    };\n    NodeSelection.prototype.getRange = function (docElement) {\n        var select = this.get(docElement);\n        var range = select && select.rangeCount > 0 ? select.getRangeAt(select.rangeCount - 1) : docElement.createRange();\n        return (range.startContainer !== docElement || range.endContainer !== docElement\n            || range.startOffset || range.endOffset || (range.setStart(docElement.body, 0),\n            range.collapse(!0)),\n            range);\n    };\n    NodeSelection.prototype.get = function (docElement) {\n        return docElement.defaultView.getSelection();\n    };\n    NodeSelection.prototype.save = function (range, docElement) {\n        range = (range) ? range.cloneRange() : this.getRange(docElement);\n        return this.saveInstance(range, docElement.body);\n    };\n    NodeSelection.prototype.getIndex = function (node) {\n        var index;\n        var num = 0;\n        node = !node.previousSibling && node.tagName === 'BR' ? node : node.previousSibling;\n        if (node) {\n            for (var type = node.nodeType; node; null) {\n                index = node.nodeType;\n                num++;\n                type = index;\n                node = node.previousSibling;\n            }\n        }\n        return num;\n    };\n    NodeSelection.prototype.isChildNode = function (nodeCollection, parentNode) {\n        for (var index = 0; index < parentNode.childNodes.length; index++) {\n            if (nodeCollection.indexOf(parentNode.childNodes[index]) > -1) {\n                return true;\n            }\n        }\n        return false;\n    };\n    NodeSelection.prototype.getNode = function (startNode, endNode, nodeCollection) {\n        if (endNode === startNode &&\n            (startNode.nodeType === 3 || !startNode.firstChild || nodeCollection.indexOf(startNode.firstChild) !== -1\n                || this.isChildNode(nodeCollection, startNode))) {\n            return null;\n        }\n        if (nodeCollection.indexOf(startNode.firstChild) === -1 && startNode.firstChild && !this.isChildNode(nodeCollection, startNode)) {\n            return startNode.firstChild;\n        }\n        if (startNode.nextSibling) {\n            return startNode.nextSibling;\n        }\n        if (!startNode.parentNode) {\n            return null;\n        }\n        else {\n            return startNode.parentNode;\n        }\n    };\n    NodeSelection.prototype.getNodeCollection = function (range) {\n        var startNode = range.startContainer.childNodes[range.startOffset]\n            || range.startContainer;\n        var endNode = range.endContainer.childNodes[(range.endOffset > 0) ? (range.endOffset - 1) : range.endOffset]\n            || range.endContainer;\n        if (startNode === endNode && startNode.childNodes.length === 0) {\n            return [startNode];\n        }\n        var nodeCollection = [];\n        do {\n            if (nodeCollection.indexOf(startNode) === -1) {\n                nodeCollection.push(startNode);\n            }\n            startNode = this.getNode(startNode, endNode, nodeCollection);\n        } while (startNode);\n        return nodeCollection;\n    };\n    NodeSelection.prototype.getParentNodeCollection = function (range) {\n        return this.getParentNodes(this.getNodeCollection(range), range);\n    };\n    NodeSelection.prototype.getParentNodes = function (nodeCollection, range) {\n        nodeCollection = nodeCollection.reverse();\n        for (var index = 0; index < nodeCollection.length; index++) {\n            if ((nodeCollection.indexOf(nodeCollection[index].parentNode) !== -1)\n                || (nodeCollection[index].nodeType === 3 &&\n                    range.startContainer !== range.endContainer &&\n                    range.startContainer.parentNode !== range.endContainer.parentNode)) {\n                nodeCollection.splice(index, 1);\n                index--;\n            }\n            else if (nodeCollection[index].nodeType === 3) {\n                nodeCollection[index] = nodeCollection[index].parentNode;\n            }\n        }\n        return nodeCollection;\n    };\n    NodeSelection.prototype.getSelectionNodeCollection = function (range) {\n        return this.getSelectionNodes(this.getNodeCollection(range));\n    };\n    NodeSelection.prototype.getSelectionNodes = function (nodeCollection) {\n        nodeCollection = nodeCollection.reverse();\n        for (var index = 0; index < nodeCollection.length; index++) {\n            if (nodeCollection[index].nodeType !== 3 || nodeCollection[index].textContent.trim() === '') {\n                nodeCollection.splice(index, 1);\n                index--;\n            }\n        }\n        return nodeCollection.reverse();\n    };\n    NodeSelection.prototype.getInsertNodeCollection = function (range) {\n        return this.getInsertNodes(this.getNodeCollection(range));\n    };\n    NodeSelection.prototype.getInsertNodes = function (nodeCollection) {\n        nodeCollection = nodeCollection.reverse();\n        for (var index = 0; index < nodeCollection.length; index++) {\n            if ((nodeCollection[index].childNodes.length !== 0 &&\n                nodeCollection[index].nodeType !== 3) ||\n                (nodeCollection[index].nodeType === 3 &&\n                    nodeCollection[index].textContent === '')) {\n                nodeCollection.splice(index, 1);\n                index--;\n            }\n        }\n        return nodeCollection.reverse();\n    };\n    NodeSelection.prototype.getNodeArray = function (node, isStart, root) {\n        var array = [];\n        ((isStart) ? (this.startNodeName = []) : (this.endNodeName = []));\n        for (; node !== (root ? root : this.rootNode); null) {\n            (isStart) ? this.startNodeName.push(node.nodeName.toLowerCase()) : this.endNodeName.push(node.nodeName.toLowerCase());\n            array.push(this.getIndex(node));\n            node = node.parentNode;\n        }\n        return array;\n    };\n    NodeSelection.prototype.setRangePoint = function (range, isvalid, num, size) {\n        var node = this.rootNode;\n        var index = num.length;\n        var constant = size;\n        for (; index--; null) {\n            node = node && node.childNodes[num[index]];\n        }\n        if (node && constant >= 0) {\n            range[isvalid ? 'setStart' : 'setEnd'](node, constant);\n        }\n        return range;\n    };\n    NodeSelection.prototype.restore = function () {\n        var range = this.range.cloneRange();\n        range = this.setRangePoint(range, true, this.startContainer, this.startOffset);\n        range = this.setRangePoint(range, false, this.endContainer, this.endOffset);\n        this.selectRange(this.rootNode, range);\n        return range;\n    };\n    NodeSelection.prototype.selectRange = function (docElement, range) {\n        this.setRange(docElement, range);\n        this.save(range, docElement);\n    };\n    NodeSelection.prototype.setRange = function (docElement, range) {\n        var selection = this.get(docElement);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    };\n    NodeSelection.prototype.setSelectionText = function (docElement, startNode, endNode, startIndex, endIndex) {\n        var range = docElement.createRange();\n        range.setStart(startNode, startIndex);\n        range.setEnd(endNode, endIndex);\n        this.setRange(docElement, range);\n    };\n    NodeSelection.prototype.setSelectionContents = function (docElement, element) {\n        var range = docElement.createRange();\n        range.selectNode(element);\n        this.setRange(docElement, range);\n    };\n    NodeSelection.prototype.setSelectionNode = function (docElement, element) {\n        var range = docElement.createRange();\n        range.selectNodeContents(element);\n        this.setRange(docElement, range);\n    };\n    NodeSelection.prototype.getSelectedNodes = function (docElement) {\n        return this.getNodeCollection(this.getRange(docElement));\n    };\n    NodeSelection.prototype.Clear = function (docElement) {\n        this.get(docElement).removeAllRanges();\n    };\n    NodeSelection.prototype.insertParentNode = function (docElement, newNode, range) {\n        range.surroundContents(newNode);\n        this.selectRange(docElement, range);\n    };\n    NodeSelection.prototype.setCursorPoint = function (docElement, element, point) {\n        var range = docElement.createRange();\n        var selection = docElement.defaultView.getSelection();\n        range.setStart(element, point);\n        range.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    };\n    return NodeSelection;\n}());\nexport { NodeSelection };\n","import * as CONSTANT from './../base/constant';\nimport { append, detach, createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/index';\nimport { selfClosingTags } from '../../common/config';\nexport var markerClassName = {\n    startSelection: 'e-editor-select-start',\n    endSelection: 'e-editor-select-end'\n};\n/**\n * DOMNode internal plugin\n * @hidden\n */\nvar DOMNode = /** @class */ (function () {\n    /**\n     * Constructor for creating the DOMNode plugin\n     * @hidden\n     */\n    function DOMNode(parent, currentDocument) {\n        this.parent = parent;\n        this.nodeSelection = new NodeSelection();\n        this.currentDocument = currentDocument;\n    }\n    DOMNode.prototype.contents = function (element) {\n        return (element && 'IFRAME' !== element.tagName ? Array.prototype.slice.call(element.childNodes || []) : []);\n    };\n    DOMNode.prototype.isBlockNode = function (element) {\n        return (!!element && (element.nodeType === Node.ELEMENT_NODE && CONSTANT.BLOCK_TAGS.indexOf(element.tagName.toLowerCase()) >= 0));\n    };\n    DOMNode.prototype.isLink = function (element) {\n        return (!!element && (element.nodeType === Node.ELEMENT_NODE && 'a' === element.tagName.toLowerCase()));\n    };\n    DOMNode.prototype.blockParentNode = function (element) {\n        for (; element && element.parentNode !== this.parent && ((!element.parentNode ||\n            !this.hasClass(element.parentNode, 'e-node-inner'))); null) {\n            element = element.parentNode;\n            if (this.isBlockNode(element)) {\n                return element;\n            }\n        }\n        return element;\n    };\n    DOMNode.prototype.rawAttributes = function (element) {\n        var rawAttr = {};\n        var attributes = element.attributes;\n        if (attributes.length > 0) {\n            for (var d = 0; d < attributes.length; d++) {\n                var e = attributes[d];\n                rawAttr[e.nodeName] = e.value;\n            }\n        }\n        return rawAttr;\n    };\n    DOMNode.prototype.attributes = function (element) {\n        if (!element) {\n            return '';\n        }\n        var attr = '';\n        var rawAttr = this.rawAttributes(element);\n        var orderRawAttr = Object.keys(rawAttr).sort();\n        for (var e = 0; e < orderRawAttr.length; e++) {\n            var attrKey = orderRawAttr[e];\n            var attrValue = rawAttr[attrKey];\n            /* tslint:disable */\n            if (attrValue.indexOf(\"'\") < 0 && attrValue.indexOf('\"') >= 0) {\n                attr += ' ' + attrKey + \"='\" + attrValue + \"'\";\n            }\n            else if (attrValue.indexOf('\"') >= 0 && attrValue.indexOf(\"'\") >= 0) {\n                /* tslint:enable */\n                attrValue = attrValue.replace(/\"/g, '&quot;');\n                attr += ' ' + attrKey + '=\"' + attrValue + '\"';\n            }\n            else {\n                attr += ' ' + attrKey + '=\"' + attrValue + '\"';\n            }\n        }\n        return attr;\n    };\n    DOMNode.prototype.clearAttributes = function (element) {\n        for (var attr = element.attributes, c = attr.length - 1; c >= 0; c--) {\n            var key = attr[c];\n            element.removeAttribute(key.nodeName);\n        }\n    };\n    DOMNode.prototype.openTagString = function (element) {\n        return '<' + element.tagName.toLowerCase() + this.attributes(element) + '>';\n    };\n    DOMNode.prototype.closeTagString = function (element) {\n        return '</' + element.tagName.toLowerCase() + '>';\n    };\n    DOMNode.prototype.createTagString = function (tagName, relativeElement, innerHTML) {\n        return '<' + tagName.toLowerCase() + this.attributes(relativeElement) + '>' + innerHTML + '</' + tagName.toLowerCase() + '>';\n    };\n    DOMNode.prototype.isList = function (element) {\n        return !!element && ['UL', 'OL'].indexOf(element.tagName) >= 0;\n    };\n    DOMNode.prototype.isElement = function (element) {\n        return element === this.parent;\n    };\n    DOMNode.prototype.isEditable = function (element) {\n        return ((!element.getAttribute || element.getAttribute('contenteditable') === 'true')\n            && ['STYLE', 'SCRIPT'].indexOf(element.tagName) < 0);\n    };\n    DOMNode.prototype.hasClass = function (element, className) {\n        return element && element.classList && element.classList.contains(className);\n    };\n    DOMNode.prototype.replaceWith = function (element, value) {\n        var parentNode = element.parentNode;\n        parentNode.insertBefore(this.parseHTMLFragment(value), element);\n        detach(element);\n    };\n    DOMNode.prototype.parseHTMLFragment = function (value) {\n        /* tslint:disable */\n        var temp = createElement('template');\n        temp.innerHTML = value;\n        if (temp.content instanceof DocumentFragment) {\n            return temp.content;\n        }\n        else {\n            return document.createRange().createContextualFragment(value);\n        }\n        /* tslint:enable */\n    };\n    DOMNode.prototype.wrap = function (element, wrapper) {\n        element.parentNode.insertBefore(wrapper, element);\n        wrapper = element.previousSibling;\n        wrapper.appendChild(element);\n        return wrapper;\n    };\n    DOMNode.prototype.insertAfter = function (newNode, referenceNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n    DOMNode.prototype.wrapInner = function (parent, wrapper) {\n        parent.appendChild(wrapper);\n        wrapper = parent.querySelector('.e-rte-wrap-inner');\n        wrapper.classList.remove('e-rte-wrap-inner');\n        if (wrapper.classList.length === 0) {\n            wrapper.removeAttribute('class');\n        }\n        while (parent.firstChild !== wrapper) {\n            wrapper.appendChild(parent.firstChild);\n        }\n        return wrapper;\n    };\n    DOMNode.prototype.unWrap = function (element) {\n        var parent = element.parentNode;\n        var unWrapNode = [];\n        while (element.firstChild) {\n            unWrapNode.push(element.firstChild);\n            parent.insertBefore(element.firstChild, element);\n        }\n        unWrapNode = unWrapNode.length > 0 ? unWrapNode : [element.parentNode];\n        parent.removeChild(element);\n        return unWrapNode;\n    };\n    DOMNode.prototype.getSelectedNode = function (element, index) {\n        if (element.nodeType === Node.ELEMENT_NODE && element.childNodes.length > 0 &&\n            element.childNodes[index - 1] && element.childNodes[index - 1].nodeType === Node.ELEMENT_NODE &&\n            (element.childNodes[index - 1].classList.contains(markerClassName.startSelection) ||\n                element.childNodes[index - 1].classList.contains(markerClassName.endSelection))) {\n            element = element.childNodes[index - 1];\n        }\n        else if (element.nodeType === Node.ELEMENT_NODE && element.childNodes.length > 0 && element.childNodes[index]) {\n            element = element.childNodes[index];\n        }\n        if (element.nodeType === Node.TEXT_NODE) {\n            element = element.parentNode;\n        }\n        return element;\n    };\n    DOMNode.prototype.nodeFinds = function (element, elements) {\n        var existNodes = [];\n        for (var i = 0; i < elements.length; i++) {\n            if (element.contains(elements[i]) && element !== elements[i]) {\n                existNodes.push(elements[i]);\n            }\n        }\n        return existNodes;\n    };\n    DOMNode.prototype.isEditorArea = function () {\n        var range = this.getRangePoint(0);\n        var element;\n        for (element = range.commonAncestorContainer; element && !this.isElement(element); null) {\n            element = element.parentNode;\n        }\n        return !!this.isElement(element);\n    };\n    DOMNode.prototype.getRangePoint = function (point) {\n        var selection = this.getSelection();\n        var ranges = [];\n        if (selection && selection.getRangeAt && selection.rangeCount) {\n            ranges = [];\n            for (var f = 0; f < selection.rangeCount; f++) {\n                ranges.push(selection.getRangeAt(f));\n            }\n        }\n        else {\n            ranges = [this.currentDocument.createRange()];\n        }\n        return 'undefined' !== typeof point ? ranges[point] : ranges;\n    };\n    DOMNode.prototype.getSelection = function () {\n        return this.nodeSelection.get(this.currentDocument);\n    };\n    DOMNode.prototype.getPreviousNode = function (element) {\n        element = element.previousSibling;\n        for (; element && element.textContent === '\\n'; null) {\n            element = element.previousSibling;\n        }\n        return element;\n    };\n    DOMNode.prototype.encode = function (value) {\n        var divNode = document.createElement('div');\n        divNode.innerText = value;\n        return divNode.innerHTML.replace(/<br\\s*[\\/]?>/gi, '\\n');\n    };\n    DOMNode.prototype.saveMarker = function (save, action) {\n        var start = this.parent.querySelector('.' + markerClassName.startSelection);\n        var end = this.parent.querySelector('.' + markerClassName.endSelection);\n        var startTextNode;\n        var endTextNode;\n        if (start.textContent === '' && isNullOrUndefined(end) && action !== 'tab') {\n            start.innerHTML = '&#65279;&#65279;';\n        }\n        if (this.hasClass(start, markerClassName.startSelection) && start.classList.length > 1) {\n            var replace = this.createTagString(CONSTANT.DEFAULT_TAG, start, this.encode(start.textContent));\n            this.replaceWith(start, replace);\n            start = this.parent.querySelector('.' + markerClassName.startSelection);\n            start.classList.remove(markerClassName.startSelection);\n            startTextNode = start.childNodes[0];\n        }\n        else {\n            startTextNode = this.unWrap(start)[0];\n        }\n        if (this.hasClass(end, markerClassName.endSelection) && end.classList.length > 1) {\n            var replace = this.createTagString(CONSTANT.DEFAULT_TAG, end, this.encode(end.textContent));\n            this.replaceWith(end, replace);\n            end = this.parent.querySelector('.' + markerClassName.endSelection);\n            end.classList.remove(markerClassName.endSelection);\n            endTextNode = end.childNodes[0];\n        }\n        else {\n            endTextNode = end ? this.unWrap(end)[0] : startTextNode;\n        }\n        save.startContainer = save.getNodeArray(startTextNode, true);\n        save.endContainer = save.getNodeArray(endTextNode, false);\n        return save;\n    };\n    DOMNode.prototype.marker = function (className, textContent) {\n        return '<span class=\"' + className + '\">' + textContent + '</span>';\n    };\n    DOMNode.prototype.setMarker = function (save) {\n        var range = save.range;\n        var start = (range.startContainer.childNodes[range.startOffset]\n            || range.startContainer);\n        var end = (range.endContainer.childNodes[(range.endOffset > 0) ? (range.endOffset - 1) : range.endOffset]\n            || range.endContainer);\n        if ((start.nodeType === Node.ELEMENT_NODE && end.nodeType === Node.ELEMENT_NODE) && (start.contains(end) || end.contains(start))) {\n            var existNode = start.contains(end) ? start : end;\n            var isElement = existNode.nodeType !== Node.TEXT_NODE;\n            if (isElement) {\n                var nodes = [];\n                var textNodes = [];\n                for (var node = existNode; existNode.contains(node); null) {\n                    if (nodes.indexOf(node) < 0 && node.childNodes && node.childNodes.length) {\n                        nodes.push(node);\n                        node = node.childNodes[0];\n                    }\n                    else if (node.nextSibling) {\n                        node = node.nextSibling;\n                    }\n                    else if (node.parentNode) {\n                        node = node.parentNode;\n                        nodes.push(node);\n                    }\n                    if (textNodes.indexOf(node) < 0 && (node.nodeType === Node.TEXT_NODE ||\n                        (CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.parentNode.tagName.toLocaleLowerCase()) >= 0\n                            && node.tagName === 'BR'))) {\n                        textNodes.push(node);\n                    }\n                }\n                if (textNodes.length) {\n                    start = start.contains(end) ? textNodes[0] : start;\n                    end = textNodes[textNodes.length - 1];\n                }\n            }\n        }\n        if (start !== end) {\n            if (start.nodeType !== Node.TEXT_NODE && start.tagName === 'BR' &&\n                CONSTANT.IGNORE_BLOCK_TAGS.indexOf(start.parentNode.tagName.toLocaleLowerCase()) >= 0) {\n                this.replaceWith(start, this.marker(markerClassName.startSelection, this.encode(start.textContent)));\n                var markerStart = range.startContainer.querySelector('.' + markerClassName.startSelection);\n                markerStart.appendChild(start);\n            }\n            else {\n                this.replaceWith(start, this.marker(markerClassName.startSelection, this.encode(start.textContent)));\n            }\n            if (end.nodeType !== Node.TEXT_NODE && end.tagName === 'BR' &&\n                CONSTANT.IGNORE_BLOCK_TAGS.indexOf(end.parentNode.tagName.toLocaleLowerCase()) >= 0) {\n                this.replaceWith(end, this.marker(markerClassName.endSelection, this.encode(end.textContent)));\n                var markerEnd = range.endContainer.querySelector('.' + markerClassName.endSelection);\n                markerEnd.appendChild(end);\n            }\n            else {\n                this.replaceWith(end, this.marker(markerClassName.endSelection, this.encode(end.textContent)));\n            }\n        }\n        else {\n            if (start.nodeType === 3) {\n                this.replaceWith(start, this.marker(markerClassName.startSelection, this.encode(start.textContent)));\n            }\n            else {\n                for (var i = 0; i < selfClosingTags.length; i++) {\n                    start = start.tagName === selfClosingTags[i] ? start.parentNode : start;\n                }\n                var marker = this.marker(markerClassName.startSelection, '');\n                append([this.parseHTMLFragment(marker)], start);\n            }\n        }\n    };\n    DOMNode.prototype.createTempNode = function (element) {\n        var textContent = element.textContent;\n        if (element.tagName === 'BR') {\n            var wrapper = '<' + CONSTANT.DEFAULT_TAG + '></' + CONSTANT.DEFAULT_TAG + '>';\n            var node = element.parentNode;\n            if (CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.tagName.toLocaleLowerCase()) >= 0) {\n                element = this.wrap(element, this.parseHTMLFragment(wrapper));\n            }\n        }\n        else if (((element.nodeType !== Node.TEXT_NODE &&\n            (element.classList.contains(markerClassName.startSelection) ||\n                element.classList.contains(markerClassName.endSelection))) ||\n            textContent.replace(/\\n/g, '').replace(/(^ *)|( *$)/g, '').length > 0 ||\n            textContent.length && textContent.indexOf('\\n') < 0)) {\n            var wrapper = '<' + CONSTANT.DEFAULT_TAG + '></' + CONSTANT.DEFAULT_TAG + '>';\n            var target = element;\n            element = this.wrap(element, this.parseHTMLFragment(wrapper));\n            var ignoreBr = target.nodeType === Node.ELEMENT_NODE && target.firstChild && target.firstChild.nodeName === 'BR'\n                && (target.classList.contains(markerClassName.startSelection) ||\n                    target.classList.contains(markerClassName.endSelection));\n            if (!ignoreBr && element.nextElementSibling && element.nextElementSibling.tagName === 'BR') {\n                element.appendChild(element.nextElementSibling);\n            }\n        }\n        return element;\n    };\n    DOMNode.prototype.blockNodes = function () {\n        var collectionNodes = [];\n        var selection = this.getSelection();\n        if (this.isEditorArea() && selection.rangeCount) {\n            var ranges = this.getRangePoint();\n            for (var j = 0; j < ranges.length; j++) {\n                var parentNode = void 0;\n                var range = ranges[j];\n                var startNode = this.getSelectedNode(range.startContainer, range.startOffset);\n                var endNode = this.getSelectedNode(range.endContainer, range.endOffset);\n                if (this.isBlockNode(startNode) && collectionNodes.indexOf(startNode) < 0) {\n                    collectionNodes.push(startNode);\n                }\n                parentNode = this.blockParentNode(startNode);\n                if (parentNode && collectionNodes.indexOf(parentNode) < 0) {\n                    if (CONSTANT.IGNORE_BLOCK_TAGS.indexOf(parentNode.tagName.toLocaleLowerCase()) >= 0 && (startNode.tagName === 'BR' ||\n                        startNode.nodeType === Node.TEXT_NODE ||\n                        startNode.classList.contains(markerClassName.startSelection) ||\n                        startNode.classList.contains(markerClassName.endSelection))) {\n                        var tempNode = startNode.previousSibling &&\n                            startNode.previousSibling.nodeType === Node.TEXT_NODE ?\n                            startNode.previousSibling : startNode;\n                        collectionNodes.push(this.createTempNode(tempNode));\n                    }\n                    else {\n                        collectionNodes.push(parentNode);\n                    }\n                }\n                var nodes = [];\n                for (var node = startNode; node !== endNode && node !== this.parent; null) {\n                    if (nodes.indexOf(node) < 0 && node.childNodes && node.childNodes.length) {\n                        nodes.push(node);\n                        node = node.childNodes[0];\n                    }\n                    else if (node && (node.tagName === 'BR' || node.nodeType === Node.TEXT_NODE ||\n                        node.classList.contains(markerClassName.startSelection) ||\n                        node.classList.contains(markerClassName.endSelection)) &&\n                        CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.parentNode.tagName.toLocaleLowerCase()) >= 0) {\n                        node = this.createTempNode(node);\n                    }\n                    else if (node.nextSibling && (node.nextSibling.tagName === 'BR' ||\n                        node.nextSibling.nodeType === Node.TEXT_NODE ||\n                        node.nextSibling.classList.contains(markerClassName.startSelection) ||\n                        node.nextSibling.classList.contains(markerClassName.endSelection)) &&\n                        CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.nextSibling.parentNode.tagName.toLocaleLowerCase()) >= 0) {\n                        node = this.createTempNode(node.nextSibling);\n                    }\n                    else if (node.nextSibling) {\n                        node = node.nextSibling;\n                    }\n                    else if (node.parentNode) {\n                        node = node.parentNode;\n                        nodes.push(node);\n                    }\n                    if (collectionNodes.indexOf(node) < 0 && node.nodeType === Node.ELEMENT_NODE &&\n                        CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.parentNode.tagName.toLocaleLowerCase()) >= 0 &&\n                        (node.classList.contains(markerClassName.startSelection) ||\n                            node.classList.contains(markerClassName.endSelection))) {\n                        collectionNodes.push(this.createTempNode(node));\n                    }\n                    if (this.isBlockNode(node) && this.ignoreTableTag(node) && nodes.indexOf(node) < 0 &&\n                        collectionNodes.indexOf(node) < 0 && (node !== endNode || range.endOffset > 0)) {\n                        collectionNodes.push(node);\n                    }\n                }\n                parentNode = this.blockParentNode(endNode);\n                if (parentNode && this.ignoreTableTag(parentNode) && collectionNodes.indexOf(parentNode) < 0) {\n                    collectionNodes.push(parentNode);\n                }\n            }\n        }\n        for (var i = collectionNodes.length - 1; i > 0; i--) {\n            var nodes = this.nodeFinds(collectionNodes[i], collectionNodes);\n            if (nodes.length) {\n                var listNodes = collectionNodes[i].querySelectorAll('ul, ol');\n                if (collectionNodes[i].tagName === 'LI' && listNodes.length > 0) {\n                    continue;\n                }\n                else {\n                    collectionNodes.splice(i, 1);\n                }\n            }\n        }\n        return collectionNodes;\n    };\n    DOMNode.prototype.ignoreTableTag = function (element) {\n        return !(CONSTANT.TABLE_BLOCK_TAGS.indexOf(element.tagName.toLocaleLowerCase()) >= 0);\n    };\n    return DOMNode;\n}());\nexport { DOMNode };\n","import * as CONSTANT from './../base/constant';\nimport { createElement, detach, prepend, append, attributes } from '@syncfusion/ej2-base';\nimport { markerClassName } from './dom-node';\nimport * as EVENTS from './../../common/constant';\nimport { setStyleAttribute } from '@syncfusion/ej2-base';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * Lists internal component\n * @hidden\n */\nvar Lists = /** @class */ (function () {\n    /**\n     * Constructor for creating the Lists plugin\n     * @hidden\n     */\n    function Lists(parent) {\n        this.parent = parent;\n        this.domNode = this.parent.domNode;\n        this.addEventListener();\n    }\n    Lists.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.LIST_TYPE, this.applyListsHandler, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n    };\n    Lists.prototype.keyDownHandler = function (e) {\n        if (e.event.which === 9) {\n            var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n            this.saveSelection = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n            var blockNodes = void 0;\n            var startOffset = range.startOffset;\n            var endOffset = range.endOffset;\n            var startNode = this.parent.domNode.getSelectedNode(range.startContainer, range.startOffset);\n            var endNode = this.parent.domNode.getSelectedNode(range.endContainer, range.endOffset);\n            if ((startNode === endNode && (startNode.nodeName === 'BR' || startNode.nodeName === '#text') &&\n                CONSTANT.IGNORE_BLOCK_TAGS.indexOf(startNode.parentNode.tagName.toLocaleLowerCase()) >= 0)) {\n                return;\n            }\n            else {\n                if (!(e.event.action && e.event.action === 'indent')) {\n                    this.domNode.setMarker(this.saveSelection);\n                }\n                blockNodes = this.domNode.blockNodes();\n            }\n            var nodes = [];\n            var isNested = true;\n            for (var i = 0; i < blockNodes.length; i++) {\n                if (blockNodes[i].parentNode.tagName === 'LI') {\n                    nodes.push(blockNodes[i].parentNode);\n                }\n                else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' &&\n                    (blockNodes[i].childNodes[0].tagName !== 'OL' &&\n                        blockNodes[i].childNodes[0].tagName !== 'UL')) {\n                    nodes.push(blockNodes[i]);\n                }\n            }\n            if (nodes.length > 1 || nodes.length && ((startOffset === 0 && endOffset === 0) || e.ignoreDefault)) {\n                e.event.preventDefault();\n                e.event.stopPropagation();\n                this.currentAction = this.getAction(nodes[0]);\n                if (e.event.shiftKey) {\n                    this.revertList(nodes);\n                    this.revertClean();\n                }\n                else {\n                    isNested = this.nestedList(nodes);\n                }\n                if (isNested) {\n                    this.cleanNode();\n                    this.parent.editableElement.focus();\n                }\n                if (!(e.event.action && e.event.action === 'indent')) {\n                    this.saveSelection = this.domNode.saveMarker(this.saveSelection);\n                    this.saveSelection.restore();\n                    if (e.callBack) {\n                        e.callBack({\n                            requestType: this.currentAction,\n                            editorMode: 'HTML',\n                            range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                            elements: this.parent.domNode.blockNodes(),\n                            event: e.event\n                        });\n                    }\n                }\n            }\n            else {\n                if (!(e.event.action && e.event.action === 'indent')) {\n                    this.saveSelection = this.domNode.saveMarker(this.saveSelection, e.event.action);\n                    this.saveSelection.restore();\n                }\n            }\n        }\n        else {\n            switch (e.event.action) {\n                case 'ordered-list':\n                    this.applyListsHandler({ subCommand: 'OL', callBack: e.callBack });\n                    e.event.preventDefault();\n                    break;\n                case 'unordered-list':\n                    this.applyListsHandler({ subCommand: 'UL', callBack: e.callBack });\n                    e.event.preventDefault();\n                    break;\n            }\n        }\n    };\n    Lists.prototype.getAction = function (element) {\n        var parentNode = element.parentNode;\n        return (parentNode.nodeName === 'OL' ? 'OL' : 'UL');\n    };\n    Lists.prototype.revertClean = function () {\n        var collectionNodes = this.parent.editableElement.querySelectorAll('ul, ol');\n        for (var i = 0; i < collectionNodes.length; i++) {\n            var listNodes = collectionNodes[i].querySelectorAll('ul, ol');\n            if (listNodes.length > 0) {\n                for (var j = 0; j < listNodes.length; j++) {\n                    var prevSibling = listNodes[j].previousSibling;\n                    if (prevSibling && prevSibling.tagName === 'LI') {\n                        prevSibling.appendChild(listNodes[j]);\n                    }\n                }\n            }\n        }\n    };\n    Lists.prototype.noPreviousElement = function (elements) {\n        var firstNode;\n        var firstNodeOL;\n        var siblingListOL = elements.querySelectorAll('ol, ul');\n        var siblingListLI = elements\n            .querySelectorAll('li');\n        var siblingListLIFirst = this.domNode.contents(siblingListLI[0])[0];\n        if (siblingListLI.length > 0 && (siblingListLIFirst.nodeName === 'OL' || siblingListLIFirst.nodeName === 'UL')) {\n            firstNode = siblingListLI[0];\n        }\n        else {\n            firstNodeOL = siblingListOL[0];\n        }\n        if (firstNode) {\n            for (var h = this.domNode.contents(elements)[0]; h && !this.domNode.isList(h); null) {\n                var nextSibling = h.nextSibling;\n                prepend([h], firstNode);\n                setStyleAttribute(elements, { 'list-style-type': 'none' });\n                setStyleAttribute(firstNode, { 'list-style-type': '' });\n                h = nextSibling;\n            }\n        }\n        else if (firstNodeOL) {\n            var nestedElement = createElement('li');\n            prepend([nestedElement], firstNodeOL);\n            for (var h = this.domNode.contents(elements)[0]; h && !this.domNode.isList(h); null) {\n                var nextSibling = h.nextSibling;\n                nestedElement.appendChild(h);\n                h = nextSibling;\n            }\n            prepend([firstNodeOL], elements.parentNode);\n            detach(elements);\n            var nestedElementLI = createElement('li', { styles: 'list-style-type: none;' });\n            prepend([nestedElementLI], firstNodeOL.parentNode);\n            append([firstNodeOL], nestedElementLI);\n        }\n        else {\n            var nestedElementLI = createElement('li', { styles: 'list-style-type: none;' });\n            prepend([nestedElementLI], elements.parentNode);\n            var nestedElement = createElement(elements.parentNode.tagName);\n            prepend([nestedElement], nestedElementLI);\n            append([elements], nestedElement);\n        }\n    };\n    Lists.prototype.nestedList = function (elements) {\n        var isNested = false;\n        for (var i = 0; i < elements.length; i++) {\n            var prevSibling = this.domNode.getPreviousNode(elements[i]);\n            if (prevSibling) {\n                isNested = true;\n                var firstNode = void 0;\n                var firstNodeLI = void 0;\n                var siblingListOL = elements[i].querySelectorAll('ol, ul');\n                var siblingListLI = elements[i]\n                    .querySelectorAll('li');\n                var siblingListLIFirst = this.domNode.contents(siblingListLI[0])[0];\n                if (siblingListLI.length > 0 && (siblingListLIFirst.nodeName === 'OL' || siblingListLIFirst.nodeName === 'UL')) {\n                    firstNodeLI = siblingListLI[0];\n                }\n                else {\n                    firstNode = siblingListOL[0];\n                }\n                if (firstNode) {\n                    var nestedElement = createElement('li');\n                    prepend([nestedElement], firstNode);\n                    for (var h = this.domNode.contents(elements[i])[0]; h && !this.domNode.isList(h); null) {\n                        var nextSibling = h.nextSibling;\n                        nestedElement.appendChild(h);\n                        h = nextSibling;\n                    }\n                    append([firstNode], prevSibling);\n                    detach(elements[i]);\n                }\n                else if (firstNodeLI) {\n                    if (prevSibling.tagName === 'LI') {\n                        for (var h = this.domNode.contents(elements[i])[0]; h && !this.domNode.isList(h); null) {\n                            var nextSibling = h.nextSibling;\n                            prepend([h], firstNodeLI);\n                            setStyleAttribute(elements[i], { 'list-style-type': 'none' });\n                            setStyleAttribute(firstNodeLI, { 'list-style-type': '' });\n                            h = nextSibling;\n                        }\n                        append([firstNodeLI.parentNode], prevSibling);\n                        detach(elements[i]);\n                    }\n                }\n                else {\n                    if (prevSibling.tagName === 'LI') {\n                        var nestedElement = createElement(elements[i].parentNode.tagName);\n                        append([nestedElement], prevSibling);\n                        append([elements[i]], nestedElement);\n                    }\n                }\n            }\n            else {\n                var element = elements[i];\n                isNested = true;\n                this.noPreviousElement(element);\n            }\n        }\n        return isNested;\n    };\n    Lists.prototype.applyListsHandler = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        this.saveSelection = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        this.currentAction = e.subCommand;\n        this.domNode.setMarker(this.saveSelection);\n        var listsNodes = this.domNode.blockNodes();\n        for (var i = 0; i < listsNodes.length; i++) {\n            if (listsNodes[i].tagName !== 'LI' && 'LI' === listsNodes[i].parentNode.tagName) {\n                listsNodes[i] = listsNodes[i].parentNode;\n            }\n        }\n        this.applyLists(listsNodes, this.currentAction, e.selector);\n        if (e.callBack) {\n            e.callBack({\n                requestType: this.currentAction,\n                event: e.event,\n                editorMode: 'HTML',\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.domNode.blockNodes()\n            });\n        }\n    };\n    Lists.prototype.applyLists = function (elements, type, selector) {\n        var isReverse = true;\n        if (this.isRevert(elements, type)) {\n            this.revertList(elements);\n        }\n        else {\n            this.checkLists(elements, type);\n            for (var i = 0; i < elements.length; i++) {\n                if ('LI' !== elements[i].tagName) {\n                    isReverse = false;\n                    var openTag = '<' + type + this.domNode.attributes(elements[i]) + '>';\n                    var closeTag = '</' + type + '>';\n                    var newTag = 'li class=\"e-rte-replace-tag\"';\n                    var replaceHTML = (elements[i].tagName.toLowerCase() === CONSTANT.DEFAULT_TAG ? elements[i].innerHTML :\n                        elements[i].outerHTML);\n                    var innerHTML = this.domNode.createTagString(newTag, null, replaceHTML);\n                    var collectionString = openTag + innerHTML + closeTag;\n                    this.domNode.replaceWith(elements[i], collectionString);\n                    var element = this.parent.editableElement.querySelector('.e-rte-replace-tag');\n                    element.removeAttribute('class');\n                }\n            }\n        }\n        this.cleanNode();\n        this.parent.editableElement.focus();\n        if (isIDevice()) {\n            setEditFrameFocus(this.parent.editableElement, selector);\n        }\n        this.saveSelection = this.domNode.saveMarker(this.saveSelection);\n        this.saveSelection.restore();\n    };\n    Lists.prototype.isRevert = function (nodes, tagName) {\n        var isRevert = true;\n        for (var i = 0; i < nodes.length; i++) {\n            if (nodes[i].tagName !== 'LI') {\n                return false;\n            }\n            if (nodes[i].parentNode.tagName !== tagName) {\n                isRevert = false;\n            }\n        }\n        return isRevert;\n    };\n    Lists.prototype.checkLists = function (nodes, tagName) {\n        var nodesTemp = [];\n        for (var i = 0; i < nodes.length; i++) {\n            var node = nodes[i].parentNode;\n            if (nodes[i].tagName === 'LI' && node.tagName !== tagName && nodesTemp.indexOf(node) < 0) {\n                nodesTemp.push(node);\n            }\n        }\n        for (var j = nodesTemp.length - 1; j >= 0; j--) {\n            var h = nodesTemp[j];\n            var replace = '<' + tagName.toLowerCase() + ' '\n                + this.domNode.attributes(h) + '>' + h.innerHTML + '</' + tagName.toLowerCase() + '>';\n            this.domNode.replaceWith(nodesTemp[j], replace);\n        }\n    };\n    Lists.prototype.cleanNode = function () {\n        var liParents = this.parent.editableElement.querySelectorAll('ol + ol, ul + ul');\n        for (var c = 0; c < liParents.length; c++) {\n            var node = liParents[c];\n            if (this.domNode.isList(node.previousSibling) &&\n                this.domNode.openTagString(node) === this.domNode.openTagString(node.previousSibling)) {\n                var contentNodes = this.domNode.contents(node);\n                for (var f = 0; f < contentNodes.length; f++) {\n                    node.previousSibling.appendChild(contentNodes[f]);\n                }\n                node.parentNode.removeChild(node);\n            }\n        }\n    };\n    Lists.prototype.findUnSelected = function (temp, elements) {\n        temp = temp.slice().reverse();\n        if (temp.length > 0) {\n            var rightIndent = [];\n            var indentElements = [];\n            var lastElement = elements[elements.length - 1];\n            var lastElementChild = [];\n            var childElements = [];\n            lastElementChild = (lastElement.childNodes);\n            for (var z = 0; z < lastElementChild.length; z++) {\n                if (lastElementChild[z].tagName === 'OL' || lastElementChild[z].tagName === 'UL') {\n                    var childLI = lastElementChild[z]\n                        .querySelectorAll('li');\n                    if (childLI.length > 0) {\n                        for (var y = 0; y < childLI.length; y++) {\n                            childElements.push(childLI[y]);\n                        }\n                    }\n                }\n            }\n            for (var i = 0; i < childElements.length; i++) {\n                var count = 0;\n                for (var j = 0; j < temp.length; j++) {\n                    if (!childElements[i].contains((temp[j]))) {\n                        count = count + 1;\n                    }\n                }\n                if (count === temp.length) {\n                    indentElements.push(childElements[i]);\n                }\n            }\n            if (indentElements.length > 0) {\n                for (var x = 0; x < indentElements.length; x++) {\n                    if (this.domNode.contents(indentElements[x])[0].nodeName !== 'OL' &&\n                        this.domNode.contents(indentElements[x])[0].nodeName !== 'UL') {\n                        rightIndent.push(indentElements[x]);\n                    }\n                }\n            }\n            if (rightIndent.length > 0) {\n                this.nestedList(rightIndent);\n            }\n        }\n    };\n    Lists.prototype.revertList = function (elements) {\n        var temp = [];\n        for (var i = elements.length - 1; i >= 0; i--) {\n            for (var j = i - 1; j >= 0; j--) {\n                if (elements[j].contains((elements[i])) || elements[j] === elements[i]) {\n                    temp.push(elements[i]);\n                    elements.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        this.findUnSelected(temp, elements);\n        var viewNode = [];\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var parentNode = elements[i].parentNode;\n            var className = element.getAttribute('class');\n            if (temp.length === 0) {\n                var siblingList = elements[i].querySelectorAll('ul, ol');\n                var firstNode = siblingList[0];\n                if (firstNode) {\n                    var child = firstNode\n                        .querySelectorAll('li');\n                    if (child) {\n                        var nestedElement = createElement(firstNode.tagName);\n                        append([nestedElement], firstNode.parentNode);\n                        var nestedElementLI = createElement('li', { styles: 'list-style-type: none;' });\n                        append([nestedElementLI], nestedElement);\n                        append([firstNode], nestedElementLI);\n                    }\n                }\n            }\n            if (element.parentNode.insertBefore(this.closeTag(parentNode.tagName), element),\n                'LI' === parentNode.parentNode.tagName) {\n                element.parentNode.insertBefore(this.closeTag('LI'), element);\n            }\n            else {\n                var classAttr = '';\n                if (className) {\n                    classAttr += ' class=\"' + className + '\"';\n                }\n                if (CONSTANT.DEFAULT_TAG && 0 === element.querySelectorAll(CONSTANT.BLOCK_TAGS.join(', ')).length) {\n                    var wrapper = '<' + CONSTANT.DEFAULT_TAG + classAttr + ' class=\"e-rte-wrap-inner\"' +\n                        this.domNode.attributes(parentNode) + '></' + CONSTANT.DEFAULT_TAG + '>';\n                    this.domNode.wrapInner(element, this.domNode.parseHTMLFragment(wrapper));\n                }\n                else if (this.domNode.contents(element)[0].nodeType === 3) {\n                    var replace = this.domNode.createTagString(CONSTANT.DEFAULT_TAG, parentNode, this.parent.domNode.encode(this.domNode.contents(element)[0].textContent));\n                    this.domNode.replaceWith(this.domNode.contents(element)[0], replace);\n                }\n                else if (this.domNode.contents(element)[0].classList.contains(markerClassName.startSelection) ||\n                    this.domNode.contents(element)[0].classList.contains(markerClassName.endSelection)) {\n                    var replace = this.domNode.createTagString(CONSTANT.DEFAULT_TAG, parentNode, this.domNode.contents(element)[0].outerHTML);\n                    this.domNode.replaceWith(this.domNode.contents(element)[0], replace);\n                }\n                else {\n                    var childNode = element.firstChild;\n                    className = childNode.getAttribute('class');\n                    attributes(childNode, this.domNode.rawAttributes(parentNode));\n                    if (className && childNode.getAttribute('class')) {\n                        attributes(childNode, { 'class': className + ' ' + childNode.getAttribute('class') });\n                    }\n                }\n                append([this.openTag('LI')], element);\n                prepend([this.closeTag('LI')], element);\n            }\n            this.domNode.insertAfter(this.openTag(parentNode.tagName), element);\n            if (parentNode.parentNode.tagName === 'LI') {\n                parentNode = parentNode.parentNode.parentNode;\n            }\n            if (viewNode.indexOf(parentNode) < 0) {\n                viewNode.push(parentNode);\n            }\n        }\n        for (var i = 0; i < viewNode.length; i++) {\n            var node = viewNode[i];\n            var nodeInnerHtml = node.innerHTML;\n            var closeTag = /<span class=\"e-rte-list-close-([a-z]*)\"><\\/span>/g;\n            var openTag = /<span class=\"e-rte-list-open-([a-z]*)\"><\\/span>/g;\n            nodeInnerHtml = nodeInnerHtml.replace(closeTag, '</$1>');\n            nodeInnerHtml = nodeInnerHtml.replace(openTag, '<$1 ' + this.domNode.attributes(node) + '>');\n            this.domNode.replaceWith(node, this.domNode.openTagString(node) + nodeInnerHtml.trim() + this.domNode.closeTagString(node));\n        }\n        var emptyUl = this.parent.editableElement.querySelectorAll('ul:empty, ol:empty');\n        for (var i = 0; i < emptyUl.length; i++) {\n            detach(emptyUl[i]);\n        }\n        var emptyLi = this.parent.editableElement.querySelectorAll('li:empty');\n        for (var i = 0; i < emptyLi.length; i++) {\n            detach(emptyLi[i]);\n        }\n    };\n    Lists.prototype.openTag = function (type) {\n        return this.domNode.parseHTMLFragment('<span class=\"e-rte-list-open-' + type.toLowerCase() + '\"></span>');\n    };\n    Lists.prototype.closeTag = function (type) {\n        return this.domNode.parseHTMLFragment('<span class=\"e-rte-list-close-' + type.toLowerCase() + '\"></span>');\n    };\n    return Lists;\n}());\nexport { Lists };\n","import * as EVENTS from './../../common/constant';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * Formats internal component\n * @hidden\n */\nvar Formats = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function Formats(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Formats.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.FORMAT_TYPE, this.applyFormats, this);\n    };\n    Formats.prototype.getParentNode = function (node) {\n        for (; node.parentNode && node.parentNode !== this.parent.editableElement; null) {\n            node = node.parentNode;\n        }\n        return node;\n    };\n    Formats.prototype.applyFormats = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var save = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        this.parent.domNode.setMarker(save);\n        var formatsNodes = this.parent.domNode.blockNodes();\n        for (var i = 0; i < formatsNodes.length; i++) {\n            var parentNode = void 0;\n            var replaceHTML = void 0;\n            if (e.subCommand.toLowerCase() === 'blockquote') {\n                parentNode = this.getParentNode(formatsNodes[i]);\n                replaceHTML = this.parent.domNode.isList(parentNode) ||\n                    parentNode.tagName === 'TABLE' ? parentNode.outerHTML : parentNode.innerHTML;\n            }\n            else {\n                parentNode = formatsNodes[i];\n                replaceHTML = parentNode.innerHTML;\n            }\n            if (e.subCommand.toLowerCase() === parentNode.tagName.toLowerCase() ||\n                isNullOrUndefined(parentNode.parentNode) || parentNode.tagName === 'LI') {\n                continue;\n            }\n            this.cleanFormats(parentNode, e.subCommand);\n            var replaceTag = this.parent.domNode.createTagString(e.subCommand, parentNode, replaceHTML.replace(/>\\s+</g, '><'));\n            this.parent.domNode.replaceWith(parentNode, replaceTag);\n        }\n        this.parent.editableElement.focus();\n        save = this.parent.domNode.saveMarker(save);\n        if (isIDevice()) {\n            setEditFrameFocus(this.parent.editableElement, e.selector);\n        }\n        save.restore();\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.domNode.blockNodes()\n            });\n        }\n    };\n    Formats.prototype.cleanFormats = function (element, tagName) {\n        var ignoreAttr = ['display', 'font-size', 'margin-top', 'margin-bottom', 'margin-left', 'margin-right', 'font-weight'];\n        tagName = tagName.toLowerCase();\n        for (var i = 0; i < ignoreAttr.length && (tagName !== 'p' && tagName !== 'blockquote' && tagName !== 'pre'); i++) {\n            element.style.removeProperty(ignoreAttr[i]);\n        }\n    };\n    return Formats;\n}());\nexport { Formats };\n","/**\n * Node appending methods.\n * @hidden\n */\nvar InsertMethods = /** @class */ (function () {\n    function InsertMethods() {\n    }\n    InsertMethods.WrapBefore = function (textNode, parentNode, isAfter) {\n        parentNode.innerText = textNode.textContent;\n        (!isAfter) ? this.AppendBefore(parentNode, textNode) : this.AppendBefore(parentNode, textNode, true);\n        if (textNode.parentNode) {\n            textNode.parentNode.removeChild(textNode);\n        }\n        return parentNode.childNodes[0];\n    };\n    InsertMethods.Wrap = function (childNode, parentNode) {\n        this.AppendBefore(parentNode, childNode);\n        parentNode.appendChild(childNode);\n        return childNode;\n    };\n    InsertMethods.unwrap = function (node) {\n        var parent = node.parentNode;\n        var child = [];\n        for (; node.firstChild; null) {\n            child.push(parent.insertBefore(node.firstChild, node));\n        }\n        parent.removeChild(node);\n        return child;\n    };\n    InsertMethods.AppendBefore = function (textNode, parentNode, isAfter) {\n        return (parentNode.parentNode) ? ((!isAfter) ? parentNode.parentNode.insertBefore(textNode, parentNode)\n            : parentNode.parentNode.insertBefore(textNode, parentNode.nextSibling)) :\n            parentNode;\n    };\n    return InsertMethods;\n}());\nexport { InsertMethods };\n","import { NodeSelection } from './../../selection/index';\nimport { InsertMethods } from './insert-methods';\n/**\n * Split the Node based on selection\n * @hidden\n */\nvar NodeCutter = /** @class */ (function () {\n    function NodeCutter() {\n        this.position = -1;\n        this.nodeSelection = new NodeSelection();\n    }\n    // Split Selection Node\n    NodeCutter.prototype.GetSpliceNode = function (range, node) {\n        node = this.SplitNode(range, node, true);\n        node = this.SplitNode(range, node, false);\n        return node;\n    };\n    NodeCutter.prototype.SplitNode = function (range, node, isCollapsed) {\n        if (node) {\n            var clone = range.cloneRange();\n            var parent_1 = node.parentNode;\n            var index = this.nodeSelection.getIndex(node);\n            clone.collapse(isCollapsed);\n            (isCollapsed) ? clone.setStartBefore(node) : clone.setEndAfter(node);\n            var fragment = clone.extractContents();\n            if (isCollapsed) {\n                node = parent_1.childNodes[index];\n                fragment = this.spliceEmptyNode(fragment, false);\n                if (fragment && fragment.textContent !== '') {\n                    if (node) {\n                        InsertMethods.AppendBefore(fragment, node);\n                    }\n                    else {\n                        parent_1.appendChild(fragment);\n                        var divNode = document.createElement('div');\n                        divNode.innerHTML = '&#65279;&#65279;';\n                        node = divNode.firstChild;\n                        parent_1.appendChild(node);\n                    }\n                }\n            }\n            else {\n                node = parent_1.childNodes.length > 1 ? parent_1.childNodes[index] :\n                    parent_1.childNodes[0];\n                fragment = this.spliceEmptyNode(fragment, true);\n                if (fragment && fragment.textContent !== '') {\n                    if (node) {\n                        InsertMethods.AppendBefore(fragment, node, true);\n                    }\n                    else {\n                        parent_1.appendChild(fragment);\n                        var divNode = document.createElement('div');\n                        divNode.innerHTML = '&#65279;&#65279;';\n                        parent_1.insertBefore(divNode.firstChild, parent_1.firstChild);\n                        node = parent_1.firstChild;\n                    }\n                }\n            }\n            return node;\n        }\n        else {\n            return null;\n        }\n    };\n    NodeCutter.prototype.spliceEmptyNode = function (fragment, isStart) {\n        var len = fragment.childNodes.length - 1;\n        if (len > -1 && !isStart) {\n            this.spliceEmptyNode(fragment.childNodes[len], isStart);\n        }\n        else if (len > -1) {\n            this.spliceEmptyNode(fragment.childNodes[0], isStart);\n        }\n        else if (fragment.nodeType !== 3 && fragment.nodeType !== 11) {\n            fragment.parentNode.removeChild(fragment);\n        }\n        return fragment;\n    };\n    // Cursor Position split\n    NodeCutter.prototype.GetCursorStart = function (indexes, index, isStart) {\n        indexes = (isStart) ? indexes : indexes.reverse();\n        var position = indexes[0];\n        for (var num = 0; num < indexes.length && ((isStart) ? (indexes[num] < index) : (indexes[num] >= index)); num++) {\n            position = indexes[num];\n        }\n        return position;\n    };\n    NodeCutter.prototype.GetCursorRange = function (docElement, range, node) {\n        var cursorRange = docElement.createRange();\n        var indexes = [];\n        indexes.push(0);\n        var str = this.TrimLineBreak(node.data);\n        var index = str.indexOf(' ', 0);\n        while (index !== -1) {\n            if (indexes.indexOf(index) < 0) {\n                indexes.push(index);\n            }\n            if (new RegExp('\\\\s').test(str[index - 1]) && (indexes.indexOf(index - 1) < 0)) {\n                indexes.push(index - 1);\n            }\n            if (new RegExp('\\\\s').test(str[index + 1])) {\n                indexes.push(index + 1);\n            }\n            index = str.indexOf(' ', (index + 1));\n        }\n        indexes.push(str.length);\n        if ((indexes.indexOf(range.startOffset) >= 0)\n            || ((indexes.indexOf(range.startOffset - 1) >= 0) && (range.startOffset !== 1\n                || (range.startOffset === 1 && new RegExp('\\\\s').test(str[0])))\n                || ((indexes[indexes.length - 1] - 1) === range.startOffset))) {\n            cursorRange = range;\n            this.position = 1;\n        }\n        else {\n            var startOffset = this.GetCursorStart(indexes, range.startOffset, true);\n            this.position = range.startOffset - startOffset;\n            cursorRange.setStart(range.startContainer, startOffset);\n            cursorRange.setEnd(range.startContainer, this.GetCursorStart(indexes, range.startOffset, false));\n        }\n        return cursorRange;\n    };\n    NodeCutter.prototype.GetCursorNode = function (docElement, range, node) {\n        return this.GetSpliceNode(this.GetCursorRange(docElement, range, node), node);\n    };\n    NodeCutter.prototype.TrimLineBreak = function (line) {\n        return line.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, ' ');\n    };\n    return NodeCutter;\n}());\nexport { NodeCutter };\n","import { NodeSelection } from './../../selection/index';\nimport { NodeCutter } from './nodecutter';\nimport * as CONSTANT from './../base/constant';\nimport { detach } from '@syncfusion/ej2-base';\nimport { InsertMethods } from './insert-methods';\n/**\n * Insert a HTML Node or Text\n * @hidden\n */\nvar InsertHtml = /** @class */ (function () {\n    function InsertHtml() {\n    }\n    InsertHtml.Insert = function (docElement, insertNode, editNode) {\n        var node;\n        if (typeof insertNode === 'string') {\n            var divNode = document.createElement('div');\n            divNode.innerHTML = insertNode;\n            node = divNode.firstChild;\n        }\n        else {\n            node = insertNode;\n        }\n        var nodeSelection = new NodeSelection();\n        var nodeCutter = new NodeCutter();\n        var range = nodeSelection.getRange(docElement);\n        var isCollapsed = range.collapsed;\n        var nodes = nodeSelection.getInsertNodeCollection(range);\n        var closestParentNode = (node.nodeName.toLowerCase() === 'table') ? this.closestEle(nodes[0].parentNode, editNode) : nodes[0];\n        if ((!isCollapsed && !(closestParentNode.nodeType === Node.ELEMENT_NODE &&\n            CONSTANT.TABLE_BLOCK_TAGS.indexOf(closestParentNode.tagName.toLocaleLowerCase()) !== -1))\n            || (node.nodeName.toLowerCase() === 'table' && closestParentNode &&\n                CONSTANT.TABLE_BLOCK_TAGS.indexOf(closestParentNode.tagName.toLocaleLowerCase()) === -1)) {\n            var preNode = nodeCutter.GetSpliceNode(range, closestParentNode);\n            var sibNode = preNode.previousSibling;\n            var parentNode = preNode.parentNode;\n            if (nodes.length === 1) {\n                nodeSelection.setSelectionContents(docElement, preNode);\n                range = nodeSelection.getRange(docElement);\n            }\n            else {\n                var lasNode = nodeCutter.GetSpliceNode(range, nodes[nodes.length - 1]);\n                nodeSelection.setSelectionText(docElement, preNode, lasNode, 0, (lasNode.nodeType === 3) ?\n                    lasNode.textContent.length : lasNode.childNodes.length);\n                range = nodeSelection.getRange(docElement);\n            }\n            range.extractContents();\n            for (var index = 0; index < nodes.length; index++) {\n                if (nodes[index].nodeType !== 3 && nodes[index].parentNode != null) {\n                    nodes[index].parentNode.removeChild(nodes[index]);\n                }\n            }\n            if (sibNode) {\n                InsertMethods.AppendBefore(node, sibNode, true);\n            }\n            else {\n                var previousNode = null;\n                while (parentNode !== editNode && parentNode.firstChild &&\n                    (parentNode.textContent.trim() === '')) {\n                    var parentNode1 = parentNode.parentNode;\n                    previousNode = parentNode;\n                    parentNode = parentNode1;\n                }\n                if (previousNode !== null) {\n                    parentNode = previousNode;\n                }\n                if (parentNode.firstChild) {\n                    if (parentNode.textContent.trim() === '') {\n                        InsertMethods.AppendBefore(node, parentNode, false);\n                        detach(parentNode);\n                    }\n                    else {\n                        InsertMethods.AppendBefore(node, parentNode.firstChild, false);\n                    }\n                }\n                else {\n                    parentNode.appendChild(node);\n                }\n            }\n            if (node.nodeType !== 3) {\n                nodeSelection.setSelectionText(docElement, node, node, 0, node.childNodes.length);\n            }\n            else {\n                nodeSelection.setSelectionText(docElement, node, node, 0, node.textContent.length);\n            }\n        }\n        else {\n            range.deleteContents();\n            range.insertNode(node);\n            if (node.nodeType !== 3 && node.childNodes.length > 0) {\n                nodeSelection.setSelectionText(docElement, node, node, 1, 1);\n            }\n            else if (node.nodeType !== 3) {\n                nodeSelection.setSelectionContents(docElement, node);\n            }\n            else {\n                nodeSelection.setSelectionText(docElement, node, node, node.textContent.length, node.textContent.length);\n            }\n        }\n    };\n    InsertHtml.closestEle = function (element, editNode) {\n        var el = element;\n        while (el && el.nodeType === 1) {\n            if (el.parentNode === editNode ||\n                CONSTANT.IGNORE_BLOCK_TAGS.indexOf(el.parentNode.tagName.toLocaleLowerCase()) !== -1) {\n                return el;\n            }\n            el = el.parentNode;\n        }\n        return null;\n    };\n    return InsertHtml;\n}());\nexport { InsertHtml };\n","import { createElement, isNullOrUndefined, closest } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport { InsertHtml } from './inserthtml';\n/**\n * Link internal component\n * @hidden\n */\nvar LinkCommand = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function LinkCommand(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    LinkCommand.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.LINK, this.linkCommand, this);\n    };\n    LinkCommand.prototype.linkCommand = function (e) {\n        switch (e.value.toString().toLocaleLowerCase()) {\n            case 'createlink':\n            case 'editlink':\n                this.createLink(e);\n                break;\n            case 'openlink':\n                this.openLink(e);\n                break;\n            case 'removelink':\n                this.removeLink(e);\n                break;\n        }\n    };\n    LinkCommand.prototype.createLink = function (e) {\n        var closestAnchor = (!isNullOrUndefined(e.item.selectParent) && e.item.selectParent.length > 0) &&\n            closest(e.item.selectParent[0], 'a');\n        closestAnchor = !isNullOrUndefined(closestAnchor) ? closestAnchor :\n            (!isNullOrUndefined(e.item.selectParent) && e.item.selectParent.length > 0) ? (e.item.selectParent[0]) : null;\n        if (!isNullOrUndefined(closestAnchor) && closestAnchor.tagName === 'A') {\n            var anchorEle = closestAnchor;\n            anchorEle.setAttribute('href', e.item.url);\n            anchorEle.setAttribute('title', e.item.title);\n            anchorEle.innerHTML = e.item.text;\n            if (!isNullOrUndefined(e.item.target)) {\n                anchorEle.setAttribute('target', e.item.target);\n            }\n            else {\n                anchorEle.removeAttribute('target');\n            }\n            e.item.selection.setSelectionText(this.parent.currentDocument, anchorEle, anchorEle, 1, 1);\n        }\n        else {\n            var anchor = createElement('a', {\n                className: 'e-rte-anchor', attrs: {\n                    href: e.item.url,\n                    title: isNullOrUndefined(e.item.title) || e.item.title === '' ? e.item.url : e.item.title\n                }\n            });\n            if (!isNullOrUndefined(e.item.target)) {\n                anchor.setAttribute('target', e.item.target);\n            }\n            anchor.innerText = e.item.text === '' ? e.item.url : e.item.text;\n            e.item.selection.restore();\n            InsertHtml.Insert(this.parent.currentDocument, anchor, this.parent.editableElement);\n            if (e.event && e.event.type === 'keydown' && e.event.keyCode === 32) {\n                var startContainer = e.item.selection.range.startContainer;\n                startContainer.textContent = this.removeText(startContainer.textContent, e.item.url);\n            }\n            else {\n                var startIndex = e.item.action === 'Paste' ? anchor.childNodes[0].textContent.length : 0;\n                e.item.selection.setSelectionText(this.parent.currentDocument, anchor.childNodes[0], anchor.childNodes[0], startIndex, anchor.childNodes[0].textContent.length);\n            }\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: 'Links',\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    LinkCommand.prototype.removeText = function (text, val) {\n        var arr = text.split(' ');\n        for (var i = 0; i < arr.length; i++) {\n            if (arr[i] === val) {\n                arr.splice(i, 1);\n                i--;\n            }\n        }\n        return arr.join(' ');\n    };\n    LinkCommand.prototype.openLink = function (e) {\n        document.defaultView.open(e.item.url, e.item.target);\n        this.callBack(e);\n    };\n    LinkCommand.prototype.removeLink = function (e) {\n        this.parent.domNode.setMarker(e.item.selection);\n        var closestAnchor = closest(e.item.selectParent[0], 'a');\n        var selectParent = closestAnchor ? closestAnchor : e.item.selectParent[0];\n        var parent = selectParent.parentNode;\n        var child = [];\n        for (; selectParent.firstChild; null) {\n            child.push(parent.insertBefore(selectParent.firstChild, selectParent));\n        }\n        parent.removeChild(selectParent);\n        if (child && child.length === 1) {\n            e.item.selection.startContainer = e.item.selection.getNodeArray(child[child.length - 1], true);\n            e.item.selection.endContainer = e.item.selection.startContainer;\n        }\n        e.item.selection = this.parent.domNode.saveMarker(e.item.selection);\n        e.item.selection.restore();\n        this.callBack(e);\n    };\n    LinkCommand.prototype.callBack = function (e) {\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return LinkCommand;\n}());\nexport { LinkCommand };\n","import * as CONSTANT from './../base/constant';\nimport { setStyleAttribute } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * Formats internal component\n * @hidden\n */\nvar Alignments = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function Alignments(parent) {\n        this.alignments = {\n            'JustifyLeft': 'left',\n            'JustifyCenter': 'center',\n            'JustifyRight': 'right',\n            'JustifyFull': 'justify'\n        };\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Alignments.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.ALIGNMENT_TYPE, this.applyAlignment, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    Alignments.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'justify-center':\n                this.applyAlignment({ subCommand: 'JustifyCenter', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'justify-full':\n                this.applyAlignment({ subCommand: 'JustifyFull', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'justify-left':\n                this.applyAlignment({ subCommand: 'JustifyLeft', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'justify-right':\n                this.applyAlignment({ subCommand: 'JustifyRight', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    Alignments.prototype.applyAlignment = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var save = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        this.parent.domNode.setMarker(save);\n        var alignmentNodes = this.parent.domNode.blockNodes();\n        for (var i = 0; i < alignmentNodes.length; i++) {\n            var parentNode = alignmentNodes[i];\n            setStyleAttribute(parentNode, { 'text-align': this.alignments[e.subCommand] });\n        }\n        this.parent.editableElement.focus();\n        save = this.parent.domNode.saveMarker(save);\n        if (isIDevice()) {\n            setEditFrameFocus(this.parent.editableElement, e.selector);\n        }\n        save.restore();\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.domNode.blockNodes()\n            });\n        }\n    };\n    return Alignments;\n}());\nexport { Alignments };\n","import * as CONSTANT from './../base/constant';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * Indents internal component\n * @hidden\n */\nvar Indents = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function Indents(parent) {\n        this.indentValue = 20;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Indents.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.INDENT_TYPE, this.applyIndents, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    Indents.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'indents':\n                this.applyIndents({ subCommand: 'Indent', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'outdents':\n                this.applyIndents({ subCommand: 'Outdent', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    Indents.prototype.applyIndents = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var save = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        this.parent.domNode.setMarker(save);\n        var indentsNodes = this.parent.domNode.blockNodes();\n        var parentNodes = indentsNodes.slice();\n        var listsNodes = [];\n        for (var i = 0; i < parentNodes.length; i++) {\n            if (parentNodes[i].tagName !== 'LI' && 'LI' === parentNodes[i].parentNode.tagName) {\n                indentsNodes.splice(indentsNodes.indexOf(parentNodes[i]), 1);\n                listsNodes.push(parentNodes[i].parentNode);\n            }\n            else if (parentNodes[i].tagName === 'LI') {\n                indentsNodes.splice(indentsNodes.indexOf(parentNodes[i]), 1);\n                listsNodes.push(parentNodes[i]);\n            }\n        }\n        if (listsNodes.length > 0) {\n            this.parent.observer.notify(EVENTS.KEY_DOWN_HANDLER, {\n                event: {\n                    preventDefault: function () { return; },\n                    stopPropagation: function () { return; },\n                    shiftKey: (e.subCommand === 'Indent' ? false : true),\n                    which: 9,\n                    action: 'indent'\n                },\n                ignoreDefault: true\n            });\n        }\n        for (var i = 0; i < indentsNodes.length; i++) {\n            var parentNode = indentsNodes[i];\n            var marginLeft = parentNode.style.marginLeft;\n            var indentsValue = void 0;\n            if (e.subCommand === 'Indent') {\n                indentsValue = marginLeft === '' ? this.indentValue + 'px' : parseInt(marginLeft, null) + this.indentValue + 'px';\n                parentNode.style.marginLeft = indentsValue;\n            }\n            else {\n                indentsValue = (marginLeft === '' || marginLeft === '0px') ? '' : parseInt(marginLeft, null) - this.indentValue + 'px';\n                parentNode.style.marginLeft = indentsValue;\n            }\n        }\n        this.parent.editableElement.focus();\n        if (isIDevice()) {\n            setEditFrameFocus(this.parent.editableElement, e.selector);\n        }\n        save = this.parent.domNode.saveMarker(save);\n        save.restore();\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.domNode.blockNodes()\n            });\n        }\n    };\n    return Indents;\n}());\nexport { Indents };\n","import { createElement, isNullOrUndefined, detach, closest, addClass, removeClass } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport * as classes from './../base/classes';\nimport { InsertHtml } from './inserthtml';\n/**\n * Link internal component\n * @hidden\n */\nvar ImageCommand = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function ImageCommand(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    ImageCommand.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.IMAGE, this.imageCommand, this);\n    };\n    ImageCommand.prototype.imageCommand = function (e) {\n        switch (e.value.toString().toLocaleLowerCase()) {\n            case 'image':\n            case 'replace':\n                this.createImage(e);\n                break;\n            case 'insertlink':\n                this.insertImageLink(e);\n                break;\n            case 'openimagelink':\n                this.openImageLink(e);\n                break;\n            case 'editimagelink':\n                this.editImageLink(e);\n                break;\n            case 'removeimagelink':\n                this.removeImageLink(e);\n                break;\n            case 'remove':\n                this.removeImage(e);\n                break;\n            case 'alttext':\n                this.insertAltTextImage(e);\n                break;\n            case 'dimension':\n                this.imageDimension(e);\n                break;\n            case 'caption':\n                this.imageCaption(e);\n                break;\n            case 'justifyleft':\n                this.imageJustifyLeft(e);\n                break;\n            case 'justifycenter':\n                this.imageJustifyCenter(e);\n                break;\n            case 'justifyright':\n                this.imageJustifyRight(e);\n                break;\n            case 'inline':\n                this.imageInline(e);\n                break;\n            case 'break':\n                this.imageBreak(e);\n                break;\n        }\n    };\n    ImageCommand.prototype.createImage = function (e) {\n        if (!isNullOrUndefined(e.item.selectParent) && e.item.selectParent[0].tagName === 'IMG') {\n            var imgEle = e.item.selectParent[0];\n            imgEle.setAttribute('src', e.item.url);\n            imgEle.setAttribute('alt', e.item.altText);\n        }\n        else {\n            var imgElement = createElement('img', {\n                className: 'e-rte-image ' + e.item.cssClass, attrs: {\n                    width: (isNullOrUndefined(e.item.width) || isNullOrUndefined(e.item.width.width)) ? 'auto' :\n                        e.item.width.width,\n                    height: (isNullOrUndefined(e.item.height) || isNullOrUndefined(e.item.height.height)) ? 'auto' :\n                        e.item.height.height,\n                    alt: (e.item.altText !== '') ? e.item.altText : ''\n                }\n            });\n            imgElement.setAttribute('src', isNullOrUndefined(e.item.url) ? '' : e.item.url);\n            imgElement.style.minWidth = (isNullOrUndefined(e.item.width) || isNullOrUndefined(e.item.width.minWidth)) ? 0 + 'px' :\n                e.item.width.minWidth + 'px';\n            imgElement.style.maxWidth = (isNullOrUndefined(e.item.width) || isNullOrUndefined(e.item.width.maxWidth)) ? null :\n                e.item.width.maxWidth + 'px';\n            imgElement.style.minHeight = (isNullOrUndefined(e.item.height) || isNullOrUndefined(e.item.height.minHeight)) ? 0 + 'px' :\n                e.item.height.minHeight + 'px';\n            imgElement.style.maxHeight = (isNullOrUndefined(e.item.height) || isNullOrUndefined(e.item.height.maxHeight)) ? null :\n                e.item.height.maxHeight + 'px';\n            if (!isNullOrUndefined(e.item.selection)) {\n                e.item.selection.restore();\n            }\n            InsertHtml.Insert(this.parent.currentDocument, imgElement, this.parent.editableElement);\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: 'Image',\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    ImageCommand.prototype.insertImageLink = function (e) {\n        var anchor = createElement('a', {\n            attrs: {\n                href: e.item.url\n            }\n        });\n        anchor.appendChild(e.item.selectNode[0]);\n        if (!isNullOrUndefined(e.item.target)) {\n            anchor.setAttribute('target', e.item.target);\n        }\n        InsertHtml.Insert(this.parent.currentDocument, anchor, this.parent.editableElement);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.openImageLink = function (e) {\n        document.defaultView.open(e.item.url, e.item.target);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.removeImageLink = function (e) {\n        detach(closest(e.item.selectParent[0], 'a'));\n        InsertHtml.Insert(this.parent.currentDocument, e.item.insertElement, this.parent.editableElement);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.editImageLink = function (e) {\n        e.item.selectNode[0].parentElement.href = e.item.url;\n        if (isNullOrUndefined(e.item.target)) {\n            e.item.selectNode[0].parentElement.removeAttribute('target');\n        }\n        else {\n            e.item.selectNode[0].parentElement.target = e.item.target;\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.removeImage = function (e) {\n        if (closest(e.item.selectNode[0], 'a')) {\n            detach(closest(e.item.selectNode[0], 'a'));\n        }\n        else if (!isNullOrUndefined(closest(e.item.selectNode[0], '.' + classes.CLASS_CAPTION))) {\n            detach(closest(e.item.selectNode[0], '.' + classes.CLASS_CAPTION));\n        }\n        else {\n            detach(e.item.selectNode[0]);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.insertAltTextImage = function (e) {\n        e.item.selectNode[0].setAttribute('alt', e.item.altText);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageDimension = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.style.height = '';\n        selectNode.style.width = '';\n        selectNode.width = e.item.width;\n        selectNode.height = e.item.height;\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageCaption = function (e) {\n        InsertHtml.Insert(this.parent.currentDocument, e.item.insertElement, this.parent.editableElement);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageJustifyLeft = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], 'e-rte-image');\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n        }\n        if (selectNode.parentElement.nodeName === 'A') {\n            removeClass([selectNode.parentElement], classes.CLASS_IMAGE_RIGHT);\n            addClass([selectNode.parentElement], classes.CLASS_IMAGE_LEFT);\n        }\n        else {\n            addClass([selectNode], classes.CLASS_IMAGE_LEFT);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageJustifyCenter = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], 'e-rte-image');\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_CENTER);\n        }\n        if (selectNode.parentElement.nodeName === 'A') {\n            removeClass([selectNode.parentElement], classes.CLASS_IMAGE_LEFT);\n            removeClass([selectNode.parentElement], classes.CLASS_IMAGE_RIGHT);\n            addClass([selectNode.parentElement], classes.CLASS_IMAGE_CENTER);\n        }\n        else {\n            addClass([selectNode], classes.CLASS_IMAGE_CENTER);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageJustifyRight = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], 'e-rte-image');\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n        }\n        if (selectNode.parentElement.nodeName === 'A') {\n            removeClass([selectNode.parentElement], classes.CLASS_IMAGE_LEFT);\n            addClass([selectNode.parentElement], classes.CLASS_IMAGE_RIGHT);\n        }\n        else {\n            addClass([selectNode], classes.CLASS_IMAGE_RIGHT);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageInline = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], 'e-rte-image');\n        addClass([selectNode], classes.CLASS_IMAGE_INLINE);\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_BREAK);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_CENTER);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_CAPTION_INLINE);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageBreak = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], classes.CLASS_IMAGE_BREAK);\n        addClass([selectNode], 'e-rte-image');\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_CAPTION_INLINE);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_CENTER);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_BREAK);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.callBack = function (e) {\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return ImageCommand;\n}());\nexport { ImageCommand };\n","/**\n * RichTextEditor classes defined here.\n */\n/** @hidden */\nexport var CLASS_IMAGE_RIGHT = 'e-imgright';\nexport var CLASS_IMAGE_LEFT = 'e-imgleft';\nexport var CLASS_IMAGE_CENTER = 'e-imgcenter';\nexport var CLASS_IMAGE_BREAK = 'e-imgbreak';\nexport var CLASS_CAPTION = 'e-img-caption';\nexport var CLASS_CAPTION_INLINE = 'e-caption-inline';\nexport var CLASS_IMAGE_INLINE = 'e-imginline';\n","import { createElement, closest, detach } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport { InsertHtml } from './inserthtml';\n/**\n * Link internal component\n * @hidden\n */\nvar TableCommand = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function TableCommand(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    TableCommand.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.TABLE, this.createTable, this);\n        this.parent.observer.on(CONSTANT.INSERT_ROW, this.insertRow, this);\n        this.parent.observer.on(CONSTANT.INSERT_COLUMN, this.insertColumn, this);\n        this.parent.observer.on(CONSTANT.DELETEROW, this.deleteRow, this);\n        this.parent.observer.on(CONSTANT.DELETECOLUMN, this.deleteColumn, this);\n        this.parent.observer.on(CONSTANT.REMOVETABLE, this.removeTable, this);\n        this.parent.observer.on(CONSTANT.TABLEHEADER, this.tableHeader, this);\n        this.parent.observer.on(CONSTANT.TABLE_VERTICAL_ALIGN, this.tableVerticalAlign, this);\n    };\n    TableCommand.prototype.createTable = function (e) {\n        var table = createElement('table', { className: 'e-rte-table' });\n        var tblBody = createElement('tbody');\n        table.style.width = e.item.width.width;\n        var tdWid = parseInt(e.item.width.width, 10) / e.item.columns;\n        for (var i = 0; i < e.item.row; i++) {\n            var row = createElement('tr');\n            for (var j = 0; j < e.item.columns; j++) {\n                var cell = createElement('td');\n                cell.appendChild(createElement('br'));\n                cell.style.width = tdWid + '%';\n                row.appendChild(cell);\n            }\n            tblBody.appendChild(row);\n        }\n        table.appendChild(tblBody);\n        e.item.selection.restore();\n        InsertHtml.Insert(this.parent.currentDocument, table, this.parent.editableElement);\n        this.removeEmptyNode();\n        e.item.selection.setSelectionText(this.parent.currentDocument, table.querySelector('td'), table.querySelector('td'), 0, 0);\n        table.querySelector('td').classList.add('e-cell-select');\n        if (e.callBack) {\n            e.callBack({\n                requestType: 'Table',\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n        return table;\n    };\n    TableCommand.prototype.removeEmptyNode = function () {\n        var emptyUl = this.parent.editableElement.querySelectorAll('ul:empty, ol:empty');\n        for (var i = 0; i < emptyUl.length; i++) {\n            detach(emptyUl[i]);\n        }\n        var emptyLiChild = this.parent.editableElement.querySelectorAll('li *:empty');\n        for (var i = 0; i < emptyLiChild.length; i++) {\n            detach(emptyLiChild[i]);\n            if (emptyLiChild.length === i + 1) {\n                emptyLiChild = this.parent.editableElement.querySelectorAll('li *:empty');\n                i = -1;\n            }\n        }\n        var emptyLi = this.parent.editableElement.querySelectorAll('li:empty');\n        for (var i = 0; i < emptyLi.length; i++) {\n            detach(emptyLi[i]);\n        }\n    };\n    TableCommand.prototype.insertAfter = function (newNode, referenceNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n    TableCommand.prototype.insertRow = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        if (selectedCell.nodeName.toLowerCase() === 'th' && e.item.subCommand === 'InsertRowBefore') {\n            return;\n        }\n        var curRow = closest(selectedCell, 'tr');\n        var newRow;\n        if (selectedCell.nodeName.toLowerCase() !== 'th') {\n            newRow = closest(selectedCell, 'tr').cloneNode(true);\n            var tabCell = Array.prototype.slice.call(newRow.querySelectorAll('td'));\n            Array.prototype.forEach.call(tabCell, function (cell) {\n                cell.innerHTML = '';\n                cell.appendChild(createElement('br'));\n                cell.removeAttribute('class');\n            });\n        }\n        else {\n            var childNodes = curRow.childNodes;\n            newRow = createElement('tr');\n            for (var i = 0; i < childNodes.length; i++) {\n                var tdElement = createElement('td');\n                tdElement.appendChild(createElement('br'));\n                newRow.appendChild(tdElement);\n            }\n        }\n        (e.item.subCommand === 'InsertRowBefore') ?\n            curRow.parentElement.insertBefore(newRow, curRow) : this.insertAfter(newRow, curRow);\n        e.item.selection.setSelectionText(this.parent.currentDocument, e.item.selection.range.startContainer, e.item.selection.range.startContainer, 0, 0);\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.insertColumn = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        selectedCell = (selectedCell.nodeName !== 'TD') ? closest(selectedCell, 'td,th') : selectedCell;\n        var curRow = closest(selectedCell, 'tr');\n        var curCell;\n        var allRows = closest((curRow), 'table').rows;\n        var colIndex = Array.prototype.slice.call(curRow.querySelectorAll('th,td')).indexOf(selectedCell);\n        var width = parseInt(e.item.width, 10) / (curRow.querySelectorAll('td,th').length + 1);\n        for (var j = 0; j < closest(curRow, 'table').querySelectorAll('th,td').length; j++) {\n            closest(curRow, 'table').querySelectorAll('th,td')[j].style.width = width + '%';\n        }\n        for (var i = 0; i < allRows.length; i++) {\n            curCell = allRows[i].querySelectorAll('th,td')[colIndex];\n            var colTemplate = curCell.cloneNode(true);\n            colTemplate.innerHTML = '';\n            colTemplate.appendChild(createElement('br'));\n            colTemplate.removeAttribute('class');\n            (e.item.subCommand === 'InsertColumnLeft') ? curCell.parentElement.insertBefore(colTemplate, curCell) :\n                this.insertAfter(colTemplate, curCell);\n        }\n        e.item.selection.setSelectionText(this.parent.currentDocument, selectedCell, selectedCell, 0, 0);\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.deleteColumn = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        var curRow = closest(selectedCell, 'tr');\n        var allRows = closest(curRow, 'table').rows;\n        if (curRow.querySelectorAll('th,td').length === 1) {\n            e.item.selection.restore();\n            detach(closest(selectedCell.parentElement, 'table'));\n        }\n        else {\n            for (var i = 0; i < allRows.length; i++) {\n                allRows[i].deleteCell(selectedCell.cellIndex);\n            }\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.deleteRow = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        var parentTable = closest(selectedCell, 'table');\n        if (parentTable.rows.length === 1) {\n            e.item.selection.restore();\n            detach(closest(selectedCell.parentElement, 'table'));\n        }\n        else {\n            parentTable.deleteRow(selectedCell.parentNode.rowIndex);\n            e.item.selection.setSelectionText(this.parent.currentDocument, parentTable.querySelector('td'), parentTable.querySelector('td'), 0, 0);\n            parentTable.querySelector('td, th').classList.add('e-cell-select');\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.removeTable = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        var seletedTable = closest(selectedCell.parentElement, 'table');\n        if (seletedTable) {\n            e.item.selection.restore();\n            detach(seletedTable);\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.tableHeader = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        var table = closest(selectedCell.parentElement, 'table');\n        if (table && 0 === table.querySelectorAll('thead').length) {\n            var cellCount = table.querySelector('tr').querySelectorAll('td').length;\n            var header = table.createTHead();\n            var row = header.insertRow(0);\n            for (var i = 0; i < cellCount; i++) {\n                var th = createElement('th');\n                th.appendChild(createElement('br'));\n                row.appendChild(th);\n            }\n        }\n        else {\n            table.deleteTHead();\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.tableVerticalAlign = function (e) {\n        if (e.item.subCommand === 'AlignTop') {\n            e.item.tableCell.style.verticalAlign = 'top';\n        }\n        else if (e.item.subCommand === 'AlignMiddle') {\n            e.item.tableCell.style.verticalAlign = 'middle';\n        }\n        else {\n            e.item.tableCell.style.verticalAlign = 'bottom';\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return TableCommand;\n}());\nexport { TableCommand };\n","/**\n * Is formatted or not.\n * @hidden\n */\nvar IsFormatted = /** @class */ (function () {\n    function IsFormatted() {\n    }\n    IsFormatted.prototype.getFormattedNode = function (node, format, endNode) {\n        var parentNode = this.getFormatParent(node, format, endNode);\n        if (parentNode !== null && parentNode !== endNode) {\n            return parentNode;\n        }\n        return null;\n    };\n    IsFormatted.prototype.getFormatParent = function (node, format, endNode) {\n        do {\n            node = node.parentNode;\n        } while (node && (node !== endNode) && !this.isFormattedNode(node, format));\n        return node;\n    };\n    IsFormatted.prototype.isFormattedNode = function (node, format) {\n        switch (format) {\n            case 'bold':\n                return IsFormatted.isBold(node);\n            case 'italic':\n                return IsFormatted.isItalic(node);\n            case 'underline':\n                return IsFormatted.isUnderline(node);\n            case 'strikethrough':\n                return IsFormatted.isStrikethrough(node);\n            case 'superscript':\n                return IsFormatted.isSuperscript(node);\n            case 'subscript':\n                return IsFormatted.isSubscript(node);\n            case 'fontcolor':\n                return this.isFontColor(node);\n            case 'fontname':\n                return this.isFontName(node);\n            case 'fontsize':\n                return this.isFontSize(node);\n            case 'backgroundcolor':\n                return this.isBackgroundColor(node);\n            default:\n                return false;\n        }\n    };\n    IsFormatted.isBold = function (node) {\n        var validTags = ['strong', 'b'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && node.style.fontWeight === 'bold') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.isItalic = function (node) {\n        var validTags = ['em', 'i'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && node.style.fontStyle === 'italic') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.isUnderline = function (node) {\n        var validTags = ['u'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && node.style.textDecoration === 'underline') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.isStrikethrough = function (node) {\n        var validTags = ['del', 'strike'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && node.style.textDecoration === 'line-through') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.isSuperscript = function (node) {\n        var validTags = ['sup'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.isSubscript = function (node) {\n        var validTags = ['sub'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isFontColor = function (node) {\n        var color = node.style && node.style.color;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            color !== null && color !== '' && color !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isBackgroundColor = function (node) {\n        var backColor = node.style && node.style.backgroundColor;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            backColor !== null && backColor !== '' && backColor !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isFontSize = function (node) {\n        var size = node.style && node.style.fontSize;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            size !== null && size !== '' && size !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isFontName = function (node) {\n        var name = node.style && node.style.fontFamily;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            name !== null && name !== '' && name !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    // Get Formatted Node\n    IsFormatted.inlineTags = [\n        'a',\n        'abbr',\n        'acronym',\n        'b',\n        'bdo',\n        'big',\n        'cite',\n        'code',\n        'dfn',\n        'em',\n        'i',\n        'kbd',\n        'label',\n        'q',\n        'samp',\n        'small',\n        'span',\n        'strong',\n        'sub',\n        'sup',\n        'tt',\n        'u',\n        'var'\n    ];\n    return IsFormatted;\n}());\nexport { IsFormatted };\n","/**\n * `Selection` module is used to handle RTE Selections.\n */\nimport { NodeSelection } from './../../selection/index';\nimport { NodeCutter } from './nodecutter';\nimport { InsertMethods } from './insert-methods';\nimport { IsFormatted } from './isformatted';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\nvar SelectionCommands = /** @class */ (function () {\n    function SelectionCommands() {\n    }\n    SelectionCommands.applyFormat = function (docElement, format, endNode, value, selector) {\n        var validFormats = ['bold', 'italic', 'underline', 'strikethrough', 'superscript',\n            'subscript', 'uppercase', 'lowercase', 'fontcolor', 'fontname', 'fontsize', 'backgroundcolor'];\n        if (validFormats.indexOf(format) > -1) {\n            var domSelection = new NodeSelection();\n            var nodeCutter = new NodeCutter();\n            var isFormatted = new IsFormatted();\n            var range = domSelection.getRange(docElement);\n            var save = domSelection.save(range, docElement);\n            var nodes = domSelection.getSelectionNodeCollection(range);\n            var isCollapsed = false;\n            var isFormat = false;\n            var isCursor = false;\n            var isFontStyle = (['fontcolor', 'fontname', 'fontsize', 'backgroundcolor'].indexOf(format) > -1);\n            if (range.collapsed) {\n                if (nodes.length > 0) {\n                    isCollapsed = true;\n                    range = nodeCutter.GetCursorRange(docElement, range, nodes[0]);\n                }\n                else if (range.startContainer.nodeName.toLowerCase() !== 'td') {\n                    var cursorNode = this.insertCursorNode(domSelection, range, isFormatted, nodeCutter, format, value, endNode);\n                    domSelection.endContainer = domSelection.startContainer = domSelection.getNodeArray(cursorNode, true);\n                    domSelection.endOffset = domSelection.startOffset = 1;\n                }\n            }\n            isCursor = range.collapsed;\n            for (var index = 0; index < nodes.length; index++) {\n                var formatNode = isFormatted.getFormattedNode(nodes[index], format, endNode);\n                if (index === 0 && formatNode === null) {\n                    isFormat = true;\n                }\n                if (formatNode !== null && (!isFormat || isFontStyle)) {\n                    nodes[index] = this.removeFormat(nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value, domSelection);\n                }\n                else {\n                    nodes[index] = this.insertFormat(nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value);\n                }\n                domSelection = this.applySelection(nodes, domSelection, nodeCutter, index, isCollapsed);\n            }\n            if (isIDevice()) {\n                setEditFrameFocus(endNode, selector);\n            }\n            save.restore();\n        }\n    };\n    SelectionCommands.insertCursorNode = function (domSelection, range, isFormatted, nodeCutter, format, value, endNode) {\n        var cursorNodes = domSelection.getNodeCollection(range);\n        var cursorFormat = (cursorNodes.length > 0) ? isFormatted.getFormattedNode(cursorNodes[0], format, endNode) : null;\n        var cursorNode = null;\n        if (cursorFormat) {\n            cursorNode = cursorNodes[0];\n            InsertMethods.unwrap(cursorFormat);\n        }\n        else {\n            cursorNode = this.getInsertNode(range, format, value).firstChild;\n        }\n        return cursorNode;\n    };\n    SelectionCommands.removeFormat = function (nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value, domSelection) {\n        var splitNode = null;\n        if (!(range.startContainer === range.endContainer && range.startOffset === 0\n            && range.endOffset === range.startContainer.length)) {\n            var nodeIndex = [];\n            var cloneNode = nodes[index];\n            do {\n                nodeIndex.push(domSelection.getIndex(cloneNode));\n                cloneNode = cloneNode.parentNode;\n            } while (cloneNode && (cloneNode !== formatNode));\n            cloneNode = splitNode = nodeCutter.GetSpliceNode(range, formatNode);\n            if (!isCursor) {\n                while (cloneNode && cloneNode.childNodes.length > 0 && ((nodeIndex.length - 1) >= 0)\n                    && (cloneNode.childNodes.length > nodeIndex[nodeIndex.length - 1])) {\n                    cloneNode = cloneNode.childNodes[nodeIndex[nodeIndex.length - 1]];\n                    nodeIndex.pop();\n                }\n                if (cloneNode.nodeType === 3 && !(isCursor && cloneNode.nodeValue === '')) {\n                    nodes[index] = cloneNode;\n                }\n                else {\n                    var divNode = document.createElement('div');\n                    divNode.innerHTML = '&#65279;&#65279;';\n                    if (cloneNode.nodeType !== 3) {\n                        cloneNode.insertBefore(divNode.firstChild, cloneNode.firstChild);\n                        nodes[index] = cloneNode.firstChild;\n                    }\n                    else {\n                        cloneNode.parentNode.insertBefore(divNode.firstChild, cloneNode);\n                        nodes[index] = cloneNode.previousSibling;\n                        cloneNode.parentNode.removeChild(cloneNode);\n                    }\n                }\n            }\n            else {\n                var lastNode = splitNode;\n                for (; lastNode.firstChild !== null && lastNode.firstChild.nodeType !== 3; null) {\n                    lastNode = lastNode.firstChild;\n                }\n                lastNode.innerHTML = '&#65279;&#65279;';\n                nodes[index] = lastNode.firstChild;\n            }\n        }\n        var child = InsertMethods.unwrap(formatNode);\n        if (child.length > 0 && isFontStyle) {\n            for (var num = 0; num < child.length; num++) {\n                child[num] = InsertMethods.Wrap(child[num], this.GetFormatNode(format, value));\n            }\n        }\n        return nodes[index];\n    };\n    SelectionCommands.insertFormat = function (nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value) {\n        if (!isCursor) {\n            if ((formatNode === null && isFormat) || isFontStyle) {\n                nodes[index] = nodeCutter.GetSpliceNode(range, nodes[index]);\n                nodes[index].textContent = nodeCutter.TrimLineBreak(nodes[index].textContent);\n                if (format === 'uppercase' || format === 'lowercase') {\n                    nodes[index].textContent = (format === 'uppercase') ? nodes[index].textContent.toLocaleUpperCase()\n                        : nodes[index].textContent.toLocaleLowerCase();\n                }\n                else if (!(isFontStyle === true && value === '')) {\n                    var element = this.GetFormatNode(format, value);\n                    nodes[index] = (index === (nodes.length - 1)) ? InsertMethods.Wrap(nodes[index], element)\n                        : InsertMethods.WrapBefore(nodes[index], element, true);\n                    nodes[index] = this.getChildNode(nodes[index], element);\n                }\n            }\n            else {\n                nodes[index] = nodeCutter.GetSpliceNode(range, nodes[index]);\n            }\n        }\n        else {\n            if (format !== 'uppercase' && format !== 'lowercase') {\n                var element = this.getInsertNode(range, format, value);\n                nodes[index] = element.firstChild;\n                nodeCutter.position = 1;\n            }\n            else {\n                nodeCutter.position = range.startOffset;\n            }\n        }\n        return nodes[index];\n    };\n    SelectionCommands.getInsertNode = function (range, format, value) {\n        var element = this.GetFormatNode(format, value);\n        element.innerHTML = '&#65279;&#65279;';\n        range.insertNode(element);\n        return element;\n    };\n    SelectionCommands.getChildNode = function (node, element) {\n        if (node === undefined || node === null) {\n            element.innerHTML = '&#65279;';\n            node = element.firstChild;\n        }\n        return node;\n    };\n    SelectionCommands.applySelection = function (nodes, domSelection, nodeCutter, index, isCollapsed) {\n        if (nodes.length === 1 && !isCollapsed) {\n            domSelection.startContainer = domSelection.getNodeArray(nodes[index], true);\n            domSelection.endContainer = domSelection.startContainer;\n            domSelection.startOffset = 0;\n            domSelection.endOffset = nodes[index].textContent.length;\n        }\n        else if (nodes.length === 1 && isCollapsed) {\n            domSelection.startContainer = domSelection.getNodeArray(nodes[index], true);\n            domSelection.endContainer = domSelection.startContainer;\n            domSelection.startOffset = nodeCutter.position;\n            domSelection.endOffset = nodeCutter.position;\n        }\n        else if (index === 0) {\n            domSelection.startContainer = domSelection.getNodeArray(nodes[index], true);\n            domSelection.startOffset = 0;\n        }\n        else if (index === nodes.length - 1) {\n            domSelection.endContainer = domSelection.getNodeArray(nodes[index], false);\n            domSelection.endOffset = nodes[index].textContent.length;\n        }\n        return domSelection;\n    };\n    SelectionCommands.GetFormatNode = function (format, value) {\n        var node;\n        switch (format) {\n            case 'bold':\n                return document.createElement('strong');\n            case 'italic':\n                return document.createElement('em');\n            case 'underline':\n                node = document.createElement('span');\n                node.style.textDecoration = 'underline';\n                return node;\n            case 'strikethrough':\n                node = document.createElement('span');\n                node.style.textDecoration = 'line-through';\n                return node;\n            case 'superscript':\n                return document.createElement('sup');\n            case 'subscript':\n                return document.createElement('sub');\n            case 'fontcolor':\n                node = document.createElement('span');\n                node.style.color = value;\n                node.style.textDecoration = 'inherit';\n                return node;\n            case 'fontname':\n                node = document.createElement('span');\n                node.style.fontFamily = value;\n                return node;\n            case 'fontsize':\n                node = document.createElement('span');\n                node.style.fontSize = value;\n                return node;\n            default:\n                node = document.createElement('span');\n                node.style.backgroundColor = value;\n                return node;\n        }\n    };\n    return SelectionCommands;\n}());\nexport { SelectionCommands };\n","import * as CONSTANT from './../base/constant';\nimport { SelectionCommands } from './selection-commands';\nimport * as EVENTS from './../../common/constant';\n/**\n * Selection EXEC internal component\n * @hidden\n */\nvar SelectionBasedExec = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function SelectionBasedExec(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    SelectionBasedExec.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.SELECTION_TYPE, this.applySelection, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n    };\n    SelectionBasedExec.prototype.keyDownHandler = function (e) {\n        var validFormats = ['bold', 'italic', 'underline', 'strikethrough', 'superscript',\n            'subscript', 'uppercase', 'lowercase'];\n        if (e.event.ctrlKey && validFormats.indexOf(e.event.action) > -1) {\n            e.event.preventDefault();\n            SelectionCommands.applyFormat(this.parent.currentDocument, e.event.action, this.parent.editableElement);\n            this.callBack(e, e.event.action);\n        }\n    };\n    SelectionBasedExec.prototype.applySelection = function (e) {\n        SelectionCommands.applyFormat(this.parent.currentDocument, e.subCommand.toLocaleLowerCase(), this.parent.editableElement, e.value, e.selector);\n        this.callBack(e, e.subCommand);\n    };\n    SelectionBasedExec.prototype.callBack = function (event, action) {\n        if (event.callBack) {\n            event.callBack({\n                requestType: action,\n                event: event.event,\n                editorMode: 'HTML',\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return SelectionBasedExec;\n}());\nexport { SelectionBasedExec };\n","import * as CONSTANT from './../base/constant';\nimport { InsertHtml } from './inserthtml';\n/**\n * Selection EXEC internal component\n * @hidden\n */\nvar InsertHtmlExec = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function InsertHtmlExec(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    InsertHtmlExec.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.INSERTHTML_TYPE, this.applyHtml, this);\n    };\n    InsertHtmlExec.prototype.applyHtml = function (e) {\n        InsertHtml.Insert(this.parent.currentDocument, e.value, this.parent.editableElement);\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return InsertHtmlExec;\n}());\nexport { InsertHtmlExec };\n","/**\n * `Clear Format` module is used to handle Clear Format.\n */\nimport { NodeSelection } from './../../selection/index';\nimport { NodeCutter } from './nodecutter';\nimport { InsertMethods } from './insert-methods';\nimport { IsFormatted } from './isformatted';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\nvar ClearFormat = /** @class */ (function () {\n    function ClearFormat() {\n    }\n    ClearFormat.clear = function (docElement, endNode, selector) {\n        var nodeSelection = new NodeSelection();\n        var nodeCutter = new NodeCutter();\n        var range = nodeSelection.getRange(docElement);\n        var isCollapsed = range.collapsed;\n        var nodes = nodeSelection.getInsertNodeCollection(range);\n        var save = nodeSelection.save(range, docElement);\n        if (!isCollapsed) {\n            var preNode = nodeCutter.GetSpliceNode(range, nodes[0]);\n            if (nodes.length === 1) {\n                nodeSelection.setSelectionContents(docElement, preNode);\n                range = nodeSelection.getRange(docElement);\n            }\n            else {\n                var lasNode = nodeCutter.GetSpliceNode(range, nodes[nodes.length - 1]);\n                nodeSelection.setSelectionText(docElement, preNode, lasNode, 0, (lasNode.nodeType === 3) ?\n                    lasNode.textContent.length : lasNode.childNodes.length);\n                range = nodeSelection.getRange(docElement);\n            }\n            var exactNodes = nodeSelection.getNodeCollection(range);\n            var cloneSelectNodes = exactNodes.slice();\n            this.clearInlines(nodeSelection.getSelectionNodes(cloneSelectNodes), cloneSelectNodes, nodeSelection.getRange(docElement), nodeCutter, endNode);\n            this.reSelection(docElement, save, exactNodes);\n            range = nodeSelection.getRange(docElement);\n            exactNodes = nodeSelection.getNodeCollection(range);\n            var cloneParentNodes = exactNodes.slice();\n            this.clearBlocks(docElement, cloneParentNodes, endNode, nodeCutter, nodeSelection);\n            if (isIDevice()) {\n                setEditFrameFocus(endNode, selector);\n            }\n            this.reSelection(docElement, save, exactNodes);\n        }\n    };\n    ClearFormat.reSelection = function (docElement, save, exactNodes) {\n        var selectionNodes = save.getInsertNodes(exactNodes);\n        save.startContainer = save.getNodeArray(selectionNodes[0], true, docElement);\n        save.startOffset = 0;\n        save.endContainer = save.getNodeArray(selectionNodes[selectionNodes.length - 1], false, docElement);\n        var endIndexNode = selectionNodes[selectionNodes.length - 1];\n        save.endOffset = (endIndexNode.nodeType === 3) ? endIndexNode.textContent.length\n            : endIndexNode.childNodes.length;\n        save.restore();\n    };\n    ClearFormat.clearBlocks = function (docElement, nodes, endNode, nodeCutter, nodeSelection) {\n        var parentNodes = [];\n        for (var index = 0; index < nodes.length; index++) {\n            if (this.BLOCK_TAGS.indexOf(nodes[index].nodeName.toLocaleLowerCase()) > -1\n                && parentNodes.indexOf(nodes[index]) === -1) {\n                parentNodes.push(nodes[index]);\n            }\n            else if ((this.BLOCK_TAGS.indexOf(nodes[index].parentNode.nodeName.toLocaleLowerCase()) > -1)\n                && parentNodes.indexOf(nodes[index].parentNode) === -1\n                && endNode !== nodes[index].parentNode) {\n                parentNodes.push(nodes[index].parentNode);\n            }\n        }\n        parentNodes = this.spliceParent(parentNodes, nodes)[0];\n        parentNodes = this.removeParent(parentNodes);\n        this.unWrap(docElement, parentNodes, nodeCutter, nodeSelection);\n    };\n    ClearFormat.spliceParent = function (parentNodes, nodes) {\n        for (var index1 = 0; index1 < parentNodes.length; index1++) {\n            var len = parentNodes[index1].childNodes.length;\n            for (var index2 = 0; index2 < len; index2++) {\n                if ((nodes.indexOf(parentNodes[index1].childNodes[index2]) > 0)\n                    && (parentNodes[index1].childNodes[index2].childNodes.length > 0)) {\n                    nodes = this.spliceParent([parentNodes[index1].childNodes[index2]], nodes)[1];\n                }\n                if ((nodes.indexOf(parentNodes[index1].childNodes[index2]) <= -1) &&\n                    (parentNodes[index1].childNodes[index2].textContent.trim() !== '')) {\n                    for (var index3 = 0; index3 < len; index3++) {\n                        if (nodes.indexOf(parentNodes[index1].childNodes[index3]) > -1) {\n                            nodes.splice(nodes.indexOf(parentNodes[index1].childNodes[index3]), 1);\n                        }\n                    }\n                    index2 = parentNodes[index1].childNodes.length;\n                    var parentIndex = parentNodes.indexOf(parentNodes[index1].parentNode);\n                    var nodeIndex = nodes.indexOf(parentNodes[index1].parentNode);\n                    if (parentIndex > -1) {\n                        parentNodes.splice(parentIndex, 1);\n                    }\n                    if (nodeIndex > -1) {\n                        nodes.splice(nodeIndex, 1);\n                    }\n                    var elementIndex = nodes.indexOf(parentNodes[index1]);\n                    if (elementIndex > -1) {\n                        nodes.splice(elementIndex, 1);\n                    }\n                    parentNodes.splice(index1, 1);\n                    index1--;\n                }\n            }\n        }\n        return [parentNodes, nodes];\n    };\n    ClearFormat.removeChild = function (parentNodes, parentNode) {\n        var count = parentNode.childNodes.length;\n        if (count > 0) {\n            for (var index = 0; index < count; index++) {\n                if (parentNodes.indexOf(parentNode.childNodes[index]) > -1) {\n                    parentNodes = this.removeChild(parentNodes, parentNode.childNodes[index]);\n                    parentNodes.splice(parentNodes.indexOf(parentNode.childNodes[index]), 1);\n                }\n            }\n        }\n        return parentNodes;\n    };\n    ClearFormat.removeParent = function (parentNodes) {\n        for (var index = 0; index < parentNodes.length; index++) {\n            if (parentNodes.indexOf(parentNodes[index].parentNode) > -1) {\n                parentNodes = this.removeChild(parentNodes, parentNodes[index]);\n                parentNodes.splice(index, 1);\n                index--;\n            }\n        }\n        return parentNodes;\n    };\n    ClearFormat.unWrap = function (docElement, parentNodes, nodeCutter, nodeSelection) {\n        for (var index1 = 0; index1 < parentNodes.length; index1++) {\n            if (this.NONVALID_TAGS.indexOf(parentNodes[index1].nodeName.toLowerCase()) > -1\n                && parentNodes[index1].parentNode\n                && this.NONVALID_PARENT_TAGS.indexOf(parentNodes[index1].parentNode.nodeName.toLowerCase()) > -1) {\n                nodeSelection.setSelectionText(docElement, parentNodes[index1], parentNodes[index1], 0, parentNodes[index1].childNodes.length);\n                InsertMethods.unwrap(nodeCutter.GetSpliceNode(nodeSelection.getRange(docElement), parentNodes[index1].parentNode));\n            }\n            if (parentNodes[index1].nodeName.toLocaleLowerCase() !== 'p') {\n                if (this.NONVALID_PARENT_TAGS.indexOf(parentNodes[index1].nodeName.toLowerCase()) < 0\n                    && parentNodes[index1].parentNode.nodeName.toLocaleLowerCase() !== 'p'\n                    && !(parentNodes[index1].childNodes.length === 1\n                        && parentNodes[index1].childNodes[0].nodeName.toLocaleLowerCase() === 'p')) {\n                    InsertMethods.Wrap(parentNodes[index1], docElement.createElement('p'));\n                }\n                var childNodes = InsertMethods.unwrap(parentNodes[index1]);\n                if (childNodes.length === 1\n                    && childNodes[0].parentNode.nodeName.toLocaleLowerCase() === 'p') {\n                    InsertMethods.Wrap(parentNodes[index1], docElement.createElement('p'));\n                    InsertMethods.unwrap(parentNodes[index1]);\n                }\n                for (var index2 = 0; index2 < childNodes.length; index2++) {\n                    if (this.NONVALID_TAGS.indexOf(childNodes[index2].nodeName.toLowerCase()) > -1) {\n                        this.unWrap(docElement, [childNodes[index2]], nodeCutter, nodeSelection);\n                    }\n                    else if (this.BLOCK_TAGS.indexOf(childNodes[index2].nodeName.toLocaleLowerCase()) > -1 &&\n                        childNodes[index2].nodeName.toLocaleLowerCase() !== 'p') {\n                        var blockNodes = this.removeParent([childNodes[index2]]);\n                        this.unWrap(docElement, blockNodes, nodeCutter, nodeSelection);\n                    }\n                }\n            }\n            else {\n                InsertMethods.Wrap(parentNodes[index1], docElement.createElement('p'));\n                InsertMethods.unwrap(parentNodes[index1]);\n            }\n        }\n    };\n    ClearFormat.clearInlines = function (textNodes, nodes, range, nodeCutter, endNode) {\n        for (var index = 0; index < textNodes.length; index++) {\n            if (textNodes[index].parentNode &&\n                IsFormatted.inlineTags.indexOf(textNodes[index].parentNode.nodeName.toLocaleLowerCase()) > -1) {\n                nodeCutter.GetSpliceNode(range, textNodes[index].parentNode);\n                this.removeInlineParent(textNodes[index].parentNode);\n            }\n        }\n    };\n    ClearFormat.removeInlineParent = function (textNodes) {\n        var nodes = InsertMethods.unwrap(textNodes);\n        for (var index = 0; index < nodes.length; index++) {\n            if (nodes[index].parentNode.childNodes.length === 1\n                && IsFormatted.inlineTags.indexOf(nodes[index].parentNode.nodeName.toLocaleLowerCase()) > -1) {\n                this.removeInlineParent(nodes[index].parentNode);\n            }\n            else if (IsFormatted.inlineTags.indexOf(nodes[index].nodeName.toLocaleLowerCase()) > -1) {\n                this.removeInlineParent(nodes[index]);\n            }\n        }\n    };\n    ClearFormat.BLOCK_TAGS = ['address', 'article', 'aside', 'blockquote',\n        'details', 'dd', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer',\n        'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'li', 'main', 'nav',\n        'noscript', 'ol', 'p', 'pre', 'section', 'table', 'tbody', 'td', 'tfoot', 'th',\n        'thead', 'tr', 'ul'];\n    ClearFormat.NONVALID_PARENT_TAGS = ['thead', 'tbody', 'ul', 'ol', 'table', 'tfoot', 'tr'];\n    ClearFormat.NONVALID_TAGS = ['thead', 'tbody', 'figcaption', 'td', 'tr',\n        'th', 'tfoot', 'figcaption', 'li'];\n    return ClearFormat;\n}());\nexport { ClearFormat };\n","import * as CONSTANT from './../base/constant';\nimport { ClearFormat } from './clearformat';\nimport * as EVENTS from './../../common/constant';\n/**\n * Clear Format EXEC internal component\n * @hidden\n */\nvar ClearFormatExec = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function ClearFormatExec(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    ClearFormatExec.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.CLEAR_TYPE, this.applyClear, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    ClearFormatExec.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'clear-format':\n                this.applyClear({ subCommand: 'ClearFormat', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    ClearFormatExec.prototype.applyClear = function (e) {\n        if (e.subCommand === 'ClearFormat') {\n            ClearFormat.clear(this.parent.currentDocument, this.parent.editableElement, e.selector);\n            if (e.callBack) {\n                e.callBack({\n                    requestType: e.subCommand,\n                    event: e.event,\n                    editorMode: 'HTML',\n                    range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n                });\n            }\n        }\n    };\n    return ClearFormatExec;\n}());\nexport { ClearFormatExec };\n","import { debounce, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoManager = /** @class */ (function () {\n    function UndoRedoManager(parent, options) {\n        this.undoRedoStack = [];\n        this.parent = parent;\n        this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n        this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n        this.addEventListener();\n    }\n    UndoRedoManager.prototype.addEventListener = function () {\n        var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n        this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n        this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n    };\n    UndoRedoManager.prototype.onPropertyChanged = function (props) {\n        for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'undoRedoSteps':\n                    this.undoRedoSteps = props.newProp.undoRedoSteps;\n                    break;\n                case 'undoRedoTimer':\n                    this.undoRedoTimer = props.newProp.undoRedoTimer;\n                    break;\n            }\n        }\n    };\n    UndoRedoManager.prototype.removeEventListener = function () {\n        this.parent.observer.off(EVENTS.KEY_UP_HANDLER, this.keyUp);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n        this.parent.observer.off(EVENTS.ACTION, this.onAction);\n    };\n    UndoRedoManager.prototype.onAction = function (e) {\n        if (e.subCommand === 'Undo') {\n            this.undo(e);\n        }\n        else {\n            this.redo(e);\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    UndoRedoManager.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    UndoRedoManager.prototype.keyDown = function (e) {\n        var event = e.event;\n        var proxy = this;\n        switch (event.action) {\n            case 'undo':\n                event.preventDefault();\n                proxy.undo(e);\n                break;\n            case 'redo':\n                event.preventDefault();\n                proxy.redo(e);\n                break;\n        }\n    };\n    UndoRedoManager.prototype.keyUp = function (e) {\n        if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n            this.saveData(e);\n        }\n    };\n    /**\n     * RTE collection stored html format.\n     * @method saveData\n     * @return {void}\n     */\n    UndoRedoManager.prototype.saveData = function (e) {\n        var range = new NodeSelection().getRange(this.parent.currentDocument);\n        var save = new NodeSelection().save(range, this.parent.currentDocument);\n        var htmlText = this.parent.editableElement.innerHTML;\n        var changEle = { text: htmlText, range: save };\n        if (this.undoRedoStack.length >= this.steps) {\n            this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n        }\n        if (this.undoRedoStack.length > 1 && (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.collapsed === range.collapsed)\n            && (this.undoRedoStack[this.undoRedoStack.length - 1].range.startOffset === save.range.startOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.endOffset === save.range.endOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.startContainer === save.range.startContainer) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].text.trim() === changEle.text.trim())) {\n            return;\n        }\n        this.undoRedoStack.push(changEle);\n        this.steps = this.undoRedoStack.length - 1;\n        if (this.steps > this.undoRedoSteps) {\n            this.undoRedoStack.shift();\n            this.steps--;\n        }\n        if (e && e.callBack) {\n            e.callBack();\n        }\n    };\n    /**\n     * Undo the editable text.\n     * @method undo\n     * @return {void}\n     */\n    UndoRedoManager.prototype.undo = function (e) {\n        if (this.steps > 0) {\n            var range = this.undoRedoStack[this.steps - 1].range;\n            var removedContent = this.undoRedoStack[this.steps - 1].text;\n            this.parent.editableElement.innerHTML = removedContent;\n            this.parent.editableElement.focus();\n            if (isIDevice()) {\n                setEditFrameFocus(this.parent.editableElement, e.selector);\n            }\n            range.restore();\n            this.steps--;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Undo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    /**\n     * Redo the editable text.\n     * @method redo\n     * @return {void}\n     */\n    UndoRedoManager.prototype.redo = function (e) {\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            var range = this.undoRedoStack[this.steps + 1].range;\n            this.parent.editableElement.innerHTML = this.undoRedoStack[this.steps + 1].text;\n            this.parent.editableElement.focus();\n            if (isIDevice()) {\n                setEditFrameFocus(this.parent.editableElement, e.selector);\n            }\n            range.restore();\n            this.steps++;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Redo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    UndoRedoManager.prototype.getUndoStatus = function () {\n        var status = { undo: false, redo: false };\n        if (this.steps > 0) {\n            status.undo = true;\n        }\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            status.redo = true;\n        }\n        return status;\n    };\n    return UndoRedoManager;\n}());\nexport { UndoRedoManager };\n","import * as EVENTS from '../../common/constant';\nimport { createElement } from '@syncfusion/ej2-base';\n/**\n * PasteCleanup for MsWord content\n * @hidden\n */\nvar MsWordPaste = /** @class */ (function () {\n    function MsWordPaste(parent) {\n        this.olData = [\n            'decimal',\n            'lower-alpha',\n            'lower-roman',\n            'upper-alpha',\n            'upper-roman',\n            'lower-greek'\n        ];\n        this.ulData = [\n            'disc',\n            'square',\n            'circle',\n            'disc',\n            'square',\n            'circle'\n        ];\n        this.ignorableNodes = ['A', 'APPLET', 'B', 'BLOCKQUOTE', 'BR',\n            'BUTTON', 'CENTER', 'CODE', 'COL', 'COLGROUP', 'DD', 'DEL', 'DFN', 'DIR', 'DIV',\n            'DL', 'DT', 'EM', 'FIELDSET', 'FONT', 'FORM', 'FRAME', 'FRAMESET', 'H1', 'H2',\n            'H3', 'H4', 'H5', 'H6', 'HR', 'I', 'IMG', 'IFRAME', 'INPUT', 'INS', 'LABEL',\n            'LI', 'OL', 'OPTION', 'P', 'PARAM', 'PRE', 'Q', 'S', 'SELECT', 'SPAN', 'STRIKE',\n            'STRONG', 'SUB', 'SUP', 'TABLE', 'TBODY', 'TD', 'TEXTAREA', 'TFOOT', 'TH',\n            'THEAD', 'TITLE', 'TR', 'TT', 'U', 'UL'];\n        this.blockNode = ['div', 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n            'address', 'blockquote', 'button', 'center', 'dd', 'dir', 'dl', 'dt', 'fieldset',\n            'frameset', 'hr', 'iframe', 'isindex', 'li', 'map', 'menu', 'noframes', 'noscript',\n            'object', 'ol', 'pre', 'table', 'tbody', 'td', 'tfoot', 'th', 'thead', 'tr', 'ul',\n            'header', 'article', 'nav', 'footer', 'section', 'aside', 'main', 'figure', 'figcaption'];\n        this.listContents = [];\n        this.parent = parent;\n        this.addEventListener();\n    }\n    MsWordPaste.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.MS_WORD_CLEANUP_PLUGIN, this.wordCleanup, this);\n    };\n    MsWordPaste.prototype.wordCleanup = function (e) {\n        var listNodes = [];\n        var tempHTMLContent = e.args.clipboardData.getData('text/HTML');\n        var elm = createElement('p');\n        elm.innerHTML = tempHTMLContent;\n        var patern = /class='?Mso|style='[^ ]*\\bmso-/i;\n        if (patern.test(tempHTMLContent)) {\n            tempHTMLContent = tempHTMLContent.replace(/<img[^>]+>/i, '');\n            listNodes = this.cleanUp(elm, listNodes);\n            this.listConverter(listNodes);\n            e.callBack(elm.innerHTML);\n        }\n        else {\n            e.callBack(elm.innerHTML);\n        }\n    };\n    MsWordPaste.prototype.cleanUp = function (node, listNodes) {\n        var temp = '';\n        var tempCleaner = [];\n        var prevflagState;\n        for (var index = 0; index < node.childNodes.length; index++) {\n            if (this.ignorableNodes.indexOf(node.childNodes[index].nodeName) === -1 ||\n                (node.childNodes[index].nodeType === 3 && node.childNodes[index].textContent.trim() === '')) {\n                tempCleaner.push(node.childNodes[index]);\n                continue;\n            }\n            else if (node.childNodes[index].className &&\n                node.childNodes[index].className.toLowerCase().indexOf('msolistparagraph') !== -1) {\n                listNodes.push(node.childNodes[index]);\n            }\n            if (prevflagState && (this.blockNode.indexOf(node.childNodes[index].nodeName.toLowerCase()) !== -1) &&\n                !(node.childNodes[index].className &&\n                    node.childNodes[index].className.toLowerCase().indexOf('msolistparagraph') !== -1)) {\n                listNodes.push(null);\n            }\n            if (this.blockNode.indexOf(node.childNodes[index].nodeName.toLowerCase()) !== -1) {\n                if (node.childNodes[index].className &&\n                    node.childNodes[index].className.toLowerCase().indexOf('msolistparagraph') !== -1) {\n                    prevflagState = true;\n                }\n                else {\n                    prevflagState = false;\n                }\n            }\n        }\n        if (listNodes.length && (listNodes[listNodes.length - 1] !== null)) {\n            listNodes.push(null);\n        }\n        return listNodes;\n    };\n    MsWordPaste.prototype.listConverter = function (listNodes) {\n        var level;\n        var data = [];\n        var collection = [];\n        var content = '';\n        var stNode;\n        for (var i = 0; i < listNodes.length; i++) {\n            if (listNodes[i] === null) {\n                data.push({ content: this.makeConversion(collection), node: listNodes[i - 1] });\n                collection = [];\n                continue;\n            }\n            content = listNodes[i].getAttribute('style');\n            if (content && content.indexOf('level') !== -1) {\n                level = parseInt(content.charAt(content.indexOf('level') + 5), null);\n            }\n            else {\n                level = 1;\n            }\n            this.listContents = [];\n            this.getListContent(listNodes[i]);\n            var type = void 0;\n            type = this.listContents[0].trim().length > 1 ? 'ol' : 'ul';\n            var tempNode = [];\n            for (var j = 1; j < this.listContents.length; j++) {\n                tempNode.push(this.listContents[j]);\n            }\n            collection.push({ listType: type, content: tempNode, nestedLevel: level });\n        }\n        stNode = listNodes.shift();\n        while (stNode) {\n            var elemColl = [];\n            for (var temp1 = 0; temp1 < data.length; temp1++) {\n                if (data[temp1].node === stNode) {\n                    for (var index = 0; index < data[temp1].content.childNodes.length; index++) {\n                        elemColl.push(data[temp1].content.childNodes[index]);\n                    }\n                    for (var index = 0; index < elemColl.length; index++) {\n                        stNode.parentElement.insertBefore(elemColl[index], stNode);\n                    }\n                    break;\n                }\n            }\n            stNode.remove();\n            stNode = listNodes.shift();\n            if (!stNode) {\n                stNode = listNodes.shift();\n            }\n        }\n    };\n    MsWordPaste.prototype.makeConversion = function (collection) {\n        var root = createElement('div');\n        var temp;\n        var pLevel = 1;\n        var prevList;\n        var listCount = 0;\n        var elem;\n        for (var index = 0; index < collection.length; index++) {\n            var pElement = createElement('p');\n            for (var i = 0; i < collection[index].content.length; i++) {\n                var imgPattern = /<img\\s[^>]*?src\\s*=\\s*['\\\"]([^'\\\"]*?)['\\\"][^>]*?>/i;\n                if (imgPattern.test(collection[index].content[i])) {\n                    var imgSpanElement = createElement('span');\n                    imgSpanElement.innerHTML = collection[index].content[i];\n                    pElement.appendChild(imgSpanElement);\n                }\n                else {\n                    pElement.appendChild(document.createTextNode(collection[index].content[i].trim()));\n                }\n            }\n            if ((collection[index].nestedLevel === 1) && listCount === 0 && collection[index].content) {\n                root.appendChild(temp = createElement(collection[index].listType));\n                prevList = createElement('li');\n                prevList.appendChild(pElement);\n                temp.appendChild(prevList);\n                temp.setAttribute('level', collection[index].nestedLevel.toString());\n                temp.style.listStyle = this.getListStyle(collection[index].listType, collection[index].nestedLevel);\n            }\n            else if (collection[index].nestedLevel === pLevel) {\n                if (prevList.parentElement.tagName.toLowerCase() === collection[index].listType) {\n                    prevList.parentElement.appendChild(prevList = createElement('li'));\n                    prevList.appendChild(pElement);\n                }\n                else {\n                    temp = createElement(collection[index].listType);\n                    prevList.parentElement.parentElement.appendChild(temp);\n                    prevList = createElement('li');\n                    prevList.appendChild(pElement);\n                    temp.appendChild(prevList);\n                    temp.setAttribute('level', collection[index].nestedLevel.toString());\n                }\n            }\n            else if (collection[index].nestedLevel > pLevel) {\n                for (var j = 0; j < collection[index].nestedLevel - pLevel; j++) {\n                    prevList.appendChild(temp = createElement(collection[index].listType));\n                    prevList = createElement('li', { styles: 'list-style-type: none;' });\n                    temp.appendChild(prevList);\n                }\n                prevList.appendChild(pElement);\n                temp.setAttribute('level', collection[index].nestedLevel.toString());\n                temp.style.listStyle = this.getListStyle(collection[index].listType, collection[index].nestedLevel);\n                temp.childNodes[0].style.listStyle =\n                    this.getListStyle(collection[index].listType, collection[index].nestedLevel);\n            }\n            else if (collection[index].nestedLevel === 1) {\n                if (root.lastChild.tagName.toLowerCase() === collection[index].listType) {\n                    temp = root.lastChild;\n                }\n                else {\n                    root.appendChild(temp = createElement(collection[index].listType));\n                }\n                prevList = createElement('li');\n                prevList.appendChild(pElement);\n                temp.appendChild(prevList);\n                temp.setAttribute('level', collection[index].nestedLevel.toString());\n                temp.style.listStyle = this.getListStyle(collection[index].listType, collection[index].nestedLevel);\n            }\n            else {\n                elem = prevList;\n                while (elem.parentElement) {\n                    elem = elem.parentElement;\n                    if (elem.attributes.getNamedItem('level')) {\n                        if (parseInt(elem.attributes.getNamedItem('level').textContent, null) === collection[index].nestedLevel) {\n                            prevList = createElement('li');\n                            prevList.appendChild(pElement);\n                            elem.appendChild(prevList);\n                            break;\n                        }\n                        else if (collection[index].nestedLevel > parseInt(elem.attributes.getNamedItem('level').textContent, null)) {\n                            elem.appendChild(temp = createElement(collection[index].listType));\n                            prevList = createElement('li');\n                            prevList.appendChild(pElement);\n                            temp.appendChild(prevList);\n                            temp.setAttribute('level', collection[index].nestedLevel.toString());\n                            temp.style.listStyle = this.getListStyle(collection[index].listType, collection[index].nestedLevel);\n                            break;\n                        }\n                    }\n                    continue;\n                }\n            }\n            pLevel = collection[index].nestedLevel;\n            listCount++;\n        }\n        return root;\n    };\n    MsWordPaste.prototype.getListStyle = function (listType, nestedLevel) {\n        nestedLevel = (nestedLevel > 0) ? nestedLevel - 1 : nestedLevel;\n        if (listType === 'ol') {\n            return (nestedLevel < this.olData.length ? this.olData[nestedLevel] : this.olData[0]);\n        }\n        else {\n            return (nestedLevel < this.ulData.length ? this.ulData[nestedLevel] : this.ulData[0]);\n        }\n    };\n    MsWordPaste.prototype.getListContent = function (elem) {\n        if (elem.nodeType === 3 && elem.textContent.trim().length > 0) {\n            this.listContents.push(elem.textContent.trim());\n        }\n        else if (elem.tagName === 'IMG') {\n            var tempElem = createElement('div');\n            tempElem.appendChild(elem);\n            this.listContents.push(tempElem.innerHTML);\n        }\n        if (elem.firstChild) {\n            elem = elem.firstChild;\n            do {\n                this.getListContent(elem);\n                elem = elem.nextSibling;\n            } while (elem);\n        }\n    };\n    return MsWordPaste;\n}());\nexport { MsWordPaste };\n","import * as CONSTANT from '../base/constant';\nimport { InsertHtml } from './inserthtml';\n/**\n * Insert a Text Node or Text\n * @hidden\n */\nvar InsertTextExec = /** @class */ (function () {\n    /**\n     * Constructor for creating the InsertText plugin\n     * @hidden\n     */\n    function InsertTextExec(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    InsertTextExec.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.INSERT_TEXT_TYPE, this.insertText, this);\n    };\n    InsertTextExec.prototype.insertText = function (e) {\n        var node = document.createTextNode(e.value);\n        InsertHtml.Insert(this.parent.currentDocument, node);\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return InsertTextExec;\n}());\nexport { InsertTextExec };\n","import { Observer } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './constant';\nimport { Lists } from './../plugin/lists';\nimport { NodeSelection } from './../../selection/index';\nimport { DOMNode } from './../plugin/dom-node';\nimport { Formats } from './../plugin/formats';\nimport { LinkCommand } from './../plugin/link';\nimport { Alignments } from './../plugin/alignments';\nimport { Indents } from './../plugin/indents';\nimport { ImageCommand } from './../plugin/image';\nimport { TableCommand } from './../plugin/table';\nimport { SelectionBasedExec } from './../plugin/selection-exec';\nimport { InsertHtmlExec } from './../plugin/inserthtml-exec';\nimport { ClearFormatExec } from './../plugin/clearformat-exec';\nimport { UndoRedoManager } from './../plugin/undo';\nimport { MsWordPaste } from '../plugin/ms-word-clean-up';\nimport * as EVENTS from './../../common/constant';\nimport { InsertTextExec } from '../plugin/insert-text';\n/**\n * EditorManager internal component\n * @hidden\n */\nvar EditorManager = /** @class */ (function () {\n    /**\n     * Constructor for creating the component\n     * @hidden\n     */\n    function EditorManager(options) {\n        this.currentDocument = options.document;\n        this.editableElement = options.editableElement;\n        this.nodeSelection = new NodeSelection();\n        this.domNode = new DOMNode(this.editableElement, this.currentDocument);\n        this.observer = new Observer(this);\n        this.listObj = new Lists(this);\n        this.formatObj = new Formats(this);\n        this.alignmentObj = new Alignments(this);\n        this.indentsObj = new Indents(this);\n        this.linkObj = new LinkCommand(this);\n        this.imgObj = new ImageCommand(this);\n        this.selectionObj = new SelectionBasedExec(this);\n        this.inserthtmlObj = new InsertHtmlExec(this);\n        this.insertTextObj = new InsertTextExec(this);\n        this.clearObj = new ClearFormatExec(this);\n        this.tableObj = new TableCommand(this);\n        this.undoRedoManager = new UndoRedoManager(this, options.options);\n        this.msWordPaste = new MsWordPaste(this);\n        this.wireEvents();\n    }\n    EditorManager.prototype.wireEvents = function () {\n        this.observer.on(EVENTS.KEY_DOWN, this.editorKeyDown, this);\n        this.observer.on(EVENTS.KEY_UP, this.editorKeyUp, this);\n        this.observer.on(EVENTS.KEY_UP, this.editorKeyUp, this);\n        this.observer.on(EVENTS.MODEL_CHANGED, this.onPropertyChanged, this);\n        this.observer.on(EVENTS.MS_WORD_CLEANUP, this.onWordPaste, this);\n    };\n    EditorManager.prototype.onWordPaste = function (e) {\n        this.observer.notify(EVENTS.MS_WORD_CLEANUP_PLUGIN, e);\n    };\n    EditorManager.prototype.onPropertyChanged = function (props) {\n        this.observer.notify(EVENTS.MODEL_CHANGED_PLUGIN, props);\n    };\n    EditorManager.prototype.editorKeyDown = function (e) {\n        this.observer.notify(EVENTS.KEY_DOWN_HANDLER, e);\n    };\n    EditorManager.prototype.editorKeyUp = function (e) {\n        this.observer.notify(EVENTS.KEY_UP_HANDLER, e);\n    };\n    EditorManager.prototype.execCommand = function (command, value, event, callBack, text, exeValue, selector) {\n        switch (command.toLocaleLowerCase()) {\n            case 'lists':\n                this.observer.notify(EVENTS.LIST_TYPE, { subCommand: value, event: event, callBack: callBack, selector: selector });\n                break;\n            case 'formats':\n                this.observer.notify(EVENTS.FORMAT_TYPE, { subCommand: value, event: event, callBack: callBack, selector: selector });\n                break;\n            case 'alignments':\n                this.observer.notify(CONSTANT.ALIGNMENT_TYPE, { subCommand: value, event: event, callBack: callBack, selector: selector });\n                break;\n            case 'indents':\n                this.observer.notify(CONSTANT.INDENT_TYPE, { subCommand: value, event: event, callBack: callBack, selector: selector });\n                break;\n            case 'links':\n                this.observer.notify(CONSTANT.LINK, { command: command, value: value, item: exeValue, event: event, callBack: callBack });\n                break;\n            case 'images':\n                this.observer.notify(CONSTANT.IMAGE, { command: command, value: value, item: exeValue, event: event, callBack: callBack });\n                break;\n            case 'table':\n                switch (value.toString().toLocaleLowerCase()) {\n                    case 'createtable':\n                        this.observer.notify(CONSTANT.TABLE, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'insertrowbefore':\n                    case 'insertrowafter':\n                        this.observer.notify(CONSTANT.INSERT_ROW, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'insertcolumnleft':\n                    case 'insertcolumnright':\n                        this.observer.notify(CONSTANT.INSERT_COLUMN, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'deleterow':\n                        this.observer.notify(CONSTANT.DELETEROW, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'deletecolumn':\n                        this.observer.notify(CONSTANT.DELETECOLUMN, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'tableremove':\n                        this.observer.notify(CONSTANT.REMOVETABLE, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'tableheader':\n                        this.observer.notify(CONSTANT.TABLEHEADER, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'aligntop':\n                    case 'alignmiddle':\n                    case 'alignbottom':\n                        this.observer.notify(CONSTANT.TABLE_VERTICAL_ALIGN, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                }\n                break;\n            case 'font':\n            case 'style':\n            case 'effects':\n            case 'casing':\n                this.observer.notify(CONSTANT.SELECTION_TYPE, { subCommand: value, event: event, callBack: callBack, value: text, selector: selector });\n                break;\n            case 'inserthtml':\n                this.observer.notify(CONSTANT.INSERTHTML_TYPE, { subCommand: value, callBack: callBack, value: text });\n                break;\n            case 'inserttext':\n                this.observer.notify(CONSTANT.INSERT_TEXT_TYPE, { subCommand: value, callBack: callBack, value: text });\n                break;\n            case 'clear':\n                this.observer.notify(CONSTANT.CLEAR_TYPE, { subCommand: value, event: event, callBack: callBack, selector: selector });\n                break;\n            case 'actions':\n                this.observer.notify(EVENTS.ACTION, { subCommand: value, event: event, callBack: callBack, selector: selector });\n                break;\n        }\n    };\n    return EditorManager;\n}());\nexport { EditorManager };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Formatter } from './formatter';\nimport { EditorManager } from './../../editor-manager/base/editor-manager';\nimport { extend } from '@syncfusion/ej2-base';\nimport { htmlKeyConfig } from './../../common/config';\n/**\n * HTML adapter\n * @hidden\n */\nvar HTMLFormatter = /** @class */ (function (_super) {\n    __extends(HTMLFormatter, _super);\n    function HTMLFormatter(options) {\n        var _this = _super.call(this) || this;\n        _this.initialize();\n        extend(_this, _this, options, true);\n        if (_this.currentDocument && _this.element) {\n            _this.updateFormatter(_this.element, _this.currentDocument, options.options);\n        }\n        return _this;\n    }\n    HTMLFormatter.prototype.initialize = function () {\n        this.keyConfig = htmlKeyConfig;\n    };\n    /**\n     * Update the formatter of RichTextEditor\n     * @param  {Element} editElement\n     * @param  {Document} doc\n     */\n    HTMLFormatter.prototype.updateFormatter = function (editElement, doc, options) {\n        if (editElement && doc) {\n            this.editorManager = new EditorManager({\n                document: doc,\n                editableElement: editElement,\n                options: options\n            });\n        }\n    };\n    return HTMLFormatter;\n}(Formatter));\nexport { HTMLFormatter };\n","import { IsFormatted } from './isformatted';\nimport * as CONSTANT from './../base/constant';\nimport { NodeSelection } from './../../selection/index';\n/**\n * Update Toolbar Status\n * @hidden\n */\nexport var statusCollection = {\n    bold: false,\n    italic: false,\n    subscript: false,\n    superscript: false,\n    strikethrough: false,\n    orderedlist: false,\n    unorderedlist: false,\n    underline: false,\n    alignments: null,\n    backgroundcolor: null,\n    fontcolor: null,\n    fontname: null,\n    fontsize: null,\n    formats: null,\n    createlink: false\n};\nvar ToolbarStatus = /** @class */ (function () {\n    function ToolbarStatus() {\n    }\n    ToolbarStatus.get = function (docElement, targetNode, formatNode, fontSize, fontName, documentNode) {\n        var formatCollection = JSON.parse(JSON.stringify(statusCollection));\n        var nodeCollection = JSON.parse(JSON.stringify(statusCollection));\n        var nodeSelection = new NodeSelection();\n        var nodes = documentNode ? [documentNode] : nodeSelection.getNodeCollection(nodeSelection.getRange(docElement));\n        for (var index = 0; index < nodes.length; index++) {\n            if (nodes[index].nodeType !== 3) {\n                nodes.splice(index, 1);\n                index--;\n            }\n        }\n        for (var index = 0; index < nodes.length; index++) {\n            formatCollection = this.getFormatParent(docElement, formatCollection, nodes[index], targetNode, formatNode, fontSize, fontName);\n            if ((index === 0 && formatCollection.bold) || !formatCollection.bold) {\n                nodeCollection.bold = formatCollection.bold;\n            }\n            if ((index === 0 && formatCollection.italic) || !formatCollection.italic) {\n                nodeCollection.italic = formatCollection.italic;\n            }\n            if ((index === 0 && formatCollection.underline) || !formatCollection.underline) {\n                nodeCollection.underline = formatCollection.underline;\n            }\n            if ((index === 0 && formatCollection.strikethrough) || !formatCollection.strikethrough) {\n                nodeCollection.strikethrough = formatCollection.strikethrough;\n            }\n            if ((index === 0 && formatCollection.superscript) || !formatCollection.superscript) {\n                nodeCollection.superscript = formatCollection.superscript;\n            }\n            if ((index === 0 && formatCollection.subscript) || !formatCollection.subscript) {\n                nodeCollection.subscript = formatCollection.subscript;\n            }\n            if ((index === 0 && formatCollection.fontcolor) || !formatCollection.fontcolor) {\n                nodeCollection.fontcolor = formatCollection.fontcolor;\n            }\n            if ((index === 0 && formatCollection.fontname) || !formatCollection.fontname) {\n                nodeCollection.fontname = formatCollection.fontname;\n            }\n            if ((index === 0 && formatCollection.fontsize) || !formatCollection.fontsize) {\n                nodeCollection.fontsize = formatCollection.fontsize;\n            }\n            if ((index === 0 && formatCollection.backgroundcolor) || !formatCollection.backgroundcolor) {\n                nodeCollection.backgroundcolor = formatCollection.backgroundcolor;\n            }\n            if ((index === 0 && formatCollection.orderedlist) || !formatCollection.orderedlist) {\n                nodeCollection.orderedlist = formatCollection.orderedlist;\n            }\n            if ((index === 0 && formatCollection.unorderedlist) || !formatCollection.unorderedlist) {\n                nodeCollection.unorderedlist = formatCollection.unorderedlist;\n            }\n            if ((index === 0 && formatCollection.alignments) || !formatCollection.alignments) {\n                nodeCollection.alignments = formatCollection.alignments;\n            }\n            if ((index === 0 && formatCollection.formats) || !formatCollection.formats) {\n                nodeCollection.formats = formatCollection.formats;\n            }\n            if ((index === 0 && formatCollection.createlink) || !formatCollection.createlink) {\n                nodeCollection.createlink = formatCollection.createlink;\n            }\n            formatCollection = JSON.parse(JSON.stringify(statusCollection));\n        }\n        return nodeCollection;\n    };\n    ToolbarStatus.getFormatParent = function (docElement, formatCollection, node, targetNode, formatNode, fontSize, fontName) {\n        if (targetNode.contains(node) ||\n            (node.nodeType === 3 && targetNode.nodeType !== 3 && targetNode.contains(node.parentNode))) {\n            do {\n                formatCollection = this.isFormattedNode(docElement, formatCollection, node, formatNode, fontSize, fontName);\n                node = node.parentNode;\n            } while (node && (node !== targetNode));\n        }\n        return formatCollection;\n    };\n    ToolbarStatus.isFormattedNode = function (docElement, formatCollection, node, formatNode, fontSize, fontName) {\n        if (!formatCollection.bold) {\n            formatCollection.bold = IsFormatted.isBold(node);\n        }\n        if (!formatCollection.italic) {\n            formatCollection.italic = IsFormatted.isItalic(node);\n        }\n        if (!formatCollection.underline) {\n            formatCollection.underline = IsFormatted.isUnderline(node);\n        }\n        if (!formatCollection.strikethrough) {\n            formatCollection.strikethrough = IsFormatted.isStrikethrough(node);\n        }\n        if (!formatCollection.superscript) {\n            formatCollection.superscript = IsFormatted.isSuperscript(node);\n        }\n        if (!formatCollection.subscript) {\n            formatCollection.subscript = IsFormatted.isSubscript(node);\n        }\n        if (!formatCollection.fontcolor) {\n            formatCollection.fontcolor = this.isFontColor(docElement, node);\n        }\n        if (!formatCollection.fontname) {\n            formatCollection.fontname = this.isFontName(docElement, node, fontName);\n        }\n        if (!formatCollection.fontsize) {\n            formatCollection.fontsize = this.isFontSize(node, fontSize);\n        }\n        if (!formatCollection.backgroundcolor) {\n            formatCollection.backgroundcolor = this.isBackgroundColor(node);\n        }\n        if (!formatCollection.orderedlist) {\n            formatCollection.orderedlist = this.isOrderedList(node);\n        }\n        if (!formatCollection.unorderedlist) {\n            formatCollection.unorderedlist = this.isUnorderedList(node);\n        }\n        if (!formatCollection.alignments) {\n            formatCollection.alignments = this.isAlignment(node);\n        }\n        if (!formatCollection.formats) {\n            formatCollection.formats = this.isFormats(node, formatNode);\n        }\n        if (!formatCollection.createlink) {\n            formatCollection.createlink = this.isLink(node);\n        }\n        return formatCollection;\n    };\n    ToolbarStatus.isFontColor = function (docElement, node) {\n        var color = node.style && node.style.color;\n        if ((color === null || color === undefined || color === '') && node.nodeType !== 3) {\n            color = this.getComputedStyle(docElement, node, 'color');\n        }\n        if (color !== null && color !== '' && color !== undefined) {\n            return color;\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isLink = function (node) {\n        if (node.nodeName.toLocaleLowerCase() === 'a') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    ToolbarStatus.isBackgroundColor = function (node) {\n        var backColor = node.style && node.style.backgroundColor;\n        if (backColor !== null && backColor !== '' && backColor !== undefined) {\n            return backColor;\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isFontSize = function (node, fontSize) {\n        var size = node.style && node.style.fontSize;\n        if ((size !== null && size !== '' && size !== undefined)\n            && (fontSize === null || fontSize === undefined || (fontSize.indexOf(size) > -1))) {\n            return size;\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isFontName = function (docElement, node, fontName) {\n        var name = node.style && node.style.fontFamily;\n        if ((name === null || name === undefined || name === '') && node.nodeType !== 3) {\n            name = this.getComputedStyle(docElement, node, 'font-family');\n        }\n        var index = null;\n        if ((name !== null && name !== '' && name !== undefined)\n            && (fontName === null || fontName === undefined || (fontName.filter(function (value, pos) {\n                var pattern = new RegExp(name, 'i');\n                if ((value.replace(/\"/g, '').replace(/ /g, '') === name.replace(/\"/g, '').replace(/ /g, '')) ||\n                    (value.search(pattern) > -1)) {\n                    index = pos;\n                }\n            }) && (index !== null)))) {\n            return (index !== null) ? fontName[index] : name.replace(/\"/g, '');\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isOrderedList = function (node) {\n        if (node.nodeName.toLocaleLowerCase() === 'ol') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    ToolbarStatus.isUnorderedList = function (node) {\n        if (node.nodeName.toLocaleLowerCase() === 'ul') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    ToolbarStatus.isAlignment = function (node) {\n        var align = node.style && node.style.textAlign;\n        if (align === 'left') {\n            return 'justifyleft';\n        }\n        else if (align === 'center') {\n            return 'justifycenter';\n        }\n        else if (align === 'right') {\n            return 'justifyright';\n        }\n        else if (align === 'justify') {\n            return 'justifyfull';\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isFormats = function (node, formatNode) {\n        if (((formatNode === undefined || formatNode === null)\n            && CONSTANT.BLOCK_TAGS.indexOf(node.nodeName.toLocaleLowerCase()) > -1)\n            || (formatNode !== null && formatNode !== undefined\n                && formatNode.indexOf(node.nodeName.toLocaleLowerCase()) > -1)) {\n            return node.nodeName.toLocaleLowerCase();\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.getComputedStyle = function (docElement, node, prop) {\n        return docElement.defaultView.getComputedStyle(node, null).getPropertyValue(prop);\n    };\n    return ToolbarStatus;\n}());\nexport { ToolbarStatus };\n","import * as events from '../base/constant';\nimport { ToolbarStatus } from '../../editor-manager/plugin/toolbar-status';\n/**\n * HtmlToolbarStatus module for refresh the toolbar status\n */\nvar HtmlToolbarStatus = /** @class */ (function () {\n    function HtmlToolbarStatus(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    HtmlToolbarStatus.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarRefresh, this.onRefreshHandler, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    HtmlToolbarStatus.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarRefresh, this.onRefreshHandler);\n    };\n    HtmlToolbarStatus.prototype.onRefreshHandler = function (args) {\n        var fontsize = [];\n        var fontName = [];\n        var formats = [];\n        this.parent.fontSize.items.forEach(function (item) { fontsize.push(item.value); });\n        this.parent.fontFamily.items.forEach(function (item) { fontName.push(item.value); });\n        this.parent.format.types.forEach(function (item) {\n            formats.push(item.value.toLocaleLowerCase());\n        });\n        this.toolbarStatus = ToolbarStatus.get(this.parent.contentModule.getDocument(), this.parent.contentModule.getEditPanel(), formats, fontsize, fontName, args.documentNode);\n        this.parent.notify(events.toolbarUpdated, this.toolbarStatus);\n    };\n    return HtmlToolbarStatus;\n}());\nexport { HtmlToolbarStatus };\n","import { getEditValue } from '../base/util';\n/**\n * Content module is used to render RichTextEditor content\n * @hidden\n */\nvar ContentRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     */\n    function ContentRender(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n    }\n    /**\n     * The function is used to render RichTextEditor content div\n     */\n    ContentRender.prototype.renderPanel = function () {\n        var rteObj = this.parent;\n        var div = this.parent.createElement('div', { className: 'e-rte-content', id: this.parent.getID() + 'rte-view' });\n        var rteContent = getEditValue(rteObj.value, rteObj);\n        this.editableElement = this.parent.createElement('div', {\n            className: 'e-content',\n            id: this.parent.getID() + '_rte-edit-view',\n            attrs: {\n                'contenteditable': 'true'\n            },\n            innerHTML: rteContent\n        });\n        div.appendChild(this.editableElement);\n        this.setPanel(div);\n        rteObj.element.appendChild(div);\n    };\n    /**\n     * Get the content div element of RichTextEditor\n     * @return {Element}\n     */\n    ContentRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Get the editable element of RichTextEditor\n     * @return {Element}\n     */\n    ContentRender.prototype.getEditPanel = function () {\n        return this.editableElement;\n    };\n    /**\n     * Returns the text content as string.\n     * @return {string}\n     */\n    ContentRender.prototype.getText = function () {\n        return this.getEditPanel().textContent;\n    };\n    /**\n     * Set the content div element of RichTextEditor\n     * @param {Element} panel\n     */\n    ContentRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the document of RichTextEditor\n     * @return {Document}\n     */\n    ContentRender.prototype.getDocument = function () {\n        return this.getEditPanel().ownerDocument;\n    };\n    return ContentRender;\n}());\nexport { ContentRender };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ContentRender } from '../renderer/content-renderer';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getEditValue } from '../base/util';\n/* tslint:disable */\nvar IFRAMEHEADER = \"\\n<!DOCTYPE html> \\n    <html>\\n         <head>\\n            <meta charset='utf-8' /> \\n            <style>\\n                @charset \\\"UTF-8\\\";\\n                body {\\n                    font-family: \\\"Roboto\\\", sans-serif;\\n                    font-size: 14px;\\n                }\\n                html, body{height: 100%;margin: 0;}\\n                body.e-cursor{cursor:default}\\n                span.e-selected-node\\t{background-color: #939393;color: white;}\\n                span.e-selected-node.e-highlight {background-color: #1d9dd8;}\\n                body{color:#333;word-wrap:break-word;padding: 8px;box-sizing: border-box;}\\n                .e-rte-image {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-img-caption { display: inline-block; float: none; margin: 5px auto; max-width: 100%;position: relative;}\\n                .e-img-caption.e-caption-inline {display: inline-block;float: none;margin: 5px auto;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));position: relativetext-align: center;vertical-align: bottom;}\\n                .e-img-inner {box-sizing: border-box;display: block;font-size: 16px;font-weight: initial;margin: auto;opacity: .9;text-align: center;width: 100%;}\\n                .e-img-wrap {display: inline-block;margin: auto;padding: 0;text-align: center;width: 100%;}\\n                .e-imgleft {float: left;margin: 0 5px 0 0;text-align: left;}\\n                .e-imgright {float: right;margin: 0 0 0 5px;text-align: right;}\\n                .e-imgcenter {cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-control img:not(.e-resize) {border: 2px solid transparent; z-index: 1000}\\n                .e-imginline {display: inline-block;float: none;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));vertical-align: bottom;}\\n                .e-imgbreak {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-rte-image.e-img-focus:not(.e-resize) {border: solid 2px #4a90e2;}\\n                img::selection { background: transparent;color: transparent;}\\n                span.e-rte-imageboxmark {  width: 10px; height: 10px; position: absolute; display: block; background: #4a90e2; border: 1px solid #fff; z-index: 1000;}\\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\\n                .e-mob-rte span.e-rte-imageboxmark { background: #fff; border: 1px solid #4a90e2; border-radius: 15px; height: 20px; width: 20px; }\\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\\n                .e-rte-content .e-content img.e-resize { z-index: 1000; }\\n                .e-img-caption .e-rte-image.e-imgright, .e-img-caption .e-rte-image.e-imgleft { float: none; margin: 0;}\\n                body{box-sizing: border-box;min-height: 100px;outline: 0 solid transparent;overflow-x: auto;padding: 16px;position: relative;text-align: inherit;z-index: 2;}\\n                p{margin: 0 0 10px;margin-bottom: 10px;}\\n                li{margin-bottom: 10px;}\\n                h1{font-size: 2.17em;font-weight: 400;line-height: 1;margin: 10px 0;}\\n                h2{font-size: 1.74em;font-weight: 400;margin: 10px 0;}\\n                h3{font-size: 1.31em;font-weight: 400;margin: 10px 0;}\\n                h4{font-size: 1em;font-weight: 400;margin: 0;}\\n                h5{font-size: 00.8em;font-weight: 400;margin: 0;}\\n                h6{font-size: 00.65em;font-weight: 400;margin: 0;}\\n                blockquote{margin: 10px 0;margin-left: 0;padding-left: 5px;border-left: solid 2px #5c5c5c;}\\n                pre{background-color: inherit;border: 0;border-radius: 0;color: #333;font-size: inherit;line-height: inherit;margin: 0 0 10px;overflow: visible;padding: 0;white-space: pre-wrap;word-break: inherit;word-wrap: break-word;}\\n                strong, b{font-weight: 700;}\\n                a{text-decoration: none;user-select: auto;}\\n                a:hover{text-decoration: underline;};\\n                p:last-child, pre:last-child, blockquote:last-child{margin-bottom: 0;}\\n                h3+h4, h4+h5, h5+h6{margin-top: 00.6em;}\\n                ul:last-child{margin-bottom: 0;}\\n                table.e-rte-table { border-collapse: collapse; empty-cells: show;}\\n                table.e-rte-table td,table.e-rte-table th {border: 1px solid #BDBDBD; height: 20px; vertical-align: middle;}\\n                table.e-alternate-border tbody tr:nth-child(2n) {background-color: #F5F5F5;}\\n                table.e-rte-table th {background-color: #E0E0E0;}\\n                table.e-dashed-border td,table.e-dashed-border th { border: 1px dashed #BDBDBD} \\n                table.e-rte-table .e-cell-select {border: 1px double #4a90e2;}\\n                span.e-table-box { cursor: nwse-resize; display: block; height: 10px; position: absolute; width: 10px; }\\n                span.e-table-box.e-rmob {height: 14px;width: 14px;}\\n                .e-row-resize, .e-column-resize { background-color: transparent; background-repeat: repeat; bottom: 0;cursor: col-resize;height: 1px;overflow: visible;position: absolute;width: 1px; }\\n                .e-row-resize { cursor: row-resize; height: 1px;}\\n                .e-table-rhelper { cursor: col-resize; opacity: .87;position: absolute;}\\n                .e-table-rhelper.e-column-helper { width: 1px; }\\n                .e-table-rhelper.e-row-helper {height: 1px;}\\n                .e-reicon::before { border-bottom: 6px solid transparent; border-right: 6px solid; border-top: 6px solid transparent; content: ''; display: block; height: 0; position: absolute; right: 4px; top: 4px; width: 20px; }\\n                .e-reicon::after { border-bottom: 6px solid transparent; border-left: 6px solid; border-top: 6px solid transparent; content: ''; display: block; height: 0; left: 4px; position: absolute; top: 4px; width: 20px; z-index: 3; }\\n                .e-row-helper.e-reicon::after { top: 10px; transform: rotate(90deg); }\\n                .e-row-helper.e-reicon::before { left: 4px; top: -20px; transform: rotate(90deg); }\\n                span.e-table-box { background-color: #ffffff; border: 1px solid #BDBDBD; }\\n                span.e-table-box.e-rbox-select { background-color: #BDBDBD; border: 1px solid #BDBDBD; }\\n                .e-table-rhelper { background-color: #4a90e2;}\\n            </style>\\n        </head>\";\n/* tslint:enable */\n/**\n * Content module is used to render RichTextEditor content\n * @hidden\n */\nvar IframeContentRender = /** @class */ (function (_super) {\n    __extends(IframeContentRender, _super);\n    function IframeContentRender() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * The function is used to render RichTextEditor iframe\n     */\n    IframeContentRender.prototype.renderPanel = function () {\n        var rteObj = this.parent;\n        var rteContent = getEditValue(rteObj.value, rteObj);\n        var iFrameBodyContent = '<body spellcheck=\"false\" autocorrect=\"off\" contenteditable=\"true\">' +\n            rteContent + '</body></html>';\n        var iFrameContent = IFRAMEHEADER + iFrameBodyContent;\n        var iframe = this.parent.createElement('iframe', {\n            innerHTML: iFrameContent,\n            id: this.parent.getID() + '_rte-view',\n            className: 'e-rte-content',\n            styles: 'display:block;'\n        });\n        this.setPanel(iframe);\n        rteObj.element.appendChild(iframe);\n        iframe.contentDocument.body.id = this.parent.getID() + '_rte-edit-view';\n        iframe.contentDocument.body.setAttribute('aria-owns', this.parent.getID());\n        iframe.contentDocument.open();\n        iFrameContent = this.setThemeColor(iFrameContent, { color: '#333' });\n        iframe.contentDocument.write(iFrameContent);\n        iframe.contentDocument.close();\n    };\n    IframeContentRender.prototype.setThemeColor = function (content, styles) {\n        var fontColor = getComputedStyle(this.parent.element, '.e-richtexteditor').getPropertyValue('color');\n        return content.replace(styles.color, fontColor);\n    };\n    /**\n     * Get the editable element of RichTextEditor\n     * @return {Element}\n     */\n    IframeContentRender.prototype.getEditPanel = function () {\n        var editNode;\n        if (!isNullOrUndefined(this.contentPanel.contentDocument)) {\n            editNode = this.contentPanel.contentDocument.body;\n        }\n        else {\n            editNode = this.parent.inputElement;\n        }\n        return editNode;\n    };\n    /**\n     * Get the document of RichTextEditor\n     * @param  {Document}\n     */\n    IframeContentRender.prototype.getDocument = function () {\n        return this.getEditPanel().ownerDocument;\n    };\n    return IframeContentRender;\n}(ContentRender));\nexport { IframeContentRender };\n","import * as events from '../base/constant';\nimport { isNullOrUndefined, closest, attributes, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { HTMLFormatter } from '../formatter/html-formatter';\nimport { RenderType } from '../base/enum';\nimport * as classes from '../base/classes';\nimport { HtmlToolbarStatus } from './html-toolbar-status';\nimport { IframeContentRender } from '../renderer/iframe-content-renderer';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { ColorPickerInput } from './color-picker';\nimport { NodeSelection } from '../../selection/selection';\nimport { InsertHtml } from '../../editor-manager/plugin/inserthtml';\nimport { getTextNodesUnder } from '../base/util';\nimport { isIDevice } from '../../common/util';\n/**\n * `HtmlEditor` module is used to HTML editor\n */\nvar HtmlEditor = /** @class */ (function () {\n    function HtmlEditor(parent, serviceLocator) {\n        this.rangeCollection = [];\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * Destroys the Markdown.\n     * @method destroy\n     * @return {void}\n     */\n    HtmlEditor.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    HtmlEditor.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.nodeSelectionObj = new NodeSelection();\n        this.colorPickerModule = new ColorPickerInput(this.parent, this.locator);\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.htmlToolbarClick, this.onToolbarClick, this);\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.renderColorPicker, this.renderColorPicker, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.selectAll, this.selectAll, this);\n        this.parent.on(events.selectRange, this.selectRange, this);\n        this.parent.on(events.getSelectedHtml, this.getSelectedHtml, this);\n        this.parent.on(events.selectionSave, this.onSelectionSave, this);\n        this.parent.on(events.selectionRestore, this.onSelectionRestore, this);\n        this.parent.on(events.readOnlyMode, this.updateReadOnly, this);\n        this.parent.on(events.paste, this.onPaste, this);\n    };\n    HtmlEditor.prototype.updateReadOnly = function () {\n        if (this.parent.readonly) {\n            attributes(this.parent.contentModule.getEditPanel(), { contenteditable: 'false' });\n            addClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n        else {\n            attributes(this.parent.contentModule.getEditPanel(), { contenteditable: 'true' });\n            removeClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n    };\n    HtmlEditor.prototype.onSelectionSave = function () {\n        var currentDocument = this.contentRenderer.getDocument();\n        var range = this.nodeSelectionObj.getRange(currentDocument);\n        this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n    };\n    HtmlEditor.prototype.onSelectionRestore = function (e) {\n        this.parent.isBlur = false;\n        this.contentRenderer.getEditPanel().focus();\n        if (isNullOrUndefined(e.items) || e.items) {\n            this.saveSelection.restore();\n        }\n    };\n    HtmlEditor.prototype.onKeyDown = function (e) {\n        if (e.args.keyCode === 9 && this.parent.enableTabKey) {\n            var range = this.nodeSelectionObj.getRange(this.contentRenderer.getDocument());\n            var parentNode = this.nodeSelectionObj.getParentNodeCollection(range);\n            if (!((parentNode[0].nodeName === 'LI' || parentNode[0].nodeName === 'BR' || closest(parentNode[0], 'li')) &&\n                range.startOffset === 0)) {\n                e.args.preventDefault();\n                if (!e.args.shiftKey) {\n                    InsertHtml.Insert(this.contentRenderer.getDocument(), '&nbsp;&nbsp;&nbsp;&nbsp;');\n                    this.rangeCollection.push(this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()));\n                }\n                else if (this.rangeCollection.length > 0 &&\n                    this.rangeCollection[this.rangeCollection.length - 1].startContainer.textContent.length === 4) {\n                    var textCont = this.rangeCollection[this.rangeCollection.length - 1].startContainer;\n                    this.nodeSelectionObj.setSelectionText(this.contentRenderer.getDocument(), textCont, textCont, 0, textCont.textContent.length);\n                    InsertHtml.Insert(this.contentRenderer.getDocument(), document.createTextNode(''));\n                    this.rangeCollection.pop();\n                }\n            }\n        }\n        if (e.args.action === 'space' ||\n            e.args.action === 'enter') {\n            this.spaceLink(e.args);\n        }\n    };\n    HtmlEditor.prototype.onPaste = function (e) {\n        var regex = new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)|(www\\.))(\\S+))/gi);\n        if (e.text.match(regex)) {\n            e.args.preventDefault();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var saveSelection = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            var firstElement = this.parent.createElement('span');\n            var httpRegex = new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)))/gi);\n            var wwwRegex = new RegExp(/([^\\S]|^)(((www\\.))(\\S+))/gi);\n            var httpText = '';\n            if (e.text.match(httpRegex)) {\n                firstElement.innerHTML = e.text.split('http')[0];\n                httpText = 'http' + e.text.split('http')[1];\n            }\n            else if (e.text.match(wwwRegex)) {\n                firstElement.innerHTML = e.text.split('www')[0];\n                httpText = 'www' + e.text.split('www')[1];\n            }\n            var httpSplitText = httpText.split(' ');\n            var splittedText = '';\n            for (var i = 1; i < httpSplitText.length; i++) {\n                splittedText = splittedText + ' ' + httpSplitText[i];\n            }\n            var lastElement = this.parent.createElement('span');\n            lastElement.innerHTML = splittedText;\n            var anchor = this.parent.createElement('a', {\n                className: 'e-rte-anchor', attrs: {\n                    href: httpSplitText[0],\n                    title: httpSplitText[0]\n                }\n            });\n            anchor.innerHTML = httpSplitText[0];\n            var resultElement = this.parent.createElement('span');\n            if (firstElement.innerHTML !== '') {\n                resultElement.appendChild(firstElement);\n            }\n            if (anchor.innerHTML !== '') {\n                resultElement.appendChild(anchor);\n            }\n            if (lastElement.innerHTML !== '') {\n                resultElement.appendChild(lastElement);\n            }\n            this.parent.executeCommand('insertHTML', resultElement);\n        }\n    };\n    HtmlEditor.prototype.spaceLink = function (e) {\n        var range = this.nodeSelectionObj.getRange(this.contentRenderer.getDocument());\n        var selectNodeEle = this.nodeSelectionObj.getParentNodeCollection(range);\n        var text = range.startContainer.textContent;\n        var splitText = text.split(' ');\n        var urlText = splitText[splitText.length - 1];\n        var regex = new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)|(www\\.))(\\S+))/gi);\n        if (selectNodeEle[0].nodeName !== 'A' && urlText.match(regex)) {\n            var selection = this.nodeSelectionObj.save(range, this.parent.contentModule.getDocument());\n            var selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            var value = {\n                url: urlText,\n                selection: selection, selectParent: selectParent,\n                text: '',\n                title: '',\n                target: ''\n            };\n            this.parent.formatter.process(this.parent, {\n                item: {\n                    'command': 'Links',\n                    'subCommand': 'CreateLink'\n                }\n            }, e, value);\n        }\n    };\n    HtmlEditor.prototype.onToolbarClick = function (args) {\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        var item = args.item;\n        var closestElement = closest(args.originalEvent.target, '.e-rte-quick-popup');\n        if (closestElement && !closestElement.classList.contains('e-rte-inline-popup')) {\n            if (!(item.subCommand === 'SourceCode' || item.subCommand === 'Preview' ||\n                item.subCommand === 'FontColor' || item.subCommand === 'BackgroundColor')) {\n                if (isIDevice() && item.command === 'Images') {\n                    this.nodeSelectionObj.restore();\n                }\n                var range = this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());\n                save = this.nodeSelectionObj.save(range, this.parent.contentModule.getDocument());\n                selectNodeEle = this.nodeSelectionObj.getNodeCollection(range);\n                selectParentEle = this.nodeSelectionObj.getParentNodeCollection(range);\n            }\n            if (item.command === 'Images') {\n                this.parent.notify(events.imageToolbarAction, {\n                    member: 'image', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                });\n            }\n            if (item.command === 'Links') {\n                this.parent.notify(events.linkToolbarAction, {\n                    member: 'link', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                });\n            }\n            if (item.command === 'Table') {\n                this.parent.notify(events.tableToolbarAction, {\n                    member: 'table', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                });\n            }\n        }\n        else {\n            var linkDialog = this.parent.element.querySelector('#' + this.parent.getID() + '_rtelink');\n            var imageDialog = this.parent.element.querySelector('#' + this.parent.getID() + '_image');\n            if (!(item.subCommand === 'SourceCode' || item.subCommand === 'Preview' ||\n                item.subCommand === 'FontColor' || item.subCommand === 'BackgroundColor')) {\n                var range = this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());\n                if (isNullOrUndefined(linkDialog) && isNullOrUndefined(imageDialog)) {\n                    save = this.nodeSelectionObj.save(range, this.parent.contentModule.getDocument());\n                }\n                selectNodeEle = this.nodeSelectionObj.getNodeCollection(range);\n                selectParentEle = this.nodeSelectionObj.getParentNodeCollection(range);\n            }\n            switch (item.subCommand) {\n                case 'Maximize':\n                    this.parent.notify(events.enableFullScreen, { args: args });\n                    break;\n                case 'Minimize':\n                    this.parent.notify(events.disableFullScreen, { args: args });\n                    break;\n                case 'CreateLink':\n                    this.parent.notify(events.insertLink, {\n                        member: 'link', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                    });\n                    break;\n                case 'Print':\n                    this.parent.print();\n                    break;\n                case 'Image':\n                    this.parent.notify(events.insertImage, {\n                        member: 'image', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                    });\n                    break;\n                case 'CreateTable':\n                    this.parent.notify(events.createTable, {\n                        member: 'table', args: args, selection: save\n                    });\n                    break;\n                case 'SourceCode':\n                    this.parent.notify(events.sourceCode, { member: 'viewSource', args: args });\n                    break;\n                case 'Preview':\n                    this.parent.notify(events.updateSource, { member: 'updateSource', args: args });\n                    break;\n                case 'FontColor':\n                case 'BackgroundColor':\n                    break;\n                default:\n                    this.parent.formatter.process(this.parent, args, args.originalEvent, null);\n                    break;\n            }\n        }\n    };\n    HtmlEditor.prototype.renderColorPicker = function (args) {\n        this.colorPickerModule.renderColorPickerInput(args);\n    };\n    HtmlEditor.prototype.instantiateRenderer = function () {\n        if (this.parent.iframeSettings.enable) {\n            this.renderFactory.addRenderer(RenderType.Content, new IframeContentRender(this.parent, this.locator));\n        }\n        else {\n            this.renderFactory.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n        }\n    };\n    HtmlEditor.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.htmlToolbarClick, this.onToolbarClick);\n        this.parent.off(events.renderColorPicker, this.renderColorPicker);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n        this.parent.off(events.selectAll, this.selectAll);\n        this.parent.off(events.selectRange, this.selectRange);\n        this.parent.off(events.getSelectedHtml, this.getSelectedHtml);\n        this.parent.off(events.selectionSave, this.onSelectionSave);\n        this.parent.off(events.selectionRestore, this.onSelectionRestore);\n        this.parent.off(events.readOnlyMode, this.updateReadOnly);\n        this.parent.off(events.paste, this.onPaste);\n    };\n    HtmlEditor.prototype.render = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        var editElement = this.contentRenderer.getEditPanel();\n        var option = { undoRedoSteps: this.parent.undoRedoSteps, undoRedoTimer: this.parent.undoRedoTimer };\n        if (isNullOrUndefined(this.parent.formatter)) {\n            this.parent.formatter = new HTMLFormatter({\n                currentDocument: this.contentRenderer.getDocument(),\n                element: editElement,\n                options: option\n            });\n        }\n        else {\n            this.parent.formatter.updateFormatter(editElement, this.contentRenderer.getDocument(), option);\n        }\n        if (this.parent.toolbarSettings.enable) {\n            this.toolbarUpdate = new HtmlToolbarStatus(this.parent);\n        }\n        this.parent.notify(events.bindOnEnd, {});\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    HtmlEditor.prototype.onPropertyChanged = function (e) {\n        // On property code change here\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    HtmlEditor.prototype.getModuleName = function () {\n        return 'htmlEditor';\n    };\n    /**\n     * For selecting all content in RTE\n     * @private\n     */\n    HtmlEditor.prototype.selectAll = function () {\n        var nodes = getTextNodesUnder(this.parent.contentModule.getDocument(), this.parent.contentModule.getEditPanel());\n        this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(), nodes[0], nodes[nodes.length - 1], 0, nodes[nodes.length - 1].textContent.length);\n    };\n    /**\n     * For selecting all content in RTE\n     * @private\n     */\n    HtmlEditor.prototype.selectRange = function (e) {\n        this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.contentModule.getDocument(), e.range);\n    };\n    /**\n     * For get a selected text in RTE\n     * @private\n     */\n    HtmlEditor.prototype.getSelectedHtml = function (e) {\n        e.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()).toString());\n    };\n    return HtmlEditor;\n}());\nexport { HtmlEditor };\n","import * as events from '../base/constant';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { RadioButton } from '@syncfusion/ej2-buttons';\nimport { isNullOrUndefined as isNOU, isNullOrUndefined, detach } from '@syncfusion/ej2-base';\nimport { CLS_RTE_PASTE_KEEP_FORMAT, CLS_RTE_PASTE_REMOVE_FORMAT, CLS_RTE_PASTE_PLAIN_FORMAT } from '../base/classes';\nimport { CLS_RTE_PASTE_OK, CLS_RTE_PASTE_CANCEL, CLS_RTE_DIALOG_MIN_HEIGHT } from '../base/classes';\nimport { pasteCleanupGroupingTags } from '../../common/config';\nimport { NodeSelection } from '../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { RenderType } from '../base/enum';\n/**\n * PasteCleanup module called when pasting content in RichTextEditor\n */\nvar PasteCleanup = /** @class */ (function () {\n    function PasteCleanup(parent, serviceLocator) {\n        this.inlineNode = ['a', 'abbr', 'acronym', 'audio', 'b', 'bdi', 'bdo', 'big', 'button',\n            'canvas', 'cite', 'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'i', 'iframe', 'img', 'input',\n            'ins', 'kbd', 'label', 'map', 'mark', 'meter', 'noscript', 'object', 'output', 'picture', 'progress',\n            'q', 'ruby', 's', 'samp', 'script', 'select', 'slot', 'small', 'span', 'strong', 'sub', 'sup', 'svg',\n            'template', 'textarea', 'time', 'u', 'tt', 'var', 'video', 'wbr'];\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.addEventListener();\n    }\n    PasteCleanup.prototype.addEventListener = function () {\n        this.nodeSelectionObj = new NodeSelection();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.pasteClean, this.pasteClean, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    PasteCleanup.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    PasteCleanup.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.pasteClean, this.pasteClean);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    PasteCleanup.prototype.pasteClean = function (e) {\n        var _this = this;\n        var args = {\n            requestType: 'Paste',\n            editorMode: this.parent.editorMode,\n            event: e\n        };\n        var value = null;\n        if (e.args && !isNOU(e.args.clipboardData)) {\n            value = e.args.clipboardData.getData('text/html');\n        }\n        if (e.args && value !== null && this.parent.editorMode === 'HTML') {\n            var regex = new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)|(www\\.))(\\S+))/gi);\n            if (value.length === 0 || value.match(regex)) {\n                value = e.args.clipboardData.getData('text/plain');\n                var file = e && e.args.clipboardData &&\n                    e.args.clipboardData.items.length > 0 ?\n                    e.args.clipboardData.items[0].getAsFile() : null;\n                this.parent.notify(events.paste, { file: file, args: e.args, text: value });\n            }\n            else if (value.length > 0) {\n                this.parent.formatter.editorManager.observer.notify(EVENTS.MS_WORD_CLEANUP, {\n                    args: e.args,\n                    text: e.text,\n                    callBack: function (a) {\n                        value = a;\n                    }\n                });\n                this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n                var currentDocument = this.contentRenderer.getDocument();\n                var range = this.nodeSelectionObj.getRange(currentDocument);\n                this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n                if (this.parent.pasteCleanupSettings.prompt) {\n                    e.args.preventDefault();\n                    this.pasteDialog(value);\n                }\n                else if (this.parent.pasteCleanupSettings.plainText) {\n                    e.args.preventDefault();\n                    this.plainFormatting(value);\n                }\n                else if (this.parent.pasteCleanupSettings.keepFormat) {\n                    e.args.preventDefault();\n                    this.formatting(value, false);\n                }\n                else {\n                    e.args.preventDefault();\n                    this.formatting(value, true);\n                }\n            }\n        }\n        setTimeout(function () { _this.parent.formatter.onSuccess(_this.parent, args); }, 0);\n    };\n    PasteCleanup.prototype.radioRender = function () {\n        var keepRadioButton = new RadioButton({ label: 'Keep', name: 'pasteOption', checked: true });\n        var keepFormatElement = this.parent.element.querySelector('#keepFormating');\n        keepRadioButton.appendTo(keepFormatElement);\n        var cleanRadioButton = new RadioButton({ label: 'Clean', name: 'pasteOption' });\n        var cleanFormatElement = this.parent.element.querySelector('#cleanFormat');\n        cleanRadioButton.appendTo(cleanFormatElement);\n        var plainTextRadioButton = new RadioButton({ label: 'Plain Text', name: 'pasteOption' });\n        var plainTextElement = this.parent.element.querySelector('#plainTextFormat');\n        plainTextRadioButton.appendTo(plainTextElement);\n    };\n    PasteCleanup.prototype.selectFormatting = function (value) {\n        var keepFormatElement = this.parent.element.querySelector('#keepFormating');\n        var cleanFormatElement = this.parent.element.querySelector('#cleanFormat');\n        if (keepFormatElement.checked) {\n            this.formatting(value, false);\n        }\n        else if (cleanFormatElement.checked) {\n            this.formatting(value, true);\n        }\n        else {\n            this.plainFormatting(value);\n        }\n    };\n    PasteCleanup.prototype.pasteDialog = function (value) {\n        var _this = this;\n        var dialog = new Dialog({\n            buttons: [\n                {\n                    click: function () {\n                        if (!dialog.isDestroyed) {\n                            _this.selectFormatting(value);\n                            dialog.hide();\n                            dialog.destroy();\n                        }\n                    },\n                    buttonModel: {\n                        isPrimary: true,\n                        cssClass: 'e-flat ' + CLS_RTE_PASTE_OK,\n                        content: this.i10n.getConstant('pasteDialogOk')\n                    }\n                },\n                {\n                    click: function () {\n                        if (!dialog.isDestroyed) {\n                            dialog.hide();\n                            dialog.destroy();\n                        }\n                    },\n                    buttonModel: {\n                        cssClass: 'e-flat ' + CLS_RTE_PASTE_CANCEL,\n                        content: this.i10n.getConstant('pasteDialogCancel')\n                    }\n                }\n            ],\n            header: this.i10n.getConstant('pasteFormat'),\n            content: this.i10n.getConstant('pasteFormatContent') + '<br/><div><div style=\"padding-top:24px;\">' +\n                '<input type=\"radio\" class=\"' + CLS_RTE_PASTE_KEEP_FORMAT + '\" id=\"keepFormating\"/>' +\n                '</div><div style=\"padding-top:20px;\"><input type=\"radio\" class=\"' + CLS_RTE_PASTE_REMOVE_FORMAT + '\" id=\"cleanFormat\"/></div>' +\n                '<div style=\"padding-top:20px;\"><input type=\"radio\" class=\"' + CLS_RTE_PASTE_PLAIN_FORMAT + '\" id=\"plainTextFormat\"/></div></div>',\n            target: this.parent.element,\n            width: '300px',\n            height: '265px',\n            cssClass: CLS_RTE_DIALOG_MIN_HEIGHT,\n            isModal: true\n        });\n        var rteDialogWrapper = this.parent.element.querySelector('#' + this.parent.getID()\n            + '_pasteCleanupDialog');\n        if (rteDialogWrapper !== null && rteDialogWrapper.innerHTML !== '') {\n            this.destroyDialog(rteDialogWrapper);\n        }\n        if (rteDialogWrapper === null) {\n            rteDialogWrapper = this.parent.createElement('div', {\n                id: this.parent.getID() + '_pasteCleanupDialog'\n            });\n            this.parent.element.appendChild(rteDialogWrapper);\n        }\n        dialog.appendTo(rteDialogWrapper);\n        this.radioRender();\n        dialog.show();\n    };\n    PasteCleanup.prototype.destroyDialog = function (rteDialogWrapper) {\n        var rteDialogContainer = this.parent.element.querySelector('.e-dlg-container');\n        detach(rteDialogContainer);\n        var rteDialogWrapperChildLength = rteDialogWrapper.children.length;\n        for (var i = 0; i < rteDialogWrapperChildLength; i++) {\n            detach(rteDialogWrapper.children[0]);\n        }\n    };\n    PasteCleanup.prototype.formatting = function (value, clean) {\n        var clipBoardElem = this.parent.createElement('span');\n        clipBoardElem.innerHTML = value;\n        if (this.parent.pasteCleanupSettings.deniedTags !== null) {\n            clipBoardElem = this.deniedTags(clipBoardElem);\n        }\n        if (clean) {\n            clipBoardElem = this.deniedAttributes(clipBoardElem, clean);\n        }\n        else if (this.parent.pasteCleanupSettings.deniedAttrs !== null) {\n            clipBoardElem = this.deniedAttributes(clipBoardElem, clean);\n        }\n        if (this.parent.pasteCleanupSettings.allowedStyleProps !== null) {\n            clipBoardElem = this.allowedStyle(clipBoardElem);\n        }\n        this.saveSelection.restore();\n        this.parent.executeCommand('insertHTML', clipBoardElem);\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    //Plain Formatting\n    PasteCleanup.prototype.plainFormatting = function (value) {\n        var clipBoardElem = this.parent.createElement('div');\n        clipBoardElem.innerHTML = value;\n        this.detachInlineElements(clipBoardElem);\n        var text = this.getTextContent(clipBoardElem);\n        var resultElement = this.parent.createElement('span');\n        resultElement.innerHTML = text;\n        this.saveSelection.restore();\n        this.parent.executeCommand('insertHTML', resultElement);\n    };\n    PasteCleanup.prototype.detachInlineElements = function (element) {\n        while (!isNullOrUndefined(element)) {\n            var isInlineElement = false;\n            for (var j = 0; j < this.inlineNode.length && !isInlineElement; j++) {\n                if (element.tagName.toLocaleLowerCase() === this.inlineNode[j]) {\n                    var node = element.nextElementSibling ?\n                        element.nextElementSibling : element.parentElement.nextElementSibling;\n                    if (!isNullOrUndefined(element.childNodes[0]) && element.childNodes[0].textContent !== '') {\n                        element.parentElement.insertBefore(this.getTextNode(element), element);\n                    }\n                    detach(element);\n                    element = node;\n                    isInlineElement = true;\n                }\n            }\n            if (!isNullOrUndefined(element)) {\n                if (isInlineElement) {\n                    element = element;\n                }\n                else if (element.firstElementChild) {\n                    element = element.firstElementChild;\n                }\n                else if (element.nextElementSibling) {\n                    element = element.nextElementSibling;\n                }\n                else if (element.parentElement.nextElementSibling) {\n                    element = element.parentElement.nextElementSibling;\n                }\n                else {\n                    element = null;\n                }\n            }\n            else {\n                element = null;\n            }\n        }\n    };\n    PasteCleanup.prototype.getTextNode = function (element) {\n        var rootElement = this.parent.createElement('span');\n        rootElement.innerHTML = element.textContent;\n        return rootElement.childNodes[0];\n    };\n    PasteCleanup.prototype.insertAfter = function (newNode, referenceNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n    PasteCleanup.prototype.getTextContent = function (element) {\n        var result;\n        var text;\n        result = '';\n        var brElement = element.nodeType === 1 ? element.querySelectorAll('br') : null;\n        if (brElement) {\n            for (var i = 0; i < brElement.length; i++) {\n                if (!isNullOrUndefined(brElement[i].previousSibling)) {\n                    var resultElement = this.parent.createElement('div');\n                    resultElement.innerHTML = brElement[i].previousSibling.textContent;\n                    detach(brElement[i].previousSibling);\n                    brElement[i].parentElement.insertBefore(resultElement, brElement[i]);\n                }\n                if (i + 1 === brElement.length && !isNullOrUndefined(brElement[i].nextSibling)) {\n                    var divNextElement = this.parent.createElement('div');\n                    divNextElement.innerHTML = brElement[i].nextSibling.textContent;\n                    detach(brElement[i].nextSibling);\n                    this.insertAfter(divNextElement, brElement[i]);\n                }\n                detach(brElement[i]);\n            }\n        }\n        if (element.children.length === 0 && element.textContent.trim() !== '') {\n            text = '<p>' + element.textContent + '</p>';\n            result += text;\n        }\n        else {\n            for (var i = 0; i < element.children.length; i++) {\n                if (!isNullOrUndefined(element.children[i])) {\n                    text = this.getTextContent(element.children[i]);\n                }\n                else {\n                    text = '<p>' + element.children[i].textContent + '</p>';\n                }\n                result += text;\n            }\n        }\n        return result;\n    };\n    //GroupingTags\n    PasteCleanup.prototype.tagGrouping = function (deniedTags) {\n        var groupingTags = deniedTags.slice();\n        var keys = Object.keys(pasteCleanupGroupingTags);\n        var values = keys.map(function (key) { return pasteCleanupGroupingTags[key]; });\n        var addTags = [];\n        for (var i = 0; i < groupingTags.length; i++) {\n            //The value split using '[' because to reterive the tag name from the user given format which may contain tag with attributes\n            if (groupingTags[i].split('[').length > 1) {\n                groupingTags[i] = groupingTags[i].split('[')[0].trim();\n            }\n            if (keys.indexOf(groupingTags[i]) > -1) {\n                for (var j = 0; j < values[keys.indexOf(groupingTags[i])].length; j++) {\n                    if (groupingTags.indexOf(values[keys.indexOf(groupingTags[i])][j]) < 0 &&\n                        addTags.indexOf(values[keys.indexOf(groupingTags[i])][j]) < 0) {\n                        addTags.push(values[keys.indexOf(groupingTags[i])][j]);\n                    }\n                }\n            }\n        }\n        return deniedTags = deniedTags.concat(addTags);\n    };\n    //Filter Attributes in Denied Tags\n    PasteCleanup.prototype.attributesfilter = function (deniedTags) {\n        for (var i = 0; i < deniedTags.length; i++) {\n            if (deniedTags[i].split('[').length > 1) {\n                var userAttributes = deniedTags[i].split('[')[1].split(']')[0].split(',');\n                var allowedAttributeArray = [];\n                var deniedAttributeArray = [];\n                for (var j = 0; j < userAttributes.length; j++) {\n                    userAttributes[j].indexOf('!') < 0 ? allowedAttributeArray.push(userAttributes[j].trim())\n                        : deniedAttributeArray.push(userAttributes[j].split('!')[1].trim());\n                }\n                var allowedAttribute = allowedAttributeArray.length > 1 ?\n                    (allowedAttributeArray.join('][')) : (allowedAttributeArray.join());\n                var deniedAttribute = deniedAttributeArray.length > 1 ? deniedAttributeArray.join('][') : (deniedAttributeArray.join());\n                if (deniedAttribute.length > 0) {\n                    var select = allowedAttribute !== '' ? deniedTags[i].split('[')[0] +\n                        '[' + allowedAttribute + ']' : deniedTags[i].split('[')[0];\n                    deniedTags[i] = select + ':not([' + deniedAttribute + '])';\n                }\n                else {\n                    deniedTags[i] = deniedTags[i].split('[')[0] + '[' + allowedAttribute + ']';\n                }\n            }\n        }\n        return deniedTags;\n    };\n    //Denied Tags\n    PasteCleanup.prototype.deniedTags = function (clipBoardElem) {\n        var deniedTags = isNullOrUndefined(this.parent.pasteCleanupSettings.deniedTags) ? [] : this.parent.pasteCleanupSettings.deniedTags.slice();\n        deniedTags = this.attributesfilter(deniedTags);\n        deniedTags = this.tagGrouping(deniedTags);\n        for (var i = 0; i < deniedTags.length; i++) {\n            var removableElement = clipBoardElem.querySelectorAll(deniedTags[i]);\n            for (var j = removableElement.length - 1; j >= 0; j--) {\n                var parentElem = removableElement[j].parentNode;\n                while (removableElement[j].firstChild) {\n                    parentElem.insertBefore(removableElement[j].firstChild, removableElement[j]);\n                }\n                parentElem.removeChild(removableElement[j]);\n            }\n        }\n        return clipBoardElem;\n    };\n    //Denied Attributes\n    PasteCleanup.prototype.deniedAttributes = function (clipBoardElem, clean) {\n        var deniedAttrs = isNullOrUndefined(this.parent.pasteCleanupSettings.deniedAttrs) ? [] : this.parent.pasteCleanupSettings.deniedAttrs.slice();\n        if (clean) {\n            deniedAttrs.push('style');\n        }\n        for (var i = 0; i < deniedAttrs.length; i++) {\n            var removableAttrElement = clipBoardElem.\n                querySelectorAll('[' + deniedAttrs[i] + ']');\n            for (var j = 0; j < removableAttrElement.length; j++) {\n                removableAttrElement[j].removeAttribute(deniedAttrs[i]);\n            }\n        }\n        return clipBoardElem;\n    };\n    //Allowed Style Properties\n    PasteCleanup.prototype.allowedStyle = function (clipBoardElem) {\n        var allowedStyleProps = isNullOrUndefined(this.parent.pasteCleanupSettings.allowedStyleProps) ? [] : this.parent.pasteCleanupSettings.allowedStyleProps.slice();\n        allowedStyleProps.push('list-style-type', 'list-style');\n        var styleElement = clipBoardElem.querySelectorAll('[style]');\n        for (var i = 0; i < styleElement.length; i++) {\n            var allowedStyleValue = '';\n            var allowedStyleValueArray = [];\n            var styleValue = styleElement[i].getAttribute('style').split(';');\n            for (var k = 0; k < allowedStyleProps.length; k++) {\n                for (var j = 0; j < styleValue.length; j++) {\n                    if (!styleElement[i].getAttribute('style').split(';')[j]\n                        .trim().indexOf(allowedStyleProps[k] + ':')) {\n                        allowedStyleValueArray.push(styleElement[i].getAttribute('style').split(';')[j]);\n                        k++;\n                    }\n                }\n            }\n            styleElement[i].removeAttribute('style');\n            allowedStyleValue = allowedStyleValueArray.join(';');\n            if (allowedStyleValue) {\n                styleElement[i].setAttribute('style', allowedStyleValue);\n            }\n        }\n        return clipBoardElem;\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    PasteCleanup.prototype.getModuleName = function () {\n        return 'pasteCleanup';\n    };\n    return PasteCleanup;\n}());\nexport { PasteCleanup };\n","import { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\n/**\n * Content module is used to render RichTextEditor content\n * @hidden\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function Render(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.renderer = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * To initialize RichTextEditor header, content and footer rendering\n     */\n    Render.prototype.render = function () {\n        var rteObj = this.parent;\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.contentRenderer.renderPanel();\n    };\n    /**\n     * Refresh the entire RichTextEditor.\n     * @return {void}\n     */\n    Render.prototype.refresh = function (e) {\n        if (e === void 0) { e = { requestType: 'refresh' }; }\n        this.parent.notify(e.requestType + \"-begin\", e);\n    };\n    /**\n     * Destroy the entire RichTextEditor.\n     * @return {void}\n     */\n    Render.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    Render.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.modelChanged, this.refresh, this);\n        this.parent.on(events.keyUp, this.keyUp, this);\n    };\n    Render.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.modelChanged, this.refresh);\n        this.parent.off(events.keyUp, this.keyUp);\n    };\n    Render.prototype.keyUp = function (e) {\n        if (this.parent.editorMode === 'HTML') {\n            switch (e.args.which) {\n                case 46:\n                case 8:\n                    var childNodes = this.parent.contentModule.getEditPanel().childNodes;\n                    if ((childNodes.length === 0) ||\n                        (childNodes.length === 1 && ((childNodes[0].tagName === 'BR') ||\n                            (childNodes[0].tagName === 'P' &&\n                                (childNodes[0].childNodes.length === 0 || childNodes[0].textContent === ''))))) {\n                        var node = this.parent.contentModule.getEditPanel();\n                        node.innerHTML = '<p><br/></p>';\n                        this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(), node.childNodes[0], 0);\n                    }\n                    break;\n            }\n        }\n    };\n    return Render;\n}());\nexport { Render };\n","import { EventHandler, detach, isNullOrUndefined, select } from '@syncfusion/ej2-base';\nimport { closest, addClass, removeClass, Browser } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { CLS_RTE_ELEMENTS } from '../base/classes';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { RenderType } from '../base/enum';\nimport { dispatchEvent, parseHtml } from '../base/util';\nimport { isIDevice } from '../../common/util';\n/**\n * `Link` module is used to handle undo actions.\n */\nvar Link = /** @class */ (function () {\n    function Link(parent, serviceLocator) {\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.addEventListener();\n        this.serviceLocator = serviceLocator;\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n    }\n    Link.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.insertLink, this.linkDialog, this);\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.insertCompleted, this.showLinkQuickToolbar, this);\n        this.parent.on(events.linkToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.unLink, this.removeLink, this);\n        this.parent.on(events.editLink, this.editLink, this);\n        this.parent.on(events.openLink, this.openLink, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n    };\n    Link.prototype.onToolbarAction = function (args) {\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'OpenLink':\n                this.parent.notify(events.openLink, args);\n                break;\n            case 'EditLink':\n                this.parent.notify(events.editLink, args);\n                break;\n            case 'RemoveLink':\n                this.parent.notify(events.unLink, args);\n                break;\n        }\n    };\n    Link.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.insertLink, this.linkDialog);\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.insertCompleted, this.showLinkQuickToolbar);\n        this.parent.off(events.linkToolbarAction, this.onToolbarAction);\n        this.parent.off(events.unLink, this.removeLink);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.editLink, this.editLink);\n        this.parent.off(events.openLink, this.openLink);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n    };\n    Link.prototype.onIframeMouseDown = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    Link.prototype.showLinkQuickToolbar = function (e) {\n        var pageX;\n        var pageY;\n        if (e.type !== 'Links' || isNullOrUndefined(this.parent.quickToolbarModule) ||\n            isNullOrUndefined(this.parent.quickToolbarModule.linkQTBar)) {\n            return;\n        }\n        this.quickToolObj = this.parent.quickToolbarModule;\n        var parentTop = this.parent.element.getBoundingClientRect().top;\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var target;\n        [].forEach.call(e.elements, function (element, index) {\n            if (index === 0) {\n                target = ((element.nodeName === '#text') ? (element.parentNode) : element);\n            }\n        });\n        if (e.isNotify) {\n            pageX = target.getBoundingClientRect().left;\n            var tbElement = this.parent.toolbarModule.getToolbarElement();\n            var linkTop = target.getBoundingClientRect().top;\n            var linkPos = linkTop - parentTop;\n            var tbHeight = (tbElement) ? (tbElement.offsetHeight + this.parent.toolbarModule.getExpandTBarPopHeight()) : 0;\n            pageY = window.pageYOffset + ((this.parent.iframeSettings.enable) ? (parentTop + tbHeight + linkTop) : (parentTop + linkPos));\n        }\n        else {\n            var args = void 0;\n            args = e.args.touches ? e.args.changedTouches[0] : args = e.args;\n            pageX = args.pageX;\n            pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset + parentTop + args.clientY : args.pageY;\n        }\n        if (this.quickToolObj.linkQTBar) {\n            this.quickToolObj.linkQTBar.showPopup(pageX, pageY, range.endContainer);\n        }\n    };\n    Link.prototype.hideLinkQuickToolbar = function () {\n        if (this.quickToolObj && this.quickToolObj.linkQTBar && document.body.contains(this.quickToolObj.linkQTBar.element)) {\n            this.quickToolObj.linkQTBar.hidePopup();\n        }\n    };\n    Link.prototype.editAreaClickHandler = function (e) {\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.linkQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            target = this.getAnchorNode(target);\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.linkQTBar.element.classList.contains('e-rte-pop');\n            if (target.nodeName === 'A' && !target.contains(target.querySelector('img'))) {\n                if (isPopupOpen) {\n                    return;\n                }\n                this.showLinkQuickToolbar({\n                    args: args,\n                    isNotify: false,\n                    type: 'Links',\n                    elements: [args.target]\n                });\n            }\n            else {\n                this.hideLinkQuickToolbar();\n            }\n        }\n    };\n    Link.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        switch (originalEvent.action) {\n            case 'escape':\n                if (!isNullOrUndefined(this.dialogObj)) {\n                    this.dialogObj.close();\n                }\n                break;\n            case 'insert-link':\n                if (this.parent.editorMode === 'HTML') {\n                    var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n                    var save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n                    var selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n                    var selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n                    var eventArgs = {\n                        args: event.args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                    };\n                    this.linkDialog(eventArgs);\n                }\n                else {\n                    var textArea = this.parent.contentModule.getEditPanel();\n                    this.parent.formatter.editorManager.markdownSelection.save(textArea.selectionStart, textArea.selectionEnd);\n                    this.linkDialog({\n                        args: {\n                            item: { command: 'Links', subCommand: 'Link' },\n                            originalEvent: originalEvent\n                        },\n                        member: 'link',\n                        text: this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),\n                        module: 'Markdown',\n                        name: 'insertLink'\n                    });\n                }\n                originalEvent.preventDefault();\n                break;\n        }\n    };\n    Link.prototype.linkDialog = function (e, inputDetails) {\n        var _this = this;\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && (e.selectParent.length > 0 &&\n            !isNullOrUndefined(e.selectParent[0].classList) &&\n            e.selectParent[0].classList.contains('e-rte-anchor')) && isNullOrUndefined(inputDetails)) {\n            this.editLink(e);\n            return;\n        }\n        var selectText;\n        var linkWebAddress = this.i10n.getConstant('linkWebUrl');\n        var linkDisplayText = this.i10n.getConstant('linkText');\n        var linkTooltip = this.i10n.getConstant('linkTooltipLabel');\n        var urlPlace = this.i10n.getConstant('linkurl');\n        var textPlace = this.i10n.getConstant('textPlaceholder');\n        var title = this.i10n.getConstant('linkTitle');\n        var linkDialogEle = this.parent.createElement('div', { className: 'e-rte-link-dialog', id: this.rteID + '_rtelink' });\n        this.parent.element.appendChild(linkDialogEle);\n        var linkContent = this.parent.createElement('div', {\n            className: 'e-rte-linkcontent', id: this.rteID + '_linkContent'\n        });\n        var htmlTextbox = (this.parent.editorMode === 'HTML') ? '<label>' + linkTooltip +\n            '</label></div><div class=\"e-rte-field\">' +\n            '<input type=\"text\" data-role =\"none\" spellcheck=\"false\" placeholder = \"' + title + '\" class=\"e-input e-rte-linkTitle\"></div>' +\n            '<div class=\"e-rte-label\"></div>' + '<div class=\"e-rte-field\">' +\n            '<input type=\"checkbox\" class=\"e-rte-linkTarget\"  data-role =\"none\"></div>' : '';\n        var content = '<div class=\"e-rte-label\"><label>' + linkWebAddress + '</label></div>' + '<div class=\"e-rte-field\">' +\n            '<input type=\"text\" data-role =\"none\" spellcheck=\"false\" placeholder=\"' + urlPlace + '\" class=\"e-input e-rte-linkurl\"/></div>' +\n            '<div class=\"e-rte-label\">' + '<label>' + linkDisplayText + '</label></div><div class=\"e-rte-field\"> ' +\n            '<input type=\"text\" data-role =\"none\" spellcheck=\"false\" class=\"e-input e-rte-linkText\" placeholder=\"' + textPlace + '\">' +\n            '</div><div class=\"e-rte-label\">' + htmlTextbox;\n        var contentElem = parseHtml(content);\n        linkContent.appendChild(contentElem);\n        var linkTarget = linkContent.querySelector('.e-rte-linkTarget');\n        var linkUrl = linkContent.querySelector('.e-rte-linkurl');\n        var linkText = linkContent.querySelector('.e-rte-linkText');\n        var linkTitle = linkContent.querySelector('.e-rte-linkTitle');\n        var linkOpenLabel = this.i10n.getConstant('linkOpenInNewWindow');\n        this.checkBoxObj = new CheckBox({ label: linkOpenLabel, checked: true, enableRtl: this.parent.enableRtl });\n        this.checkBoxObj.createElement = this.parent.createElement;\n        this.checkBoxObj.appendTo(linkTarget);\n        selectText = (this.parent.editorMode === 'HTML') ? e.selection.getRange(this.parent.contentModule.getDocument()).toString() :\n            e.text;\n        var linkInsert = this.i10n.getConstant('dialogInsert');\n        var linkCancel = this.i10n.getConstant('dialogCancel');\n        var selection = e.selection;\n        var selectObj = { selfLink: this, selection: e.selection, selectParent: e.selectParent, args: e.args };\n        this.dialogObj = new Dialog({\n            header: this.i10n.getConstant('linkHeader'),\n            content: linkContent,\n            cssClass: CLS_RTE_ELEMENTS,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '310px', height: 'inherit',\n            isModal: Browser.isDevice,\n            buttons: [{\n                    click: this.insertlink.bind(selectObj),\n                    buttonModel: { content: linkInsert, cssClass: 'e-flat e-insertLink', isPrimary: true }\n                },\n                { click: this.cancelDialog.bind(selectObj), buttonModel: { cssClass: 'e-flat', content: linkCancel } }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                _this.parent.isBlur = false;\n                if (event && event.event.returnValue) {\n                    if (_this.parent.editorMode === 'HTML') {\n                        selection.restore();\n                    }\n                    else {\n                        _this.parent.formatter.editorManager.markdownSelection.restore(_this.parent.contentModule.getEditPanel());\n                    }\n                }\n                _this.dialogObj.destroy();\n                detach(_this.dialogObj.element);\n                _this.dialogObj = null;\n            },\n        });\n        this.dialogObj.createElement = this.parent.createElement;\n        this.dialogObj.appendTo(linkDialogEle);\n        linkDialogEle.style.maxHeight = 'inherit';\n        if (!isNullOrUndefined(inputDetails)) {\n            linkUrl.value = inputDetails.url;\n            linkText.value = inputDetails.text;\n            linkTitle.value = inputDetails.title;\n            (inputDetails.target) ? this.checkBoxObj.checked = true : this.checkBoxObj.checked = false;\n            this.dialogObj.header = inputDetails.header;\n            this.dialogObj.element.querySelector('.e-insertLink').textContent = inputDetails.btnText;\n        }\n        this.checkUrl(false);\n        if ((this.parent.editorMode === 'HTML' && ((!isNullOrUndefined(selectText) && selectText !== '') &&\n            (e.selection.range.startOffset === 0) || e.selection.range.startOffset !== e.selection.range.endOffset))\n            || e.module === 'Markdown') {\n            linkText.value = selectText;\n        }\n        EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n        if (this.quickToolObj) {\n            this.hideLinkQuickToolbar();\n            if (this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n                this.quickToolObj.inlineQTBar.hidePopup();\n            }\n        }\n    };\n    Link.prototype.insertlink = function (e) {\n        var linkEle = this.selfLink.dialogObj.element;\n        var linkUrl = linkEle.querySelector('.e-rte-linkurl').value;\n        var linkText = linkEle.querySelector('.e-rte-linkText').value;\n        var linkTitle;\n        if (this.selfLink.parent.editorMode === 'HTML') {\n            linkTitle = linkEle.querySelector('.e-rte-linkTitle').value;\n        }\n        var target = (this.selfLink.checkBoxObj.checked) ? '_blank' : null;\n        if (linkUrl === '') {\n            this.selfLink.checkUrl(true);\n            return;\n        }\n        if (!this.selfLink.isUrl(linkUrl)) {\n            linkText = (linkText === '') ? linkUrl : linkText;\n            linkUrl = 'http://' + linkUrl;\n        }\n        else {\n            this.selfLink.checkUrl(false);\n        }\n        var proxy = this.selfLink;\n        if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(this.selection.range.startContainer.parentNode, '#' + proxy.parent.contentModule.getPanel().id))) {\n            proxy.parent.contentModule.getEditPanel().focus();\n            var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n            this.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.parent.contentModule.getDocument());\n            this.selectParent = proxy.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        var value = {\n            url: linkUrl, text: linkText, title: linkTitle, target: target,\n            selection: this.selection, selectParent: this.selectParent\n        };\n        if (document.body.contains(proxy.dialogObj.element)) {\n            this.selfLink.dialogObj.hide({ returnValue: false });\n        }\n        if (isIDevice() && proxy.parent.iframeSettings.enable) {\n            select('iframe', proxy.parent.element).contentWindow.focus();\n        }\n        if (proxy.parent.editorMode === 'HTML') {\n            this.selection.restore();\n        }\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        this.selfLink.parent.formatter.process(this.selfLink.parent, this.args, this.args.originalEvent, value);\n        this.selfLink.parent.contentModule.getEditPanel().focus();\n    };\n    Link.prototype.isUrl = function (url) {\n        var regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/gi;\n        return regexp.test(url);\n    };\n    Link.prototype.checkUrl = function (e) {\n        var linkEle = this.dialogObj.element;\n        var linkUrl = linkEle.querySelector('.e-rte-linkurl');\n        if (e) {\n            addClass([linkUrl], 'e-error');\n            linkUrl.setSelectionRange(0, linkUrl.value.length);\n            linkUrl.focus();\n        }\n        else {\n            removeClass([linkUrl], 'e-error');\n        }\n    };\n    Link.prototype.removeLink = function (e) {\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            selectNode: e.selectNode, selectParent: e.selectParent, selection: e.selection,\n            subCommand: e.args.item.subCommand\n        });\n        if (isIDevice() && this.parent.iframeSettings.enable) {\n            select('iframe', this.parent.element).contentWindow.focus();\n        }\n        else {\n            this.contentModule.getEditPanel().focus();\n        }\n        this.hideLinkQuickToolbar();\n    };\n    Link.prototype.openLink = function (e) {\n        var selectParentEle = this.getAnchorNode(e.selectParent[0]);\n        if (selectParentEle.classList.contains('e-rte-anchor') || selectParentEle.tagName === 'A') {\n            this.parent.formatter.process(this.parent, e.args, e.args, {\n                url: selectParentEle.href,\n                target: selectParentEle.target === '' ? '_self' : '_blank', selectNode: e.selectNode,\n                subCommand: e.args.item.subCommand\n            });\n        }\n    };\n    Link.prototype.getAnchorNode = function (element) {\n        var selectParent = closest(element, 'a');\n        return (selectParent ? selectParent : element);\n    };\n    Link.prototype.editLink = function (e) {\n        var selectParentEle = this.getAnchorNode(e.selectParent[0]);\n        if (selectParentEle.classList.contains('e-rte-anchor') || selectParentEle.tagName === 'A') {\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var inputDetails = {\n                url: selectParentEle.href, text: selectParentEle.innerText,\n                title: selectParentEle.title, target: selectParentEle.target,\n                header: this.i10n.getConstant('editLink'), btnText: linkUpdate\n            };\n            this.linkDialog(e, inputDetails);\n        }\n    };\n    Link.prototype.cancelDialog = function (e) {\n        this.selfLink.parent.isBlur = false;\n        this.selfLink.dialogObj.hide({ returnValue: true });\n        if (isIDevice()) {\n            this.selection.restore();\n        }\n        else {\n            this.selfLink.parent.contentModule.getEditPanel().focus();\n        }\n    };\n    Link.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (!isNullOrUndefined(this.dialogObj) && ((!closest(target, '#' + this.dialogObj.element.id) && this.parent.toolbarSettings.enable &&\n            this.parent.getToolbarElement() && !this.parent.getToolbarElement().contains(e.target)) ||\n            (this.parent.getToolbarElement() && this.parent.getToolbarElement().contains(e.target) &&\n                !closest(target, '#' + this.parent.getID() + '_toolbar_CreateLink') &&\n                !target.querySelector('#' + this.parent.getID() + '_toolbar_CreateLink')))) {\n            this.dialogObj.hide({ returnValue: true });\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Link.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Link.prototype.getModuleName = function () {\n        return 'link';\n    };\n    return Link;\n}());\nexport { Link };\n","import { addClass, detach, EventHandler, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Browser, closest, removeClass } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { Uploader, NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Button, CheckBox } from '@syncfusion/ej2-buttons';\nimport { RenderType } from '../base/enum';\nimport { dispatchEvent, parseHtml } from '../base/util';\nimport { isIDevice } from '../../common/util';\n/**\n * `Image` module is used to handle image actions.\n */\nvar Image = /** @class */ (function () {\n    function Image(parent, serviceLocator) {\n        this.pageX = null;\n        this.pageY = null;\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    Image.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.insertImage, this.insertImage, this);\n        this.parent.on(events.insertCompleted, this.showImageQuickToolbar, this);\n        this.parent.on(events.imageToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.imageCaption, this.caption, this);\n        this.parent.on(events.imageDelete, this.deleteImg, this);\n        this.parent.on(events.imageLink, this.insertImgLink, this);\n        this.parent.on(events.imageAlt, this.insertAltText, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.imageSize, this.imageSize, this);\n        this.parent.on(events.dropDownSelect, this.alignmentSelect, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.paste, this.imagePaste, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    Image.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.insertImage, this.insertImage);\n        this.parent.off(events.insertCompleted, this.showImageQuickToolbar);\n        this.parent.off(events.imageCaption, this.caption);\n        this.parent.off(events.imageToolbarAction, this.onToolbarAction);\n        this.parent.off(events.imageDelete, this.deleteImg);\n        this.parent.off(events.imageLink, this.insertImgLink);\n        this.parent.off(events.imageAlt, this.insertAltText);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.imageSize, this.imageSize);\n        this.parent.off(events.dropDownSelect, this.alignmentSelect);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.paste, this.imagePaste);\n        this.parent.off(events.destroy, this.removeEventListener);\n        if (!isNullOrUndefined(this.contentModule)) {\n            EventHandler.remove(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.imageClick);\n            this.parent.formatter.editorManager.observer.off(events.checkUndo, this.undoStack);\n            if (this.parent.insertImageSettings.resize) {\n                EventHandler.remove(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart);\n                EventHandler.remove(this.contentModule.getDocument(), 'mousedown', this.onDocumentClick);\n            }\n        }\n    };\n    Image.prototype.onIframeMouseDown = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    Image.prototype.afterRender = function () {\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        EventHandler.add(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.imageClick, this);\n        if (this.parent.insertImageSettings.resize) {\n            EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n            EventHandler.add(this.contentModule.getDocument(), 'mousedown', this.onDocumentClick, this);\n        }\n    };\n    Image.prototype.undoStack = function (args) {\n        if (args.subCommand.toLowerCase() === 'undo' || args.subCommand.toLowerCase() === 'redo') {\n            for (var i = 0; i < this.parent.formatter.getUndoRedoStack().length; i++) {\n                var temp = this.parent.createElement('div');\n                var contentElem = parseHtml(this.parent.formatter.getUndoRedoStack()[i].text);\n                temp.appendChild(contentElem);\n                var img = temp.querySelectorAll('img');\n                if (temp.querySelector('.e-img-resize') && img.length > 0) {\n                    for (var j = 0; j < img.length; j++) {\n                        img[j].style.outline = '';\n                    }\n                    detach(temp.querySelector('.e-img-resize'));\n                    this.parent.formatter.getUndoRedoStack()[i].text = temp.innerHTML;\n                }\n            }\n        }\n    };\n    Image.prototype.resizeEnd = function (e) {\n        this.resizeBtnInit();\n        this.imgEle.parentElement.style.cursor = 'auto';\n        if (Browser.isDevice) {\n            removeClass([e.target.parentElement], 'e-mob-span');\n        }\n        var args = { event: e, requestType: 'images' };\n        this.parent.trigger(events.resizeStop, args);\n        var pageX = this.getPointX(e);\n        var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n            this.parent.element.getBoundingClientRect().top + e.clientY : e.pageY;\n        this.parent.formatter.editorManager.observer.on(events.checkUndo, this.undoStack, this);\n        this.parent.formatter.saveData();\n    };\n    Image.prototype.resizeStart = function (e) {\n        if (e.target.tagName === 'IMG') {\n            this.parent.preventDefaultResize(e);\n            var img = e.target;\n            if (this.imgResizeDiv && this.contentModule.getEditPanel().contains(this.imgResizeDiv)) {\n                detach(this.imgResizeDiv);\n            }\n            this.imageResize(img);\n        }\n        if (e.target.classList.contains('e-rte-imageboxmark')) {\n            if (this.parent.formatter.getUndoRedoStack().length === 0) {\n                this.parent.formatter.saveData();\n            }\n            this.pageX = this.getPointX(e);\n            this.pageY = this.getPointY(e);\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            this.resizeBtnInit();\n            if (this.quickToolObj) {\n                this.quickToolObj.imageQTBar.hidePopup();\n            }\n            if (e.target.classList.contains('e-rte-topLeft')) {\n                this.resizeBtnStat.topLeft = true;\n            }\n            if (e.target.classList.contains('e-rte-topRight')) {\n                this.resizeBtnStat.topRight = true;\n            }\n            if (e.target.classList.contains('e-rte-botLeft')) {\n                this.resizeBtnStat.botLeft = true;\n            }\n            if (e.target.classList.contains('e-rte-botRight')) {\n                this.resizeBtnStat.botRight = true;\n            }\n            if (Browser.isDevice && this.contentModule.getEditPanel().contains(this.imgResizeDiv) &&\n                !this.imgResizeDiv.classList.contains('e-mob-span')) {\n                addClass([this.imgResizeDiv], 'e-mob-span');\n            }\n            else {\n                var args = { event: e, requestType: 'images' };\n                this.parent.trigger(events.resizeStart, args);\n                if (args.cancel) {\n                    this.cancelResizeAction();\n                    return;\n                }\n            }\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n        }\n    };\n    Image.prototype.imageClick = function (e) {\n        if (Browser.isDevice) {\n            if ((e.target.tagName === 'IMG' &&\n                e.target.parentElement.tagName === 'A') ||\n                (e.target.tagName === 'IMG')) {\n                this.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n                e.target.focus();\n            }\n            else {\n                if (!this.parent.readonly) {\n                    this.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n                }\n            }\n        }\n        if (e.target.tagName === 'IMG' &&\n            e.target.parentElement.tagName === 'A') {\n            e.preventDefault();\n        }\n    };\n    Image.prototype.imageResize = function (e) {\n        this.resizeBtnInit();\n        this.imgEle = e;\n        addClass([this.imgEle], 'e-resize');\n        this.imgResizeDiv = this.parent.createElement('span', { className: 'e-img-resize', id: this.rteID + '_imgResize' });\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-topLeft', styles: 'cursor: nwse-resize'\n        }));\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-topRight', styles: 'cursor: nesw-resize'\n        }));\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-botLeft', styles: 'cursor: nesw-resize'\n        }));\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-botRight', styles: 'cursor: nwse-resize'\n        }));\n        if (Browser.isDevice) {\n            addClass([this.imgResizeDiv], 'e-mob-rte');\n        }\n        e.style.outline = '2px solid #4a90e2';\n        this.imgResizePos(e, this.imgResizeDiv);\n        this.resizeImgDupPos(e);\n        this.contentModule.getEditPanel().appendChild(this.imgResizeDiv);\n        EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n    };\n    Image.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Image.prototype.getPointY = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageY;\n        }\n        else {\n            return e.pageY;\n        }\n    };\n    Image.prototype.imgResizePos = function (e, imgResizeDiv) {\n        var pos = this.calcPos(e);\n        var top = pos.top;\n        var left = pos.left;\n        var imgWid = e.width;\n        var imgHgt = e.height;\n        var borWid = (Browser.isDevice) ? (4 * parseInt((e.style.outline.slice(-3)), 10)) + 2 :\n            (2 * parseInt((e.style.outline.slice(-3)), 10)) + 2; //span border width + image outline width\n        var devWid = ((Browser.isDevice) ? 0 : 2); // span border width\n        imgResizeDiv.querySelector('.e-rte-botLeft').style.left = (left - borWid) + 'px';\n        imgResizeDiv.querySelector('.e-rte-botLeft').style.top = ((imgHgt - borWid) + top) + 'px';\n        imgResizeDiv.querySelector('.e-rte-botRight').style.left = ((imgWid - (borWid - devWid)) + left) + 'px';\n        imgResizeDiv.querySelector('.e-rte-botRight').style.top = ((imgHgt - borWid) + top) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topRight').style.left = ((imgWid - (borWid - devWid)) + left) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topRight').style.top = (top - (borWid)) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topLeft').style.left = (left - borWid) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topLeft').style.top = (top - borWid) + 'px';\n    };\n    Image.prototype.calcPos = function (elem) {\n        var ignoreOffset = ['TD', 'TH', 'TABLE'];\n        var parentOffset = { top: 0, left: 0 };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = ((elem.offsetParent && (elem.offsetParent.classList.contains('e-img-caption') ||\n            ignoreOffset.indexOf(elem.offsetParent.tagName) > -1)) ?\n            closest(elem, '#' + this.parent.getID() + '_rte-edit-view') : elem.offsetParent) || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Image.prototype.setAspectRatio = function (img, expectedX, expectedY) {\n        if (isNullOrUndefined(img.width)) {\n            return;\n        }\n        var width = img.style.width !== '' ? parseInt(img.style.width, 10) : img.width;\n        var height = img.style.height !== '' ? parseInt(img.style.height, 10) : img.height;\n        if (width > height) {\n            if (this.parent.insertImageSettings.resizeByPercent) {\n                img.style.width = this.pixToPerc((width / height * expectedY), (img.previousElementSibling || img.parentElement)) + '%';\n                img.style.height = null;\n                img.removeAttribute('height');\n            }\n            else if (img.style.width !== '') {\n                img.style.width = (width / height * expectedY) + 'px';\n                img.style.height = expectedY + 'px';\n            }\n            else {\n                img.setAttribute('width', (width / height * expectedY).toString());\n                img.setAttribute('height', expectedY.toString());\n            }\n        }\n        else if (height > width) {\n            if (this.parent.insertImageSettings.resizeByPercent) {\n                img.style.width = this.pixToPerc(expectedX, (img.previousElementSibling || img.parentElement)) + '%';\n                img.style.height = null;\n                img.removeAttribute('height');\n            }\n            else if (img.style.width !== '') {\n                img.style.width = expectedX + 'px';\n                img.style.height = (height / width * expectedX) + 'px';\n            }\n            else {\n                img.setAttribute('width', expectedX.toString());\n                img.setAttribute('height', (height / width * expectedX).toString());\n            }\n        }\n        else {\n            if (this.parent.insertImageSettings.resizeByPercent) {\n                img.style.width = this.pixToPerc(expectedX, (img.previousElementSibling || img.parentElement)) + '%';\n                img.style.height = null;\n                img.removeAttribute('height');\n            }\n            else if (img.style.width !== '') {\n                img.style.width = expectedX + 'px';\n                img.style.height = expectedX + 'px';\n            }\n            else {\n                img.setAttribute('width', expectedX.toString());\n                img.setAttribute('height', expectedX.toString());\n            }\n        }\n    };\n    Image.prototype.pixToPerc = function (expected, parentEle) {\n        return expected / parseFloat(getComputedStyle(parentEle).width) * 100;\n    };\n    Image.prototype.imgDupMouseMove = function (width, height, e) {\n        var args = { event: e, requestType: 'images' };\n        this.parent.trigger(events.onResize, args);\n        if (args.cancel) {\n            this.cancelResizeAction();\n            return;\n        }\n        if ((parseInt(this.parent.insertImageSettings.minWidth, 10) >= parseInt(width, 10) ||\n            parseInt(this.parent.insertImageSettings.maxWidth, 10) <= parseInt(width, 10))) {\n            return;\n        }\n        if (!this.parent.insertImageSettings.resizeByPercent &&\n            (parseInt(this.parent.insertImageSettings.minHeight, 10) >= parseInt(height, 10) ||\n                parseInt(this.parent.insertImageSettings.maxHeight, 10) <= parseInt(height, 10))) {\n            return;\n        }\n        this.imgEle.parentElement.style.cursor = 'pointer';\n        this.setAspectRatio(this.imgEle, parseInt(width, 10), parseInt(height, 10));\n        this.resizeImgDupPos(this.imgEle);\n        this.imgResizePos(this.imgEle, this.imgResizeDiv);\n        this.parent.setContentHeight('', false);\n    };\n    Image.prototype.resizing = function (e) {\n        var pageX = this.getPointX(e);\n        var pageY = this.getPointY(e);\n        var mouseX = (this.resizeBtnStat.botLeft || this.resizeBtnStat.topLeft) ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var mouseY = (this.resizeBtnStat.topLeft || this.resizeBtnStat.topRight) ? -(pageY - this.pageY) : (pageY - this.pageY);\n        var width = parseInt(this.imgDupPos.width, 10) + mouseX;\n        var height = parseInt(this.imgDupPos.height, 10) + mouseY;\n        this.pageX = pageX;\n        this.pageY = pageY;\n        if (this.resizeBtnStat.botRight) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.botLeft) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.topRight) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.topLeft) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n    };\n    Image.prototype.cancelResizeAction = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        if (this.imgEle && this.imgResizeDiv && this.contentModule.getEditPanel().contains(this.imgResizeDiv)) {\n            detach(this.imgResizeDiv);\n            this.imgEle.style.outline = '';\n            this.imgResizeDiv = null;\n            this.pageX = null;\n            this.pageY = null;\n        }\n    };\n    Image.prototype.resizeImgDupPos = function (e) {\n        this.imgDupPos = {\n            width: (e.style.height !== '') ? this.imgEle.style.width : e.width + 'px',\n            height: (e.style.height !== '') ? this.imgEle.style.height : e.height + 'px'\n        };\n    };\n    Image.prototype.resizeBtnInit = function () {\n        return this.resizeBtnStat = { botLeft: false, botRight: false, topRight: false, topLeft: false };\n    };\n    Image.prototype.onToolbarAction = function (args) {\n        if (isIDevice()) {\n            this.parent.notify(events.selectionRestore, {});\n        }\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'Replace':\n                this.parent.notify(events.insertImage, args);\n                break;\n            case 'Caption':\n                this.parent.notify(events.imageCaption, args);\n                break;\n            case 'InsertLink':\n                this.parent.notify(events.imageLink, args);\n                break;\n            case 'AltText':\n                this.parent.notify(events.imageAlt, args);\n                break;\n            case 'Remove':\n                this.parent.notify(events.imageDelete, args);\n                break;\n            case 'Dimension':\n                this.parent.notify(events.imageSize, args);\n                break;\n            case 'OpenImageLink':\n                this.openImgLink(args);\n                break;\n            case 'EditImageLink':\n                this.editImgLink(args);\n                break;\n            case 'RemoveImageLink':\n                this.removeImgLink(args);\n                break;\n        }\n    };\n    Image.prototype.openImgLink = function (e) {\n        var target = e.selectParent[0].parentNode.target === '' ? '_self' : '_blank';\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            url: e.selectParent[0].parentNode.href, target: target, selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n    };\n    Image.prototype.editImgLink = function (e) {\n        var selectParentEle = e.selectParent[0].parentNode;\n        var linkUpdate = this.i10n.getConstant('dialogUpdate');\n        var inputDetails = {\n            url: selectParentEle.href, target: selectParentEle.target,\n            header: 'Edit Link', btnText: linkUpdate\n        };\n        this.insertImgLink(e, inputDetails);\n    };\n    Image.prototype.removeImgLink = function (e) {\n        e.selection.restore();\n        var insertEle = (this.contentModule.getEditPanel().contains(this.captionEle) && closest(this.captionEle, 'a')) ?\n            this.captionEle : e.selectNode[0];\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            insertElement: insertEle, selectParent: e.selectParent,\n            subCommand: e.args.item.subCommand\n        });\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n            if (!isNullOrUndefined(e.selectParent)) {\n                removeClass([e.selectParent[0]], 'e-img-focus');\n            }\n        }\n    };\n    Image.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        var range;\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            if (!originalEvent.ctrlKey && originalEvent.key && (originalEvent.key.length === 1 || originalEvent.action === 'enter') &&\n                (selectParentEle[0].tagName === 'IMG') && selectParentEle[0].parentElement) {\n                var prev = selectParentEle[0].parentElement.childNodes[0];\n                if (this.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n                    this.remvoeResizEle();\n                }\n                this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), prev, prev, prev.textContent.length, prev.textContent.length);\n                removeClass([selectParentEle[0]], 'e-img-focus');\n                this.quickToolObj.imageQTBar.hidePopup();\n            }\n        }\n        if (originalEvent.ctrlKey && (originalEvent.keyCode === 89 || originalEvent.keyCode === 90)) {\n            this.undoStack({ subCommand: (originalEvent.keyCode === 90 ? 'undo' : 'redo') });\n        }\n        if (originalEvent.keyCode === 8 || originalEvent.keyCode === 46) {\n            if (selectNodeEle && selectNodeEle[0].nodeName === 'IMG') {\n                originalEvent.preventDefault();\n                var event_1 = {\n                    selectNode: selectNodeEle, selection: save, selectParent: selectParentEle,\n                    args: {\n                        item: { command: 'Images', subCommand: 'Remove' },\n                        originalEvent: originalEvent\n                    }\n                };\n                this.deleteImg(event_1);\n            }\n            if (this.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n                this.remvoeResizEle();\n            }\n        }\n        switch (originalEvent.action) {\n            case 'escape':\n                if (!isNullOrUndefined(this.dialogObj)) {\n                    this.dialogObj.close();\n                }\n                break;\n            case 'insert-image':\n                if (this.parent.editorMode === 'HTML') {\n                    this.insertImage({\n                        args: {\n                            item: { command: 'Images', subCommand: 'Image' },\n                            originalEvent: originalEvent\n                        },\n                        selectNode: selectNodeEle,\n                        selection: save,\n                        selectParent: selectParentEle\n                    });\n                }\n                else {\n                    this.insertImage({\n                        args: {\n                            item: { command: 'Images', subCommand: 'Image' },\n                            originalEvent: originalEvent\n                        },\n                        member: 'image',\n                        text: this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),\n                        module: 'Markdown',\n                        name: 'insertImage'\n                    });\n                }\n                originalEvent.preventDefault();\n                break;\n        }\n    };\n    Image.prototype.alignmentSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Images') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n        selectNodeEle = (selectNodeEle[0].nodeName === 'IMG') ? selectNodeEle : [this.imgEle];\n        var args = { args: e, selectNode: selectNodeEle };\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        switch (item.subCommand) {\n            case 'JustifyLeft':\n                this.justifyImageLeft(args);\n                break;\n            case 'JustifyCenter':\n                this.justifyImageCenter(args);\n                break;\n            case 'JustifyRight':\n                this.justifyImageRight(args);\n                break;\n            case 'Inline':\n                this.inline(args);\n                break;\n            case 'Break':\n                this.break(args);\n                break;\n        }\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n            removeClass([selectNodeEle[0]], 'e-img-focus');\n        }\n        this.cancelResizeAction();\n    };\n    Image.prototype.imageWithLinkQTBarItemUpdate = function () {\n        var separator;\n        var items = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item');\n        for (var i = 0; i < items.length; i++) {\n            if (items[i].getAttribute('title') === this.i10n.getConstant('openLink') ||\n                items[i].getAttribute('title') === this.i10n.getConstant('editLink') ||\n                items[i].getAttribute('title') === this.i10n.getConstant('removeLink')) {\n                addClass([items[i]], 'e-link-groups');\n                items[i].style.display = 'none';\n            }\n            else if (items[i].getAttribute('title') === 'Insert Link') {\n                items[i].style.display = '';\n            }\n            else if (items[i].classList.contains('e-rte-horizontal-separator')) {\n                separator = items[i];\n                detach(items[i]);\n            }\n        }\n        var newItems = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item:not(.e-link-groups)');\n        this.quickToolObj.imageQTBar.addQTBarItem(['-'], Math.round(newItems.length / 2));\n    };\n    Image.prototype.showImageQuickToolbar = function (e) {\n        var _this = this;\n        if (e.type !== 'Images' || isNullOrUndefined(this.parent.quickToolbarModule)\n            || isNullOrUndefined(this.parent.quickToolbarModule.imageQTBar)) {\n            return;\n        }\n        this.quickToolObj = this.parent.quickToolbarModule;\n        var args = e.args;\n        var target;\n        [].forEach.call(e.elements, function (element, index) {\n            if (index === 0) {\n                target = element;\n            }\n        });\n        if (target && !closest(target, 'a')) {\n            this.imageWithLinkQTBarItemUpdate();\n        }\n        if (target.nodeName === 'IMG') {\n            addClass([target], ['e-img-focus']);\n        }\n        var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n            this.parent.element.getBoundingClientRect().top + args.clientY : args.pageY;\n        if (this.parent.quickToolbarModule.imageQTBar) {\n            if (e.isNotify) {\n                setTimeout(function () { _this.quickToolObj.imageQTBar.showPopup(args.pageX, pageY, target); }, 400);\n            }\n            else {\n                this.quickToolObj.imageQTBar.showPopup(args.pageX, pageY, target);\n            }\n        }\n    };\n    Image.prototype.hideImageQuickToolbar = function () {\n        if (!isNullOrUndefined(this.contentModule.getEditPanel().querySelector('.e-img-focus'))) {\n            removeClass([this.contentModule.getEditPanel().querySelector('.e-img-focus')], 'e-img-focus');\n            if (this.quickToolObj && this.quickToolObj.imageQTBar && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n                this.quickToolObj.imageQTBar.hidePopup();\n            }\n        }\n    };\n    Image.prototype.editAreaClickHandler = function (e) {\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.imageQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.imageQTBar.element.classList.contains('e-rte-pop');\n            if (target.nodeName === 'IMG' && this.parent.quickToolbarModule) {\n                if (isPopupOpen) {\n                    return;\n                }\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), target);\n                if (isIDevice()) {\n                    this.parent.notify(events.selectionSave, e);\n                }\n                addClass([target], 'e-img-focus');\n                var items = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item');\n                var separator = void 0;\n                if (closest(target, 'a')) {\n                    for (var i = 0; i < items.length; i++) {\n                        if (items[i].getAttribute('title') === this.i10n.getConstant('openLink') ||\n                            items[i].getAttribute('title') === this.i10n.getConstant('editLink') ||\n                            items[i].getAttribute('title') === this.i10n.getConstant('removeLink')) {\n                            items[i].style.display = '';\n                            removeClass([items[i]], 'e-link-groups');\n                        }\n                        else if (items[i].getAttribute('title') === 'Insert Link') {\n                            items[i].style.display = 'none';\n                        }\n                        else if (items[i].classList.contains('e-rte-horizontal-separator')) {\n                            separator = items[i];\n                            detach(items[i]);\n                        }\n                    }\n                    var newItems = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item:not(.e-link-groups)');\n                    this.quickToolObj.imageQTBar.addQTBarItem(['-'], Math.round(newItems.length / 2));\n                }\n                else if (!closest(target, 'a')) {\n                    this.imageWithLinkQTBarItemUpdate();\n                }\n                this.showImageQuickToolbar({ args: args, type: 'Images', elements: [args.target] });\n            }\n            else {\n                this.hideImageQuickToolbar();\n            }\n        }\n    };\n    Image.prototype.insertImgLink = function (e, inputDetails) {\n        var _this = this;\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        this.imagDialog(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var linkWrap = this.parent.createElement('div', { className: 'e-img-linkwrap' });\n            var linkUrl = this.i10n.getConstant('linkurl');\n            var content = '<div class=\"e-rte-field\">' +\n                '<input type=\"text\" data-role =\"none\" class=\"e-input e-img-link\" spellcheck=\"false\" placeholder=\"' + linkUrl + '\"/></div>' +\n                '<div class=\"e-rte-label\"></div>' + '<div class=\"e-rte-field\">' +\n                '<input type=\"checkbox\" class=\"e-rte-linkTarget\"  data-role =\"none\"></div>';\n            var contentElem = parseHtml(content);\n            linkWrap.appendChild(contentElem);\n            var linkTarget = linkWrap.querySelector('.e-rte-linkTarget');\n            var inputLink = linkWrap.querySelector('.e-img-link');\n            var linkOpenLabel = this.i10n.getConstant('linkOpenInNewWindow');\n            this.checkBoxObj = new CheckBox({\n                label: linkOpenLabel, checked: true, enableRtl: this.parent.enableRtl, change: function (e) {\n                    if (e.checked) {\n                        target_1 = '_blank';\n                    }\n                    else {\n                        target_1 = null;\n                    }\n                }\n            });\n            this.checkBoxObj.createElement = this.parent.createElement;\n            this.checkBoxObj.appendTo(linkTarget);\n            var target_1 = this.checkBoxObj.checked ? '_blank' : null;\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var linkargs_1 = {\n                args: e.args,\n                selfImage: this, selection: e.selection,\n                selectNode: e.selectNode, selectParent: e.selectParent, link: inputLink, target: target_1\n            };\n            this.dialogObj.setProperties({\n                height: 'inherit',\n                width: '290px',\n                header: this.parent.localeObj.getConstant('imageInsertLinkHeader'),\n                content: linkWrap,\n                position: { X: 'center', Y: 'center' },\n                buttons: [{\n                        click: function (e) { _this.insertlink(linkargs_1); },\n                        buttonModel: {\n                            content: linkUpdate, cssClass: 'e-flat e-update-link', isPrimary: true\n                        }\n                    }]\n            });\n            if (!isNullOrUndefined(inputDetails)) {\n                inputLink.value = inputDetails.url;\n                (inputDetails.target) ? this.checkBoxObj.checked = true : this.checkBoxObj.checked = false;\n                this.dialogObj.header = inputDetails.header;\n            }\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            this.dialogObj.content.querySelector('input').focus();\n        }\n    };\n    Image.prototype.insertAltText = function (e) {\n        var _this = this;\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        this.imagDialog(e);\n        var altText = this.i10n.getConstant('altText');\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var altWrap = this.parent.createElement('div', { className: 'e-img-altwrap' });\n            var altHeader = this.i10n.getConstant('alternateHeader');\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var getAlt = (e.selectNode[0].getAttribute('alt') === null) ? '' :\n                e.selectNode[0].getAttribute('alt');\n            var content = '<div class=\"e-rte-field\">' +\n                '<input type=\"text\" spellcheck=\"false\" value=\"' + getAlt + '\" class=\"e-input e-img-alt\" placeholder=\"' + altText + '\"/>' +\n                '</div>';\n            var contentElem = parseHtml(content);\n            altWrap.appendChild(contentElem);\n            var inputAlt = altWrap.querySelector('.e-img-alt');\n            var altArgs_1 = {\n                args: e.args, selfImage: this, selection: e.selection, selectNode: e.selectNode,\n                alt: inputAlt\n            };\n            this.dialogObj.setProperties({\n                height: 'inherit', width: '290px', header: altHeader, content: altWrap, position: { X: 'center', Y: 'center' },\n                buttons: [{\n                        click: function (e) { _this.insertAlt(altArgs_1); },\n                        buttonModel: {\n                            content: linkUpdate, cssClass: 'e-flat e-update-alt', isPrimary: true\n                        }\n                    }]\n            });\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            this.dialogObj.content.querySelector('input').focus();\n        }\n    };\n    Image.prototype.insertAlt = function (e) {\n        if (!isNullOrUndefined(e.alt)) {\n            e.selection.restore();\n            if (this.parent.formatter.getUndoRedoStack().length === 0) {\n                this.parent.formatter.saveData();\n            }\n            var altText = e.alt.value;\n            this.parent.formatter.process(this.parent, e.args, e.args, {\n                altText: altText, selectNode: e.selectNode,\n                subCommand: e.args.item.subCommand\n            });\n            this.dialogObj.hide({ returnValue: false });\n        }\n    };\n    Image.prototype.insertlink = function (e) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        var url = e.link.value;\n        if (url === '') {\n            addClass([e.link], 'e-error');\n            e.link.setSelectionRange(0, url.length);\n            e.link.focus();\n            return;\n        }\n        if (!this.isUrl(url)) {\n            url = 'http://' + url;\n        }\n        else {\n            removeClass([e.link], 'e-error');\n        }\n        var proxy = e.selfImage;\n        if (proxy.parent.editorMode === 'HTML') {\n            e.selection.restore();\n        }\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        if (e.selectNode[0].parentElement.nodeName === 'A') {\n            proxy.parent.formatter.process(proxy.parent, e.args, e.args, {\n                url: url, target: proxy.checkBoxObj.checked ? '_blank' : null, selectNode: e.selectNode,\n                subCommand: e.args.item.subCommand\n            });\n            proxy.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        proxy.parent.formatter.process(proxy.parent, e.args, e.args, {\n            url: url, target: proxy.checkBoxObj.checked ? '_blank' : null, selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n        proxy.dialogObj.hide({ returnValue: false });\n    };\n    Image.prototype.isUrl = function (url) {\n        var regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/gi;\n        return regexp.test(url);\n    };\n    Image.prototype.deleteImg = function (e) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        e.selection.restore();\n        if (this.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n            this.remvoeResizEle();\n        }\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            selectNode: e.selectNode,\n            captionClass: classes.CLS_CAPTION,\n            subCommand: e.args.item.subCommand\n        });\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n        }\n        this.cancelResizeAction();\n    };\n    Image.prototype.caption = function (e) {\n        var selectNode = e.selectNode[0];\n        if (selectNode.nodeName !== 'IMG') {\n            return;\n        }\n        e.selection.restore();\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        this.cancelResizeAction();\n        addClass([selectNode], 'e-rte-image');\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Caption';\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLS_CAPTION))) {\n            detach(closest(selectNode, '.' + classes.CLS_CAPTION));\n            if (selectNode.parentElement.tagName === 'A') {\n                this.parent.formatter.process(this.parent, e.args, e.args, { insertElement: selectNode.parentElement, selectNode: e.selectNode, subCommand: subCommand });\n            }\n            else {\n                this.parent.formatter.process(this.parent, e.args, e.args, { insertElement: selectNode, selectNode: e.selectNode, subCommand: subCommand });\n            }\n        }\n        else {\n            this.captionEle = this.parent.createElement('span', {\n                className: classes.CLS_CAPTION,\n                attrs: { contenteditable: 'false', draggable: 'false' }\n            });\n            var imgWrap = this.parent.createElement('span', { className: 'e-img-wrap' });\n            var imgInner = this.parent.createElement('span', { className: 'e-img-inner', attrs: { contenteditable: 'true' } });\n            imgWrap.appendChild(e.selectNode[0]);\n            imgWrap.appendChild(imgInner);\n            var imgCaption = this.i10n.getConstant('imageCaption');\n            imgInner.innerHTML = imgCaption;\n            this.captionEle.appendChild(imgWrap);\n            if (selectNode.classList.contains(classes.CLS_IMGINLINE)) {\n                addClass([this.captionEle], classes.CLS_CAPINLINE);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGBREAK)) {\n                addClass([this.captionEle], classes.CLS_IMGBREAK);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGLEFT)) {\n                addClass([this.captionEle], classes.CLS_IMGLEFT);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGRIGHT)) {\n                addClass([this.captionEle], classes.CLS_IMGRIGHT);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGCENTER)) {\n                addClass([this.captionEle], classes.CLS_IMGCENTER);\n            }\n            this.parent.formatter.process(this.parent, e.args, e.args, { insertElement: this.captionEle, selectNode: e.selectNode, subCommand: subCommand });\n            this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), imgInner.childNodes[0], imgInner.childNodes[0], 0, imgInner.childNodes[0].textContent.length);\n        }\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n            removeClass([selectNode], 'e-img-focus');\n        }\n    };\n    Image.prototype.imageSize = function (e) {\n        var _this = this;\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        this.imagDialog(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var imgSizeHeader = this.i10n.getConstant('imageSizeHeader');\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var dialogContent = this.imgsizeInput(e);\n            var selectObj_1 = { args: e.args, selfImage: this, selection: e.selection, selectNode: e.selectNode };\n            this.dialogObj.setProperties({\n                height: 'inherit', width: '290px', header: imgSizeHeader, content: dialogContent, position: { X: 'center', Y: 'center' },\n                buttons: [{\n                        click: function (e) { _this.insertSize(selectObj_1); },\n                        buttonModel: {\n                            content: linkUpdate, cssClass: 'e-flat e-update-size', isPrimary: true\n                        }\n                    }]\n            });\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            this.dialogObj.content.querySelector('input').focus();\n        }\n    };\n    Image.prototype.break = function (e) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Break';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.inline = function (e) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Inline';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.justifyImageLeft = function (e) {\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'JustifyLeft';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.justifyImageRight = function (e) {\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'JustifyRight';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.justifyImageCenter = function (e) {\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'JustifyCenter';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.imagDialog = function (e) {\n        var _this = this;\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        var imgDialog = this.parent.createElement('div', { className: 'e-rte-img-dialog', id: this.rteID + '_image' });\n        this.parent.element.appendChild(imgDialog);\n        var imgInsert = this.i10n.getConstant('dialogInsert');\n        var imglinkCancel = this.i10n.getConstant('dialogCancel');\n        var imgHeader = this.i10n.getConstant('imageHeader');\n        var selection = e.selection;\n        var selectObj = { selfImage: this, selection: e.selection, args: e.args, selectParent: e.selectParent };\n        this.dialogObj = new Dialog({\n            header: imgHeader,\n            cssClass: classes.CLS_RTE_ELEMENTS,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px', height: 'inherit',\n            position: { X: 'center', Y: (Browser.isDevice) ? 'center' : 'top' },\n            isModal: Browser.isDevice,\n            buttons: [{\n                    click: this.insertImageUrl.bind(selectObj),\n                    buttonModel: { content: imgInsert, cssClass: 'e-flat e-insertImage', isPrimary: true }\n                },\n                {\n                    click: function (e) { _this.cancelDialog(e); },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: imglinkCancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                _this.parent.isBlur = false;\n                if (event && event.event.returnValue) {\n                    if (_this.parent.editorMode === 'HTML') {\n                        selection.restore();\n                    }\n                    else {\n                        _this.parent.formatter.editorManager.markdownSelection.restore(_this.parent.contentModule.getEditPanel());\n                    }\n                }\n                _this.dialogObj.destroy();\n                detach(_this.dialogObj.element);\n                _this.dialogObj = null;\n            },\n        });\n        this.dialogObj.createElement = this.parent.createElement;\n        this.dialogObj.appendTo(imgDialog);\n        imgDialog.style.maxHeight = 'inherit';\n        if (this.quickToolObj) {\n            if (this.quickToolObj.imageQTBar && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n                this.quickToolObj.imageQTBar.hidePopup();\n                if (!isNullOrUndefined(e.selectParent)) {\n                    removeClass([e.selectParent[0]], 'e-img-focus');\n                }\n            }\n            if (this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n                this.quickToolObj.inlineQTBar.hidePopup();\n            }\n        }\n    };\n    Image.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.dialogObj.hide({ returnValue: true });\n    };\n    Image.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (target.nodeName === 'IMG') {\n            this.imgEle = target;\n        }\n        if (!isNullOrUndefined(this.dialogObj) && ((!closest(target, '#' + this.dialogObj.element.id) && this.parent.toolbarSettings.enable && this.parent.getToolbarElement() &&\n            !this.parent.getToolbarElement().contains(e.target)) ||\n            (this.parent.getToolbarElement() && this.parent.getToolbarElement().contains(e.target) &&\n                !closest(target, '#' + this.parent.getID() + '_toolbar_Image') &&\n                !target.querySelector('#' + this.parent.getID() + '_toolbar_Image')))) {\n            this.dialogObj.hide({ returnValue: true });\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n        if (e.target.tagName !== 'IMG' && this.imgResizeDiv && !(this.quickToolObj &&\n            this.quickToolObj.imageQTBar && this.quickToolObj.imageQTBar.element.contains(e.target)) &&\n            this.contentModule.getEditPanel().contains(this.imgResizeDiv)) {\n            this.cancelResizeAction();\n        }\n        if (target.tagName !== 'IMG' && this.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n            this.remvoeResizEle();\n            this.contentModule.getEditPanel().querySelector('img').style.outline = '';\n        }\n    };\n    Image.prototype.remvoeResizEle = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        detach(this.contentModule.getEditPanel().querySelector('.e-img-resize'));\n    };\n    Image.prototype.imageUrlPopup = function (e) {\n        var imgUrl = this.parent.createElement('div', { className: 'imgUrl' });\n        var placeUrl = this.i10n.getConstant('imageUrl');\n        this.inputUrl = this.parent.createElement('input', {\n            className: 'e-input e-img-url',\n            attrs: { placeholder: placeUrl, spellcheck: 'false' }\n        });\n        imgUrl.appendChild(this.inputUrl);\n        return imgUrl;\n    };\n    Image.prototype.insertImageUrl = function (e) {\n        var proxy = this.selfImage;\n        var url = proxy.inputUrl.value;\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        if (!isNullOrUndefined(proxy.uploadUrl) && proxy.uploadUrl.url !== '') {\n            proxy.uploadUrl.cssClass = (proxy.parent.insertImageSettings.display === 'inline' ?\n                classes.CLS_IMGINLINE : classes.CLS_IMGBREAK);\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, proxy.uploadUrl);\n            proxy.dialogObj.hide({ returnValue: false });\n            proxy.uploadUrl.url = '';\n        }\n        else if (url !== '') {\n            if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(this.selection.range.startContainer.parentNode, '#' + proxy.contentModule.getPanel().id))) {\n                proxy.contentModule.getEditPanel().focus();\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n                this.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n                this.selectParent = proxy.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            }\n            var regex = /[\\w-]+.(jpg|png|jpeg|gif)/g;\n            var matchUrl = (!isNullOrUndefined(url.match(regex)) && proxy.parent.editorMode === 'HTML') ? url.match(regex)[0] : '';\n            var value = {\n                cssClass: (proxy.parent.insertImageSettings.display === 'inline' ? classes.CLS_IMGINLINE : classes.CLS_IMGBREAK),\n                url: url, selection: this.selection, altText: matchUrl,\n                selectParent: this.selectParent, width: {\n                    width: proxy.parent.insertImageSettings.width, minWidth: proxy.parent.insertImageSettings.minWidth,\n                    maxWidth: proxy.parent.insertImageSettings.maxWidth\n                },\n                height: {\n                    height: proxy.parent.insertImageSettings.height, minHeight: proxy.parent.insertImageSettings.minHeight,\n                    maxHeight: proxy.parent.insertImageSettings.maxHeight\n                }\n            };\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, value);\n            proxy.dialogObj.hide({ returnValue: false });\n        }\n    };\n    Image.prototype.imgsizeInput = function (e) {\n        var selectNode = e.selectNode[0];\n        var imgHeight = this.i10n.getConstant('imageHeight');\n        var imgWidth = this.i10n.getConstant('imageWidth');\n        var imgSizeWrap = this.parent.createElement('div', { className: 'e-img-sizewrap' });\n        var widthVal = (selectNode.getAttribute('width') === 'auto' ||\n            isNullOrUndefined(selectNode.getAttribute('width'))) ? selectNode.width : selectNode.getClientRects()[0].width;\n        var heightVal = (selectNode.getAttribute('height') === 'auto' ||\n            isNullOrUndefined(selectNode.getAttribute('height'))) ? selectNode.height : selectNode.getClientRects()[0].height;\n        var content = '<div class=\"e-rte-label\"><label>' + imgWidth +\n            '</label></div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"imgwidth\" class=\"e-img-width\" value=' +\n            widthVal\n            + ' /></div>' +\n            '<div class=\"e-rte-label\">' + '<label>' + imgHeight + '</label></div><div class=\"e-rte-field\"> ' +\n            '<input type=\"text\" data-role =\"none\" id=\"imgheight\" class=\"e-img-height\" value=' +\n            heightVal\n            + ' /></div>';\n        var contentElem = parseHtml(content);\n        imgSizeWrap.appendChild(contentElem);\n        var widthNum = new NumericTextBox({\n            format: '###.### px', min: this.parent.insertImageSettings.minWidth,\n            max: this.parent.insertImageSettings.maxWidth,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        widthNum.createElement = this.parent.createElement;\n        widthNum.appendTo(imgSizeWrap.querySelector('#imgwidth'));\n        var heightNum = new NumericTextBox({\n            format: '###.### px', min: this.parent.insertImageSettings.minHeight,\n            max: this.parent.insertImageSettings.maxHeight,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        heightNum.createElement = this.parent.createElement;\n        heightNum.appendTo(imgSizeWrap.querySelector('#imgheight'));\n        return imgSizeWrap;\n    };\n    Image.prototype.insertSize = function (e) {\n        e.selection.restore();\n        var proxy = e.selfImage;\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        var dialogEle = proxy.dialogObj.element;\n        var width = parseFloat(dialogEle.querySelector('.e-img-width').value);\n        var height = parseFloat(dialogEle.parentElement.querySelector('.e-img-height').value);\n        proxy.parent.formatter.process(this.parent, e.args, e.args, {\n            width: width, height: height, selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n        if (this.imgResizeDiv) {\n            proxy.imgResizePos(e.selectNode[0], this.imgResizeDiv);\n        }\n        proxy.dialogObj.hide({ returnValue: true });\n    };\n    Image.prototype.insertImage = function (e) {\n        this.imagDialog(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var dialogContent = this.parent.createElement('div', { className: 'e-img-content' });\n            if ((!isNullOrUndefined(this.parent.insertImageSettings.path) && this.parent.editorMode === 'Markdown')\n                || this.parent.editorMode === 'HTML') {\n                dialogContent.appendChild(this.imgUpload(e));\n            }\n            var linkHeader = this.parent.createElement('div', { className: 'e-linkheader' });\n            var linkHeaderText = this.i10n.getConstant('imageLinkHeader');\n            if (this.parent.editorMode === 'HTML') {\n                linkHeader.innerHTML = linkHeaderText;\n            }\n            else {\n                linkHeader.innerHTML = this.i10n.getConstant('mdimageLink');\n            }\n            dialogContent.appendChild(linkHeader);\n            dialogContent.appendChild(this.imageUrlPopup(e));\n            if (e.selectNode && e.selectNode[0].nodeName === 'IMG') {\n                this.dialogObj.setProperties({\n                    header: this.parent.localeObj.getConstant('editImageHeader'), content: dialogContent\n                });\n                this.dialogObj.element.querySelector('.e-insertImage').textContent = this.parent.localeObj.getConstant('dialogUpdate');\n            }\n            else {\n                this.dialogObj.setProperties({ content: dialogContent }, false);\n            }\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            if ((!isNullOrUndefined(this.parent.insertImageSettings.path) && this.parent.editorMode === 'Markdown')\n                || this.parent.editorMode === 'HTML') {\n                dialogContent.querySelector('#' + this.rteID + '_insertImage').focus();\n            }\n            else {\n                dialogContent.querySelector('.e-img-url').focus();\n            }\n        }\n    };\n    Image.prototype.imgUpload = function (e) {\n        var _this = this;\n        var save;\n        var selectParent;\n        var proxy = this;\n        if (proxy.parent.editorMode === 'HTML' &&\n            isNullOrUndefined(closest(e.selection.range.startContainer.parentNode, '#' + this.contentModule.getPanel().id))) {\n            this.contentModule.getEditPanel().focus();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        else {\n            save = e.selection;\n            selectParent = e.selectParent;\n        }\n        var uploadParentEle = this.parent.createElement('div', { className: 'e-img-uploadwrap e-droparea' });\n        var deviceImgUpMsg = this.i10n.getConstant('imageDeviceUploadMessage');\n        var imgUpMsg = this.i10n.getConstant('imageUploadMessage');\n        var span = this.parent.createElement('span', { className: 'e-droptext' });\n        var spanMsg = this.parent.createElement('span', {\n            className: 'e-rte-upload-text',\n            innerHTML: ((Browser.isDevice) ? deviceImgUpMsg : imgUpMsg)\n        });\n        span.appendChild(spanMsg);\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-browsebtn', id: this.rteID + '_insertImage',\n            attrs: { autofocus: 'true', type: 'button' }\n        });\n        span.appendChild(btnEle);\n        uploadParentEle.appendChild(span);\n        var browserMsg = this.i10n.getConstant('browse');\n        var button = new Button({ content: browserMsg, enableRtl: this.parent.enableRtl });\n        button.createElement = this.parent.createElement;\n        button.appendTo(btnEle);\n        var btnClick = (Browser.isDevice) ? span : btnEle;\n        EventHandler.add(btnClick, 'click', this.fileSelect, this);\n        var uploadEle = this.parent.createElement('input', {\n            id: this.rteID + '_upload', attrs: { type: 'File', name: 'UploadFiles' }\n        });\n        uploadParentEle.appendChild(uploadEle);\n        var altText;\n        this.uploadObj = new Uploader({\n            asyncSettings: {\n                saveUrl: this.parent.insertImageSettings.saveUrl,\n            },\n            dropArea: span,\n            multiple: false,\n            enableRtl: this.parent.enableRtl,\n            allowedExtensions: this.parent.insertImageSettings.allowedTypes.toString(),\n            selected: function (e) {\n                altText = e.filesData[0].name;\n                if (_this.parent.editorMode === 'HTML' && isNullOrUndefined(_this.parent.insertImageSettings.path)) {\n                    var reader_1 = new FileReader();\n                    reader_1.addEventListener('load', function (e) {\n                        var url = URL.createObjectURL(proxy.url(reader_1.result));\n                        proxy.uploadUrl = {\n                            url: url, selection: save, altText: altText, selectParent: selectParent,\n                            width: {\n                                width: proxy.parent.insertImageSettings.width, minWidth: proxy.parent.insertImageSettings.minWidth,\n                                maxWidth: proxy.parent.insertImageSettings.maxWidth\n                            },\n                            height: {\n                                height: proxy.parent.insertImageSettings.height, minHeight: proxy.parent.insertImageSettings.minHeight,\n                                maxHeight: proxy.parent.insertImageSettings.maxHeight\n                            }\n                        };\n                        proxy.inputUrl.setAttribute('disabled', 'true');\n                    });\n                    reader_1.readAsDataURL(e.filesData[0].rawFile);\n                }\n            },\n            success: function (e) {\n                if (!isNullOrUndefined(_this.parent.insertImageSettings.path)) {\n                    var url = _this.parent.insertImageSettings.path + e.file.name;\n                    var value = { url: url, selection: save };\n                    proxy.uploadUrl = {\n                        url: url, selection: save, altText: altText, selectParent: selectParent,\n                        width: {\n                            width: proxy.parent.insertImageSettings.width, minWidth: proxy.parent.insertImageSettings.minWidth,\n                            maxWidth: proxy.parent.insertImageSettings.maxWidth\n                        },\n                        height: {\n                            height: proxy.parent.insertImageSettings.height, minHeight: proxy.parent.insertImageSettings.minHeight,\n                            maxHeight: proxy.parent.insertImageSettings.maxHeight\n                        }\n                    };\n                    proxy.inputUrl.setAttribute('disabled', 'true');\n                }\n            },\n            removing: function () {\n                proxy.inputUrl.removeAttribute('disabled');\n                proxy.uploadUrl.url = '';\n            }\n        });\n        this.uploadObj.createElement = this.parent.createElement;\n        this.uploadObj.appendTo(uploadEle);\n        return uploadParentEle;\n    };\n    Image.prototype.fileSelect = function () {\n        this.dialogObj.element.getElementsByClassName('e-file-select-wrap')[0].querySelector('button').click();\n        return false;\n    };\n    Image.prototype.imagePaste = function (args) {\n        if (args.text.length === 0) {\n            var proxy_1 = this;\n            var reader_2 = new FileReader();\n            args.args.preventDefault();\n            reader_2.addEventListener('load', function (e) {\n                var url = {\n                    cssClass: (proxy_1.parent.insertImageSettings.display === 'inline' ? classes.CLS_IMGINLINE : classes.CLS_IMGBREAK),\n                    url: URL.createObjectURL(proxy_1.url(reader_2.result)),\n                    width: {\n                        width: proxy_1.parent.insertImageSettings.width, minWidth: proxy_1.parent.insertImageSettings.minWidth,\n                        maxWidth: proxy_1.parent.insertImageSettings.maxWidth\n                    },\n                    height: {\n                        height: proxy_1.parent.insertImageSettings.height, minHeight: proxy_1.parent.insertImageSettings.minHeight,\n                        maxHeight: proxy_1.parent.insertImageSettings.maxHeight\n                    }\n                };\n                proxy_1.parent.formatter.process(proxy_1.parent, { item: { command: 'Images', subCommand: 'Image' } }, args.args, url);\n            });\n            reader_2.readAsDataURL(args.file);\n        }\n    };\n    Image.prototype.url = function (dataurl) {\n        var arr = dataurl.split(',');\n        var mime = arr[0].match(/:(.*?);/)[1];\n        var bstr = atob(arr[1]);\n        var n = bstr.length;\n        var u8arr = new Uint8Array(n);\n        while (n--) {\n            u8arr[n] = bstr.charCodeAt(n);\n        }\n        return new Blob([u8arr], { type: mime });\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Image.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Image.prototype.getModuleName = function () {\n        return 'image';\n    };\n    return Image;\n}());\nexport { Image };\n","import { removeClass, selectAll, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { CLS_EXPAND_OPEN, CLS_TB_ITEM, CLS_ACTIVE } from '../base/classes';\nimport * as CONSTANT from '../../common/constant';\nimport { RenderType } from '../base/enum';\nimport { KeyboardEvents } from '../actions/keyboard';\n/**\n * Content module is used to render RichTextEditor content\n * @hidden\n */\nvar ViewSource = /** @class */ (function () {\n    /**\n     * Constructor for view source module\n     */\n    function ViewSource(parent, locator) {\n        this.parent = parent;\n        var serviceLocator = locator;\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    ViewSource.prototype.addEventListener = function () {\n        this.parent.on(events.sourceCode, this.sourceCode, this);\n        this.parent.on(events.initialEnd, this.onInitialEnd, this);\n        this.parent.on(events.updateSource, this.updateSourceCode, this);\n    };\n    ViewSource.prototype.onInitialEnd = function () {\n        this.parent.formatter.editorManager.observer.on(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    ViewSource.prototype.removeEventListener = function () {\n        this.unWireEvent();\n        this.parent.off(events.sourceCode, this.sourceCode);\n        this.parent.off(events.updateSource, this.updateSourceCode);\n        this.parent.off(events.initialEnd, this.onInitialEnd);\n        this.parent.formatter.editorManager.observer.off(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown);\n    };\n    ViewSource.prototype.getSourceCode = function () {\n        return this.parent.createElement('textarea', { className: 'e-rte-srctextarea' });\n    };\n    ViewSource.prototype.wireEvent = function (element) {\n        this.keyboardModule = new KeyboardEvents(element, {\n            keyAction: this.previewKeyDown.bind(this), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n        });\n        EventHandler.add(this.previewElement, 'mousedown', this.mouseDownHandler, this);\n    };\n    ViewSource.prototype.unWireEvent = function () {\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n        if (this.previewElement) {\n            EventHandler.remove(this.previewElement, 'mousedown', this.mouseDownHandler);\n        }\n    };\n    ViewSource.prototype.wireBaseKeyDown = function () {\n        this.parent.keyboardModule = new KeyboardEvents(this.contentModule.getEditPanel(), {\n            keyAction: this.parent.keyDown.bind(this.parent), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n        });\n    };\n    ViewSource.prototype.unWireBaseKeyDown = function () {\n        this.parent.keyboardModule.destroy();\n    };\n    ViewSource.prototype.mouseDownHandler = function (e) {\n        this.parent.notify(events.sourceCodeMouseDown, { args: e });\n    };\n    ViewSource.prototype.previewKeyDown = function (event) {\n        switch (event.action) {\n            case 'html-source':\n                this.updateSourceCode(event);\n                event.preventDefault();\n                break;\n        }\n    };\n    ViewSource.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'html-source':\n                e.event.preventDefault();\n                this.sourceCode(e);\n                e.callBack({\n                    requestType: 'SourceCode',\n                    editorMode: 'HTML',\n                    event: e.event\n                });\n                break;\n        }\n    };\n    ViewSource.prototype.sourceCode = function (args) {\n        this.parent.isBlur = false;\n        this.parent.trigger(events.actionBegin, { requestType: 'SourceCode', targetItem: 'SourceCode', args: args });\n        var tbItems = selectAll('.' + CLS_TB_ITEM, this.parent.element);\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        this.parent.notify(events.updateToolbarItem, {\n            targetItem: 'SourceCode', updateItem: 'Preview',\n            baseToolbar: this.parent.getBaseToolbarObject()\n        });\n        if (isNullOrUndefined(this.previewElement)) {\n            this.previewElement = this.getSourceCode();\n        }\n        this.parent.updateValueData();\n        if (this.parent.iframeSettings.enable) {\n            var rteContent = void 0;\n            if (isNullOrUndefined(this.parent.element.querySelector('#' + this.parent.element.id + '_source-view'))) {\n                rteContent = this.parent.createElement('div', {\n                    className: 'e-source-content', id: this.parent.element.id + '_source-view'\n                });\n            }\n            else {\n                rteContent = this.parent.element.querySelector('#' + this.parent.element.id + '_source-view');\n            }\n            rteContent.appendChild(this.previewElement);\n            this.parent.element.appendChild(rteContent);\n            rteContent.style.height = this.contentModule.getPanel().style.height;\n            rteContent.style.marginTop = this.contentModule.getPanel().style.marginTop;\n            this.getPanel().value = this.parent.value;\n            this.contentModule.getPanel().style.display = 'none';\n            rteContent.style.display = 'block';\n        }\n        else {\n            this.contentModule.getPanel().appendChild(this.previewElement);\n            this.getPanel().value = (this.contentModule.getEditPanel().innerHTML === '<p><br></p>' ||\n                this.contentModule.getEditPanel().innerHTML.length === 12) ||\n                (this.contentModule.getEditPanel().childNodes.length === 1 &&\n                    this.contentModule.getEditPanel().childNodes[0].tagName === 'P' &&\n                    this.contentModule.getEditPanel().innerHTML.length === 7) ? null : this.parent.value;\n            this.contentModule.getEditPanel().style.display = 'none';\n            this.previewElement.style.display = 'block';\n        }\n        this.parent.isBlur = false;\n        this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n        this.parent.enableToolbarItem('SourceCode');\n        if (this.parent.getToolbar()) {\n            removeClass([this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n        }\n        removeClass(tbItems, [CLS_ACTIVE]);\n        this.parent.setContentHeight('sourceCode');\n        this.wireEvent(this.previewElement);\n        this.unWireBaseKeyDown();\n        this.previewElement.focus();\n        this.parent.updateValue();\n        if (!isNullOrUndefined(this.parent.placeholder)) {\n            var placeHolderWrapper = this.parent.element.querySelector('.rte-placeholder');\n            placeHolderWrapper.style.display = 'none';\n        }\n        this.parent.trigger(events.actionComplete, { requestType: 'SourceCode', targetItem: 'SourceCode', args: args });\n        this.parent.invokeChangeEvent();\n    };\n    ViewSource.prototype.updateSourceCode = function (args) {\n        this.parent.isBlur = false;\n        this.parent.trigger(events.actionBegin, { requestType: 'Preview', targetItem: 'Preview', args: args });\n        var editHTML = this.getPanel();\n        this.parent.notify(events.updateToolbarItem, {\n            targetItem: 'Preview', updateItem: 'SourceCode',\n            baseToolbar: this.parent.getBaseToolbarObject()\n        });\n        if (this.parent.iframeSettings.enable) {\n            editHTML.parentElement.style.display = 'none';\n            this.contentModule.getPanel().style.display = 'block';\n            this.contentModule.getEditPanel().innerHTML = editHTML.value;\n        }\n        else {\n            editHTML.style.display = 'none';\n            this.contentModule.getEditPanel().style.display = 'block';\n            this.contentModule.getEditPanel().innerHTML = editHTML.value;\n        }\n        this.parent.isBlur = false;\n        this.parent.enableToolbarItem(this.parent.toolbarSettings.items);\n        if (this.parent.getToolbar()) {\n            removeClass([this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n        }\n        this.parent.setContentHeight();\n        this.unWireEvent();\n        this.wireBaseKeyDown();\n        this.contentModule.getEditPanel().focus();\n        this.parent.updateValue();\n        if (!isNullOrUndefined(this.parent.placeholder) && this.contentModule.getEditPanel().innerText.length === 0) {\n            var placeHolderWrapper = this.parent.element.querySelector('.rte-placeholder');\n            placeHolderWrapper.style.display = 'block';\n        }\n        this.parent.trigger(events.actionComplete, { requestType: 'Preview', targetItem: 'Preview', args: args });\n        this.parent.formatter.enableUndo(this.parent);\n        this.parent.invokeChangeEvent();\n    };\n    ViewSource.prototype.getPanel = function () {\n        return this.parent.element.querySelector('.e-rte-srctextarea');\n    };\n    ViewSource.prototype.getViewPanel = function () {\n        return (this.parent.iframeSettings.enable && this.getPanel()) ? this.getPanel().parentElement : this.getPanel();\n    };\n    /**\n     * Destroy the entire RichTextEditor.\n     * @return {void}\n     */\n    ViewSource.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return ViewSource;\n}());\nexport { ViewSource };\n","import { detach, closest, Browser } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, EventHandler, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { Dialog, Popup } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { dispatchEvent, parseHtml } from '../base/util';\n/**\n * `Table` module is used to handle table actions.\n */\nvar Table = /** @class */ (function () {\n    function Table(parent, serviceLocator) {\n        this.pageX = null;\n        this.pageY = null;\n        this.moveEle = null;\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.l10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    Table.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.createTable, this.renderDlgContent, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.docClick, this.docClick, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.tableToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.dropDownSelect, this.dropdownSelect, this);\n        this.parent.on(events.keyDown, this.keyDown, this);\n    };\n    Table.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.createTable, this.renderDlgContent);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.docClick, this.docClick);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.tableToolbarAction, this.onToolbarAction);\n        this.parent.off(events.dropDownSelect, this.dropdownSelect);\n        this.parent.off(events.mouseDown, this.cellSelect);\n        this.parent.off(events.tableColorPickerChanged, this.setBGColor);\n        this.parent.off(events.keyDown, this.keyDown);\n    };\n    Table.prototype.afterRender = function () {\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        this.parent.on(events.tableColorPickerChanged, this.setBGColor, this);\n        this.parent.on(events.mouseDown, this.cellSelect, this);\n        if (this.parent.tableSettings.resize) {\n            EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n        }\n        if (!Browser.isDevice && this.parent.tableSettings.resize) {\n            EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n        }\n    };\n    Table.prototype.dropdownSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Table') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var args = {\n            args: e,\n            selection: this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument()),\n            selectParent: this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)\n        };\n        switch (item.subCommand) {\n            case 'InsertRowBefore':\n            case 'InsertRowAfter':\n                this.addRow(args.selection, e);\n                break;\n            case 'InsertColumnLeft':\n            case 'InsertColumnRight':\n                this.addColumn(args.selection, e);\n                break;\n            case 'DeleteColumn':\n            case 'DeleteRow':\n                this.removeRowColumn(args.selection, e);\n                break;\n            case 'AlignTop':\n            case 'AlignMiddle':\n            case 'AlignBottom':\n                this.verticalAlign(args, e);\n                break;\n            case 'Dashed':\n            case 'Alternate':\n                this.tableStyles(args, item.subCommand);\n                break;\n        }\n    };\n    Table.prototype.keyDown = function (e) {\n        var event = e.args;\n        var proxy = this;\n        switch (event.action) {\n            case 'escape':\n                break;\n            case 'insert-table':\n                if (this.parent.editorMode === 'HTML') {\n                    var docElement = this.parent.contentModule.getDocument();\n                    var range = this.parent.formatter.editorManager.nodeSelection.getRange(docElement);\n                    var selection = this.parent.formatter.editorManager.nodeSelection.save(range, docElement);\n                    var args = {\n                        originalEvent: e.args,\n                        item: {\n                            command: 'Table',\n                            subCommand: 'CreateTable'\n                        }\n                    };\n                    this.insertTableDialog({\n                        self: this,\n                        args: args, selection: selection\n                    });\n                }\n                event.preventDefault();\n                break;\n        }\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n            var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n            ele = (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') ? ele.parentElement : ele;\n            if ((event.keyCode === 8 || event.keyCode === 46)) {\n                if (ele && ele.tagName === 'TBODY') {\n                    event.preventDefault();\n                    proxy.removeTable(selection, event, true);\n                }\n                else if (ele && ele.querySelectorAll('table').length > 0) {\n                    this.removeResizeEle();\n                }\n            }\n            if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n                var closestTd = closest(ele, 'td');\n                ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n            }\n            if (ele && (ele.tagName === 'TD' || ele.tagName === 'TH')) {\n                switch (event.keyCode) {\n                    case 9:\n                    case 37:\n                    case 39:\n                        proxy.tabSelection(event, selection, ele);\n                        break;\n                    case 40:\n                    case 38:\n                        proxy.tableArrowNavigation(event, selection, ele);\n                        break;\n                }\n            }\n        }\n    };\n    Table.prototype.onToolbarAction = function (args) {\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'TableHeader':\n                this.tableHeader(args.selection, args.args);\n                break;\n            case 'TableRemove':\n                this.removeTable(args.selection, args.args);\n                break;\n            case 'TableEditProperties':\n                this.editTable(args);\n                break;\n        }\n    };\n    Table.prototype.verticalAlign = function (args, e) {\n        var tdEle = (args.selection.range.startContainer.nodeName === 'TD' ||\n            args.selection.range.startContainer.nodeName === 'TH') ?\n            args.selection.range.startContainer : args.selection.range.startContainer.parentElement;\n        if (tdEle.nodeName !== 'TD' && tdEle.nodeName !== 'TH') {\n            return;\n        }\n        this.parent.formatter.process(this.parent, e, e, { tableCell: tdEle, subCommand: e.item.subCommand });\n    };\n    Table.prototype.tableStyles = function (args, command) {\n        var table = closest(args.selectParent[0], 'table');\n        if (command === 'Dashed') {\n            (this.parent.element.classList.contains(classes.CLS_TB_DASH_BOR)) ?\n                this.parent.element.classList.remove(classes.CLS_TB_DASH_BOR) : this.parent.element.classList.add(classes.CLS_TB_DASH_BOR);\n            (table.classList.contains(classes.CLS_TB_DASH_BOR)) ? table.classList.remove(classes.CLS_TB_DASH_BOR) :\n                table.classList.add(classes.CLS_TB_DASH_BOR);\n        }\n        if (command === 'Alternate') {\n            (this.parent.element.classList.contains(classes.CLS_TB_ALT_BOR)) ?\n                this.parent.element.classList.remove(classes.CLS_TB_ALT_BOR) : this.parent.element.classList.add(classes.CLS_TB_ALT_BOR);\n            (table.classList.contains(classes.CLS_TB_ALT_BOR)) ? table.classList.remove(classes.CLS_TB_ALT_BOR) :\n                table.classList.add(classes.CLS_TB_ALT_BOR);\n        }\n        this.parent.formatter.saveData();\n        this.parent.formatter.editorManager.nodeSelection.restore();\n    };\n    Table.prototype.insideList = function (range) {\n        var blockNodes = this.parent.formatter.editorManager.domNode.blockNodes();\n        var nodes = [];\n        for (var i = 0; i < blockNodes.length; i++) {\n            if (blockNodes[i].parentNode.tagName === 'LI') {\n                nodes.push(blockNodes[i].parentNode);\n            }\n            else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' &&\n                (blockNodes[i].childNodes[0].tagName !== 'OL' &&\n                    blockNodes[i].childNodes[0].tagName !== 'UL')) {\n                nodes.push(blockNodes[i]);\n            }\n        }\n        if (nodes.length > 1 || nodes.length && ((range.startOffset === 0 && range.endOffset === 0))) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Table.prototype.tabSelection = function (event, selection, ele) {\n        var insideList = this.insideList(selection.range);\n        if ((event.keyCode === 37 || event.keyCode === 39) && selection.range.startContainer.nodeType === 3 ||\n            insideList) {\n            return;\n        }\n        event.preventDefault();\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        if (!event.shiftKey && event.keyCode !== 37) {\n            var nextElement = (!isNullOrUndefined(ele.nextSibling)) ? ele.nextSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').nextSibling) ? closest(ele, 'tr').nextSibling.childNodes[0] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ?\n                        (closest(ele, 'table').nextSibling.nodeName.toLowerCase() === 'td') ?\n                            closest(ele, 'table').nextSibling : ele : ele);\n            if (ele === nextElement && ele.nodeName === 'TH') {\n                nextElement = closest(ele, 'table').rows[1].cells[0];\n            }\n            if (event.keyCode === 39 && ele === nextElement) {\n                nextElement = closest(ele, 'table').nextSibling;\n            }\n            if (nextElement) {\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n            if (ele === nextElement && event.keyCode !== 39 && nextElement) {\n                this.addRow(selection, event, true);\n                nextElement = nextElement.parentElement.nextSibling.firstChild;\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n        }\n        else {\n            var prevElement = (!isNullOrUndefined(ele.previousSibling)) ? ele.previousSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').previousSibling) ?\n                    closest(ele, 'tr').previousSibling.childNodes[closest(ele, 'tr').previousSibling.childNodes.length - 1] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ?\n                        (closest(ele, 'table').previousSibling.nodeName.toLowerCase() === 'td') ? closest(ele, 'table').previousSibling :\n                            ele : ele);\n            if (ele === prevElement && ele.cellIndex === 0 &&\n                closest(ele, 'table').tHead) {\n                var clsTble = closest(ele, 'table');\n                prevElement = clsTble.rows[0].cells[clsTble.rows[0].cells.length - 1];\n            }\n            if (event.keyCode === 37 && ele === prevElement) {\n                prevElement = closest(ele, 'table').previousSibling;\n            }\n            if (prevElement) {\n                (prevElement.textContent.trim() !== '' && closest(prevElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), prevElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), prevElement, prevElement, 0, 0);\n            }\n        }\n    };\n    Table.prototype.tableArrowNavigation = function (event, selection, ele) {\n        var selText = selection.range.startContainer;\n        if ((event.keyCode === 40 && selText.nodeType === 3 && (selText.nextSibling && selText.nextSibling.nodeName === 'BR' ||\n            selText.parentNode && selText.parentNode.nodeName !== 'TD')) ||\n            (event.keyCode === 38 && selText.nodeType === 3 && (selText.previousSibling && selText.previousSibling.nodeName === 'BR' ||\n                selText.parentNode && selText.parentNode.nodeName !== 'TD'))) {\n            return;\n        }\n        event.preventDefault();\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        if (event.keyCode === 40) {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').nextSibling)) ?\n                closest(ele, 'tr').nextSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName === 'TH') ?\n                    closest(ele, 'table').rows[1].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ? closest(ele, 'table').nextSibling :\n                        ele;\n        }\n        else {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').previousSibling)) ?\n                closest(ele, 'tr').previousSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName !== 'TH') ?\n                    closest(ele, 'table').tHead.rows[0].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ? closest(ele, 'table').previousSibling :\n                        ele;\n        }\n        if (ele) {\n            selection.setSelectionText(this.contentModule.getDocument(), ele, ele, 0, 0);\n        }\n    };\n    Table.prototype.setBGColor = function (args) {\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n        var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n        var selectedCell = selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? closest(selectedCell.parentNode, 'td,th') : closest(selectedCell, 'td, th');\n        if (selectedCell && (selectedCell.nodeName === 'TD' || selectedCell.nodeName === 'TH')) {\n            var items = closest(selectedCell, 'table').querySelectorAll('.' + classes.CLS_TABLE_SEL);\n            for (var i = 0; i < items.length; i++) {\n                items[i].style.backgroundColor = args.item.value;\n            }\n            this.parent.formatter.saveData();\n        }\n    };\n    Table.prototype.hideTableQuickToolbar = function () {\n        if (this.quickToolObj && this.quickToolObj.tableQTBar && document.body.contains(this.quickToolObj.tableQTBar.element)) {\n            this.quickToolObj.tableQTBar.hidePopup();\n        }\n    };\n    Table.prototype.tableHeader = function (selection, e) {\n        this.parent.formatter.process(this.parent, e, e.originalEvent, { selection: selection, subCommand: e.item.subCommand });\n    };\n    Table.prototype.editAreaClickHandler = function (e) {\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.tableQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.tableQTBar.element.classList.contains('e-rte-pop');\n            if (isPopupOpen) {\n                return;\n            }\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n            var closestTable = closest(target, 'table');\n            if (target && target.nodeName !== 'A' && target.nodeName !== 'IMG' && (target.nodeName === 'TD' || target.nodeName === 'TH' ||\n                target.nodeName === 'TABLE' || (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable)))\n                && !(range.startContainer.nodeType === 3 && !range.collapsed)) {\n                var range_1 = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.save(range_1, this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n                    this.parent.element.getBoundingClientRect().top + args.clientY : args.pageY;\n                this.quickToolObj.tableQTBar.showPopup(args.pageX, pageY, target);\n                this.parent.formatter.editorManager.nodeSelection.restore();\n            }\n            else {\n                this.hideTableQuickToolbar();\n            }\n        }\n    };\n    Table.prototype.tableCellSelect = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement);\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target);\n        var list = this.dlgDiv.querySelectorAll('.e-rte-tablecell');\n        Array.prototype.forEach.call(list, function (item) {\n            var parentIndex = Array.prototype.slice.call(item.parentElement.parentElement.children).indexOf(item.parentElement);\n            var cellIndex = Array.prototype.slice.call(item.parentElement.children).indexOf(item);\n            removeClass([item], 'e-active');\n            if (parentIndex <= row && cellIndex <= col) {\n                addClass([item], 'e-active');\n            }\n        });\n        this.tblHeader.innerHTML = (col + 1) + 'x' + (row + 1);\n    };\n    Table.prototype.tableCellLeave = function (e) {\n        removeClass(this.dlgDiv.querySelectorAll('.e-rte-tablecell'), 'e-active');\n        addClass([this.dlgDiv.querySelector('.e-rte-tablecell')], 'e-active');\n        this.tblHeader.innerHTML = 1 + 'x' + 1;\n    };\n    Table.prototype.tableCellClick = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement) + 1;\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target) + 1;\n        this.self.tableInsert(row, col, e, this);\n    };\n    Table.prototype.tableInsert = function (row, col, e, selectionObj) {\n        var proxy = (selectionObj.self) ? selectionObj.self : this;\n        if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(selectionObj.selection.range.startContainer.parentNode, '#' + proxy.contentModule.getPanel().id))) {\n            proxy.contentModule.getEditPanel().focus();\n            var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n            selectionObj.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n        }\n        var value = {\n            row: row, columns: col, width: {\n                minWidth: proxy.parent.tableSettings.minWidth,\n                maxWidth: proxy.parent.tableSettings.maxWidth,\n                width: proxy.parent.tableSettings.width,\n            },\n            selection: selectionObj.selection\n        };\n        if (proxy.popupObj) {\n            proxy.popupObj.hide();\n        }\n        if (proxy.editdlgObj) {\n            proxy.editdlgObj.hide();\n        }\n        proxy.parent.formatter.process(proxy.parent, selectionObj.args, selectionObj.args.originalEvent, value);\n        proxy.contentModule.getEditPanel().focus();\n        proxy.parent.on(events.mouseDown, proxy.cellSelect, proxy);\n    };\n    Table.prototype.cellSelect = function (e) {\n        var target = e.args.target;\n        var tdNode = closest(target, 'td,th');\n        target = (target.nodeName !== 'TD' && tdNode && this.parent.contentModule.getEditPanel().contains(tdNode)) ?\n            tdNode : target;\n        removeClass(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_SEL);\n        if (target && (target.tagName === 'TD' || target.tagName === 'TH')) {\n            target.removeAttribute('class');\n            addClass([target], classes.CLS_TABLE_SEL);\n            this.curTable = (this.curTable) ? this.curTable : closest(target, 'table');\n            this.removeResizeEle();\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n        }\n    };\n    Table.prototype.resizeHelper = function (e) {\n        var target = e.target || e.targetTouches[0].target;\n        var closestTable = closest(target, 'table');\n        if (target.nodeName === 'TABLE' || target.nodeName === 'TD' || target.nodeName === 'TH') {\n            this.curTable = (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable))\n                && (target.nodeName === 'TD' || target.nodeName === 'TH') ?\n                closestTable : target;\n            this.removeResizeEle();\n            this.tableResizeEleCreation(this.curTable, e);\n        }\n    };\n    Table.prototype.tableResizeEleCreation = function (table, e) {\n        this.parent.preventDefaultResize(e);\n        var columns = Array.prototype.slice.call(table.rows[0].cells, 1);\n        var rows = [];\n        for (var i = 0; i < table.rows.length; i++) {\n            rows.push(Array.prototype.slice.call(table.rows[i].cells, 0, 1)[0]);\n        }\n        var height = parseInt(getComputedStyle(table).height, 10);\n        var width = parseInt(getComputedStyle(table).width, 10);\n        var pos = this.calcPos(table);\n        for (var i = 0; columns.length > i; i++) {\n            var colReEle = this.parent.createElement('span', {\n                className: classes.CLS_TB_COL_RES, attrs: {\n                    'data-col': (i + 1).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top +\n                'px; left:' + (pos.left + this.calcPos(columns[i]).left) + 'px;';\n            this.contentModule.getEditPanel().appendChild(colReEle);\n        }\n        for (var i = 0; rows.length > i; i++) {\n            var rowReEle = this.parent.createElement('span', {\n                className: classes.CLS_TB_ROW_RES, attrs: {\n                    'data-row': (i).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            rowReEle.style.cssText = 'width: ' + width + 'px; height: 4px; top: ' +\n                (this.calcPos(rows[i]).top + pos.top + rows[i].offsetHeight - 2) +\n                'px; left:' + (this.calcPos(rows[i]).left + pos.left) + 'px;';\n            this.contentModule.getEditPanel().appendChild(rowReEle);\n        }\n        var tableReBox = this.parent.createElement('span', {\n            className: classes.CLS_TB_BOX_RES, attrs: {\n                'data-col': columns.length.toString(), 'unselectable': 'on', 'contenteditable': 'false'\n            }\n        });\n        tableReBox.style.cssText = 'top: ' + (pos.top + height - 4) +\n            'px; left:' + (pos.left + width - 4) + 'px;';\n        if (Browser.isDevice) {\n            tableReBox.classList.add('e-rmob');\n        }\n        this.contentModule.getEditPanel().appendChild(tableReBox);\n    };\n    Table.prototype.removeResizeEle = function () {\n        var item = this.contentModule.getEditPanel().querySelectorAll('.e-column-resize, .e-row-resize, .e-table-box');\n        if (item.length > 0) {\n            for (var i = 0; i < item.length; i++) {\n                detach(item[i]);\n            }\n        }\n    };\n    Table.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = elem.offsetParent || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent.nodeName === 'TD' && elem.nodeName === 'TABLE') {\n            offsetParent = closest(offsetParent, '.e-control');\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Table.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Table.prototype.getPointY = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageY;\n        }\n        else {\n            return e.pageY;\n        }\n    };\n    Table.prototype.resizeStart = function (e) {\n        if (Browser.isDevice) {\n            this.resizeHelper(e);\n        }\n        var target = e.target;\n        if (target.classList.contains(classes.CLS_TB_COL_RES) ||\n            target.classList.contains(classes.CLS_TB_ROW_RES) ||\n            target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            e.preventDefault();\n            this.parent.preventDefaultResize(e);\n            removeClass(this.curTable.querySelectorAll('td,th'), classes.CLS_TABLE_SEL);\n            this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n            this.pageX = this.getPointX(e);\n            this.pageY = this.getPointY(e);\n            this.resizeBtnInit();\n            this.hideTableQuickToolbar();\n            if (target.classList.contains(classes.CLS_TB_COL_RES)) {\n                this.resizeBtnStat.column = true;\n                this.columnEle = this.curTable.rows[0].cells[parseInt(target.getAttribute('data-col'), 10)];\n                this.colIndex = this.columnEle.cellIndex;\n                this.moveEle = e.target;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_ROW_RES)) {\n                this.rowEle = this.curTable.rows[parseInt(target.getAttribute('data-row'), 10)];\n                this.resizeBtnStat.row = true;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_BOX_RES)) {\n                this.resizeBtnStat.tableBox = true;\n            }\n            if (Browser.isDevice && this.helper && !this.helper.classList.contains('e-reicon')) {\n                this.helper.classList.add('e-reicon');\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = { event: e, requestType: 'Table' };\n                this.parent.trigger(events.resizeStart, args);\n                if (args.cancel) {\n                    this.cancelResizeAction();\n                    return;\n                }\n            }\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n        }\n    };\n    Table.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains('e-reicon')) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n            this.pageX = null;\n            this.helper = null;\n        }\n    };\n    Table.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: 'e-table-rhelper'\n        });\n        if (Browser.isDevice) {\n            this.helper.classList.add('e-reicon');\n        }\n        this.contentModule.getEditPanel().appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Table.prototype.setHelperHeight = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            this.helper.classList.add('e-column-helper');\n            this.helper.style.cssText = 'height: ' + getComputedStyle(this.curTable).height + '; top: ' +\n                pos.top + 'px; left:' + (pos.left + this.calcPos(this.columnEle).left - 1) + 'px;';\n        }\n        else {\n            this.helper.classList.add('e-row-helper');\n            this.helper.style.cssText = 'width: ' + getComputedStyle(this.curTable).width + '; top: ' +\n                (this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight) +\n                'px; left:' + (this.calcPos(this.rowEle).left + pos.left) + 'px;';\n        }\n    };\n    Table.prototype.updateHelper = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            var left = pos.left + this.calcPos(this.columnEle).left - 1;\n            this.helper.style.left = left + 'px';\n        }\n        else {\n            var top_1 = this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight;\n            this.helper.style.top = top_1 + 'px';\n        }\n    };\n    Table.prototype.resizing = function (e) {\n        var pageX = this.getPointX(e);\n        var pageY = this.getPointY(e);\n        var mouseX = (this.parent.enableRtl) ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var mouseY = (this.parent.enableRtl) ? -(pageY - this.pageY) : (pageY - this.pageY);\n        this.pageX = pageX;\n        this.pageY = pageY;\n        var args = { event: e, requestType: 'table' };\n        this.parent.trigger(events.onResize, args);\n        if (args.cancel) {\n            this.cancelResizeAction();\n            return;\n        }\n        var tableReBox = this.contentModule.getEditPanel().querySelector('.e-table-box');\n        var tableWidth = parseInt(getComputedStyle(this.curTable).width, 10);\n        var tableHeight = parseInt(getComputedStyle(this.curTable).height, 10);\n        if (this.resizeBtnStat.column) {\n            var cellColl = this.curTable.rows[0].cells;\n            var width = parseFloat(getComputedStyle(this.columnEle).width);\n            var actualwid = width - mouseX;\n            var totalwid = parseFloat(getComputedStyle(this.columnEle).width) +\n                parseFloat(getComputedStyle(cellColl[this.colIndex - 1]).width);\n            for (var i = 0; i < this.curTable.rows.length; i++) {\n                if ((totalwid - actualwid) > 20 && actualwid > 20) {\n                    this.curTable.rows[i].cells[this.colIndex - 1].style.width = totalwid - actualwid + 'px';\n                    this.curTable.rows[i].cells[this.colIndex].style.width = actualwid + 'px';\n                }\n            }\n            this.updateHelper();\n        }\n        else if (this.resizeBtnStat.row) {\n            this.parent.preventDefaultResize(e);\n            var height = parseFloat(getComputedStyle(this.rowEle).height) + mouseY;\n            if (height > 20) {\n                this.rowEle.style.height = height + 'px';\n            }\n            this.curTable.style.height = '';\n            tableReBox.style.cssText = 'top: ' + (this.calcPos(this.curTable).top + tableHeight - 4) +\n                'px; left:' + (this.calcPos(this.curTable).left + tableWidth - 4) + 'px;';\n            this.updateHelper();\n        }\n        else if (this.resizeBtnStat.tableBox) {\n            if (!Browser.isDevice) {\n                EventHandler.remove(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper);\n            }\n            this.curTable.style.width = tableWidth + mouseX + 'px';\n            this.curTable.style.height = tableHeight + mouseY + 'px';\n            tableReBox.classList.add('e-rbox-select');\n            tableReBox.style.cssText = 'top: ' + (this.calcPos(this.curTable).top + tableHeight - 4) +\n                'px; left:' + (this.calcPos(this.curTable).left + tableWidth - 4) + 'px;';\n        }\n    };\n    Table.prototype.cancelResizeAction = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        this.removeResizeEle();\n    };\n    Table.prototype.resizeEnd = function (e) {\n        this.resizeBtnInit();\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        if (this.contentModule.getEditPanel().querySelector('.e-table-box') &&\n            this.contentModule.getEditPanel().contains(this.contentModule.getEditPanel().querySelector('.e-table-box'))) {\n            if (!Browser.isDevice) {\n                EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n            }\n            this.removeResizeEle();\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n                this.helper = null;\n            }\n            this.pageX = null;\n            this.pageY = null;\n            this.moveEle = null;\n        }\n        var args = { event: e, requestType: 'table' };\n        this.parent.trigger(events.resizeStop, args);\n        this.parent.formatter.saveData();\n    };\n    Table.prototype.resizeBtnInit = function () {\n        return this.resizeBtnStat = { column: false, row: false, tableBox: false };\n    };\n    Table.prototype.addRow = function (selectCell, e, tabkey) {\n        var cmd;\n        if (tabkey) {\n            cmd = {\n                item: { command: 'Table', subCommand: 'InsertRowAfter' }\n            };\n        }\n        var value = {\n            selection: selectCell,\n            subCommand: (tabkey) ? cmd.item.subCommand : e.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (tabkey) ? cmd : e, e, value);\n    };\n    Table.prototype.addColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, width: this.parent.tableSettings.width, subCommand: e.item.subCommand });\n    };\n    Table.prototype.removeRowColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, subCommand: e.item.subCommand });\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.removeTable = function (selection, args, delKey) {\n        var cmd;\n        if (delKey) {\n            cmd = { item: { command: 'Table', subCommand: 'TableRemove' } };\n        }\n        var value = {\n            selection: selection,\n            subCommand: (delKey) ? cmd.item.subCommand : args.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (delKey) ? cmd : args, args.originalEvent, value);\n        this.contentModule.getEditPanel().focus();\n        this.removeResizeEle();\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.renderDlgContent = function (args) {\n        var _this = this;\n        if (Browser.isDevice || this.parent.inlineMode.enable) {\n            this.insertTableDialog(args);\n            return;\n        }\n        if (this.popupObj) {\n            this.popupObj.hide();\n            return;\n        }\n        this.hideTableQuickToolbar();\n        var header = '1X1';\n        var insertbtn = this.l10n.getConstant('inserttablebtn');\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-rte-table-popup', id: this.rteID + '_table' });\n        this.tblHeader = this.parent.createElement('div', { className: 'e-rte-popup-header' });\n        this.tblHeader.innerHTML = header;\n        this.dlgDiv.appendChild(this.tblHeader);\n        var tableDiv = this.parent.createElement('div', { className: 'e-rte-table-span' });\n        this.drawTable(tableDiv, args);\n        this.dlgDiv.appendChild(tableDiv);\n        this.dlgDiv.appendChild(this.parent.createElement('span', { className: 'e-span-border' }));\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-insert-table-btn', id: this.rteID + '_insertTable',\n            attrs: { type: 'button' }\n        });\n        this.dlgDiv.appendChild(btnEle);\n        var button = new Button({\n            iconCss: 'e-icons e-create-table', content: insertbtn, cssClass: 'e-flat',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        button.appendTo(btnEle);\n        EventHandler.add(btnEle, 'click', this.insertTableDialog, { self: this, args: args.args, selection: args.selection });\n        this.parent.getToolbar().appendChild(this.dlgDiv);\n        var target = args.args.originalEvent.target;\n        target = target.classList.contains('e-toolbar-item') ? target.firstChild : target.parentElement;\n        this.popupObj = new Popup(this.dlgDiv, {\n            targetType: 'relative',\n            relateTo: target,\n            collision: { X: 'fit', Y: 'none' },\n            offsetY: 8,\n            viewPortElement: this.parent.element,\n            position: { X: 'left', Y: 'bottom' },\n            enableRtl: this.parent.enableRtl,\n            zIndex: 10001,\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.popupObj.destroy();\n                detach(_this.popupObj.element);\n                _this.popupObj = null;\n            }\n        });\n        addClass([this.popupObj.element], 'e-popup-open');\n        this.popupObj.refreshPosition(target);\n    };\n    Table.prototype.docClick = function (e) {\n        var target = e.args.target;\n        if (target && target.classList && ((this.popupObj && !closest(target, '#' + this.popupObj.element.id) ||\n            (this.editdlgObj && !closest(target, '#' + this.editdlgObj.element.id)))) && !target.classList.contains('e-create-table') &&\n            target.offsetParent && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown')) {\n            if (this.popupObj) {\n                this.popupObj.hide();\n            }\n            if (this.editdlgObj) {\n                this.editdlgObj.hide();\n            }\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n        var closestEle = closest(target, 'td');\n        var isExist = closestEle && this.parent.contentModule.getEditPanel().contains(closestEle) ? true : false;\n        if (target && target.tagName !== 'TD' && target.tagName !== 'TH' && !isExist &&\n            closest(target, '.e-rte-quick-popup') === null && target.offsetParent &&\n            !target.offsetParent.classList.contains('e-quick-dropdown') &&\n            !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown') && !closest(target, '.e-rte-dropdown-popup')) {\n            removeClass(this.parent.element.querySelectorAll('table td'), classes.CLS_TABLE_SEL);\n            this.hideTableQuickToolbar();\n        }\n        if (target && target.classList && !target.classList.contains(classes.CLS_TB_COL_RES) &&\n            !target.classList.contains(classes.CLS_TB_ROW_RES) && !target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            this.removeResizeEle();\n        }\n    };\n    Table.prototype.drawTable = function (tableDiv, args) {\n        var rowDiv;\n        var tableCell;\n        for (var row = 0; row < 3; row++) {\n            rowDiv = this.parent.createElement('div', { className: 'e-rte-table-row', attrs: { 'data-column': '' + row } });\n            for (var col = 0; col < 10; col++) {\n                var display = (row > 2) ? 'none' : 'inline-block';\n                tableCell = this.parent.createElement('div', { className: 'e-rte-tablecell e-default', attrs: { 'data-cell': '' + col } });\n                rowDiv.appendChild(tableCell);\n                tableCell.style.display = display;\n                if (col === 0 && row === 0) {\n                    addClass([tableCell], 'e-active');\n                }\n                EventHandler.add(tableCell, 'mousemove', this.tableCellSelect, this);\n                EventHandler.add(rowDiv, 'mouseleave', this.tableCellLeave, this);\n                EventHandler.add(tableCell, 'mouseup', this.tableCellClick, { self: this, args: args.args, selection: args.selection });\n            }\n            tableDiv.appendChild(rowDiv);\n        }\n    };\n    Table.prototype.editTable = function (args) {\n        var _this = this;\n        this.createDialog(args);\n        var editContent = this.tableDlgContent(args);\n        var update = this.l10n.getConstant('dialogUpdate');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var editHeader = this.l10n.getConstant('tableEditHeader');\n        this.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: editContent, header: editHeader,\n            buttons: [{\n                    click: this.applyProperties.bind(this, args),\n                    buttonModel: { content: update, cssClass: 'e-flat e-size-update', isPrimary: true }\n                },\n                {\n                    click: function (e) { _this.cancelDialog(e); },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: cancel }\n                }]\n        });\n        this.editdlgObj.element.style.maxHeight = 'none';\n        this.editdlgObj.content.querySelector('input').focus();\n    };\n    Table.prototype.insertTableDialog = function (args) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy.popupObj) {\n            proxy.popupObj.hide();\n        }\n        proxy.createDialog(args);\n        var dlgContent = proxy.tableCellDlgContent();\n        var insert = proxy.l10n.getConstant('dialogInsert');\n        var cancel = proxy.l10n.getConstant('dialogCancel');\n        proxy.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: dlgContent,\n            buttons: [{\n                    click: proxy.customTable.bind(this, args),\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table', isPrimary: true }\n                },\n                {\n                    click: function (e) { proxy.cancelDialog(e); },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: cancel }\n                }]\n        });\n        proxy.editdlgObj.element.style.maxHeight = 'none';\n        proxy.editdlgObj.content.querySelector('input').focus();\n    };\n    Table.prototype.tableCellDlgContent = function () {\n        var tableColumn = this.l10n.getConstant('columns');\n        var tableRow = this.l10n.getConstant('rows');\n        var tableWrap = this.parent.createElement('div', { className: 'e-cell-wrap' });\n        var content = '<div class=\"e-rte-field\"><input type=\"text\" '\n            + ' data-role =\"none\" id=\"tableColumn\" class=\"e-table-column\"/></div>'\n            + '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableRow\" class=\"e-table-row\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        this.columnTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableColumn,\n            floatLabelType: 'Auto',\n            max: 50,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.columnTextBox.appendTo(tableWrap.querySelector('#tableColumn'));\n        this.rowTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableRow,\n            floatLabelType: 'Auto',\n            max: 50,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.rowTextBox.appendTo(tableWrap.querySelector('#tableRow'));\n        return tableWrap;\n    };\n    Table.prototype.createDialog = function (args) {\n        var _this = this;\n        if (this.editdlgObj) {\n            this.editdlgObj.hide({ returnValue: true });\n            return;\n        }\n        var tableDialog = this.parent.createElement('div', { className: 'e-rte-edit-table', id: this.rteID + '_tabledialog' });\n        this.parent.element.appendChild(tableDialog);\n        var insert = this.l10n.getConstant('dialogInsert');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var header = this.l10n.getConstant('tabledialogHeader');\n        this.editdlgObj = new Dialog({\n            header: header,\n            cssClass: classes.CLS_RTE_ELEMENTS,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px', height: 'initial',\n            position: { X: 'center', Y: (Browser.isDevice) ? 'center' : 'top' },\n            isModal: Browser.isDevice,\n            buttons: [{\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table', isPrimary: true }\n                },\n                {\n                    click: function (e) { _this.cancelDialog(e); },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: cancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.editdlgObj.destroy();\n                detach(_this.editdlgObj.element);\n                _this.editdlgObj = null;\n            },\n        });\n        this.editdlgObj.appendTo(tableDialog);\n        if (this.quickToolObj && this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n            this.quickToolObj.inlineQTBar.hidePopup();\n        }\n    };\n    Table.prototype.customTable = function (args, e) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy.rowTextBox.value && proxy.columnTextBox.value) {\n            var argument = ((Browser.isDevice || (!isNullOrUndefined(args.args)\n                && !isNullOrUndefined(args.args.originalEvent) &&\n                args.args.originalEvent.action === 'insert-table')\n                || proxy.parent.inlineMode.enable) ? args : this);\n            proxy.tableInsert(proxy.rowTextBox.value, proxy.columnTextBox.value, e, argument);\n        }\n    };\n    Table.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    Table.prototype.applyProperties = function (args, e) {\n        var dialogEle = this.editdlgObj.element;\n        var table = closest(args.selectNode[0], 'table');\n        table.style.width = dialogEle.querySelector('.e-table-width').value + 'px';\n        table.cellPadding = dialogEle.querySelector('.e-cell-padding').value;\n        table.cellSpacing = dialogEle.querySelector('.e-cell-spacing').value;\n        this.parent.formatter.saveData();\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    Table.prototype.tableDlgContent = function (e) {\n        var selectNode = e.selectParent[0];\n        var tableWidth = this.l10n.getConstant('tableWidth');\n        var cellPadding = this.l10n.getConstant('cellpadding');\n        var cellSpacing = this.l10n.getConstant('cellspacing');\n        var tableWrap = this.parent.createElement('div', { className: 'e-table-sizewrap' });\n        var widthVal = closest(selectNode, 'table').getClientRects()[0].width;\n        var content = '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableWidth\" class=\"e-table-width\" '\n            + ' /></div>' + '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellPadding\" class=\"e-cell-padding\" />'\n            + ' </div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellSpacing\" class=\"e-cell-spacing\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        var widthNum = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            value: widthVal,\n            placeholder: tableWidth,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        widthNum.appendTo(tableWrap.querySelector('#tableWidth'));\n        var padding = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            value: 0,\n            placeholder: cellPadding,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        padding.appendTo(tableWrap.querySelector('#cellPadding'));\n        var spacing = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            value: 0,\n            placeholder: cellSpacing,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        spacing.appendTo(tableWrap.querySelector('#cellSpacing'));\n        return tableWrap;\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Table.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Table.prototype.getModuleName = function () {\n        return 'table';\n    };\n    return Table;\n}());\nexport { Table };\n","/** @hidden  */\nexport var executeGroup = {\n    'bold': {\n        command: 'style',\n        subCommand: 'bold',\n        value: 'strong'\n    },\n    'italic': {\n        command: 'style',\n        subCommand: 'italic',\n        value: 'em'\n    },\n    'underline': {\n        command: 'style',\n        subCommand: 'underline',\n        value: 'span'\n    },\n    'strikeThrough': {\n        command: 'style',\n        subCommand: 'strikeThrough',\n        value: 'span'\n    },\n    'superscript': {\n        command: 'effects',\n        subCommand: 'superscript',\n        value: 'sup'\n    },\n    'subscript': {\n        command: 'effects',\n        subCommand: 'subscript',\n        value: 'sub'\n    },\n    'uppercase': {\n        command: 'casing',\n        subCommand: 'uppercase'\n    },\n    'lowercase': {\n        command: 'casing',\n        subCommand: 'lowercase'\n    },\n    'fontColor': {\n        command: 'font',\n        subCommand: 'fontcolor',\n        value: '#ff0000'\n    },\n    'fontName': {\n        command: 'font',\n        subCommand: 'fontname',\n        value: 'Segoe UI'\n    },\n    'fontSize': {\n        command: 'font',\n        subCommand: 'fontsize',\n        value: '10pt'\n    },\n    'backColor': {\n        command: 'font',\n        subCommand: 'backgroundcolor',\n        value: '#ffff00'\n    },\n    'justifyCenter': {\n        command: 'Alignments',\n        subCommand: 'JustifyCenter'\n    },\n    'justifyFull': {\n        command: 'Alignments',\n        subCommand: 'JustifyFull'\n    },\n    'justifyLeft': {\n        command: 'Alignments',\n        subCommand: 'JustifyLeft'\n    },\n    'justifyRight': {\n        command: 'Alignments',\n        subCommand: 'JustifyRight'\n    },\n    'undo': {\n        command: 'Actions',\n        subCommand: 'Undo'\n    },\n    'redo': {\n        command: 'Actions',\n        subCommand: 'Redo'\n    },\n    'createLink': {\n        command: 'Links',\n        subCommand: 'Links'\n    },\n    'createImage': {\n        command: 'Images',\n        subCommand: 'Images'\n    },\n    'formatBlock': {\n        command: 'Formats',\n        value: 'P'\n    },\n    'heading': {\n        command: 'Formats',\n        value: 'H1'\n    },\n    'indent': {\n        command: 'Indents',\n        subCommand: 'Indent'\n    },\n    'outdent': {\n        command: 'Indents',\n        subCommand: 'Outdent'\n    },\n    'insertHTML': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: ''\n    },\n    'insertText': {\n        command: 'InsertText',\n        subCommand: 'InsertText',\n        value: ''\n    },\n    'insertHorizontalRule': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: '<hr/>'\n    },\n    'insertImage': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: '<img/>'\n    },\n    'insertBrOnReturn': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: '<br/>'\n    },\n    'insertOrderedList': {\n        command: 'Lists',\n        value: 'OL'\n    },\n    'insertUnorderedList': {\n        command: 'Lists',\n        value: 'UL'\n    },\n    'insertParagraph': {\n        command: 'Formats',\n        value: 'P'\n    },\n    'removeFormat': {\n        command: 'Clear',\n        subCommand: 'ClearFormat'\n    }\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\nimport { ToolbarType } from '../base/enum';\nimport { TableStyleItems } from '../models/items';\nexport var predefinedItems = ['Bold', 'Italic', 'Underline', '|', 'Formats', 'Alignments',\n    'OrderedList', 'UnorderedList', '|', 'CreateLink', 'Image', '|', 'SourceCode', 'Undo', 'Redo'];\nexport var fontFamily = [\n    { text: 'Segoe UI', value: 'Segoe UI', cssClass: 'e-segoe-ui' },\n    { text: 'Arial', value: 'Arial,Helvetica,sans-serif', cssClass: 'e-arial' },\n    { text: 'Georgia', value: 'Georgia,serif', cssClass: 'e-georgia' },\n    { text: 'Impact', value: 'Impact,Charcoal,sans-serif', cssClass: 'e-impact' },\n    { text: 'Tahoma', value: 'Tahoma,Geneva,sans-serif', cssClass: 'e-tahoma' },\n    { text: 'Times New Roman', value: 'Times New Roman,Times,serif', cssClass: 'e-times-new-roman' },\n    { text: 'Verdana', value: 'Verdana,Geneva,sans-serif', cssClass: 'e-verdana' }\n];\nexport var fontSize = [\n    { text: '8 pt', value: '8pt' },\n    { text: '10 pt', value: '10pt' },\n    { text: '12 pt', value: '12pt' },\n    { text: '14 pt', value: '14pt' },\n    { text: '18 pt', value: '18pt' },\n    { text: '24 pt', value: '24pt' },\n    { text: '36 pt', value: '36pt' }\n];\nexport var formatItems = [\n    { text: 'Paragraph', value: 'P', cssClass: 'e-paragraph' },\n    { text: 'Code', value: 'Pre', cssClass: 'e-code' },\n    { text: 'Quotation', value: 'BlockQuote', cssClass: 'e-quote' },\n    { text: 'Heading 1', value: 'H1', cssClass: 'e-h1' },\n    { text: 'Heading 2', value: 'H2', cssClass: 'e-h2' },\n    { text: 'Heading 3', value: 'H3', cssClass: 'e-h3' },\n    { text: 'Heading 4', value: 'H4', cssClass: 'e-h4' }\n];\nexport var fontColor = {\n    'Custom': [\n        '', '#000000', '#e7e6e6', '#44546a', '#4472c4', '#ed7d31', '#a5a5a5', '#ffc000', '#70ad47', '#ff0000',\n        '#f2f2f2', '#808080', '#cfcdcd', '#d5dce4', '#d9e2f3', '#fbe4d5', '#ededed', '#fff2cc', '#e2efd9', '#ffcccc',\n        '#d9d9d9', '#595959', '#aeaaaa', '#acb9ca', '#b4c6e7', '#f7caac', '#dbdbdb', '#ffe599', '#c5e0b3', '#ff8080',\n        '#bfbfbf', '#404040', '#747070', '#8496b0', '#8eaadb', '#f4b083', '#c9c9c9', '#ffd966', '#a8d08d', '#ff3333',\n        '#a6a6a6', '#262626', '#3b3838', '#323e4f', '#2f5496', '#c45911', '#7b7b7b', '#bf8f00', '#538135', '#b30000',\n        '#7f7f7f', '#0d0d0d', '#161616', '#212934', '#1f3763', '#823b0b', '#525252', '#7f5f00', '#375623', '#660000'\n    ]\n};\nexport var backgroundColor = {\n    'Custom': [\n        '', '#000000', '#ffff00', '#00ff00', '#00ffff', '#0000ff', '#ff0000', '#000080', '#800080', '#996633',\n        '#f2f2f2', '#808080', '#ffffcc', '#b3ffb3', '#ccffff', '#ccccff', '#ffcccc', '#ccccff', '#ff80ff', '#f2e6d9',\n        '#d9d9d9', '#595959', '#ffff80', '#80ff80', '#b3ffff', '#8080ff', '#ff8080', '#8080ff', '#ff00ff', '#dfbf9f',\n        '#bfbfbf', '#404040', '#ffff33', '#33ff33', '#33ffff', '#3333ff', '#ff3333', '#0000b3', '#b300b3', '#c68c53',\n        '#a6a6a6', '#262626', '#e6e600', '#00b300', '#009999', '#000099', '#b30000', '#000066', '#660066', '#86592d',\n        '#7f7f7f', '#0d0d0d', '#999900', '#006600', '#006666', '#000066', '#660000', '#00004d', '#4d004d', '#734d26',\n    ]\n};\n/**\n * Configures the toolbar settings of the RichTextEditor.\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"enableFloating\", void 0);\n    __decorate([\n        Property(ToolbarType.Expand)\n    ], ToolbarSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property(predefinedItems)\n    ], ToolbarSettings.prototype, \"items\", void 0);\n    __decorate([\n        Property({})\n    ], ToolbarSettings.prototype, \"itemConfigs\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * Configures the image settings of the RichTextEditor.\n */\nvar ImageSettings = /** @class */ (function (_super) {\n    __extends(ImageSettings, _super);\n    function ImageSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(['.jpeg', '.jpg', '.png'])\n    ], ImageSettings.prototype, \"allowedTypes\", void 0);\n    __decorate([\n        Property('inline')\n    ], ImageSettings.prototype, \"display\", void 0);\n    __decorate([\n        Property('auto')\n    ], ImageSettings.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], ImageSettings.prototype, \"height\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"saveUrl\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"path\", void 0);\n    __decorate([\n        Property(true)\n    ], ImageSettings.prototype, \"resize\", void 0);\n    __decorate([\n        Property(0)\n    ], ImageSettings.prototype, \"minWidth\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"maxWidth\", void 0);\n    __decorate([\n        Property(0)\n    ], ImageSettings.prototype, \"minHeight\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"maxHeight\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageSettings.prototype, \"resizeByPercent\", void 0);\n    return ImageSettings;\n}(ChildProperty));\nexport { ImageSettings };\nvar TableSettings = /** @class */ (function (_super) {\n    __extends(TableSettings, _super);\n    function TableSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('100%')\n    ], TableSettings.prototype, \"width\", void 0);\n    __decorate([\n        Property(TableStyleItems)\n    ], TableSettings.prototype, \"styles\", void 0);\n    __decorate([\n        Property(true)\n    ], TableSettings.prototype, \"resize\", void 0);\n    __decorate([\n        Property(0)\n    ], TableSettings.prototype, \"minWidth\", void 0);\n    __decorate([\n        Property(null)\n    ], TableSettings.prototype, \"maxWidth\", void 0);\n    return TableSettings;\n}(ChildProperty));\nexport { TableSettings };\n/**\n * Configures the quick toolbar settings of the RichTextEditor.\n */\nvar QuickToolbarSettings = /** @class */ (function (_super) {\n    __extends(QuickToolbarSettings, _super);\n    function QuickToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], QuickToolbarSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Property(false)\n    ], QuickToolbarSettings.prototype, \"showOnRightClick\", void 0);\n    __decorate([\n        Property('hide')\n    ], QuickToolbarSettings.prototype, \"actionOnScroll\", void 0);\n    __decorate([\n        Property(['Open', 'Edit', 'UnLink'])\n    ], QuickToolbarSettings.prototype, \"link\", void 0);\n    __decorate([\n        Property(['Replace', 'Align', 'Caption', 'Remove', '-', 'InsertLink', 'OpenImageLink', 'EditImageLink', 'RemoveImageLink', 'Display', 'AltText', 'Dimension'])\n    ], QuickToolbarSettings.prototype, \"image\", void 0);\n    __decorate([\n        Property(['Cut', 'Copy', 'Paste'])\n    ], QuickToolbarSettings.prototype, \"text\", void 0);\n    __decorate([\n        Property(['TableHeader', 'TableRows', 'TableColumns', 'BackgroundColor', '-', 'TableRemove', 'Alignments', 'TableCellVerticalAlign', 'Styles'])\n    ], QuickToolbarSettings.prototype, \"table\", void 0);\n    return QuickToolbarSettings;\n}(ChildProperty));\nexport { QuickToolbarSettings };\n/**\n * Configures the Paste Cleanup settings of the RichTextEditor.\n */\nvar PasteCleanupSettings = /** @class */ (function (_super) {\n    __extends(PasteCleanupSettings, _super);\n    function PasteCleanupSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], PasteCleanupSettings.prototype, \"prompt\", void 0);\n    __decorate([\n        Property(null)\n    ], PasteCleanupSettings.prototype, \"deniedAttrs\", void 0);\n    __decorate([\n        Property(null)\n    ], PasteCleanupSettings.prototype, \"allowedStyleProps\", void 0);\n    __decorate([\n        Property(null)\n    ], PasteCleanupSettings.prototype, \"deniedTags\", void 0);\n    __decorate([\n        Property(true)\n    ], PasteCleanupSettings.prototype, \"keepFormat\", void 0);\n    __decorate([\n        Property(false)\n    ], PasteCleanupSettings.prototype, \"plainText\", void 0);\n    return PasteCleanupSettings;\n}(ChildProperty));\nexport { PasteCleanupSettings };\n/**\n * Configures the font family settings of the RichTextEditor.\n */\nvar FontFamily = /** @class */ (function (_super) {\n    __extends(FontFamily, _super);\n    function FontFamily() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], FontFamily.prototype, \"default\", void 0);\n    __decorate([\n        Property('65px')\n    ], FontFamily.prototype, \"width\", void 0);\n    __decorate([\n        Property(fontFamily)\n    ], FontFamily.prototype, \"items\", void 0);\n    return FontFamily;\n}(ChildProperty));\nexport { FontFamily };\n/**\n * Configures the font size settings of the RichTextEditor.\n */\nvar FontSize = /** @class */ (function (_super) {\n    __extends(FontSize, _super);\n    function FontSize() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], FontSize.prototype, \"default\", void 0);\n    __decorate([\n        Property('35px')\n    ], FontSize.prototype, \"width\", void 0);\n    __decorate([\n        Property(fontSize)\n    ], FontSize.prototype, \"items\", void 0);\n    return FontSize;\n}(ChildProperty));\nexport { FontSize };\n/**\n * Configures the format settings of the RichTextEditor.\n */\nvar Format = /** @class */ (function (_super) {\n    __extends(Format, _super);\n    function Format() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], Format.prototype, \"default\", void 0);\n    __decorate([\n        Property('65px')\n    ], Format.prototype, \"width\", void 0);\n    __decorate([\n        Property(formatItems)\n    ], Format.prototype, \"types\", void 0);\n    return Format;\n}(ChildProperty));\nexport { Format };\n/**\n * Configures the font Color settings of the RichTextEditor.\n */\nvar FontColor = /** @class */ (function (_super) {\n    __extends(FontColor, _super);\n    function FontColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('#ff0000')\n    ], FontColor.prototype, \"default\", void 0);\n    __decorate([\n        Property('Palette')\n    ], FontColor.prototype, \"mode\", void 0);\n    __decorate([\n        Property(10)\n    ], FontColor.prototype, \"columns\", void 0);\n    __decorate([\n        Property(fontColor)\n    ], FontColor.prototype, \"colorCode\", void 0);\n    __decorate([\n        Property(false)\n    ], FontColor.prototype, \"modeSwitcher\", void 0);\n    return FontColor;\n}(ChildProperty));\nexport { FontColor };\n/**\n * Configures the background Color settings of the RichTextEditor.\n */\nvar BackgroundColor = /** @class */ (function (_super) {\n    __extends(BackgroundColor, _super);\n    function BackgroundColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('#ffff00')\n    ], BackgroundColor.prototype, \"default\", void 0);\n    __decorate([\n        Property('Palette')\n    ], BackgroundColor.prototype, \"mode\", void 0);\n    __decorate([\n        Property(10)\n    ], BackgroundColor.prototype, \"columns\", void 0);\n    __decorate([\n        Property(backgroundColor)\n    ], BackgroundColor.prototype, \"colorCode\", void 0);\n    __decorate([\n        Property(false)\n    ], BackgroundColor.prototype, \"modeSwitcher\", void 0);\n    return BackgroundColor;\n}(ChildProperty));\nexport { BackgroundColor };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty, Complex } from '@syncfusion/ej2-base';\n/**\n * Objects used for configuring the iframe resources properties.\n */\nvar Resources = /** @class */ (function (_super) {\n    __extends(Resources, _super);\n    function Resources() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property([])\n    ], Resources.prototype, \"styles\", void 0);\n    __decorate([\n        Property([])\n    ], Resources.prototype, \"scripts\", void 0);\n    return Resources;\n}(ChildProperty));\nexport { Resources };\n/**\n * Configures the iframe settings of the RTE.\n */\nvar IFrameSettings = /** @class */ (function (_super) {\n    __extends(IFrameSettings, _super);\n    function IFrameSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], IFrameSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Property(null)\n    ], IFrameSettings.prototype, \"attributes\", void 0);\n    __decorate([\n        Complex({}, Resources)\n    ], IFrameSettings.prototype, \"resources\", void 0);\n    return IFrameSettings;\n}(ChildProperty));\nexport { IFrameSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the inlineMode property of the RTE.\n */\nvar InlineMode = /** @class */ (function (_super) {\n    __extends(InlineMode, _super);\n    function InlineMode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], InlineMode.prototype, \"enable\", void 0);\n    __decorate([\n        Property(true)\n    ], InlineMode.prototype, \"onSelection\", void 0);\n    return InlineMode;\n}(ChildProperty));\nexport { InlineMode };\n","import { Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getScrollableParent } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\n/**\n * `FullScreen` module is used to maximize and minimize screen\n */\nvar FullScreen = /** @class */ (function () {\n    function FullScreen(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    FullScreen.prototype.showFullScreen = function (event) {\n        this.scrollableParent = getScrollableParent(this.parent.element);\n        if (!this.parent.element.classList.contains(classes.CLS_FULL_SCREEN)) {\n            this.parent.trigger(events.actionBegin, { requestType: 'Maximize', targetItem: 'Maximize', args: event });\n            if (this.parent.toolbarSettings.enableFloating &&\n                !this.parent.inlineMode.enable && this.parent.toolbarSettings.enable) {\n                this.parent.getToolbarElement().style.width = '100%';\n                this.parent.getToolbarElement().style.top = '0px';\n            }\n            this.parent.element.classList.add(classes.CLS_FULL_SCREEN);\n            this.toggleParentOverflow(true);\n            this.parent.setContentHeight();\n            if (this.parent.toolbarModule) {\n                if (!this.parent.getBaseToolbarObject().toolbarObj.items[0].properties) {\n                    this.parent.getBaseToolbarObject().toolbarObj.removeItems(0);\n                }\n                if (Browser.isDevice) {\n                    this.parent.toolbarModule.removeFixedTBarClass();\n                }\n                this.parent.toolbarModule.updateItem({\n                    targetItem: 'Maximize',\n                    updateItem: 'Minimize',\n                    baseToolbar: this.parent.getBaseToolbarObject()\n                });\n            }\n            this.parent.trigger(events.actionComplete, { requestType: 'Maximize', targetItem: 'Maximize', args: event });\n        }\n    };\n    FullScreen.prototype.hideFullScreen = function (event) {\n        if (this.parent.element.classList.contains(classes.CLS_FULL_SCREEN)) {\n            this.parent.element.classList.remove(classes.CLS_FULL_SCREEN);\n            var elem = document.querySelectorAll('.e-rte-overflow');\n            for (var i = 0; i < elem.length; i++) {\n                removeClass([elem[i]], ['e-rte-overflow']);\n            }\n            this.parent.trigger(events.actionBegin, { requestType: 'Minimize', targetItem: 'Minimize', args: event });\n            this.parent.setContentHeight();\n            if (this.parent.toolbarModule) {\n                if (!this.parent.getBaseToolbarObject().toolbarObj.items[0].properties) {\n                    this.parent.getBaseToolbarObject().toolbarObj.removeItems(0);\n                }\n                this.parent.toolbarModule.updateItem({\n                    targetItem: 'Minimize',\n                    updateItem: 'Maximize',\n                    baseToolbar: this.parent.getBaseToolbarObject()\n                });\n                if (Browser.isDevice && this.parent.inlineMode.enable) {\n                    this.parent.toolbarModule.addFixedTBarClass();\n                }\n            }\n            this.parent.trigger(events.actionComplete, { requestType: 'Minimize', targetItem: 'Minimize', args: event });\n        }\n    };\n    FullScreen.prototype.toggleParentOverflow = function (isAdd) {\n        if (isNullOrUndefined(this.scrollableParent)) {\n            return;\n        }\n        for (var i = 0; i < this.scrollableParent.length; i++) {\n            if (this.scrollableParent[i].nodeName === '#document') {\n                var elem = document.querySelector('body');\n                addClass([elem], ['e-rte-overflow']);\n            }\n            else {\n                var elem = this.scrollableParent[i];\n                addClass([elem], ['e-rte-overflow']);\n            }\n        }\n    };\n    FullScreen.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        switch (originalEvent.action) {\n            case 'full-screen':\n                this.showFullScreen(event.args);\n                originalEvent.preventDefault();\n                break;\n            case 'escape':\n                this.hideFullScreen(event.args);\n                originalEvent.preventDefault();\n                break;\n        }\n    };\n    FullScreen.prototype.addEventListener = function () {\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    FullScreen.prototype.removeEventListener = function () {\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    FullScreen.prototype.destroy = function () {\n        if (this.parent.element.classList.contains(classes.CLS_FULL_SCREEN)) {\n            this.toggleParentOverflow(false);\n        }\n        this.removeEventListener();\n    };\n    return FullScreen;\n}());\nexport { FullScreen };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, EventHandler, Complex, Browser, addClass, select, detach } from '@syncfusion/ej2-base';\nimport { Property, NotifyPropertyChanges, formatUnit, L10n, closest } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, Event, removeClass, print as printWindow, attributes } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, compile, append, extend, debounce } from '@syncfusion/ej2-base';\nimport { Touch as EJ2Touch } from '@syncfusion/ej2-base';\nimport { getScrollableParent } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { Render } from '../renderer/render';\nimport { ViewSource } from '../renderer/view-source';\nimport { executeGroup } from './interface';\nimport { ServiceLocator } from '../services/service-locator';\nimport { RendererFactory } from '../services/renderer-factory';\nimport { RenderType, ToolbarType } from './enum';\nimport { ExecCommandCallBack } from '../actions/execute-command-callback';\nimport { KeyboardEvents } from '../actions/keyboard';\nimport { ToolbarSettings, ImageSettings, QuickToolbarSettings, FontFamily, FontSize, Format } from '../models/toolbar-settings';\nimport { TableSettings, PasteCleanupSettings } from '../models/toolbar-settings';\nimport { FontColor, BackgroundColor } from '../models/toolbar-settings';\nimport { IFrameSettings } from '../models/iframe-settings';\nimport { InlineMode } from '../models/inline-mode';\nimport { defaultLocale } from '../models/default-locale';\nimport { setAttributes } from '../actions/html-attributes';\nimport { FullScreen } from '../actions/full-screen';\nimport * as CONSTANT from '../../common/constant';\nimport { dispatchEvent, getEditValue, isIDevice, decode } from '../base/util';\n/**\n * Represents the RichTextEditor component.\n * ```html\n * <textarea id=\"rte\"></textarea>\n * <script>\n *  var rteObj = new RichTextEditor();\n *  rteObj.appendTo(\"#rte\");\n * </script>\n * ```\n */\nvar RichTextEditor = /** @class */ (function (_super) {\n    __extends(RichTextEditor, _super);\n    function RichTextEditor(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * @hidden\n         */\n        _this.isFocusOut = false;\n        /**\n         * @hidden\n         */\n        _this.isRTE = false;\n        /**\n         * @hidden\n         */\n        _this.isBlur = true;\n        _this.needsID = true;\n        return _this;\n    }\n    /**\n     * To provide the array of modules needed for component rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    RichTextEditor.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.toolbarSettings.enable) {\n            modules.push({ member: 'toolbar', args: [this, this.serviceLocator] });\n            modules.push({\n                member: 'link',\n                args: [this, this.serviceLocator]\n            });\n            modules.push({\n                member: 'table',\n                args: [this, this.serviceLocator]\n            });\n            modules.push({\n                member: 'image',\n                args: [this, this.serviceLocator]\n            });\n            if (this.quickToolbarSettings.enable) {\n                modules.push({ member: 'quickToolbar', args: [this, this.serviceLocator] });\n            }\n        }\n        if (this.showCharCount) {\n            modules.push({ member: 'count', args: [this, this.serviceLocator] });\n        }\n        if (this.editorMode === 'Markdown') {\n            modules.push({ member: 'markdownEditor', args: [this, this.serviceLocator] });\n        }\n        if (this.editorMode === 'HTML') {\n            modules.push({ member: 'htmlEditor', args: [this, this.serviceLocator] });\n            modules.push({ member: 'pasteCleanup', args: [this, this.serviceLocator] });\n        }\n        return modules;\n    };\n    RichTextEditor.prototype.updateEnable = function () {\n        if (this.enabled) {\n            removeClass([this.element], classes.CLS_DISABLED);\n            this.element.tabIndex = 0;\n            this.element.setAttribute('aria-disabled', 'false');\n            this.inputElement.setAttribute('tabindex', '0');\n        }\n        else {\n            if (this.getToolbar()) {\n                removeClass(this.getToolbar().querySelectorAll('.' + classes.CLS_ACTIVE), classes.CLS_ACTIVE);\n                removeClass([this.getToolbar()], [classes.CLS_TB_FLOAT, classes.CLS_TB_ABS_FLOAT]);\n            }\n            addClass([this.element], classes.CLS_DISABLED);\n            this.element.tabIndex = -1;\n            this.element.setAttribute('aria-disabled', 'true');\n            this.inputElement.setAttribute('tabindex', '-1');\n        }\n    };\n    RichTextEditor.prototype.setEnable = function () {\n        this.updateEnable();\n        (this.enabled) ? this.eventInitializer() : this.unWireEvents();\n    };\n    /**\n     * For internal use only - Initialize the event handler;\n     * @private\n     */\n    RichTextEditor.prototype.preRender = function () {\n        this.onBlurHandler = this.blurHandler.bind(this);\n        this.onFocusHandler = this.focusHandler.bind(this);\n        this.onResizeHandler = this.resizeHandler.bind(this);\n        this.clickPoints = { clientX: 0, clientY: 0 };\n        this.initialValue = this.value;\n        this.serviceLocator = new ServiceLocator;\n        this.initializeServices();\n        this.setContainer();\n        setStyleAttribute(this.element, { 'width': formatUnit(this.width) });\n        attributes(this.element, { role: 'application' });\n    };\n    RichTextEditor.prototype.setContainer = function () {\n        this.originalElement = this.element.cloneNode(true);\n        if (this.value === null || this.valueTemplate !== null) {\n            this.setValue();\n        }\n        this.element.innerHTML = '';\n        var invalidAttr = ['class', 'style', 'id', 'ejs-for'];\n        var htmlAttr = {};\n        for (var a = 0; a < this.element.attributes.length; a++) {\n            if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 &&\n                !(/^data-val/.test(this.element.attributes[a].name))) { // data-val for asp.net core data annotation validation.\n                htmlAttr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n            }\n        }\n        extend(htmlAttr, this.htmlAttributes, htmlAttr);\n        this.setProperties({ htmlAttributes: htmlAttr }, true);\n        if (!isNOU(this.htmlAttributes.id)) {\n            this.element.id = this.htmlAttributes.id;\n        }\n        if (this.element.tagName === 'TEXTAREA') {\n            var rteOuterWrapper = this.createElement('div', {\n                className: this.element.getAttribute('class')\n            });\n            this.element.innerHTML = '';\n            this.element.parentElement.insertBefore(rteOuterWrapper, this.element);\n            this.valueContainer = this.element;\n            removeClass([this.valueContainer], this.element.getAttribute('class').split(' '));\n            this.element = rteOuterWrapper;\n        }\n        else {\n            this.valueContainer = this.createElement('textarea', {\n                id: this.getID() + '-value'\n            });\n        }\n        this.valueContainer.name = this.getID();\n        addClass([this.valueContainer], classes.CLS_RTE_HIDDEN);\n        this.element.appendChild(this.valueContainer);\n    };\n    RichTextEditor.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    /**\n     * Focuses the RichTextEditor component\n     * @public\n     */\n    RichTextEditor.prototype.focusIn = function () {\n        if (this.enabled) {\n            this.inputElement.focus();\n            this.focusHandler({});\n        }\n    };\n    /**\n     * Blurs the RichTextEditor component\n     * @public\n     */\n    RichTextEditor.prototype.focusOut = function () {\n        if (this.enabled) {\n            this.inputElement.blur();\n            this.blurHandler({});\n        }\n    };\n    /**\n     * Selects all the content in RichTextEditor\n     * @public\n     */\n    RichTextEditor.prototype.selectAll = function () {\n        this.notify(events.selectAll, {});\n    };\n    /**\n     * Selects a content range or an element\n     * @param {Range} range - Specify the range which you want to select within the content.\n     * The method used to select a particular sentence or word or entire document.\n     * @public\n     */\n    RichTextEditor.prototype.selectRange = function (range) {\n        this.notify(events.selectRange, { range: range });\n    };\n    /**\n     * Retrieves the HTML markup content from currently selected content of RichTextEditor.\n     * @public\n     */\n    RichTextEditor.prototype.getSelection = function () {\n        var str = '';\n        this.notify(events.getSelectedHtml, {\n            callBack: function (txt) {\n                str = txt;\n            }\n        });\n        return str;\n    };\n    /**\n     * Executes the commands\n     * @param {CommandName} CommandName - Specifies the name of the command to be executed.\n     * @param {string | HTMLElement} value - Specifies the value that you want to execute.\n     * @public\n     */\n    RichTextEditor.prototype.executeCommand = function (commandName, value) {\n        var tool = executeGroup[commandName];\n        this.formatter.editorManager.execCommand(tool.command, tool.subCommand ? tool.subCommand : (value ? value : tool.value), null, null, (value ? value : tool.value), (value ? value : tool.value));\n    };\n    RichTextEditor.prototype.encode = function (value) {\n        var divNode = this.createElement('div');\n        divNode.innerText = value.trim();\n        return divNode.innerHTML.replace(/<br\\s*[\\/]?>/gi, '\\n');\n    };\n    /**\n     * For internal use only - To Initialize the component rendering.\n     * @private\n     */\n    RichTextEditor.prototype.render = function () {\n        this.renderModule = new Render(this, this.serviceLocator);\n        this.sourceCodeModule = new ViewSource(this, this.serviceLocator);\n        this.notify(events.initialLoad, {});\n        this.trigger(events.load);\n        this.RTERender();\n        var execCommandCallBack = new ExecCommandCallBack(this);\n        this.notify(events.initialEnd, {});\n        if (this.toolbarSettings.enable && this.toolbarSettings.type === 'Expand' && !isNOU(this.getToolbar()) &&\n            (this.toolbarSettings.items.indexOf('Undo') > -1 && this.toolbarSettings.items.indexOf('Redo') > -1)) {\n            this.disableToolbarItem(['Undo', 'Redo']);\n        }\n        this.setContentHeight();\n        if (this.value !== null) {\n            this.valueContainer.defaultValue = this.value;\n        }\n        (!this.enabled) ? this.unWireEvents() : this.eventInitializer();\n    };\n    /**\n     * For internal use only - Initialize the event handler\n     * @private\n     */\n    RichTextEditor.prototype.eventInitializer = function () {\n        this.wireEvents();\n    };\n    /**\n     * For internal use only - keydown the event handler;\n     * @private\n     */\n    RichTextEditor.prototype.keyDown = function (e) {\n        this.notify(events.keyDown, { member: 'keydown', args: e });\n        if (this.formatter.getUndoRedoStack().length === 0) {\n            this.formatter.saveData();\n        }\n        if (e.action && e.action !== 'paste' || e.which === 9) {\n            this.formatter.process(this, null, e);\n            switch (e.action) {\n                case 'toolbar-focus':\n                    if (this.toolbarSettings.enable) {\n                        var selector = '.e-toolbar-item[aria-disabled=\"false\"][title] [tabindex]';\n                        this.toolbarModule.baseToolbar.toolbarObj.element.querySelector(selector).focus();\n                    }\n                    break;\n                case 'escape':\n                    this.contentModule.getEditPanel().focus();\n                    break;\n            }\n        }\n        if (!isNOU(this.placeholder)) {\n            this.setPlaceHolder();\n        }\n        this.autoResize();\n    };\n    RichTextEditor.prototype.keyUp = function (e) {\n        this.notify(events.keyUp, { member: 'keyup', args: e });\n        var allowedKeys = e.which === 32 || e.which === 13 || e.which === 8 || e.which === 46;\n        if (((e.key !== 'shift' && !e.ctrlKey) && e.key && e.key.length === 1 || allowedKeys) || (this.editorMode === 'Markdown'\n            && ((e.key !== 'shift' && !e.ctrlKey) && e.key && e.key.length === 1 || allowedKeys)) && !this.inlineMode.enable) {\n            this.formatter.onKeyHandler(this, e);\n        }\n        if (this.inputElement && this.inputElement.textContent.length !== 0) {\n            this.notify(events.toolbarRefresh, { args: e });\n        }\n        if (!isNOU(this.placeholder)) {\n            this.setPlaceHolder();\n        }\n    };\n    RichTextEditor.prototype.updateValue = function (value) {\n        if (isNOU(value)) {\n            this.setProperties({ value: this.inputElement.innerHTML });\n        }\n        else {\n            this.setProperties({ value: value });\n        }\n    };\n    RichTextEditor.prototype.triggerEditArea = function (e) {\n        if (!isIDevice()) {\n            this.notify(events.editAreaClick, { member: 'editAreaClick', args: e });\n        }\n        else {\n            var touch = (e.touches ? e.changedTouches[0] : e);\n            if (this.clickPoints.clientX === touch.clientX && this.clickPoints.clientY === touch.clientY) {\n                this.notify(events.editAreaClick, { member: 'editAreaClick', args: e });\n            }\n        }\n    };\n    RichTextEditor.prototype.notifyMouseUp = function (e) {\n        this.notify(events.mouseUp, { member: 'mouseUp', args: e });\n        if (this.inputElement && ((this.editorMode === 'HTML' && this.inputElement.textContent.length !== 0) ||\n            (this.editorMode === 'Markdown' && this.inputElement.value.length !== 0))) {\n            this.notify(events.toolbarRefresh, { args: e });\n        }\n        this.triggerEditArea(e);\n    };\n    RichTextEditor.prototype.mouseUp = function (e) {\n        if (this.quickToolbarSettings.showOnRightClick && Browser.isDevice) {\n            var target = e.target;\n            var closestTable = closest(target, 'table');\n            if (target && target.nodeName === 'A' || target.nodeName === 'IMG' || (target.nodeName === 'TD' || target.nodeName === 'TH' ||\n                target.nodeName === 'TABLE' || (closestTable && this.contentModule.getEditPanel().contains(closestTable)))) {\n                return;\n            }\n        }\n        this.notifyMouseUp(e);\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.ensureModuleInjected = function (module) {\n        return this.getInjectedModules().indexOf(module) >= 0;\n    };\n    RichTextEditor.prototype.onCopy = function () {\n        this.contentModule.getDocument().execCommand('copy', false, null);\n    };\n    RichTextEditor.prototype.onCut = function () {\n        this.contentModule.getDocument().execCommand('cut', false, null);\n    };\n    RichTextEditor.prototype.onPaste = function (e) {\n        var _this = this;\n        var evenArgs = {\n            originalEvent: e,\n            cancel: false,\n            requestType: 'Paste'\n        };\n        this.trigger(events.actionBegin, evenArgs);\n        if (!evenArgs.cancel) {\n            if (!isNOU(this.pasteCleanupModule)) {\n                this.notify(events.pasteClean, { args: e });\n            }\n            else {\n                var args_1 = { requestType: 'Paste', editorMode: this.editorMode, event: e };\n                var value = null;\n                if (e && !isNOU(e.clipboardData)) {\n                    value = e.clipboardData.getData('text/plain');\n                }\n                var file = e && e.clipboardData && e.clipboardData.items.length > 0 ?\n                    e.clipboardData.items[0].getAsFile() : null;\n                if (value !== null) {\n                    this.notify(events.paste, {\n                        file: file,\n                        args: e,\n                        text: value\n                    });\n                }\n                setTimeout(function () { _this.formatter.onSuccess(_this, args_1); }, 0);\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.clipboardAction = function (action, event) {\n        switch (action.toLowerCase()) {\n            case 'cut':\n                this.onCut();\n                this.formatter.onSuccess(this, {\n                    requestType: 'Cut',\n                    editorMode: this.editorMode,\n                    event: event\n                });\n                break;\n            case 'copy':\n                this.onCopy();\n                this.formatter.onSuccess(this, {\n                    requestType: 'Copy',\n                    editorMode: this.editorMode,\n                    event: event\n                });\n                break;\n            case 'paste':\n                this.onPaste(event);\n                break;\n        }\n    };\n    /**\n     * Destroys the component (detaches/removes all event handlers, attributes, classes, and empties the component element).\n     * @method destroy\n     * @return {void}\n     */\n    RichTextEditor.prototype.destroy = function () {\n        this.notify(events.destroy, {});\n        this.destroyDependentModules();\n        if (!isNOU(this.timeInterval)) {\n            clearInterval(this.timeInterval);\n            this.timeInterval = null;\n        }\n        this.unWireEvents();\n        if (this.originalElement.tagName === 'TEXTAREA') {\n            this.element.parentElement.insertBefore(this.valueContainer, this.element);\n            this.valueContainer.id = this.getID();\n            this.valueContainer.removeAttribute('name');\n            detach(this.element);\n            if (this.originalElement.innerHTML.trim() !== '') {\n                this.valueContainer.value = this.originalElement.innerHTML.trim();\n                this.setProperties({ value: (!isNOU(this.initialValue) ? this.initialValue : null) }, true);\n            }\n            else {\n                this.valueContainer.value = '';\n            }\n            this.element = this.valueContainer;\n        }\n        else {\n            if (this.originalElement.innerHTML.trim() !== '') {\n                this.element.innerHTML = this.originalElement.innerHTML.trim();\n                this.setProperties({ value: (!isNOU(this.initialValue) ? this.initialValue : null) }, true);\n            }\n            else {\n                this.element.innerHTML = '';\n            }\n        }\n        if (this.placeholder && this.placeHolderWrapper) {\n            this.placeHolderWrapper = null;\n        }\n        if (!isNOU(this.cssClass)) {\n            removeClass([this.element], this.cssClass);\n        }\n        this.removeHtmlAttributes();\n        this.removeAttributes();\n        _super.prototype.destroy.call(this);\n    };\n    RichTextEditor.prototype.removeHtmlAttributes = function () {\n        if (this.htmlAttributes) {\n            var keys = Object.keys(this.htmlAttributes);\n            for (var i = 0; i < keys.length && this.element.hasAttribute(keys[i]); i++) {\n                this.element.removeAttribute(keys[i]);\n            }\n        }\n    };\n    RichTextEditor.prototype.removeAttributes = function () {\n        if (!this.enabled) {\n            removeClass([this.element], classes.CLS_DISABLED);\n        }\n        if (this.enableRtl) {\n            removeClass([this.element], classes.CLS_RTL);\n        }\n        if (this.readonly) {\n            removeClass([this.element], classes.CLS_RTE_READONLY);\n        }\n        if (this.element.style.width !== '' && this.originalElement.style.width === '') {\n            this.element.style.removeProperty('width');\n        }\n        if (this.element.style.height !== '' && this.originalElement.style.height === '') {\n            this.element.style.removeProperty('height');\n        }\n        this.element.removeAttribute('aria-disabled');\n        this.element.removeAttribute('role');\n        this.element.removeAttribute('tabindex');\n    };\n    RichTextEditor.prototype.destroyDependentModules = function () {\n        /* destroy dependent modules */\n        this.renderModule.destroy();\n        this.formatter.editorManager.undoRedoManager.destroy();\n        this.sourceCodeModule.destroy();\n    };\n    /**\n     * Returns the HTML or Text inside the RichTextEditor.\n     * @return {Element}\n     */\n    RichTextEditor.prototype.getContent = function () {\n        return this.contentModule.getPanel();\n    };\n    /**\n     * Returns the text content as string.\n     * @return {string}\n     */\n    RichTextEditor.prototype.getText = function () {\n        return this.contentModule.getText();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    RichTextEditor.prototype.getModuleName = function () {\n        return 'richtexteditor';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    RichTextEditor.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'value':\n                    var nVal = newProp[prop];\n                    var val = this.editorMode === 'HTML' ? getEditValue(nVal, this) : nVal;\n                    if (!isNOU(nVal) && nVal !== '') {\n                        this.value = (this.enableHtmlEncode) ? this.encode(decode(val)) : val;\n                    }\n                    this.updatePanelValue();\n                    this.setPlaceHolder();\n                    if (this.showCharCount) {\n                        this.countModule.refresh();\n                    }\n                    break;\n                case 'valueTemplate':\n                    this.setValue();\n                    if (this.showCharCount) {\n                        this.countModule.refresh();\n                    }\n                    break;\n                case 'width':\n                    this.setWidth(newProp[prop]);\n                    if (this.toolbarSettings.enable) {\n                        this.toolbarModule.refreshToolbarOverflow();\n                        this.resizeHandler();\n                    }\n                    break;\n                case 'height':\n                    this.setHeight(newProp[prop]);\n                    this.setContentHeight();\n                    this.autoResize();\n                    break;\n                case 'readonly':\n                    this.setReadOnly(false);\n                    break;\n                case 'cssClass':\n                    this.element.classList.remove(oldProp[prop]);\n                    this.setCssClass(newProp[prop]);\n                    break;\n                case 'enabled':\n                    this.setEnable();\n                    break;\n                case 'enableRtl':\n                    this.updateRTL();\n                    break;\n                case 'placeholder':\n                    this.placeholder = newProp[prop];\n                    this.setPlaceHolder();\n                    break;\n                case 'htmlAttributes':\n                    setAttributes(this.htmlAttributes, this, false, false);\n                    break;\n                case 'iframeSettings':\n                    var frameSetting = oldProp[prop];\n                    if (frameSetting.resources) {\n                        var iframe = this.contentModule.getDocument();\n                        var header = iframe.querySelector('head');\n                        var files = void 0;\n                        if (frameSetting.resources.scripts) {\n                            files = header.querySelectorAll('.' + classes.CLS_SCRIPT_SHEET);\n                            this.removeSheets(files);\n                        }\n                        if (frameSetting.resources.styles) {\n                            files = header.querySelectorAll('.' + classes.CLS_STYLE_SHEET);\n                            this.removeSheets(files);\n                        }\n                    }\n                    this.setIframeSettings();\n                    break;\n                case 'locale':\n                    _super.prototype.refresh.call(this);\n                    break;\n                case 'inlineMode':\n                    this.notify(events.modelChanged, { module: 'quickToolbar', newProp: newProp, oldProp: oldProp });\n                    this.setContentHeight();\n                    break;\n                case 'toolbarSettings':\n                    this.notify(events.modelChanged, { module: 'toolbar', newProp: newProp, oldProp: oldProp });\n                    this.setContentHeight();\n                    break;\n                case 'maxLength':\n                    if (this.showCharCount) {\n                        this.countModule.refresh();\n                    }\n                    break;\n                case 'showCharCount':\n                    if (newProp[prop] && this.countModule) {\n                        this.countModule.renderCount();\n                    }\n                    else if (newProp[prop] === false && this.countModule) {\n                        this.countModule.destroy();\n                    }\n                    break;\n                case 'enableHtmlEncode':\n                    this.updateValueData();\n                    break;\n                case 'undoRedoSteps':\n                case 'undoRedoTimer':\n                    this.formatter.editorManager.observer.notify(CONSTANT.MODEL_CHANGED, { newProp: newProp, oldProp: oldProp });\n                    break;\n                case 'quickToolbarSettings':\n                    newProp.quickToolbarSettings.showOnRightClick ? this.wireContextEvent() : this.unWireContextEvent();\n                    this.notify(events.modelChanged, { newProp: newProp, oldProp: oldProp });\n                    break;\n                default:\n                    this.notify(events.modelChanged, { newProp: newProp, oldProp: oldProp });\n                    break;\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.updateValueData = function () {\n        if (this.enableHtmlEncode) {\n            this.setProperties({ value: this.encode(decode(this.inputElement.innerHTML)) });\n        }\n        else {\n            this.setProperties({\n                value: /<[a-z][\\s\\S]*>/i.test(this.inputElement.innerHTML) ? this.inputElement.innerHTML :\n                    decode(this.inputElement.innerHTML)\n            });\n        }\n    };\n    RichTextEditor.prototype.removeSheets = function (srcList) {\n        var i;\n        for (i = 0; i < srcList.length; i++) {\n            detach(srcList[i]);\n        }\n    };\n    RichTextEditor.prototype.updatePanelValue = function () {\n        var value;\n        if (this.editorMode === 'HTML' && this.value) {\n            value = this.value.replace(/>\\s+</g, '><');\n        }\n        else {\n            value = this.value;\n        }\n        value = (this.enableHtmlEncode && this.value) ? decode(value) : value;\n        if (value) {\n            if (this.valueContainer) {\n                this.valueContainer.value = (this.enableHtmlEncode) ? this.value : value;\n            }\n            if (this.editorMode === 'HTML' && this.inputElement && this.inputElement.innerHTML.trim() !== value.trim()) {\n                this.inputElement.innerHTML = value;\n            }\n            else if (this.editorMode === 'Markdown' && this.inputElement\n                && this.inputElement.value.trim() !== value.trim()) {\n                this.inputElement.value = value;\n            }\n        }\n        else {\n            if (this.editorMode === 'HTML') {\n                this.inputElement.innerHTML = '<p><br/></p>';\n            }\n            else {\n                this.inputElement.value = '';\n            }\n            if (this.valueContainer) {\n                this.valueContainer.value = '';\n            }\n        }\n        if (this.showCharCount) {\n            this.countModule.refresh();\n        }\n    };\n    RichTextEditor.prototype.setHeight = function (height) {\n        if (height !== 'auto') {\n            this.element.style.height = formatUnit(height);\n        }\n        else {\n            this.element.style.height = 'auto';\n        }\n    };\n    RichTextEditor.prototype.setPlaceHolder = function () {\n        if (this.inputElement && this.placeholder && this.iframeSettings.enable !== true) {\n            if (this.editorMode !== 'Markdown') {\n                if (!this.placeHolderWrapper) {\n                    this.placeHolderWrapper = this.createElement('span', { className: 'rte-placeholder' });\n                    if (this.inputElement) {\n                        this.inputElement.parentElement.insertBefore(this.placeHolderWrapper, this.inputElement);\n                    }\n                    attributes(this.placeHolderWrapper, {\n                        'style': 'font-size: 16px; padding: 16px; margin-left: 0px; margin-right: 0px;'\n                    });\n                }\n                this.placeHolderWrapper.innerHTML = this.placeholder;\n                if (this.inputElement.textContent.length !== 0) {\n                    this.placeHolderWrapper.style.display = 'none';\n                }\n                else {\n                    this.placeHolderWrapper.style.display = 'block';\n                }\n            }\n            else {\n                this.inputElement.setAttribute('placeholder', this.placeholder);\n            }\n        }\n    };\n    RichTextEditor.prototype.setWidth = function (width) {\n        if (width !== 'auto') {\n            setStyleAttribute(this.element, { 'width': formatUnit(this.width) });\n        }\n        else {\n            this.element.style.width = 'auto';\n        }\n    };\n    RichTextEditor.prototype.setCssClass = function (cssClass) {\n        if (!isNOU(cssClass)) {\n            this.element.classList.add(cssClass);\n        }\n    };\n    RichTextEditor.prototype.updateRTL = function () {\n        this.notify(events.rtlMode, { enableRtl: this.enableRtl });\n        if (this.enableRtl) {\n            this.element.classList.add(classes.CLS_RTL);\n        }\n        else {\n            this.element.classList.remove(classes.CLS_RTL);\n        }\n    };\n    RichTextEditor.prototype.updateReadOnly = function () {\n        this.notify(events.readOnlyMode, { editPanel: this.inputElement, mode: this.readonly });\n    };\n    RichTextEditor.prototype.setReadOnly = function (initial) {\n        this.updateReadOnly();\n        if (!initial) {\n            if (this.readonly && this.enabled) {\n                this.unbindEvents();\n            }\n            else if (this.enabled) {\n                this.bindEvents();\n            }\n        }\n    };\n    /**\n     * By default, prints all the pages of the RichTextEditor.\n     * @return {void}\n     */\n    RichTextEditor.prototype.print = function () {\n        var printWind;\n        var printArgs = {\n            element: this.inputElement,\n            requestType: 'print',\n            cancel: false\n        };\n        this.trigger(events.actionBegin, printArgs);\n        printWind = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth);\n        if (Browser.info.name === 'msie') {\n            printWind.resizeTo(screen.availWidth, screen.availHeight);\n        }\n        printWind = printWindow(this.inputElement, printWind);\n        if (printArgs.cancel) {\n            return;\n        }\n        var actionArgs = {\n            requestType: 'print'\n        };\n        this.trigger(events.actionComplete, actionArgs);\n    };\n    /**\n     * Applies all the pending property changes and render the component again.\n     * @public\n     */\n    RichTextEditor.prototype.refresh = function () {\n        this.renderModule.refresh();\n    };\n    /**\n     * Shows the RichTextEditor component in full-screen mode.\n     */\n    RichTextEditor.prototype.showFullScreen = function () {\n        if (this.readonly) {\n            return;\n        }\n        this.fullScreenModule.showFullScreen();\n    };\n    /**\n     * Enables the give toolbar items in the RichTextEditor component.\n     * @param {string | string[]} items - Specifies the single or collection of items\n     * that you want to be enable in Rich Text Editor’s Toolbar.\n     * @public\n     */\n    RichTextEditor.prototype.enableToolbarItem = function (items) {\n        this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(), items, true);\n    };\n    /**\n     * Disables the given toolbar items in the RichTextEditor component.\n     * @param {string | string[]} items - Specifies the single or collection of items\n     * that you want to be disable in Rich Text Editor’s Toolbar.\n     * @public\n     */\n    RichTextEditor.prototype.disableToolbarItem = function (items) {\n        this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(), items, false);\n    };\n    /**\n     * Removes the give toolbar items from the RichTextEditor component.\n     * @param {string | string[]} items - Specifies the single or collection of items\n     * that you want to be remove from Rich Text Editor’s Toolbar.\n     * @public\n     */\n    RichTextEditor.prototype.removeToolbarItem = function (items) {\n        this.toolbarModule.removeTBarItems(items);\n    };\n    /**\n     * Get the selected range from the RichTextEditor's content.\n     * @public\n     */\n    RichTextEditor.prototype.getRange = function () {\n        return this.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n    };\n    RichTextEditor.prototype.initializeServices = function () {\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n        this.serviceLocator.register('rteLocale', this.localeObj = new L10n(this.getModuleName(), defaultLocale, this.locale));\n    };\n    RichTextEditor.prototype.RTERender = function () {\n        var rendererFactory = this.serviceLocator.getService('rendererFactory');\n        this.contentModule = rendererFactory.getRenderer(RenderType.Content);\n        this.fullScreenModule = new FullScreen(this);\n        this.renderModule.render();\n        this.inputElement = this.contentModule.getEditPanel();\n        this.setHeight(this.height);\n        setAttributes(this.htmlAttributes, this, false, true);\n        if (this.iframeSettings) {\n            this.setIframeSettings();\n        }\n        this.setCssClass(this.cssClass);\n        this.updateEnable();\n        this.setPlaceHolder();\n        this.updateRTL();\n        this.updateReadOnly();\n        this.updatePanelValue();\n        if (this.enableHtmlEncode && !isNOU(this.value)) {\n            this.setProperties({ value: this.encode(decode(this.value)) });\n        }\n    };\n    RichTextEditor.prototype.setIframeSettings = function () {\n        if (this.iframeSettings.resources) {\n            var styleSrc = this.iframeSettings.resources.styles;\n            var scriptSrc = this.iframeSettings.resources.scripts;\n            if (this.iframeSettings.resources.scripts.length > 0) {\n                this.InjectSheet(true, scriptSrc);\n            }\n            if (this.iframeSettings.resources.styles.length > 0) {\n                this.InjectSheet(false, styleSrc);\n            }\n        }\n        if (this.iframeSettings.attributes) {\n            setAttributes(this.iframeSettings.attributes, this, true, false);\n        }\n    };\n    RichTextEditor.prototype.InjectSheet = function (scriptSheet, srcList) {\n        try {\n            if (srcList && srcList.length > 0) {\n                var iFrame = this.contentModule.getDocument();\n                var target = iFrame.querySelector('head');\n                for (var i = 0; i < srcList.length; i++) {\n                    if (scriptSheet) {\n                        var scriptEle = this.createScriptElement();\n                        scriptEle.src = srcList[i];\n                        target.appendChild(scriptEle);\n                    }\n                    else {\n                        var styleEle = this.createStyleElement();\n                        styleEle.href = srcList[i];\n                        target.appendChild(styleEle);\n                    }\n                }\n            }\n        }\n        catch (e) {\n            return;\n        }\n    };\n    RichTextEditor.prototype.createScriptElement = function () {\n        var scriptEle = this.createElement('script', {\n            className: classes.CLS_SCRIPT_SHEET\n        });\n        scriptEle.type = 'text/javascript';\n        return scriptEle;\n    };\n    RichTextEditor.prototype.createStyleElement = function () {\n        var styleEle = this.createElement('link', {\n            className: classes.CLS_STYLE_SHEET\n        });\n        styleEle.rel = 'stylesheet';\n        return styleEle;\n    };\n    RichTextEditor.prototype.setValue = function () {\n        if (this.valueTemplate) {\n            if (typeof this.valueTemplate === 'string') {\n                this.setProperties({ value: this.valueTemplate });\n            }\n            else {\n                var compiledString = void 0;\n                compiledString = compile(this.valueTemplate);\n                var compiledTemplate = compiledString({});\n                for (var i = 0; i < compiledTemplate.length; i++) {\n                    var item = compiledTemplate[i];\n                    append([item], this.element);\n                }\n                this.setProperties({ value: this.element.innerHTML.trim() });\n            }\n        }\n        else if (this.element.innerHTML.trim() !== '') {\n            if (this.element.tagName === 'TEXTAREA') {\n                this.setProperties({ value: decode(this.element.innerHTML.trim()) });\n            }\n            else {\n                this.setProperties({ value: this.element.innerHTML.trim() });\n            }\n        }\n    };\n    RichTextEditor.prototype.setContentHeight = function (target, isExpand) {\n        var heightValue;\n        var topValue = 0;\n        var cntEle = (this.sourceCodeModule.getPanel() &&\n            this.sourceCodeModule.getPanel().parentElement.style.display === 'block') ? this.sourceCodeModule.getPanel().parentElement :\n            this.contentModule.getPanel();\n        var rteHeight = this.element.offsetHeight;\n        var tbHeight = this.getToolbar() ? this.toolbarModule.getToolbarHeight() : 0;\n        var expandPopHeight = this.getToolbar() ? this.toolbarModule.getExpandTBarPopHeight() : 0;\n        if (this.toolbarSettings.type === ToolbarType.Expand && isExpand && target !== 'preview') {\n            heightValue = (this.height === 'auto') ? 'auto' : rteHeight - (tbHeight + expandPopHeight) + 'px';\n            topValue = (!this.toolbarSettings.enableFloating) ? expandPopHeight : 0;\n        }\n        else {\n            if (this.height === 'auto' && !(this.element.classList.contains('e-rte-full-screen'))) {\n                heightValue = 'auto';\n            }\n            else {\n                heightValue = rteHeight - tbHeight + 'px';\n            }\n        }\n        setStyleAttribute(cntEle, { height: heightValue, marginTop: topValue + 'px' });\n        if (this.iframeSettings.enable && target === 'sourceCode') {\n            var codeElement = select('.' + classes.CLS_RTE_CONTENT, this.element);\n            setStyleAttribute(codeElement, { height: heightValue, marginTop: topValue + 'px' });\n        }\n        if (this.toolbarSettings.enableFloating && this.getToolbar() && !this.inlineMode.enable) {\n            if (isExpand) {\n                setStyleAttribute(this.getToolbar().parentElement, { height: (tbHeight + expandPopHeight) + 'px' });\n            }\n            else {\n                setStyleAttribute(this.getToolbar().parentElement, { height: tbHeight + 'px' });\n            }\n        }\n        this.autoResize();\n    };\n    /**\n     * Retrieves the HTML from RichTextEditor.\n     * @public\n     */\n    RichTextEditor.prototype.getHtml = function () {\n        return this.value;\n    };\n    /**\n     * Shows the source HTML/MD markup.\n     * @public\n     */\n    RichTextEditor.prototype.showSourceCode = function () {\n        if (this.readonly) {\n            return;\n        }\n        this.notify(events.sourceCode, {});\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.getBaseToolbarObject = function () {\n        var tbObj;\n        if (this.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            tbObj = this.quickToolbarModule && this.quickToolbarModule.getInlineBaseToolbar();\n        }\n        else {\n            tbObj = this.toolbarModule && this.toolbarModule.getBaseToolbar();\n        }\n        return tbObj;\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.getToolbar = function () {\n        return this.toolbarModule ? this.toolbarModule.getToolbarElement() : null;\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.getToolbarElement = function () {\n        return this.toolbarModule && this.toolbarModule.getToolbarElement();\n    };\n    RichTextEditor.prototype.getID = function () {\n        return (this.originalElement.tagName === 'TEXTAREA' ? this.valueContainer.id : this.element.id);\n    };\n    RichTextEditor.prototype.mouseDownHandler = function (e) {\n        var touch = (e.touches ? e.changedTouches[0] : e);\n        addClass([this.element], [classes.CLS_FOCUS]);\n        this.preventDefaultResize(e);\n        this.notify(events.mouseDown, { args: e });\n        this.clickPoints = { clientX: touch.clientX, clientY: touch.clientY };\n    };\n    RichTextEditor.prototype.preventImgResize = function (e) {\n        if (e.target.nodeName.toLocaleLowerCase() === 'img') {\n            e.preventDefault();\n        }\n    };\n    RichTextEditor.prototype.preventDefaultResize = function (e) {\n        if (Browser.info.name === 'msie') {\n            this.contentModule.getEditPanel().addEventListener('mscontrolselect', this.preventImgResize);\n        }\n        else if (Browser.info.name === 'mozilla') {\n            this.contentModule.getDocument().execCommand('enableObjectResizing', false, 'false');\n            this.contentModule.getDocument().execCommand('enableInlineTableEditing', false, 'false');\n        }\n    };\n    RichTextEditor.prototype.defaultResize = function (e) {\n        if (Browser.info.name === 'msie') {\n            this.contentModule.getEditPanel().removeEventListener('mscontrolselect', this.preventImgResize);\n        }\n        else if (Browser.info.name === 'mozilla') {\n            this.contentModule.getDocument().execCommand('enableObjectResizing', true, 'true');\n            this.contentModule.getDocument().execCommand('enableInlineTableEditing', true, 'true');\n        }\n    };\n    RichTextEditor.prototype.resizeHandler = function () {\n        var isExpand = false;\n        if (this.toolbarSettings.enable && !this.inlineMode.enable) {\n            this.toolbarModule.refreshToolbarOverflow();\n            isExpand = this.toolbarModule.baseToolbar.toolbarObj.element.classList.contains(classes.CLS_EXPAND_OPEN);\n        }\n        this.setContentHeight('', isExpand);\n    };\n    RichTextEditor.prototype.scrollHandler = function (e) {\n        this.notify(events.scroll, { args: e });\n    };\n    RichTextEditor.prototype.focusHandler = function (e) {\n        if (!this.isRTE || this.isFocusOut) {\n            this.isRTE = this.isFocusOut ? false : true;\n            this.isFocusOut = false;\n            addClass([this.element], [classes.CLS_FOCUS]);\n            if (this.editorMode === 'HTML') {\n                this.cloneValue = (this.inputElement.innerHTML === '<p><br></p>') ? null : this.enableHtmlEncode ?\n                    this.encode(decode(this.inputElement.innerHTML)) : this.inputElement.innerHTML;\n            }\n            else {\n                this.cloneValue = this.inputElement.value === '' ? null :\n                    this.inputElement.value;\n            }\n            if (document.activeElement === this.element) {\n                this.contentModule.getEditPanel().focus();\n            }\n            this.preventDefaultResize(e);\n            this.trigger('focus', { event: e, isInteracted: Object.keys(e).length === 0 ? false : true });\n            if (!isNOU(this.saveInterval) && this.saveInterval > 0) {\n                this.timeInterval = setInterval(this.updateIntervalValue.bind(this), this.saveInterval);\n            }\n            EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n        }\n    };\n    RichTextEditor.prototype.getUpdatedValue = function () {\n        var value;\n        if (this.editorMode === 'HTML') {\n            value = (this.inputElement.innerHTML === '<p><br></p>') ? null : this.enableHtmlEncode ?\n                this.encode(decode(this.inputElement.innerHTML)) : this.inputElement.innerHTML;\n        }\n        else {\n            value = this.inputElement.value === '' ? null :\n                this.inputElement.value;\n        }\n        return value;\n    };\n    RichTextEditor.prototype.updateIntervalValue = function () {\n        this.setProperties({ value: this.getUpdatedValue() }, true);\n        this.valueContainer.value = this.value;\n        this.invokeChangeEvent();\n    };\n    RichTextEditor.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        var rteElement = closest(target, '.' + classes.CLS_RTE);\n        if (!this.element.contains(e.target) && document !== e.target && rteElement !== this.element &&\n            !closest(target, '[aria-owns=\"' + this.getID() + '\"]')) {\n            this.isBlur = true;\n            this.isRTE = false;\n        }\n        this.notify(events.docClick, { args: e });\n    };\n    RichTextEditor.prototype.blurHandler = function (e) {\n        var trg = e.relatedTarget;\n        if (trg) {\n            var rteElement = closest(trg, '.' + classes.CLS_RTE);\n            if (rteElement && rteElement === this.element) {\n                this.isBlur = false;\n            }\n            else if (closest(trg, '[aria-owns=\"' + this.getID() + '\"]')) {\n                this.isBlur = false;\n            }\n            else {\n                this.isBlur = true;\n                trg = null;\n            }\n        }\n        if (this.isBlur && isNOU(trg)) {\n            removeClass([this.element], [classes.CLS_FOCUS]);\n            this.notify(events.focusChange, {});\n            var value = this.getUpdatedValue();\n            this.setProperties({ value: value });\n            this.notify(events.toolbarRefresh, { args: e, documentNode: document });\n            this.invokeChangeEvent();\n            this.isFocusOut = true;\n            this.isBlur = false;\n            dispatchEvent(this.valueContainer, 'focusout');\n            this.defaultResize(e);\n            this.trigger('blur', { event: e, isInteracted: Object.keys(e).length === 0 ? false : true });\n            if (!isNOU(this.timeInterval)) {\n                clearInterval(this.timeInterval);\n                this.timeInterval = null;\n            }\n            EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        }\n        else {\n            this.isRTE = true;\n        }\n    };\n    RichTextEditor.prototype.invokeChangeEvent = function () {\n        var eventArgs = {\n            value: this.value\n        };\n        if (this.value !== this.cloneValue) {\n            this.trigger('change', eventArgs);\n            this.cloneValue = this.value;\n        }\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.wireScrollElementsEvents = function () {\n        this.scrollParentElements = getScrollableParent(this.element);\n        for (var _i = 0, _a = this.scrollParentElements; _i < _a.length; _i++) {\n            var element = _a[_i];\n            EventHandler.add(element, 'scroll', this.scrollHandler, this);\n        }\n    };\n    RichTextEditor.prototype.wireContextEvent = function () {\n        if (this.quickToolbarSettings.showOnRightClick) {\n            EventHandler.add(this.inputElement, 'contextmenu', this.contextHandler, this);\n            if (Browser.isDevice) {\n                this.touchModule = new EJ2Touch(this.inputElement, { tapHold: this.touchHandler.bind(this), tapHoldThreshold: 500 });\n            }\n        }\n    };\n    RichTextEditor.prototype.unWireContextEvent = function () {\n        EventHandler.remove(this.inputElement, 'contextmenu', this.contextHandler);\n        if (Browser.isDevice && this.touchModule) {\n            this.touchModule.destroy();\n        }\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.unWireScrollElementsEvents = function () {\n        this.scrollParentElements = getScrollableParent(this.element);\n        for (var _i = 0, _a = this.scrollParentElements; _i < _a.length; _i++) {\n            var element = _a[_i];\n            EventHandler.remove(element, 'scroll', this.scrollHandler);\n        }\n    };\n    RichTextEditor.prototype.touchHandler = function (e) {\n        this.notifyMouseUp(e.originalEvent);\n        this.triggerEditArea(e.originalEvent);\n    };\n    RichTextEditor.prototype.contextHandler = function (e) {\n        e.preventDefault();\n    };\n    RichTextEditor.prototype.resetHandler = function () {\n        this.setProperties({ value: this.valueContainer.defaultValue === '' ? null : this.valueContainer.defaultValue });\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.autoResize = function () {\n        var _this = this;\n        if (this.height === 'auto') {\n            if (this.editorMode === 'Markdown') {\n                setTimeout(function () { _this.setAutoHeight(_this.inputElement); }, 0);\n            }\n            else if (this.iframeSettings.enable) {\n                var iframeElement_1 = this.element.querySelector('#' + this.getID() + '_rte-view');\n                setTimeout(function () { _this.setAutoHeight(iframeElement_1); }, 0);\n            }\n        }\n        else {\n            this.inputElement.style.overflow = null;\n        }\n    };\n    RichTextEditor.prototype.setAutoHeight = function (element) {\n        element.style.height = '';\n        element.style.height = this.inputElement.scrollHeight + 'px';\n        element.style.overflow = 'hidden';\n    };\n    RichTextEditor.prototype.wireEvents = function () {\n        this.element.addEventListener('focusin', this.onFocusHandler, true);\n        this.element.addEventListener('focusout', this.onBlurHandler, true);\n        if (this.readonly && this.enabled) {\n            return;\n        }\n        this.bindEvents();\n    };\n    RichTextEditor.prototype.bindEvents = function () {\n        this.keyboardModule = new KeyboardEvents(this.inputElement, {\n            keyAction: this.keyDown.bind(this), keyConfigs: __assign({}, this.formatter.keyConfig, this.keyConfig),\n            eventName: 'keydown'\n        });\n        var formElement = closest(this.valueContainer, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetHandler, this);\n        }\n        EventHandler.add(this.inputElement, 'keyup', this.keyUp, this);\n        EventHandler.add(this.inputElement, 'paste', this.onPaste, this);\n        EventHandler.add(this.inputElement, Browser.touchEndEvent, debounce(this.mouseUp, 30), this);\n        EventHandler.add(this.inputElement, Browser.touchStartEvent, this.mouseDownHandler, this);\n        this.wireContextEvent();\n        this.formatter.editorManager.observer.on(CONSTANT.KEY_DOWN_HANDLER, this.editorKeyDown, this);\n        this.element.ownerDocument.defaultView.addEventListener('resize', this.onResizeHandler, true);\n        if (this.iframeSettings.enable) {\n            EventHandler.add(this.inputElement, 'focusin', this.focusHandler, this);\n            EventHandler.add(this.inputElement, 'focusout', this.blurHandler, this);\n            EventHandler.add(this.inputElement.ownerDocument, Browser.touchStartEvent, this.onIframeMouseDown, this);\n        }\n        this.wireScrollElementsEvents();\n    };\n    RichTextEditor.prototype.onIframeMouseDown = function (e) {\n        this.isBlur = false;\n        this.notify(events.iframeMouseDown, e);\n    };\n    RichTextEditor.prototype.editorKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'copy':\n                this.onCopy();\n                break;\n            case 'cut':\n                this.onCut();\n                break;\n        }\n        if (e.callBack && (e.event.action === 'copy' || e.event.action === 'cut')) {\n            e.callBack({\n                requestType: e.event.action,\n                editorMode: 'HTML',\n                event: e.event\n            });\n        }\n    };\n    RichTextEditor.prototype.unWireEvents = function () {\n        this.element.removeEventListener('focusin', this.onFocusHandler, true);\n        this.element.removeEventListener('focusout', this.onBlurHandler, true);\n        if (this.readonly && this.enabled) {\n            return;\n        }\n        this.unbindEvents();\n    };\n    RichTextEditor.prototype.unbindEvents = function () {\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n        var formElement = closest(this.valueContainer, 'form');\n        if (formElement) {\n            EventHandler.remove(formElement, 'reset', this.resetHandler);\n        }\n        EventHandler.remove(this.inputElement, 'keyup', this.keyUp);\n        EventHandler.remove(this.inputElement, 'paste', this.onPaste);\n        EventHandler.remove(this.inputElement, Browser.touchEndEvent, debounce(this.mouseUp, 30));\n        EventHandler.remove(this.inputElement, Browser.touchStartEvent, this.mouseDownHandler);\n        this.unWireContextEvent();\n        if (this.formatter) {\n            this.formatter.editorManager.observer.off(CONSTANT.KEY_DOWN_HANDLER, this.editorKeyDown);\n        }\n        this.element.ownerDocument.defaultView.removeEventListener('resize', this.onResizeHandler, true);\n        if (this.iframeSettings.enable) {\n            EventHandler.remove(this.inputElement, 'focusin', this.focusHandler);\n            EventHandler.remove(this.inputElement, 'focusout', this.blurHandler);\n            EventHandler.remove(this.inputElement.ownerDocument, Browser.touchStartEvent, this.onIframeMouseDown);\n        }\n        this.unWireScrollElementsEvents();\n    };\n    __decorate([\n        Complex({}, ToolbarSettings)\n    ], RichTextEditor.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Complex({}, QuickToolbarSettings)\n    ], RichTextEditor.prototype, \"quickToolbarSettings\", void 0);\n    __decorate([\n        Complex({}, PasteCleanupSettings)\n    ], RichTextEditor.prototype, \"pasteCleanupSettings\", void 0);\n    __decorate([\n        Complex({}, IFrameSettings)\n    ], RichTextEditor.prototype, \"iframeSettings\", void 0);\n    __decorate([\n        Complex({}, ImageSettings)\n    ], RichTextEditor.prototype, \"insertImageSettings\", void 0);\n    __decorate([\n        Complex({}, TableSettings)\n    ], RichTextEditor.prototype, \"tableSettings\", void 0);\n    __decorate([\n        Property(0)\n    ], RichTextEditor.prototype, \"floatingToolbarOffset\", void 0);\n    __decorate([\n        Complex({}, InlineMode)\n    ], RichTextEditor.prototype, \"inlineMode\", void 0);\n    __decorate([\n        Property('100%')\n    ], RichTextEditor.prototype, \"width\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property({})\n    ], RichTextEditor.prototype, \"htmlAttributes\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"placeholder\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"readonly\", void 0);\n    __decorate([\n        Property(true)\n    ], RichTextEditor.prototype, \"enabled\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enableHtmlEncode\", void 0);\n    __decorate([\n        Property('auto')\n    ], RichTextEditor.prototype, \"height\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"value\", void 0);\n    __decorate([\n        Property(30)\n    ], RichTextEditor.prototype, \"undoRedoSteps\", void 0);\n    __decorate([\n        Property(300)\n    ], RichTextEditor.prototype, \"undoRedoTimer\", void 0);\n    __decorate([\n        Property('HTML')\n    ], RichTextEditor.prototype, \"editorMode\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"keyConfig\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"showCharCount\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enableTabKey\", void 0);\n    __decorate([\n        Property(-1)\n    ], RichTextEditor.prototype, \"maxLength\", void 0);\n    __decorate([\n        Complex({}, Format)\n    ], RichTextEditor.prototype, \"format\", void 0);\n    __decorate([\n        Complex({}, FontFamily)\n    ], RichTextEditor.prototype, \"fontFamily\", void 0);\n    __decorate([\n        Complex({}, FontSize)\n    ], RichTextEditor.prototype, \"fontSize\", void 0);\n    __decorate([\n        Complex({}, FontColor)\n    ], RichTextEditor.prototype, \"fontColor\", void 0);\n    __decorate([\n        Complex({}, BackgroundColor)\n    ], RichTextEditor.prototype, \"backgroundColor\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"valueTemplate\", void 0);\n    __decorate([\n        Property(10000)\n    ], RichTextEditor.prototype, \"saveInterval\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"blur\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"toolbarClick\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"focus\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"change\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"formatter\", void 0);\n    RichTextEditor = __decorate([\n        NotifyPropertyChanges\n    ], RichTextEditor);\n    return RichTextEditor;\n}(Component));\nexport { RichTextEditor };\n","import * as index from './index';\nindex.RichTextEditor.Inject(index.Toolbar, index.Link, index.Image, index.Count, index.QuickToolbar, index.HtmlEditor, index.MarkdownEditor, index.Table, index.PasteCleanup);\nexport * from './index';\n"],"names":["getLocale","self","localeItems","item","i","length","value","subCommand","localeObj","getConstant","locale","text","updateDropDownLocale","alignmentItems","forEach","alignmentLocale","imageDisplayItems","displayLocale","tableRowsItems","tableRowLocale","tableColumnsItems","tableColumnLocale","TableCellVerticalAlignItems","tableVerticalLocale","TableStyleItems","tableStyleLocale","getIndex","val","items","index","some","toLocaleLowerCase","hasClass","element","className","classList","contains","getDropDownValue","type","returnType","data","result","k","isNOU","iconCss","isIDevice","Browser","isDevice","isIos","getFormattedFontSize","pageYOffset","e","parentElement","isIFrame","window","getBoundingClientRect","top","clientY","pageY","getTooltipText","serviceLocator","i10n","getService","itemLocale","toolsLocale","setToolbarStatus","isPopToolbar","dropDown","dropDownModule","args","_i","keys_1","Object","keys","key","j","tbItems","itemStr","addClass","tbElements","classes.CLS_ACTIVE","removeClass","parent","toolbarSettings","formatDropDown","isDestroyed","formatItems","format","types","formatContent","default","content","width","dataBind","alignDropDown","model.alignmentItems","fontNameDropDown","fontNameItems","fontFamily","fontNameContent","name_1","title","fontSizeDropDown","fontSizeItems","fontSize","fontSizeContent","replace","getCollection","getTBarItemsIndex","toolbarItems","itemsIndex","push","updateUndoRedoStatus","baseToolbar","undoRedoStatus","trgItems","undoRedoItems","toolbarObj","selectAll","classes.CLS_TB_ITEM","keys_2","target","enableItems","dispatchEvent","evt","document","createEvent","initEvent","parseHtml","tempNode","createElement","innerHTML","DocumentFragment","createRange","createContextualFragment","getTextNodesUnder","docElement","node","nodes","firstChild","nextSibling","nodeType","concat","toObjectLowerCase","obj","convertedValue","getEditValue","rteObj","updateTextNode","enableHtmlEncode","decode","setProperties","childNodes","slice","call","childNode","Node","TEXT_NODE","parentNode","defaultTag","insertBefore","appendChild","setEditFrameFocus","editableElement","selector","nodeName","isNullOrUndefined","querySelector","contentWindow","focus","setAttributes","htmlAttributes","rte","isFrame","initial","contentModule","getDocument","_a","htmlAttr","add","enabled","setEnable","readonly","setReadOnly","setAttribute","placeholder","setPlaceHolder","indexOf","valueContainer","initialEnd","destroy","modelChanged","keyUp","keyDown","mouseDown","paste","rtlMode","checkUndo","CLS_QUICK_TB","CLS_DROPDOWN_POPUP","CLS_DROPDOWN_BTN","CLS_TB_ITEM","CLS_ACTIVE","RenderType","ToolbarType","templateItems","tools","alignments","id","icon","tooltip","command","justifyleft","justifycenter","justifyright","justifyfull","fontname","fontsize","fontcolor","backgroundcolor","bold","italic","underline","strikethrough","clearformat","clearall","cut","copy","unorderedlist","orderedlist","indent","outdent","undo","redo","superscript","subscript","createlink","openlink","editlink","removelink","image","createtable","removetable","align","caption","remove","openimagelink","editimagelink","removeimagelink","insertlink","display","alttext","dimension","fullscreen","maximize","minimize","lowercase","uppercase","print","formats","sourcecode","preview","viewside","insertcode","tableheader","tableremove","tablerows","tablecolumns","tablecellbackground","tablecellhorizontalalign","tablecellverticalalign","tableeditproperties","styles","imageAlignItems","cssClass","defaultLocale","justifyLeft","justifyCenter","justifyRight","justifyFull","fontName","fontColor","backgroundColor","clearFormat","clearAll","unorderedList","orderedList","createLink","openLink","editLink","removeLink","insertLink","altText","lowerCase","upperCase","insertCode","linkText","linkTooltipLabel","linkWebUrl","linkTitle","linkurl","linkOpenInNewWindow","linkHeader","dialogInsert","dialogCancel","dialogUpdate","imageHeader","imageLinkHeader","mdimageLink","imageUploadMessage","imageDeviceUploadMessage","imageAlternateText","alternateHeader","browse","imageUrl","imageCaption","imageSizeHeader","imageHeight","imageWidth","textPlaceholder","inserttablebtn","tabledialogHeader","tableWidth","cellpadding","cellspacing","columns","rows","tableRows","tableColumns","tableCellHorizontalAlign","tableCellVerticalAlign","createTable","removeTable","tableHeader","tableRemove","tableCellBackground","tableEditProperties","insertColumnLeft","insertColumnRight","deleteColumn","insertRowBefore","insertRowAfter","deleteRow","tableEditHeader","TableHeadingText","TableColText","imageInsertLinkHeader","editImageHeader","alignmentsDropDownLeft","alignmentsDropDownCenter","alignmentsDropDownRight","alignmentsDropDownJustify","imageDisplayDropDownInline","imageDisplayDropDownBreak","tableInsertRowDropDownBefore","tableInsertRowDropDownAfter","tableInsertRowDropDownDelete","tableInsertColumnDropDownLeft","tableInsertColumnDropDownRight","tableInsertColumnDropDownDelete","tableVerticalAlignDropDownTop","tableVerticalAlignDropDownMiddle","tableVerticalAlignDropDownBottom","tableStylesDropDownDashedBorder","tableStylesDropDownAlternateRows","pasteFormat","pasteFormatContent","plainText","cleanFormat","keepFormat","pasteDialogOk","pasteDialogCancel","insertcolumnleft","insertcolumnright","deletecolumn","aligntop","alignmiddle","alignbottom","insertrowbefore","insertrowafter","deleterow","ToolbarRenderer","this","wireEvent","prototype","on","events.destroy","unWireEvent","off","popupOverlay","EventHandler","onPopupOverlay","toolbarBeforeCreate","mode","enableCollision","toolbarCreated","notify","toolbarClicked","trigger","dropDownSelected","beforeDropDownItemRender","dropDownOpen","popupModal","dropDownClose","renderToolbar","setPanel","renderPanel","overflowMode","rteToolbarObj","Toolbar","beforeCreate","bind","created","clicked","enablePersistence","enableRtl","appendTo","renderDropDownButton","css","_this","inlineMode","enable","proxy","DropDownButton","select","beforeOpen","cancel","divNode","trim","textContent","close","open","beforeItemRender","tabIndex","getElementById","getID","closest","style","setIsModel","nextElementSibling","popupContainer","zIndex","position","parseInt","toString","paletteSelection","dropDownArgs","currentElement","ele","colorbox","borderBottomColor","filter","renderColorPickerDropDown","colorPicker","CLS_RTE_ELEMENTS","range","inlineEle","event","currentDropdown","colorpickerValue","formatter","editorManager","nodeSelection","getRange","startContainer","collapsed","inst","getInstance","ColorPicker","showButtons","onclick","toggle","setColorPickerContentWidth","focusEle","beforeClose","dropElement","lastElementChild","removeAttribute","onmousedown","popupInst","Popup","relateTo","body","X","Y","targetType","collision","offsetY","colorPickerContent","borderWidth","getComputedStyle","borderBottomWidth","formatUnit","children","offsetWidth","renderColorPicker","inline","modeSwitcher","beforeTileRender","change","colorPickerArgs","info","name","currentValue","rgba","hex","beforeModeSwitch","presetColors","colorCode","getPanel","toolbarPanel","panel","BaseToolbar","locator","renderFactory","addEventListener","itemConfigs","extend","events.rtlMode","setRtl","removeEventListener","getTemplateObject","container","tagName","template","outerHTML","tooltipText","getObject","toLowerCase","prefixIcon","getItems","tbItems_1","getToolbarOptions","render","toolbarRenderer","getRenderer","DropDownButtons","initializeInstance","beforeRender","dropdownContent","renderDropDowns","containerType","tbElement","model.templateItems","targetElement","undefined","classes.CLS_DROPDOWN_BTN","formatItem","defineProperties","enumerable","classes.CLS_DROPDOWN_POPUP","itemName","fontItem","getEditNode","imageAlignmentDropDown","imageDisplayDropDown","rowDropDown","columnDropDown","verticalAlignDropDown","tableStylesDropDown","getUpdateItems","dropDownItems","onPropertyChanged","model","newProp","_b","_c","fontItems","classes.CLS_QUICK_TB","removeProperty","_d","_e","_f","_g","getEditPanel","tableRowsDropDown","model.tableRowsItems","tableColumnsDropDown","model.tableColumnsItems","tableCellVerticalAlignDropDown","model.TableCellVerticalAlignItems","displayDropDown","model.imageDisplayItems","imageAlignDropDown","model.imageAlignItems","tableSettings","removeDropDownClasses","destroyDropDowns","onIframeMouseDown","events.modelChanged","ServiceLocator","services","register","RendererFactory","rendererMap","addRenderer","rName","getEnumValue","ToolbarAction","toolbarClick","dropDownSelect","renderSelection","controlParent","activeEle","process","originalEvent","isToolbar","isTransformChild","model.updateDropDownLocale","model.tools","contentRenderer","Content","editPanel","toolbarBindEvent","keyBoardModule","KeyboardEvents","getToolbarElement","keyAction","toolBarKeyDown","keyConfigs","keyConfig","eventName","action","createToolbarElement","enableFloating","tbWrapper","firstElementChild","getToolbarMode","tbMode","Expand","checkToolbarResponsive","addFixedTBarClass","wireEvents","checkIsTransformChild","transformElements","toggleFloatClass","topValue","scrollParent","isBody","isFloat","floatOffset","floatingToolbarOffset","tbHeight","getToolbarHeight","getExpandTBarPopHeight","scrollParentRelativeTop","trgHeight","offsetHeight","bodyStyle","parseFloat","marginTop","split","paddingTop","targetTop","scrollParentYOffset","isMSPointer","scrollTop","scrollParentRect","scrollParentTop","outOfRange","parent_1","innerHeight","bottom","setStyleAttribute","refreshToolbarOverflow","removeFixedTBarClass","showFixedTBar","hideFixedTBar","updateItem","targetItem","addTBarItem","prefixId","updateToolbarStatus","fullScreen","fullScreenModule","showFullScreen","hideScreen","hideFullScreen","getBaseToolbar","addItems","enableTBarItems","isEnable","undoRedoManager","getUndoStatus","removeTBarItems","getBaseToolbarObject","removeItems","popHeight","expandPopup","refreshOverflow","isToolbarDestroyed","destroyToolbar","unWireScrollElementsEvents","unWireEvents","detach","scrollHandler","mouseDownHandler","focusChangeHandler","dropDownBeforeOpenHandler","toolbarMouseDownHandler","trg","setContentHeight","toolbarActionModule","events.initialEnd","onRefresh","events.mouseDown","undoRedoRefresh","refreshToolbar","module","getModuleName","wireScrollElementsEvents","__extends","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","__decorate","decorators","desc","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","keyCode","backspace","tab","enter","shift","control","alt","pause","capslock","space","escape","pageup","pagedown","end","home","leftarrow","uparrow","rightarrow","downarrow","insert","delete","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","semicolon","plus","comma","minus","dot","forwardslash","graveaccent","openbracket","backslash","closebracket","singlequote","]","[","=","_super","options","keyPressHandler","isAltKey","altKey","isCtrlKey","ctrlKey","isShiftKey","shiftKey","curkeyCode","which","configCollection_1","rconfig","rKeyObj","KeyboardEvents_1","getKeyConfigData","unwireEvents","oldProp","config","configCache","keyData","Number","getKeyCode","keyVal","toUpperCase","charCodeAt","Property","Event","NotifyPropertyChanges","Base","ColorPickerInput","renderColorPickerInput","targetID","suffixID","fontNode","fontColorPicker","fontColorDropDown","backNode","backgroundColorPicker","backgroundColorDropDown","destroyColorPicker","innerEle","BaseQuickToolbar","isDOMElement","popupRenderer","dropDownButtons","colorPickerObj","appendPopupContent","toolbarElement","popupType","popupId","getUniqueID","stringItems","createToolbar","renderPopup","quickTBarObj","refresh","setPosition","x","y","imgWrapper","targetOffsetTop","offsetTop","parentOffsetTop","parentData","editTop","tBarElementHeight","editHeight","popWidth","left","offsetLeft","popupObj","right","checkCollision","viewPort","parentTop","contentTop","windowY","isCollide","popup","windowHeight","windowWidth","bodyRightSpace","showPopup","editPanelTop","editPanelHeight","bodyRight","marginRight","paddingRight","innerWidth","toolbarAvail","getToolbar","toolbarModule","expTBHeight","tBarHeight","iframeSettings","cntEle","disableToolbarItem","enableToolbarItem","append","show","showPopupData","hide","duration","maxWidth","hidePopup","viewSourcePanel","sourceCodeModule","getViewPanel","removeEleFromDOM","addQTBarItem","removeQTBarItem","updateStatus","PopupRenderer","popupOpen","popupPanel","QuickToolbar","formattedItems","getQTBarOptions","popType","renderType","createQTBar","qTBar","initializeQuickToolbars","quickToolbarModule","onSelection","selectionChangeHandler","onMouseDown","isBlur","isRTE","renderQuickToolbars","linkQTBar","imageQTBar","textQTBar","tableQTBar","quickToolbarSettings","link","LinkToolbar","TextToolbar","ImageToolbar","table","TableToolbar","renderInlineQuickToolbar","inlineQTBar","InlineToolbar","showInlineQTBar","hideInlineQTBar","hideQuickToolbars","deBounce","clearTimeout","deBouncer","setTimeout","mouseUpHandler","coordinates","touches","changedTouches","touchData","prevClientX","clientX","prevClientY","offsetX","pageX","closestAnchor","keyDownHandler","inlineQTBarMouseDownHandler","keyUpHandler","getInlineBaseToolbar","onSelectionChange","getSelection","isCollapsed","wireInlineQTBarEvents","events.keyDown","events.keyUp","unWireInlineQTBarEvents","toolbarUpdated","actionOnScroll","onKeyDown","Count","renderCount","appendCount","maxLength","charCountBackground","htmlLength","htmlText","editorMode","string","percentage","restrict","showCharCount","currentTarget","array","arrayKey","preventDefault","member","MarkdownSelection","getLineNumber","textarea","point","substr","getSelectedText","start","selectionStart","selectionEnd","substring","getAllParents","getSelectedLine","getLine","getSelectedParentPoints","lines","parents","selectedPoints","selectedLine","startLength","join","firstPoint","line","points","lastPoint","setSelection","setSelectionRange","save","restore","textArea","isStartWith","isStart","RegExp","replaceSpecialChar","test","isClear","regex","getRegex","syntax","getSelectedInlinePoints","MarkdownToolbarStatus","toolbarStatus","inlinecode","selection","onRefreshHandler","parentsLines","documentNode","isListsApplied","currentFormat","mdSelectionFormats","isAppliedCommand","isApply","listTags","formatTags","checkLine","selectionDirection","parentLines","firstPrevText","lastNextText","ExecCommandCallBack","commandCallBack","requestType","saveData","Formatter","rangeCount","getRangeAt","getAncestorNode","commonAncestorContainer","headingText","colText","itemCollection","observer","callBack","onSuccess","getUndoRedoStack","clipboardAction","CONSTANT.checkUndo","execCommand","enableUndo","onKeyHandler","events","isNotify","elements","autoResize","undoRedoStack","status","iRichTextEditor","steps","MDLists","markdownSelection","applyListsHandler","tabKey","enterKey","addedLength","isNotFirst","isNotFirstLine","getListRegex","currentAction","getAction","prevIndex","prevLine","tabSpaceLength","splitTab","splice","getTabSpace","tabs","currentLine","curTabSpace","prevTabSpace","ol","OL","UL","tabSpace","prefix","endLength","appliedLine","pattern","selectedText","configKey","MDFormats","applyFormats","isAppliedFormat","applyCodeBlock","clearRegex","removeLength","removeText","pre","cmd","startNo","lastIndexOf","endNo","repStartText","replaceAt","repEndText","lastLine","input","search","MDSelectionFormats","applyCommands","isBold","isItalic","isMatch","matchText","Italic","InlineCode","StrikeThrough","match","singleCharRegx","multiCharRegx","isFormat","splitText","cmdB","Bold","cmdI","toLocaleUpperCase","beforeText","afterText","startCmd","endCmd","isApplied","textReplace","repStart","repEnd","regx","regxB","repText","regxTemp","regTest","markdownFormatTags","h6","h5","h4","h3","h2","h1","blockquote","markdownSelectionTags","SubScript","SuperScript","UpperCase","LowerCase","markdownListsTags","htmlKeyConfig","toolbar-focus","insert-link","insert-image","insert-table","indents","outdents","html-source","full-screen","decrease-fontsize","increase-fontsize","justify-center","justify-full","justify-left","justify-right","clear-format","ordered-list","unordered-list","markdownKeyConfig","pasteCleanupGroupingTags","strong","emp","cite","listConversionFilters","first","middle","last","selfClosingTags","UndoRedoCommands","undoRedoSteps","undoRedoTimer","debounceListener","debounce","onAction","props","changEle","removedContent","MDLink","startOffset","endOffset","url","MDTable","textAreaInitial","insertTable","getTable","textNonEmpty","tableCell","insertLine","convertToLetters","dummyElement","parentText","lastLineSplit","syntaxArr","getFormatTag","updateValue","makeSelection","ensureFormatApply","checkValid","syntaxFormatKey","syntaxTag","Formats","syntaxListKey","List","formatSplitZero","ensureStartValid","firstLine","firstLineSplit","ensureEndValid","formatSplitLength","updateValueWithFormat","formatSplit","textApplyFormat","rowNumber","baseChar","letters","String","fromCharCode","emptyText","isCursorBased","isSelectionBased","ClearFormat","clear","replaceRegex","clearSelectionTags","selectionTags","num","expString","regExp","startExp","endExp","clearFormatTags","clearFormatLines","tags","str","len","MarkdownParser","initialize","Observer","listObj","formatObj","linkObj","tableObj","clearObj","editorKeyDown","editorKeyUp","exeValue","MarkdownFormatter","updateFormatter","editElement","doc","MarkdownRender","div","contentPanel","getText","ownerDocument","MarkdownEditor","saveSelection","instantiateRenderer","onToolbarClick","getSelectedHtml","onSelectionSave","onSelectionRestore","updateReadOnly","tableConstant","option","toolbarUpdate","IMAGE","TABLE","LINK","BLOCK_TAGS","IGNORE_BLOCK_TAGS","TABLE_BLOCK_TAGS","NodeSelection","startNodeName","endNodeName","saveInstance","cloneRange","rootNode","documentFromRange","getNodeArray","endContainer","html","get","setStart","collapse","defaultView","previousSibling","isChildNode","nodeCollection","getNode","startNode","endNode","getNodeCollection","getParentNodeCollection","getParentNodes","reverse","getSelectionNodeCollection","getSelectionNodes","getInsertNodeCollection","getInsertNodes","root","setRangePoint","isvalid","size","constant","selectRange","setRange","removeAllRanges","addRange","setSelectionText","startIndex","endIndex","setEnd","setSelectionContents","selectNode","setSelectionNode","selectNodeContents","getSelectedNodes","Clear","insertParentNode","newNode","surroundContents","setCursorPoint","markerClassName","startSelection","endSelection","DOMNode","currentDocument","contents","isBlockNode","ELEMENT_NODE","CONSTANT.BLOCK_TAGS","isLink","blockParentNode","rawAttributes","rawAttr","attributes","attr","orderRawAttr","sort","attrKey","attrValue","clearAttributes","openTagString","closeTagString","createTagString","relativeElement","isList","isElement","isEditable","getAttribute","replaceWith","parseHTMLFragment","temp","wrap","wrapper","insertAfter","referenceNode","wrapInner","unWrap","unWrapNode","removeChild","getSelectedNode","nodeFinds","existNodes","isEditorArea","getRangePoint","ranges","f","getPreviousNode","encode","innerText","saveMarker","startTextNode","endTextNode","marker","setMarker","existNode","textNodes","CONSTANT.IGNORE_BLOCK_TAGS","createTempNode","blockNodes","collectionNodes","ignoreTableTag","listNodes","querySelectorAll","CONSTANT.TABLE_BLOCK_TAGS","Lists","domNode","isNested","ignoreDefault","stopPropagation","revertList","revertClean","nestedList","cleanNode","prevSibling","noPreviousElement","firstNode","firstNodeOL","siblingListOL","siblingListLI","siblingListLIFirst","h","prepend","list-style-type","nestedElement","nestedElementLI","firstNodeLI","listsNodes","applyLists","isRevert","checkLists","openTag","closeTag","replaceHTML","collectionString","nodesTemp","liParents","contentNodes","findUnSelected","rightIndent","indentElements","childElements","z","childLI","count","viewNode","classAttr","class","nodeInnerHtml","emptyUl","emptyLi","getParentNode","formatsNodes","cleanFormats","replaceTag","ignoreAttr","InsertMethods","WrapBefore","textNode","isAfter","AppendBefore","Wrap","unwrap","child","NodeCutter","GetSpliceNode","SplitNode","clone","setStartBefore","setEndAfter","fragment","extractContents","spliceEmptyNode","GetCursorStart","indexes","GetCursorRange","cursorRange","TrimLineBreak","GetCursorNode","InsertHtml","Insert","insertNode","editNode","nodeCutter","closestParentNode","closestEle","preNode","sibNode","lasNode","previousNode","deleteContents","el","LinkCommand","CONSTANT.LINK","linkCommand","selectParent","anchor","attrs","href","anchorEle","arr","Alignments","JustifyLeft","JustifyCenter","JustifyRight","JustifyFull","applyAlignment","alignmentNodes","text-align","Indents","indentValue","applyIndents","indentsNodes","parentNodes","marginLeft","indentsValue","ImageCommand","CONSTANT.IMAGE","imageCommand","createImage","insertImageLink","openImageLink","editImageLink","removeImageLink","removeImage","insertAltTextImage","imageDimension","imageJustifyLeft","imageJustifyCenter","imageJustifyRight","imageInline","imageBreak","imgElement","height","minWidth","minHeight","maxHeight","imgEle","insertElement","TableCommand","CONSTANT.TABLE","insertRow","insertColumn","tableVerticalAlign","tblBody","tdWid","row","cell","removeEmptyNode","emptyLiChild","selectedCell","newRow","curRow","cloneNode","tabCell","tdElement","curCell","allRows","colIndex","colTemplate","deleteCell","cellIndex","parentTable","rowIndex","seletedTable","cellCount","createTHead","th","deleteTHead","verticalAlign","IsFormatted","getFormattedNode","getFormatParent","isFormattedNode","isUnderline","isStrikethrough","isSuperscript","isSubscript","isFontColor","isFontName","isFontSize","isBackgroundColor","inlineTags","fontWeight","fontStyle","textDecoration","color","backColor","SelectionCommands","applyFormat","domSelection","isFormatted","isCursor","isFontStyle","cursorNode","insertCursorNode","formatNode","insertFormat","removeFormat","applySelection","cursorNodes","cursorFormat","getInsertNode","splitNode","nodeIndex","lastNode","pop","nodeValue","GetFormatNode","getChildNode","SelectionBasedExec","validFormats","InsertHtmlExec","applyHtml","exactNodes","cloneSelectNodes","clearInlines","reSelection","cloneParentNodes","clearBlocks","selectionNodes","endIndexNode","spliceParent","removeParent","index1","index2","index3","parentIndex","elementIndex","NONVALID_TAGS","NONVALID_PARENT_TAGS","removeInlineParent","ClearFormatExec","applyClear","UndoRedoManager","MsWordPaste","olData","ulData","ignorableNodes","blockNode","listContents","wordCleanup","tempHTMLContent","clipboardData","getData","elm","cleanUp","listConverter","prevflagState","tempCleaner","level","stNode","collection","charAt","getListContent","listType","nestedLevel","makeConversion","elemColl","temp1","prevList","elem","pLevel","listCount","pElement","imgSpanElement","createTextNode","listStyle","getListStyle","lastChild","getNamedItem","tempElem","InsertTextExec","insertText","EditorManager","alignmentObj","indentsObj","imgObj","selectionObj","inserthtmlObj","insertTextObj","msWordPaste","onWordPaste","HTMLFormatter","statusCollection","ToolbarStatus","targetNode","formatCollection","JSON","parse","stringify","isOrderedList","isUnorderedList","isAlignment","isFormats","pos","textAlign","prop","getPropertyValue","HtmlToolbarStatus","ContentRender","rteContent","contenteditable","IframeContentRender","apply","iFrameContent","iframe","contentDocument","setThemeColor","write","inputElement","HtmlEditor","rangeCollection","nodeSelectionObj","colorPickerModule","events.paste","onPaste","enableTabKey","textCont","spaceLink","firstElement","httpRegex","wwwRegex","httpText","httpSplitText","splittedText","lastElement","resultElement","executeCommand","selectNodeEle","urlText","selectParentEle","closestElement","linkDialog","imageDialog","PasteCleanup","inlineNode","pasteClean","file","getAsFile","a","pasteCleanupSettings","prompt","pasteDialog","plainFormatting","formatting","radioRender","keepRadioButton","RadioButton","label","checked","keepFormatElement","cleanRadioButton","cleanFormatElement","plainTextRadioButton","plainTextElement","selectFormatting","dialog","Dialog","buttons","click","buttonModel","isPrimary","header","isModal","rteDialogWrapper","destroyDialog","rteDialogContainer","rteDialogWrapperChildLength","clean","clipBoardElem","deniedTags","deniedAttributes","deniedAttrs","allowedStyleProps","allowedStyle","detachInlineElements","getTextContent","isInlineElement","getTextNode","rootElement","brElement","divNextElement","tagGrouping","groupingTags","values","map","addTags","attributesfilter","userAttributes","allowedAttributeArray","deniedAttributeArray","allowedAttribute","deniedAttribute","removableElement","parentElem","removableAttrElement","styleElement","allowedStyleValue","allowedStyleValueArray","styleValue","Render","renderer","Link","rteID","rendererFactory","showLinkQuickToolbar","onToolbarAction","editAreaClickHandler","dialogObj","returnValue","quickToolObj","linkTop","linkPos","hideLinkQuickToolbar","showOnRightClick","getAnchorNode","isPopupOpen","eventArgs","inputDetails","selectText","linkWebAddress","linkDisplayText","linkTooltip","urlPlace","textPlace","linkDialogEle","linkContent","contentElem","linkTarget","linkUrl","linkOpenLabel","checkBoxObj","CheckBox","linkInsert","linkCancel","selectObj","selfLink","showCloseIcon","closeOnEscape","cancelDialog","animationSettings","effect","btnText","checkUrl","onDocumentClick","linkEle","isUrl","linkUpdate","Image","insertImage","showImageQuickToolbar","deleteImg","insertImgLink","insertAltText","imageSize","alignmentSelect","afterRender","imagePaste","touchEndEvent","imageClick","events.checkUndo","undoStack","insertImageSettings","resize","touchStartEvent","resizeStart","img","outline","resizeEnd","resizeBtnInit","cursor","getPointX","preventDefaultResize","imgResizeDiv","imageResize","getPointY","stopImmediatePropagation","resizeBtnStat","topLeft","topRight","botLeft","botRight","cancelResizeAction","imgResizePos","resizeImgDupPos","touchMoveEvent","resizing","calcPos","imgWid","imgHgt","borWid","devWid","ignoreOffset","parentOffset","offset","offsetParent","documentElement","setAspectRatio","expectedX","expectedY","resizeByPercent","pixToPerc","previousElementSibling","expected","parentEle","imgDupMouseMove","mouseX","mouseY","imgDupPos","openImgLink","editImgLink","removeImgLink","insertEle","captionEle","prev","remvoeResizEle","event_1","justifyImageLeft","justifyImageCenter","justifyImageRight","break","imageWithLinkQTBarItemUpdate","newItems","Math","round","hideImageQuickToolbar","imagDialog","linkWrap","inputLink","target_1","linkargs_1","selfImage","altWrap","altHeader","inputAlt","altArgs_1","insertAlt","captionClass","draggable","imgWrap","imgInner","imgCaption","imgSizeHeader","dialogContent","imgsizeInput","selectObj_1","insertSize","imgDialog","imgInsert","imglinkCancel","imgHeader","insertImageUrl","imageUrlPopup","imgUrl","placeUrl","inputUrl","spellcheck","uploadUrl","matchUrl","imgHeight","imgWidth","imgSizeWrap","getClientRects","widthNum","NumericTextBox","min","max","heightNum","dialogEle","path","imgUpload","linkHeaderText","uploadParentEle","deviceImgUpMsg","imgUpMsg","span","spanMsg","btnEle","autofocus","browserMsg","button","Button","btnClick","fileSelect","uploadEle","uploadObj","Uploader","asyncSettings","saveUrl","dropArea","multiple","allowedExtensions","allowedTypes","selected","filesData","reader_1","FileReader","URL","createObjectURL","readAsDataURL","rawFile","success","removing","getElementsByClassName","proxy_1","reader_2","dataurl","mime","bstr","atob","n","u8arr","Uint8Array","Blob","ViewSource","sourceCode","onInitialEnd","updateSourceCode","getSourceCode","keyboardModule","previewKeyDown","previewElement","wireBaseKeyDown","unWireBaseKeyDown","updateValueData","invokeChangeEvent","editHTML","Table","moveEle","l10n","renderDlgContent","docClick","dropdownSelect","cellSelect","setBGColor","resizeHelper","addRow","addColumn","removeRowColumn","tableStyles","insertTableDialog","removeResizeEle","closestTd","tabSelection","tableArrowNavigation","editTable","tdEle","insideList","prevElement","tHead","clsTble","cells","nextElement","selText","hideTableQuickToolbar","closestTable","range_1","tableCellSelect","col","list","dlgDiv","tblHeader","tableCellLeave","tableCellClick","tableInsert","editdlgObj","tdNode","curTable","helper","targetTouches","tableResizeEleCreation","colReEle","data-col","unselectable","cssText","rowReEle","data-row","tableReBox","column","columnEle","appendHelper","rowEle","tableBox","removeHelper","setHelperHeight","updateHelper","top_1","tableHeight","cellColl","actualwid","totalwid","selectCell","tabkey","delKey","insertbtn","tableDiv","drawTable","viewPortElement","refreshPosition","isExist","rowDiv","data-column","data-cell","createDialog","editContent","tableDlgContent","update","editHeader","applyProperties","dlgContent","tableCellDlgContent","customTable","tableColumn","tableRow","tableWrap","columnTextBox","floatLabelType","rowTextBox","tableDialog","argument","cellPadding","cellSpacing","widthVal","executeGroup","strikeThrough","formatBlock","heading","insertHTML","insertHorizontalRule","insertBrOnReturn","insertOrderedList","insertUnorderedList","insertParagraph","predefinedItems","Custom","ToolbarSettings","ChildProperty","ImageSettings","TableSettings","QuickToolbarSettings","PasteCleanupSettings","FontFamily","FontSize","Format","FontColor","BackgroundColor","Resources","IFrameSettings","Complex","InlineMode","FullScreen","scrollableParent","getScrollableParent","toggleParentOverflow","properties","isAdd","__assign","assign","t","s","RichTextEditor","isFocusOut","needsID","requiredModules","modules","updateEnable","eventInitializer","preRender","onBlurHandler","blurHandler","onFocusHandler","focusHandler","onResizeHandler","resizeHandler","clickPoints","initialValue","initializeServices","setContainer","role","originalElement","valueTemplate","setValue","invalidAttr","rteOuterWrapper","getPersistData","addOnPersist","focusIn","focusOut","blur","txt","commandName","tool","renderModule","RTERender","defaultValue","allowedKeys","triggerEditArea","touch","notifyMouseUp","mouseUp","ensureModuleInjected","getInjectedModules","onCopy","onCut","evenArgs","pasteCleanupModule","args_1","destroyDependentModules","timeInterval","clearInterval","placeHolderWrapper","removeHtmlAttributes","removeAttributes","hasAttribute","getContent","nVal","updatePanelValue","countModule","setWidth","setHeight","setCssClass","updateRTL","frameSetting","resources","files","scripts","removeSheets","setIframeSettings","wireContextEvent","unWireContextEvent","srcList","unbindEvents","bindEvents","printWind","printArgs","outerHeight","outerWidth","resizeTo","screen","availWidth","availHeight","printWindow","actionArgs","removeToolbarItem","L10n","styleSrc","scriptSrc","InjectSheet","scriptSheet","scriptEle","createScriptElement","src","styleEle","createStyleElement","rel","compiledString","compiledTemplate","compile","isExpand","heightValue","rteHeight","expandPopHeight","codeElement","getHtml","showSourceCode","preventImgResize","defaultResize","cloneValue","activeElement","isInteracted","saveInterval","setInterval","updateIntervalValue","getUpdatedValue","rteElement","relatedTarget","scrollParentElements","contextHandler","touchModule","EJ2Touch","tapHold","touchHandler","tapHoldThreshold","resetHandler","setAutoHeight","iframeElement_1","overflow","scrollHeight","formElement","Component","index.RichTextEditor","Inject","index.Toolbar","index.Link","index.Image","index.Count","index.QuickToolbar","index.HtmlEditor","index.MarkdownEditor","index.Table","index.PasteCleanup"],"mappings":"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"}